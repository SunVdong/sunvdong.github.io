[{"categories":null,"content":"æ¬¢è¿æ¥åˆ°æˆ‘çš„å‹æƒ…é“¾æ¥é¡µé¢ï¼ä»¥ä¸‹æ˜¯ä¸€äº›æˆ‘æ¨èçš„ç½‘ç«™å’Œåšå®¢ï¼Œå¦‚æœä½ ä¹Ÿæœ‰å…´è¶£äº¤æ¢å‹é“¾ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ï¼ ","date":"2025-03-03","objectID":"/links/:0:0","series":null,"tags":null,"title":"å‹æƒ…é“¾æ¥","uri":"/links/#"},{"categories":null,"content":" æˆ‘çš„ä¿¡æ¯ ç½‘ç«™åç§°: æˆ‘çš„çµæ„Ÿè®°å½• ç½‘ç«™åœ°å€: https://www.vdong.xyz ç½‘ç«™æè¿°: è¿™æ˜¯ä¸€ä¸ªå…³äºäº’è”ç½‘æŠ€æœ¯å’Œç”Ÿæ´»çš„çš„åšå®¢ï¼Œè®°å½•ç”Ÿæ´»ç‚¹æ»´ï¼Œåˆ†äº«æŠ€æœ¯æ„Ÿå—ã€‚ ","date":"2025-03-03","objectID":"/links/:1:0","series":null,"tags":null,"title":"å‹æƒ…é“¾æ¥","uri":"/links/#æˆ‘çš„ä¿¡æ¯"},{"categories":null,"content":" å‹æƒ…é“¾æ¥åˆ—è¡¨ å¸…ä¸œ ä¸€ä¸ªPHPå¤§ç‰›~ğŸ’¤ å¸…å¼º å˜´ç¡¬çš„äºº~ ","date":"2025-03-03","objectID":"/links/:2:0","series":null,"tags":null,"title":"å‹æƒ…é“¾æ¥","uri":"/links/#å‹æƒ…é“¾æ¥åˆ—è¡¨"},{"categories":null,"content":" ç”³è¯·å‹é“¾å¦‚æœä½ å¸Œæœ›ä¸æˆ‘äº¤æ¢å‹é“¾ï¼Œè¯·ç¡®ä¿ä½ çš„ç½‘ç«™ç¬¦åˆä»¥ä¸‹æ¡ä»¶ï¼š ç½‘ç«™å†…å®¹å¥åº·ã€åˆæ³•ï¼Œä¸”æ— æ¶æ„å¹¿å‘Šã€‚ ç½‘ç«™å†…å®¹ä¸æˆ‘çš„ç½‘ç«™ä¸»é¢˜ç›¸å…³æˆ–äº’è¡¥ã€‚ è¯·åœ¨ä½ çš„ç½‘ç«™ä¸Šä¹Ÿæ·»åŠ æˆ‘çš„å‹é“¾ã€‚ ç”³è¯·æ ¼å¼ï¼š ç½‘ç«™åç§°: ä½ çš„ç½‘ç«™åç§° ç½‘ç«™åœ°å€: ä½ çš„ç½‘ç«™åœ°å€ ç½‘ç«™æè¿°: ä½ çš„ç½‘ç«™æè¿° å¤´åƒ/Logo: ä½ çš„ç½‘ç«™Logoé“¾æ¥ è¯·å°†ä½ çš„ä¿¡æ¯å‘é€è‡³ï¼šsunvdong@qq.com æˆ–åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä¼šå°½å¿«å¤„ç†ï¼ æ„Ÿè°¢ä½ çš„æ”¯æŒä¸å…³æ³¨ï¼å¸Œæœ›æˆ‘ä»¬èƒ½å…±åŒè¿›æ­¥ï¼Œåˆ†äº«æ›´å¤šæœ‰ä»·å€¼çš„å†…å®¹ï¼ ","date":"2025-03-03","objectID":"/links/:3:0","series":null,"tags":null,"title":"å‹æƒ…é“¾æ¥","uri":"/links/#ç”³è¯·å‹é“¾"},{"categories":["æŠ€æœ¯"],"content":"nginx ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œè®°å½•äº†å¤§é‡ä¸å®¢æˆ·ç«¯äº¤äº’ã€ç³»ç»Ÿäº‹ä»¶å’Œæ½œåœ¨é”™è¯¯ç›¸å…³çš„æ•°æ®ã€‚ç„¶è€Œï¼Œåªæœ‰é€šè¿‡æ­£ç¡®çš„é…ç½®ã€ç®¡ç†å’Œåˆ†ææ‰èƒ½å……åˆ†å‘æŒ¥è¿™äº›æ•°æ®çš„æ½œåŠ›ã€‚ ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:0:0","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#"},{"categories":["æŠ€æœ¯"],"content":" æ‰¾åˆ°æ—¥å¿—ä¸å¤§å¤šæ•° Web æœåŠ¡å™¨ä¸€æ ·ï¼ŒNginx ä»”ç»†åœ°å°†å…¶æ´»åŠ¨è®°å½•åœ¨ä¸¤ä¸ªä¸åŒçš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼š /var/log/nginx/access.log ï¼šæ­¤æ–‡ä»¶è®°å½•æ¯ä¸ªä¼ å…¥è¯·æ±‚ï¼Œæ•è·å…³é”®è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯çš„ IP åœ°å€ã€è¯·æ±‚çš„æ—¶é—´æˆ³ã€è¯·æ±‚çš„èµ„æº (URI)ã€å“åº”çš„ HTTP çŠ¶æ€ä»£ç ä»¥åŠå®¢æˆ·ç«¯çš„ç”¨æˆ·ä»£ç†ï¼ˆæµè§ˆå™¨å’Œæ“ä½œï¼‰ç³»ç»Ÿï¼‰ã€‚ /var/log/nginx/error.log : è¯¥æ–‡ä»¶å……å½“è¯Šæ–­å·¥å…·ï¼Œè®°å½•è¯·æ±‚å¤„ç†å’Œå…¶ä»– Nginx æ“ä½œæœŸé—´é‡åˆ°çš„é”™è¯¯å’Œé—®é¢˜ã€‚å®ƒè®°å½•æ—¶é—´æˆ³ã€é”™è¯¯çº§åˆ«ã€é”™è¯¯æ¶ˆæ¯å’Œä»»ä½•ç›¸å…³ä¸Šä¸‹æ–‡ç­‰ä¿¡æ¯ï¼Œä»¥å¸®åŠ©è¿›è¡Œæ•…éšœæ’é™¤ã€‚ ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:1:0","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#æ‰¾åˆ°æ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":" å®šä½ä¸åŒç¯å¢ƒä¸‹çš„Nginxæ—¥å¿— Linux å‘è¡Œç‰ˆåœ¨å¤§å¤šæ•° Linux å‘è¡Œç‰ˆä¸­ï¼ŒNginx æ—¥å¿—æ–‡ä»¶é€šå¸¸ä½äº/var/log/nginx/ç›®å½•ä¸­ã€‚æ‚¨ä¼šå‘ç°å®ƒä»¬åˆ†åˆ«åä¸ºaccess.logå’Œerror.logã€‚ å¦‚æœæ‚¨åœ¨é»˜è®¤ä½ç½®æ‰¾ä¸åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œåˆ™éœ€è¦æ£€æŸ¥ç‰¹å®šçš„ Nginx é…ç½®ã€‚é¦–å…ˆç¡®å®š Nginx é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼ˆé€šå¸¸æ˜¯/etc/nginx/nginx.conf ï¼‰ï¼š shell nginx -t å¦‚æœé…ç½®æ–‡ä»¶æœ‰æ•ˆï¼Œæ­¤å‘½ä»¤åº”è¾“å‡ºé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼š shell ## output nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful æ‰“å¼€é…ç½®æ–‡ä»¶å¹¶æŸ¥æ‰¾error_logå’Œaccess_logæŒ‡ä»¤ä»¥æŸ¥æ˜å®ƒä»¬å„è‡ªçš„ä½ç½®ã€‚ /etc/nginx/nginx.conf shell error_log /var/log/nginx/error.log http { . . . access_log /var/log/nginx/access.log; . . . } é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginx å…¨å±€åº”ç”¨error_logæŒ‡ä»¤ï¼Œè€Œaccess_logé€šå¸¸æ”¾ç½®åœ¨httpå—ä¸­ã€‚ Dockerå®¹å™¨ç”±äº Docker å®¹å™¨æ˜¯çŸ­æš‚çš„ï¼Œå› æ­¤ç›´æ¥åœ¨å®¹å™¨ä¸­å­˜å‚¨æ—¥å¿—æ˜¯ä¸åˆ‡å®é™…çš„ã€‚å®˜æ–¹ Nginx Docker é•œåƒé€šè¿‡åˆ›å»ºä»/var/log/nginx/access.logå’Œ/var/log/nginx/error.logåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å‡º ( /dev/stdout ) å’Œæ ‡å‡†é”™è¯¯ ( /dev/stderrçš„ç¬¦å·é“¾æ¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜/dev/stderr ) åˆ†åˆ«æµã€‚è¿™ä½¿å¾—Docker çš„æ—¥å¿—è®°å½•æœºåˆ¶èƒ½å¤Ÿæ”¶é›†å’Œç®¡ç†æ—¥å¿—ã€‚ æ‚¨å¯ä»¥åœ¨ Dockerfile ä¸­æ‰¾åˆ°ç›¸å…³è¡Œï¼š mainline/debian/Dockerfile dockerfile . . . ln -sf /dev/stdout /var/log/nginx/access.log \\ \u0026\u0026 ln -sf /dev/stderr /var/log/nginx/error.log \\ nginx å®¹å™¨è¿è¡Œåï¼Œè®¿é—®ç›¸åº”çš„åœ°å€ä¼šç”Ÿæˆä¸€äº›æ—¥å¿—ï¼Œä½¿ç”¨ docker logs å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç›¸åº”çš„æ—¥å¿—ï¼Œå…¶ä¸­æ··åˆäº†è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—ã€‚ è¦ä»…æŸ¥çœ‹è®¿é—®æ—¥å¿—ï¼Œè¯·å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°/dev/null ï¼š shell docker logs -f nginx-server 2\u003e/dev/null åŒæ ·ï¼Œè¦ä»…æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼Œè¯·å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°/dev/null ï¼š shell docker logs -f nginx-server 1\u003e/dev/null ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:1:1","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#å®šä½ä¸åŒç¯å¢ƒä¸‹çš„nginxæ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":" å®šä½ä¸åŒç¯å¢ƒä¸‹çš„Nginxæ—¥å¿— Linux å‘è¡Œç‰ˆåœ¨å¤§å¤šæ•° Linux å‘è¡Œç‰ˆä¸­ï¼ŒNginx æ—¥å¿—æ–‡ä»¶é€šå¸¸ä½äº/var/log/nginx/ç›®å½•ä¸­ã€‚æ‚¨ä¼šå‘ç°å®ƒä»¬åˆ†åˆ«åä¸ºaccess.logå’Œerror.logã€‚ å¦‚æœæ‚¨åœ¨é»˜è®¤ä½ç½®æ‰¾ä¸åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œåˆ™éœ€è¦æ£€æŸ¥ç‰¹å®šçš„ Nginx é…ç½®ã€‚é¦–å…ˆç¡®å®š Nginx é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼ˆé€šå¸¸æ˜¯/etc/nginx/nginx.conf ï¼‰ï¼š shell nginx -t å¦‚æœé…ç½®æ–‡ä»¶æœ‰æ•ˆï¼Œæ­¤å‘½ä»¤åº”è¾“å‡ºé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼š shell ## output nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful æ‰“å¼€é…ç½®æ–‡ä»¶å¹¶æŸ¥æ‰¾error_logå’Œaccess_logæŒ‡ä»¤ä»¥æŸ¥æ˜å®ƒä»¬å„è‡ªçš„ä½ç½®ã€‚ /etc/nginx/nginx.conf shell error_log /var/log/nginx/error.log http { . . . access_log /var/log/nginx/access.log; . . . } é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginx å…¨å±€åº”ç”¨error_logæŒ‡ä»¤ï¼Œè€Œaccess_logé€šå¸¸æ”¾ç½®åœ¨httpå—ä¸­ã€‚ Dockerå®¹å™¨ç”±äº Docker å®¹å™¨æ˜¯çŸ­æš‚çš„ï¼Œå› æ­¤ç›´æ¥åœ¨å®¹å™¨ä¸­å­˜å‚¨æ—¥å¿—æ˜¯ä¸åˆ‡å®é™…çš„ã€‚å®˜æ–¹ Nginx Docker é•œåƒé€šè¿‡åˆ›å»ºä»/var/log/nginx/access.logå’Œ/var/log/nginx/error.logåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å‡º ( /dev/stdout ) å’Œæ ‡å‡†é”™è¯¯ ( /dev/stderrçš„ç¬¦å·é“¾æ¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜/dev/stderr ) åˆ†åˆ«æµã€‚è¿™ä½¿å¾—Docker çš„æ—¥å¿—è®°å½•æœºåˆ¶èƒ½å¤Ÿæ”¶é›†å’Œç®¡ç†æ—¥å¿—ã€‚ æ‚¨å¯ä»¥åœ¨ Dockerfile ä¸­æ‰¾åˆ°ç›¸å…³è¡Œï¼š mainline/debian/Dockerfile dockerfile . . . ln -sf /dev/stdout /var/log/nginx/access.log \\ \u0026\u0026 ln -sf /dev/stderr /var/log/nginx/error.log \\ nginx å®¹å™¨è¿è¡Œåï¼Œè®¿é—®ç›¸åº”çš„åœ°å€ä¼šç”Ÿæˆä¸€äº›æ—¥å¿—ï¼Œä½¿ç”¨ docker logs å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç›¸åº”çš„æ—¥å¿—ï¼Œå…¶ä¸­æ··åˆäº†è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—ã€‚ è¦ä»…æŸ¥çœ‹è®¿é—®æ—¥å¿—ï¼Œè¯·å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°/dev/null ï¼š shell docker logs -f nginx-server 2\u003e/dev/null åŒæ ·ï¼Œè¦ä»…æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼Œè¯·å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°/dev/null ï¼š shell docker logs -f nginx-server 1\u003e/dev/null ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:1:1","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#linux-å‘è¡Œç‰ˆ"},{"categories":["æŠ€æœ¯"],"content":" å®šä½ä¸åŒç¯å¢ƒä¸‹çš„Nginxæ—¥å¿— Linux å‘è¡Œç‰ˆåœ¨å¤§å¤šæ•° Linux å‘è¡Œç‰ˆä¸­ï¼ŒNginx æ—¥å¿—æ–‡ä»¶é€šå¸¸ä½äº/var/log/nginx/ç›®å½•ä¸­ã€‚æ‚¨ä¼šå‘ç°å®ƒä»¬åˆ†åˆ«åä¸ºaccess.logå’Œerror.logã€‚ å¦‚æœæ‚¨åœ¨é»˜è®¤ä½ç½®æ‰¾ä¸åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œåˆ™éœ€è¦æ£€æŸ¥ç‰¹å®šçš„ Nginx é…ç½®ã€‚é¦–å…ˆç¡®å®š Nginx é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼ˆé€šå¸¸æ˜¯/etc/nginx/nginx.conf ï¼‰ï¼š shell nginx -t å¦‚æœé…ç½®æ–‡ä»¶æœ‰æ•ˆï¼Œæ­¤å‘½ä»¤åº”è¾“å‡ºé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼š shell ## output nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful æ‰“å¼€é…ç½®æ–‡ä»¶å¹¶æŸ¥æ‰¾error_logå’Œaccess_logæŒ‡ä»¤ä»¥æŸ¥æ˜å®ƒä»¬å„è‡ªçš„ä½ç½®ã€‚ /etc/nginx/nginx.conf shell error_log /var/log/nginx/error.log http { . . . access_log /var/log/nginx/access.log; . . . } é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginx å…¨å±€åº”ç”¨error_logæŒ‡ä»¤ï¼Œè€Œaccess_logé€šå¸¸æ”¾ç½®åœ¨httpå—ä¸­ã€‚ Dockerå®¹å™¨ç”±äº Docker å®¹å™¨æ˜¯çŸ­æš‚çš„ï¼Œå› æ­¤ç›´æ¥åœ¨å®¹å™¨ä¸­å­˜å‚¨æ—¥å¿—æ˜¯ä¸åˆ‡å®é™…çš„ã€‚å®˜æ–¹ Nginx Docker é•œåƒé€šè¿‡åˆ›å»ºä»/var/log/nginx/access.logå’Œ/var/log/nginx/error.logåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å‡º ( /dev/stdout ) å’Œæ ‡å‡†é”™è¯¯ ( /dev/stderrçš„ç¬¦å·é“¾æ¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜/dev/stderr ) åˆ†åˆ«æµã€‚è¿™ä½¿å¾—Docker çš„æ—¥å¿—è®°å½•æœºåˆ¶èƒ½å¤Ÿæ”¶é›†å’Œç®¡ç†æ—¥å¿—ã€‚ æ‚¨å¯ä»¥åœ¨ Dockerfile ä¸­æ‰¾åˆ°ç›¸å…³è¡Œï¼š mainline/debian/Dockerfile dockerfile . . . ln -sf /dev/stdout /var/log/nginx/access.log \\ \u0026\u0026 ln -sf /dev/stderr /var/log/nginx/error.log \\ nginx å®¹å™¨è¿è¡Œåï¼Œè®¿é—®ç›¸åº”çš„åœ°å€ä¼šç”Ÿæˆä¸€äº›æ—¥å¿—ï¼Œä½¿ç”¨ docker logs å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç›¸åº”çš„æ—¥å¿—ï¼Œå…¶ä¸­æ··åˆäº†è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—ã€‚ è¦ä»…æŸ¥çœ‹è®¿é—®æ—¥å¿—ï¼Œè¯·å°†æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°/dev/null ï¼š shell docker logs -f nginx-server 2\u003e/dev/null åŒæ ·ï¼Œè¦ä»…æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼Œè¯·å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°/dev/null ï¼š shell docker logs -f nginx-server 1\u003e/dev/null ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:1:1","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#dockerå®¹å™¨"},{"categories":["æŠ€æœ¯"],"content":" é…ç½® Nginx è®¿é—®æ—¥å¿—é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginx è®¿é—®æ—¥å¿—ä»¥ combined æ ¼å¼ç”Ÿæˆï¼Œæ— ç‰¹æ®Šè¯´æ˜æ—¶ï¼Œè¯¥æ ¼å¼çš„å®šä¹‰ä¸ºï¼š nginx '$remote_addr - $remote_user [$time_local] ' '\"$request\" $status $body_bytes_sent ' '\"$http_referer\" \"$http_user_agent\" \"$http_x_forwarded_for\"'; æ­¤é…ç½®ä¼šç”Ÿæˆç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„è®¿é—®æ—¥å¿—æ¡ç›®ï¼š shell 172.17.0.1 - - [06/Aug/2024:16:37:59 +0000] \"GET / HTTP/1.1\" 200 615 \"-\" \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\" \"-\" 172.17.0.1 ï¼šæå‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯çš„IPåœ°å€ã€‚ -ï¼šå¦‚æœä½¿ç”¨èº«ä»½éªŒè¯ï¼Œåˆ™è¿™æ˜¯ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·åï¼›å¦åˆ™ï¼Œå®ƒæ˜¯è¿å­—ç¬¦ (-)ã€‚ [06/Aug/2024:16:37:59 +0000] ï¼šå¤„ç†è¯·æ±‚çš„æœ¬åœ°æ—¶é—´ã€‚ \"GET / HTTP/1.1\" ï¼šè¯·æ±‚æ–¹æ³•ã€è·¯å¾„å’ŒHTTPåè®®ç‰ˆæœ¬ã€‚ 200 ï¼šè¿”å›ç»™å®¢æˆ·ç«¯çš„HTTPçŠ¶æ€ç ã€‚ 615 ï¼šå“åº”æ­£æ–‡çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ \"-\" ï¼šå¼•ç”¨é¡µé¢çš„ URLï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ \"Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0\" : å®¢æˆ·ç«¯æä¾›çš„æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿä¿¡æ¯ã€‚ \"-\" ï¼šå¦‚æœè¯·æ±‚é€šè¿‡ä»£ç†ï¼Œè¯¥å˜é‡åŒ…å«åŸå§‹å®¢æˆ·ç«¯IPåœ°å€ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä¸» Nginx é…ç½®æ–‡ä»¶ ( /etc/nginx/nginx.conf ) ä¸­çš„ log_format æŒ‡ä»¤æˆ–/etc/nginx/sites-enabledä¸­ç‰¹å®šäºä¸»æœºçš„é…ç½®ä¸­çš„log_formatæŒ‡ä»¤æ¥å®šåˆ¶è®¿é—®æ—¥å¿—æ ¼å¼ã€‚ å¦‚æœ Nginx ç›´æ¥åœ¨æ‚¨çš„ä¸»æœºä¸Šè¿è¡Œï¼Œæ‚¨å¯ä»¥ç›¸åº”åœ°ç¼–è¾‘ç›¸å…³æ–‡ä»¶ã€‚å¯¹äº Docker å®ä¾‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»nginxæ˜ åƒä¸­æå– Nginx é…ç½®æ–‡ä»¶å¹¶å°†å…¶ä¿å­˜åˆ°ä¸»æœºä¸Šçš„nginx.confæ–‡ä»¶ä¸­ï¼š shell docker run --rm --entrypoint=cat nginx /etc/nginx/nginx.conf \u003e nginx.conf å‡†å¤‡å¥½å†æ¬¡å¯åŠ¨å®¹å™¨åï¼Œè¯·ç¡®ä¿å°†ä¿®æ”¹åçš„æ–‡ä»¶ä»ä¸»æœºæŒ‚è½½åˆ°å®¹å™¨å†…çš„/etc/nginx/nginx.conf shell docker run --name nginx-server -v ./nginx.conf:/etc/nginx/nginx.conf:ro -d nginx ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:2:0","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#é…ç½®-nginx-è®¿é—®æ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":" è‡ªå®šä¹‰è®¿é—®æ—¥å¿—æ ¼å¼å¯ä»¥ä½¿ç”¨ log_format æŒ‡ä»¤æ¥è‡ªå®šä¹‰è®¿é—®æ—¥å¿—çš„æ ¼å¼ï¼š nginx log_format \u003cname\u003e '\u003cformatting_variables\u003e'; ä½ éœ€è¦åšçš„æ˜¯è®¾ç½®ä¸€ä¸ªæ ¼å¼åï¼Œç„¶åä½¿ç”¨æä¾›çš„æ ¸å¿ƒå˜é‡å’Œæ—¥å¿—å˜é‡è®¾ç½®æ—¥å¿—çš„ç»“æ„ï¼Œä¸‹é¢æ˜¯å®ƒçš„ç¤ºä¾‹ï¼š nginx . . . http { . . . log_format custom '$remote_addr - $remote_user [$time_local] $status ' '\"$host\" \"$request\" $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; . . . } è¦åº”ç”¨æ­¤æ ¼å¼ï¼Œåªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ access_log æŒ‡ä»¤ï¼š nginx access_log /var/log/nginx/access.log custom; ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:2:1","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#è‡ªå®šä¹‰è®¿é—®æ—¥å¿—æ ¼å¼"},{"categories":["æŠ€æœ¯"],"content":" è®¾ç½®è®°å½•æ—¥å¿—çš„æ¡ä»¶å¤§æµé‡ä¸‹ï¼ŒNginx çš„è®¿é—®æ—¥å¿—å¯èƒ½å˜å¾—ç›¸å½“å¤§ï¼Œæ¡ä»¶æ—¥å¿—è®°å½•å…è®¸æ‚¨æ ¹æ®ç‰¹å®šæ¡ä»¶æœ‰é€‰æ‹©åœ°è¿‡æ»¤æ—¥å¿—æ¡ç›®ï¼Œä»¥å‡å°‘æ—¥å¿—é‡å¹¶æé«˜æ€§èƒ½ã€‚ è¯­æ³•å¦‚ä¸‹ï¼š shell access_log /path/to/access.log \u003clog_format\u003e if=\u003ccondition\u003e; \u003ccondition\u003eæ˜¯ Nginx å¯¹æ¯ä¸ªè¯·æ±‚è¿›è¡Œè®¡ç®—çš„å¸ƒå°”è¡¨è¾¾å¼ã€‚å¦‚æœè®¡ç®—ç»“æœä¸ºtrue ï¼Œåˆ™å†™å…¥æ—¥å¿—æ¡ç›®ï¼›å¦åˆ™ï¼Œå®ƒä¼šè¢«è·³è¿‡ã€‚ ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä»è®¿é—®æ—¥å¿—ä¸­æ’é™¤æˆåŠŸ (2xx) å’Œé‡å®šå‘ (3xx) çŠ¶æ€ä»£ç çš„æ—¥å¿—ï¼š nginx http { map $status $loggable { ~^[23] 0; # Match 2xx and 3xx status codes default 1; # Log everything else } access_log /var/log/nginx/access.log combined if=$loggable; } ä¸€äº›å®é™…åº”ç”¨ï¼š ä»…è®°å½•é”™è¯¯å“åº”ï¼ˆ4xx å’Œ 5xxï¼‰ä»¥è¿›è¡Œæ•…éšœæ’é™¤ã€‚ æ’é™¤å·²çŸ¥ä¸ºæœºå™¨äººçš„ç‰¹å®šç”¨æˆ·ä»£ç†æˆ– IP åœ°å€ã€‚ ä»…è®°å½•å¯¹åº”ç”¨ç¨‹åºç‰¹å®šéƒ¨åˆ†çš„è¯·æ±‚ã€‚ è®°å½•ä¸€å®šç™¾åˆ†æ¯”çš„è¯·æ±‚ä»¥é™ä½è®°å½•æˆæœ¬ï¼ŒåŒæ—¶ä»ç„¶æ•è·ä»£è¡¨æ€§æ ·æœ¬ï¼ˆè¯·å‚é˜…æ­¤å¤„äº†è§£ä¸€äº›é‡‡æ ·æŠ€æœ¯ï¼‰ã€‚ ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:2:2","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#è®¾ç½®è®°å½•æ—¥å¿—çš„æ¡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" ç¦ç”¨è®¿é—®æ—¥å¿—å¦‚æœæ‚¨å·²ç»é€šè¿‡ Web åº”ç”¨ç¨‹åºæ”¶é›†è¯·æ±‚æ—¥å¿—ï¼Œåˆ™å¯èƒ½éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„offå€¼æˆ–é‡å®šå‘åˆ°/dev/nullæ¥ç¦ç”¨ Nginx è®¿é—®æ—¥å¿—ã€‚ nginx access_log off; access_log /dev/null; ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:2:3","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#ç¦ç”¨è®¿é—®æ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":" æ„å»ºNginxè®¿é—®æ—¥å¿—åœ¨äº‘åŸç”Ÿåˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¾®æœåŠ¡é¢†åŸŸï¼Œç»“æ„åŒ–æ—¥å¿—è®°å½•å› å…¶ç›¸å¯¹äºä¼ ç»Ÿçº¯æ–‡æœ¬æ—¥å¿—çš„ä¼—å¤šä¼˜åŠ¿è€Œè·å¾—äº†å·¨å¤§çš„å…³æ³¨ã€‚ ä¾‹å¦‚ï¼Œ Caddy ï¼ˆNginx çš„æ›¿ä»£å“ï¼‰ä¼šç”Ÿæˆå¦‚ä¸‹æ‰€ç¤ºçš„è®¿é—®æ—¥å¿—ï¼š json { \"level\": \"info\", \"ts\": 1646861401.5241024, \"logger\": \"http.log.access\", \"message\": \"handled request\", \"request\": { \"remote_ip\": \"127.0.0.1\", \"remote_port\": \"41342\", \"client_ip\": \"127.0.0.1\", \"proto\": \"HTTP/2.0\", \"method\": \"GET\", \"host\": \"localhost\", \"uri\": \"/\", \"headers\": { \"User-Agent\": [\"curl/7.82.0\"], \"Accept\": [\"*/*\"], \"Accept-Encoding\": [\"gzip, deflate, br\"], }, \"tls\": { \"resumed\": false, \"version\": 772, \"cipher_suite\": 4865, \"proto\": \"h2\", \"server_name\": \"example.com\" } }, \"bytes_read\": 0, \"user_id\": \"\", \"duration\": 0.000929675, \"size\": 10900, \"status\": 200, \"resp_headers\": { \"Server\": [\"Caddy\"], \"Content-Encoding\": [\"gzip\"], \"Content-Type\": [\"text/html; charset=utf-8\"], \"Vary\": [\"Accept-Encoding\"] } } è®©æˆ‘ä»¬æ¢è®¨ä¸€ä¸‹å¦‚ä½•å°† Nginx è®¿é—®æ—¥å¿—å¸¦å…¥è¿™ä¸ªç°ä»£æ—¶ä»£ã€‚ è™½ç„¶ Nginx æœ¬èº«å¹¶ä¸ç”Ÿæˆ JSON æ—¥å¿—ï¼Œä½†æ‚¨å¯ä»¥ç”¨log_formatæŒ‡ä»¤ä¸escape=jsonå‚æ•°ï¼ˆç¡®ä¿æ­£ç¡®è½¬ä¹‰ JSON ä¸­æ— æ•ˆçš„å­—ç¬¦ï¼‰æ¥å®ç°æ­¤ç›®çš„ã€‚ nginx . . . http { . . . log_format custom_json escape=json '{' '\"level\":\"info\",' '\"ts\": \"$time_iso8601\",' '\"message\": \"handled request $request_method $request_uri\",' '\"request\": {' '\"id\": \"$http_x_request_id\",' '\"remote_ip\": \"$remote_addr\",' '\"remote_port\": \"$remote_port\",' '\"protocol\": \"$server_protocol\",' '\"method\": \"$request_method\",' '\"host\": \"$host\",' '\"uri\": \"$request_uri\",' '\"headers\": {' '\"user-agent\": \"$http_user_agent\",' '\"accept\": \"$http_accept\",' '\"accept-encoding\": \"$http_accept_encoding\",' '\"traceparent\": \"$http_traceparent\",' '\"tracestate\": \"$http_tracestate\"' '}' '},' '\"bytes_read\": $request_length,' '\"duration_msecs\": $request_time,' '\"size\": $bytes_sent,' '\"status\": $status,' '\"resp_headers\": {' '\"content_length\": \"$sent_http_content_length\",' '\"content_type\": \"$sent_http_content_type\"' '}' '}'; access_log /var/log/nginx/access.log custom_json; . . . } åœ¨æ­¤é…ç½®ä¸­ï¼š æˆ‘ä»¬å®šä¹‰äº†ä¸€ç§åä¸ºcustom_jsonçš„æ–°æ—¥å¿—æ ¼å¼ï¼Œå¹¶ä½¿ç”¨escape=jsonå¯ç”¨ JSON è½¬ä¹‰ åœ¨ JSON ç»“æ„ä¸­ï¼Œæˆ‘ä»¬æ•è·å„ç§ä¿¡æ¯ï¼š åŸºæœ¬ä¿¡æ¯ï¼šä¾‹å¦‚æ—¥å¿—çº§åˆ«ã€æ—¶é—´æˆ³ (ts) å’Œæ¶ˆæ¯ã€‚ è¯·æ±‚ä¿¡æ¯ï¼šåµŒå¥—åœ¨è¯·æ±‚å¯¹è±¡ä¸‹çš„è¯¦ç»†è¯·æ±‚ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½¿ç”¨$http_\u003cheader_name\u003eçš„æ ‡å¤´ã€‚ æŒ‡æ ‡ä¿¡æ¯ï¼šè¯»å–å­—èŠ‚æ•°ã€å“åº”æ—¶é—´å’Œå“åº”å¤§å°ç­‰æŒ‡æ ‡ã€‚ å“åº”ä¿¡æ¯ï¼šå¦‚çŠ¶æ€ã€ç‰¹å®šå“åº”æ ‡å¤´åƒ$sent_http_\u003cheader_name\u003e æœ€åï¼Œå°†custom_jsonæ ¼å¼åº”ç”¨äºè®¿é—®æ—¥å¿—ã€‚ ä¿å­˜é…ç½®å¹¶é‡æ–°å¯åŠ¨ Nginx åï¼Œä½¿ç”¨ä¸€äº›è™šæ„çš„åˆ†å¸ƒå¼è·Ÿè¸ªæ ‡å¤´å‘å‡ºè¯·æ±‚ï¼š shell curl -v -H \"traceparent: 00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01\" \\ -H \"tracestate: rojo=00f067aa0ba902b7\" \\ -H \"X-Request-Id: f45a82a7-7066-40d4-981d-145952c290f8\" \\ http://localhost æ‚¨å°†è§‚å¯Ÿåˆ°å¹²å‡€çš„ JSON æ ¼å¼çš„æ–°è®¿é—®æ—¥å¿—æ¡ç›®ï¼š json { \"level\": \"info\", \"ts\": \"2024-08-07T11:57:31+00:00\", \"message\": \"handled request GET /\", \"request\": { \"id\": \"f45a82a7-7066-40d4-981d-145952c290f8\", \"remote_ip\": \"172.17.0.1\", \"remote_port\": \"39638\", \"protocol\": \"HTTP/1.1\", \"method\": \"GET\", \"host\": \"localhost\", \"uri\": \"/\", \"headers\": { \"user-agent\": \"curl/8.6.0\", \"accept\": \"*/*\", \"accept-encoding\": \"\", \"traceparent\": \"00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01\", \"tracestate\": \"rojo=00f067aa0ba902b7\" } }, \"bytes_read\": 229, \"duration_msecs\": 0.000, \"size\": 853, \"status\": 200, \"resp_headers\": { \"content_length\": \"615\", \"content_type\": \"text/html\" } } ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:3:0","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#æ„å»ºnginxè®¿é—®æ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®Nginxé”™è¯¯æ—¥å¿—Nginx é”™è¯¯æ—¥å¿—æ˜¯è¯Šæ–­å’Œè§£å†³ Web æœåŠ¡å™¨é—®é¢˜çš„é‡è¦å·¥å…·ã€‚å®ƒæ•è·å„ç§ Nginx æ“ä½œæœŸé—´å‘ç”Ÿçš„é”™è¯¯ã€è­¦å‘Šå’Œå…¶ä»–é‡è¦äº‹ä»¶ã€‚è®©æˆ‘ä»¬æ¢è®¨å¦‚ä½•é…ç½®å’Œç®¡ç†è¿™ä¸ªå®è´µçš„èµ„æºã€‚ error_logæŒ‡ä»¤æ§åˆ¶ Nginx çš„é”™è¯¯æ—¥å¿—è®°å½•è¡Œä¸ºã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„å’Œæ—¥å¿—çš„æœ€ä½ä¸¥é‡çº§åˆ«ã€‚ shell error_log /var/log/nginx/error.log \u003cseverity_level\u003e; ä¸¥é‡çº§åˆ«æŒ‰ç…§ä»ä½åˆ°é«˜åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š debug ï¼šé«˜åº¦è¯¦ç»†çš„æ¶ˆæ¯ï¼Œä¸»è¦ç”¨äºæ•…éšœæ’é™¤å’Œå¼€å‘ã€‚ info ï¼šæœ‰å…³æœåŠ¡å™¨æ“ä½œçš„ä¸€èˆ¬ä¿¡æ¯æ¶ˆæ¯ã€‚ notice ï¼šå€¼å¾—æ³¨æ„çš„äº‹ä»¶ï¼Œä½†ä¸ä¸€å®šæ˜¯é”™è¯¯ã€‚ warn ï¼šå¯èƒ½è¡¨æ˜æ½œåœ¨é—®é¢˜çš„æ„å¤–äº‹ä»¶ã€‚ error ï¼šå¤„ç†è¿‡ç¨‹ä¸­é‡åˆ°çš„å®é™…é”™è¯¯ã€‚ crit ï¼šéœ€è¦æ³¨æ„çš„å…³é”®æƒ…å†µã€‚ alert ï¼šéœ€è¦ç«‹å³é‡‡å–æªæ–½çš„é”™è¯¯ã€‚ emerg ï¼šå¯¼è‡´ç³»ç»Ÿæ— æ³•ä½¿ç”¨çš„ä¸¥é‡é”™è¯¯ã€‚ å¦‚æœæ‚¨æ²¡æœ‰åœ¨ Nginx é…ç½®ä¸­æ˜¾å¼é…ç½®é”™è¯¯ä¸¥é‡æ€§çº§åˆ«ï¼Œæ‚¨å°†çœ‹åˆ°errorçº§åˆ«åŠå…¶ä¹‹ä¸Šçš„æ‰€æœ‰çº§åˆ«ï¼ˆ crit ã€ alertå’Œemerg ï¼‰çš„æ¶ˆæ¯ã€‚ç„¶è€Œï¼Œå®˜æ–¹ Nginx docker é•œåƒçš„é»˜è®¤çº§åˆ«è®¾ç½®ä¸ºnotice ã€‚ ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:4:0","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#é…ç½®nginxé”™è¯¯æ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":" Nginx é”™è¯¯æ—¥å¿—æ ¼å¼ Nginx é”™è¯¯æ—¥å¿—éµå¾ªä¸ºäººç±»å¯è¯»æ€§å’Œæ˜“äºå·¥å…·è§£æè€Œè®¾è®¡çš„æ ¼å¼ã€‚ä¸€èˆ¬æ ¼å¼ä¸ºï¼š nginx YYYY/MM/DD HH:MM:SS [\u003cseverity_level\u003e] \u003cpid\u003e#\u003ctid\u003e: *\u003ccid\u003e \u003cmessage\u003e è¿™é‡Œï¼š \u003cpid\u003e ï¼šè¿›ç¨‹ ID \u003ctid\u003e : çº¿ç¨‹ ID \u003ccid\u003e ï¼šè¿æ¥ ID ç¤ºä¾‹ï¼š nginx 2024/08/07 17:41:58 [error] 29#29: *1 open() \"/usr/share/nginx/html/make\" failed (2: No such file or directory), client: 172.17.0.1, server: localhost, request: \"GET /make HTTP/1.1\", host: \"localhost\" ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:4:1","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#nginx-é”™è¯¯æ—¥å¿—æ ¼å¼"},{"categories":["æŠ€æœ¯"],"content":" å°†é”™è¯¯è®°å½•åˆ°å¤šä¸ªæ–‡ä»¶ä¸è®¿é—®æ—¥å¿—ç±»ä¼¼ï¼Œæ‚¨å¯ä»¥é…ç½® Nginx å°†é”™è¯¯è®°å½•åˆ°å¤šä¸ªæ–‡ä»¶ï¼Œå³ä½¿å…·æœ‰ä¸åŒçš„ä¸¥é‡çº§åˆ«ï¼š shell error_log /var/log/nginx/error.log info; error_log /var/log/nginx/emerg_error.log emerg; åœ¨æ­¤è®¾ç½®ä¸­ï¼Œé™¤è°ƒè¯•çº§åˆ«æ¶ˆæ¯ä¹‹å¤–çš„æ‰€æœ‰äº‹ä»¶éƒ½å°†è®°å½•åˆ°error.logä¸­ï¼Œè€Œç´§æ€¥äº‹ä»¶å°†è®°å½•åˆ°åä¸ºemerg_error.logçš„å•ç‹¬æ–‡ä»¶ä¸­ã€‚ ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:4:2","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#å°†é”™è¯¯è®°å½•åˆ°å¤šä¸ªæ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" ç¦ç”¨é”™è¯¯æ—¥å¿—å¦‚æœæ‚¨éœ€è¦å®Œå…¨ç¦ç”¨ Nginx é”™è¯¯æ—¥å¿—ï¼ˆå°½ç®¡é€šå¸¸ä¸æ¨èï¼‰ï¼Œæ‚¨å¯ä»¥å°†å…¶é‡å®šå‘åˆ°/dev/null ã€‚åœ¨æ’°å†™æœ¬æ–‡æ—¶ä¼¼ä¹æ²¡æœ‰ç‰¹æ®Šçš„offå€¼ã€‚ shell error_log /dev/null; ","date":"2024-11-12","objectID":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/:4:3","series":null,"tags":["nginx"],"title":"Nginxæ—¥å¿—æŒ‡å—","uri":"/posts/nginx%E6%97%A5%E5%BF%97%E6%8C%87%E5%8D%97/#ç¦ç”¨é”™è¯¯æ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":"ä¿ç•™æäº¤è®°å½•å’Œtagçš„gitä»“åº“è¿ç§»","date":"2024-07-16","objectID":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/","series":null,"tags":["git"],"title":"ä¿ç•™æäº¤è®°å½•å’Œtagçš„gitä»“åº“è¿ç§»","uri":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/"},{"categories":["æŠ€æœ¯"],"content":" é—®é¢˜åœºæ™¯1å°† Git ä»“åº“ä»ä¸€ä¸ªæœåŠ¡å™¨è¿ç§»åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶ä¿ç•™æ‰€æœ‰çš„åˆ†æ”¯å’Œæäº¤è®°å½•ã€‚ä¾‹å¦‚ï¼šæˆ‘æœ‰ä¸€ä¸ªgitä»“åº“ï¼ˆ1.1.1.5:8888/a.gitï¼‰ï¼Œæœ‰å¤šä¸ªåˆ†æ”¯ä¸”åšäº†å¤šæ¬¡æäº¤äº†ï¼Œç°åœ¨éœ€è¦é€šè¿‡uç›˜è¿ç§»è‡³å¦ä¸€ä¸ªä»“åº“(2.2.2..5:8888/b.git)ï¼Œæˆ‘åº”è¯¥æ€ä¹ˆæ“ä½œå‘¢ã€‚ ","date":"2024-07-16","objectID":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/:1:0","series":null,"tags":["git"],"title":"ä¿ç•™æäº¤è®°å½•å’Œtagçš„gitä»“åº“è¿ç§»","uri":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/#é—®é¢˜åœºæ™¯1"},{"categories":["æŠ€æœ¯"],"content":" æ“ä½œæ­¥éª¤ å…‹éš†æºä»“åº“åˆ°æœ¬åœ° git git clone --mirror http://1.1.1.5:8888/a.git ä½¿ç”¨ --mirror å‚æ•°ä¼šç¡®ä¿ä½ å…‹éš†çš„æ˜¯é•œåƒä»“åº“ï¼ŒåŒ…æ‹¬æ‰€æœ‰çš„åˆ†æ”¯ã€æ ‡ç­¾å’Œæäº¤è®°å½•ã€‚ å°†ä»“åº“å¤åˆ¶åˆ°ç›®æ ‡æœåŠ¡å™¨ åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šåˆå§‹åŒ–æ–°çš„ä»“åº“ git cd a.git git remote set-url origin http://2.2.2.5:8888/b.git git push --mirror git remote set-url origin å‘½ä»¤å°†è¿œç¨‹ä»“åº“çš„åœ°å€æ›´æ”¹ä¸ºæ–°çš„åœ°å€ã€‚git push --mirror å‘½ä»¤ä¼šå°†æ‰€æœ‰çš„åˆ†æ”¯ã€æ ‡ç­¾å’Œæäº¤è®°å½•æ¨é€åˆ°æ–°çš„è¿œç¨‹ä»“åº“ã€‚ ","date":"2024-07-16","objectID":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/:2:0","series":null,"tags":["git"],"title":"ä¿ç•™æäº¤è®°å½•å’Œtagçš„gitä»“åº“è¿ç§»","uri":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/#æ“ä½œæ­¥éª¤"},{"categories":["æŠ€æœ¯"],"content":" é—®é¢˜åœºæ™¯2ä¸€ä¸ªé¡¹ç›®ä¸­æœ‰å¤šä¸ª git ä»“åº“ï¼Œæˆ‘å¸Œæœ›åˆå¹¶åˆ°ä¸€èµ·ï¼Œä¸€ä¸ª git ä»“åº“ä¸€ä¸ªç›®å½•ï¼Œ åŒæ—¶æˆ‘å¸Œæœ›ä¿ç•™æäº¤è®°å½•å’Œtags ç­‰ã€‚ ","date":"2024-07-16","objectID":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/:3:0","series":null,"tags":["git"],"title":"ä¿ç•™æäº¤è®°å½•å’Œtagçš„gitä»“åº“è¿ç§»","uri":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/#é—®é¢˜åœºæ™¯2"},{"categories":["æŠ€æœ¯"],"content":" æ“ä½œæ­¥éª¤ åœ¨æºæœºå™¨ä¸Š git git clone --bare https://example.com/repo1.git repo1.git git clone --bare https://example.com/repo2.git repo2.git cp -r repo1.git /path/to/usb-drive/ cp -r repo2.git /path/to/usb-drive/ åœ¨ç›®æ ‡æœºå™¨ä¸Š git cp -r /path/to/usb-drive/repo1.git /path/to/temp-directory/ cp -r /path/to/usb-drive/repo2.git /path/to/temp-directory/ mkdir combined-repo cd combined-repo git init git remote add -f repo1 /path/to/temp-directory/repo1.git git fetch repo1 git remote add -f repo2 /path/to/temp-directory/repo2.git git fetch repo2 git checkout -b repo1-master repo1/master git checkout master git merge --allow-unrelated-histories repo1-master mkdir repo1 git mv * repo1/ git commit -m \"Move repo1 content to repo1 directory\" git checkout -b repo2-master repo2/master git checkout master git merge --allow-unrelated-histories repo2-master mkdir repo2 git mv * repo2/ git commit -m \"Move repo2 content to repo2 directory\" è¿™æ ·ï¼Œä½ å°±å¯ä»¥é€šè¿‡Uç›˜å°†å¤šä¸ªä»“åº“åˆå¹¶åˆ°ä¸€ä¸ªç›®æ ‡ä»“åº“ä¸­ï¼Œå¹¶ä¿ç•™æ‰€æœ‰çš„æäº¤è®°å½•å’Œæ ‡ç­¾ã€‚ ","date":"2024-07-16","objectID":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/:4:0","series":null,"tags":["git"],"title":"ä¿ç•™æäº¤è®°å½•å’Œtagçš„gitä»“åº“è¿ç§»","uri":"/posts/%E4%BF%9D%E7%95%99%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95%E5%92%8Ctag%E7%9A%84git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB/#æ“ä½œæ­¥éª¤-1"},{"categories":["æŠ€æœ¯"],"content":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","date":"2024-07-05","objectID":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/","series":null,"tags":["unix","æ–‡ä»¶"],"title":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","uri":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/"},{"categories":["æŠ€æœ¯"],"content":"åœ¨æ“ä½œ UNIXå’ŒLinuxç³»ç»Ÿæ—¶ï¼Œå¶å°”ç”±äºè¯¯æ“ä½œç­‰ä¼šå‡ºç°ä¸€äº›æ— æ³•æ‰“å‡ºæ–‡ä»¶åï¼ˆä¾‹å¦‚æ–‡ä»¶ååŒ…å«éæ³•å­—ç¬¦ï¼‰çš„æ–‡ä»¶ï¼Œç”±äºæ— æ³•æ‰“å‡ºåå­—ï¼Œæ‰€ä»¥ä¸å®¹æ˜“ä½¿ç”¨ rm å‘½ä»¤å°†å…¶åˆ é™¤ã€‚ ","date":"2024-07-05","objectID":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/:0:0","series":null,"tags":["unix","æ–‡ä»¶"],"title":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","uri":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/#"},{"categories":["æŠ€æœ¯"],"content":" è§£å†³æ–¹æ¡ˆè¿™æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç å°†å…¶åˆ é™¤ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹: æ‰¾åˆ°æ–‡ä»¶çš„inodeå·ç  ä½¿ç”¨ ls -i å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶çš„inodeå·ç ã€‚ä¾‹å¦‚ï¼š sh ls -i è¾“å‡ºç»“æœä¼šæ˜¾ç¤ºæ–‡ä»¶çš„inodeå·ç ï¼Œä¾‹å¦‚ï¼š sh 1234567 æ–‡ä»¶å ä½¿ç”¨inodeå·ç åˆ é™¤æ–‡ä»¶ ä½¿ç”¨ find å‘½ä»¤å’Œinodeå·ç åˆ é™¤æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š sh find . -inum 1234567 -delete ","date":"2024-07-05","objectID":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/:1:0","series":null,"tags":["unix","æ–‡ä»¶"],"title":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","uri":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/#è§£å†³æ–¹æ¡ˆ"},{"categories":["æŠ€æœ¯"],"content":" åŸç†åœ¨UNIXå’ŒLinuxæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œinodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨äºå­˜å‚¨æ–‡ä»¶çš„å…ƒæ•°æ®ã€‚æ¯ä¸ªæ–‡ä»¶å’Œç›®å½•åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„inodeã€‚ å½“ unix åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œunix åšäº†ä¸¤ä»¶äº‹ã€‚ Unix åœ¨å­˜å‚¨è®¾å¤‡ä¸Šä¿ç•™ä¸€å—ç©ºé—´ç”¨æ¥å­˜å‚¨æ•°æ®ã€‚ Unix åˆ›å»ºä¸€ä¸ª**ç´¢å¼•èŠ‚ç‚¹ï¼ˆindex nodeï¼‰**æˆ– **i èŠ‚ç‚¹ï¼ˆi-nodeï¼‰**çš„ç»“æ„ã€‚ç”¨æ¥å­˜æ”¾æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼ˆåŒ…æ‹¬æ­¥éª¤1ä¸­æŒ‡å‘å­˜å‚¨æ•°æ®ç©ºé—´çš„æŒ‡é’ˆï¼‰ã€‚ ","date":"2024-07-05","objectID":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/:2:0","series":null,"tags":["unix","æ–‡ä»¶"],"title":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","uri":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/#åŸç†"},{"categories":["æŠ€æœ¯"],"content":" inodeçš„ç»„æˆéƒ¨åˆ†å…·ä½“æ¥è®²ï¼ŒinodeåŒ…å«äº†æ–‡ä»¶çš„ä»¥ä¸‹ä¿¡æ¯ï¼š æ–‡ä»¶ç±»å‹ï¼šå¦‚æ™®é€šæ–‡ä»¶ã€ç›®å½•ã€ç¬¦å·é“¾æ¥ç­‰ã€‚ æ–‡ä»¶æƒé™ï¼šåŒ…æ‹¬è¯»ã€å†™ã€æ‰§è¡Œæƒé™ã€‚ æ–‡ä»¶æ‰€æœ‰è€…ï¼ˆç”¨æˆ·IDï¼‰ã€‚ æ–‡ä»¶æ‰€å±ç»„ï¼ˆç»„IDï¼‰ã€‚ æ–‡ä»¶å¤§å°ã€‚ æ–‡ä»¶çš„æ—¶é—´æˆ³ï¼š åˆ›å»ºæ—¶é—´ï¼ˆctimeï¼‰ æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ï¼ˆmtimeï¼‰ æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´ï¼ˆatimeï¼‰ é“¾æ¥è®¡æ•°ï¼šç¡¬é“¾æ¥åˆ°è¯¥æ–‡ä»¶çš„æ•°é‡ã€‚ æŒ‡å‘æ•°æ®å—çš„æŒ‡é’ˆï¼šå­˜å‚¨æ–‡ä»¶å†…å®¹çš„æ•°æ®å—çš„åœ°å€ã€‚ ","date":"2024-07-05","objectID":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/:2:1","series":null,"tags":["unix","æ–‡ä»¶"],"title":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","uri":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/#inodeçš„ç»„æˆéƒ¨åˆ†"},{"categories":["æŠ€æœ¯"],"content":" inodeä¸åŒ…å«çš„ä¿¡æ¯ï¼šinodeä¸åŒ…å«æ–‡ä»¶åä¿¡æ¯ã€‚æ–‡ä»¶åä¸inodeå·ç ä¹‹é—´çš„æ˜ å°„ç”±ç›®å½•é¡¹ï¼ˆdirectory entryï¼‰æ¥ç»´æŠ¤ã€‚æ¯ä¸ªç›®å½•é¡¹å°†ä¸€ä¸ªæ–‡ä»¶åæ˜ å°„åˆ°ä¸€ä¸ªinodeå·ç ã€‚ ","date":"2024-07-05","objectID":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/:2:2","series":null,"tags":["unix","æ–‡ä»¶"],"title":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","uri":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/#inodeä¸åŒ…å«çš„ä¿¡æ¯"},{"categories":["æŠ€æœ¯"],"content":" inodeçš„ä½œç”¨ æ–‡ä»¶ç³»ç»Ÿç»“æ„ï¼šinodeæä¾›äº†ä¸€ç§é«˜æ•ˆçš„æ–¹å¼æ¥ç®¡ç†æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å’Œç›®å½•ã€‚é€šè¿‡inodeï¼Œæ–‡ä»¶ç³»ç»Ÿå¯ä»¥å¿«é€Ÿåœ°æ‰¾åˆ°æ–‡ä»¶çš„å…ƒæ•°æ®å’Œå®é™…å†…å®¹ã€‚ æƒé™å’Œæ‰€æœ‰æƒç®¡ç†ï¼šinodeå­˜å‚¨äº†æ–‡ä»¶çš„æƒé™å’Œæ‰€æœ‰æƒä¿¡æ¯ï¼Œç¡®ä¿æ–‡ä»¶ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œè®¿é—®æ§åˆ¶ã€‚ æ–‡ä»¶æ“ä½œï¼šå½“æ‰§è¡Œæ–‡ä»¶æ“ä½œæ—¶ï¼Œå¦‚æ‰“å¼€ã€è¯»å–ã€å†™å…¥æ–‡ä»¶ï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡inodeæ¥è®¿é—®å’Œä¿®æ”¹æ–‡ä»¶çš„æ•°æ®å’Œå…ƒä¿¡æ¯ã€‚ ","date":"2024-07-05","objectID":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/:2:3","series":null,"tags":["unix","æ–‡ä»¶"],"title":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","uri":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/#inodeçš„ä½œç”¨"},{"categories":["æŠ€æœ¯"],"content":" æŸ¥çœ‹inodeä¿¡æ¯åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶çš„inodeä¿¡æ¯ï¼š æŸ¥çœ‹æ–‡ä»¶çš„inodeå·ç  sh ls -i æ–‡ä»¶å # egï¼š ls -i example.txt # è¾“å‡ºç¤ºä¾‹ï¼š 1234567 example.txt è¯¦ç»†æŸ¥çœ‹æ–‡ä»¶çš„å…ƒæ•°æ® sh stat æ–‡ä»¶å # egï¼š stat example.txt #è¾“å‡ºç¤ºä¾‹ï¼š File: example.txt Size: 1234 Blocks: 8 IO Block: 4096 regular file Device: 801h/2049d Inode: 1234567 Links: 1 Access: (0644/-rw-r--r--) Uid: ( 1000/ username) Gid: ( 1000/ group) Access: 2024-07-05 12:34:56.000000000 +0000 Modify: 2024-07-04 11:33:55.000000000 +0000 Change: 2024-07-03 10:32:54.000000000 +0000 Birth: - ","date":"2024-07-05","objectID":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/:2:4","series":null,"tags":["unix","æ–‡ä»¶"],"title":"ä½¿ç”¨æ–‡ä»¶çš„inodeå·ç åˆ é™¤æ— æ³•æ‰“å‡ºåå­—çš„æ–‡ä»¶","uri":"/posts/unixs/%E4%BD%BF%E7%94%A8%E6%96%87%E4%BB%B6%E7%9A%84inode%E5%8F%B7%E7%A0%81%E5%88%A0%E9%99%A4%E6%97%A0%E6%B3%95%E6%89%93%E5%87%BA%E5%90%8D%E5%AD%97%E7%9A%84%E6%96%87%E4%BB%B6/#æŸ¥çœ‹inodeä¿¡æ¯"},{"categories":["æŠ€æœ¯"],"content":"Dockerå®¹å™¨å†…éƒ¨æŠ“åŒ…","date":"2024-07-02","objectID":"/posts/docker%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8%E6%8A%93%E5%8C%85/","series":null,"tags":["docker","è°ƒè¯•","å‘½åç©ºé—´"],"title":"Dockerå®¹å™¨å†…éƒ¨æŠ“åŒ…","uri":"/posts/docker%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8%E6%8A%93%E5%8C%85/"},{"categories":["æŠ€æœ¯"],"content":"å¾ˆå¤šdockerå®¹å™¨ä¸ºäº†è½»é‡åŒ–ï¼Œéƒ½ä¸åŒ…å«ä¸€äº›åŸºç¡€å‘½ä»¤ï¼Œå¦‚ip ï¼Œaddressï¼Œtcpdump ç­‰ï¼Œè¿™ç»™è°ƒè¯•å®¹å™¨çš„ç½‘ç»œå¸¦æ¥äº†éº»çƒ¦ã€‚ å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡ å‘½ä»¤è¿›å…¥å®¹å™¨çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œä½¿ç”¨å®¿ä¸»æœºçš„å‘½ä»¤è°ƒè¯•å®¹å™¨ç½‘ç»œã€‚ ç”¨æ³•å¦‚ä¸‹ï¼š æŸ¥çœ‹ docker å®¹å™¨çš„ pid shell docker inspect -f {{.State.Pid}} nginx è¿›å…¥å®¹å™¨çš„ç½‘ç»œå‘½åç©ºé—´ shell nsenter -n -t \u003cä¸Šä¸€æ­¥ä¸­çš„Pid\u003e # é€€å‡º exit ç„¶åå°±å¯ä»¥ä½¿ç”¨ ip æˆ–è€… tcpdump æŠ“åŒ…äº†ã€‚ ","date":"2024-07-02","objectID":"/posts/docker%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8%E6%8A%93%E5%8C%85/:0:0","series":null,"tags":["docker","è°ƒè¯•","å‘½åç©ºé—´"],"title":"Dockerå®¹å™¨å†…éƒ¨æŠ“åŒ…","uri":"/posts/docker%E5%AE%B9%E5%99%A8%E5%86%85%E9%83%A8%E6%8A%93%E5%8C%85/#"},{"categories":["æŠ€æœ¯"],"content":"æ•°æ®åº“åˆ†å¸ƒåœ¨å¤šå°è®¾å¤‡ä¸Šçš„å¥½å¤„ï¼š å¯æ‹“å±•æ€§ï¼š æ•°æ®é‡ã€è¯»å–è´Ÿè½½ã€å†™å…¥è´Ÿè½½è¶…å‡ºäº†å•å°æœºå™¨å¤„ç†èƒ½åŠ›ã€‚ å®¹é”™ã€é«˜å¯ç”¨ï¼šå•å°æœºå™¨ï¼ˆæˆ–å¤šå°ã€ç½‘ç»œã€æ•´ä¸ªæ•°æ®ä¸­å¿ƒï¼‰å‡ºç°æ•…éšœä»ç„¶èƒ½ç»§ç»­å·¥ä½œã€‚ å»¶è¿Ÿï¼šå…¨çƒèŒƒå›´å†…éƒ¨ç½²å¤šä¸ªæœåŠ¡å™¨ï¼Œç”¨æˆ·ä»æœ€è¿‘çš„æ•°æ®ä¸­å¿ƒè·å–æœåŠ¡ã€‚ æ‰©å±•è´Ÿè½½ å‚ç›´æ‰©å±•ï¼ˆvertical scaling or scaling upï¼‰ï¼šä¹°æ›´å¼ºå¤§çš„æœºå™¨ã€‚ æ–¹æ³•1: å…±äº«å†…å­˜æ¶æ„ï¼Œè®¸å¤šå¤„ç†å™¨ï¼Œå†…å­˜å’Œç£ç›˜å¯ä»¥åœ¨åŒä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸‹ç›¸äº’è¿æ¥ï¼Œå¿«é€Ÿçš„ç›¸äº’è¿æ¥å…è®¸ä»»æ„å¤„ç†å™¨è®¿é—®å†…å­˜æˆ–ç£ç›˜çš„ä»»æ„éƒ¨åˆ†ã€‚æ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥çœ‹ä½œä¸€å°å•ç‹¬çš„æœºå™¨ï¼ˆpsï¼šå¤§å‹æœºä¸­ï¼Œå°½ç®¡ä»»æ„å¤„ç†å™¨å¯ä»¥è®¿é—®å†…å­˜çš„ä»»æ„éƒ¨åˆ†ï¼Œä½†æ˜¯æ€»æœ‰ä¸€äº›å†…å­˜åŒºåŸŸä¸å¤„ç†å™¨æ›´è¿‘ï¼Œç§°ä¸ºéå‡åŒ€å†…å­˜è®¿é—®ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åˆ†åŒºï¼Œä½¿æ¯ä¸ªå¤„ç†å™¨ä¸»è¦è®¿é—®ä¸´è¿‘å†…å­˜ï¼‰ã€‚ç¼ºç‚¹ï¼Œæˆæœ¬çš„å¢é•¿æ˜¯éçº¿æ€§çš„ã€‚ æ–¹æ³•2: å…±äº«ç£ç›˜æ¶æ„ï¼Œä½¿ç”¨å¤šå°å…·æœ‰ç‹¬ç«‹å¤„ç†å™¨å’Œå†…å­˜çš„æœºå™¨ï¼Œä½†å°†æ•°æ®å­˜å‚¨åœ¨æœºå™¨ä¹‹é—´å…±äº«çš„ç£ç›˜é˜µåˆ—ä¸Šï¼Œè¿™äº›ç£ç›˜é€šè¿‡å¿«é€Ÿç½‘ç»œè¿æ¥ï¼ˆpsï¼šç½‘ç»œé™„å±å­˜å‚¨ NAS ï¼Œæˆ–å­˜å‚¨åŒºç½‘ç»œ SANï¼‰ã€‚è¿™ç§æ¶æ„å¸¸ç”¨äºæ•°æ®ä»“åº“ï¼Œç«äº‰å’Œé”å®šçš„å¼€é”€é™åˆ¶å¯ä¼¸ç¼©æ€§ã€‚ æ°´å¹³æ‹“å±•ï¼ˆhorizontal scaling or scaling outï¼‰: ä¹Ÿæ˜¯ä¸€ç§æ— å…±äº«æ¶æ„ï¼Œä¹°æ›´å¤šçš„æœºå™¨ã€‚åœ¨è¿™ç§æ¶æ„ä¸­ï¼Œè¿è¡Œæ•°æ®åº“è½¯ä»¶çš„æ¯å°æœºå™¨ / è™šæ‹Ÿæœºéƒ½ç§°ä¸º èŠ‚ç‚¹ï¼ˆnodeï¼‰ã€‚æ¯ä¸ªèŠ‚ç‚¹åªä½¿ç”¨å„è‡ªçš„å¤„ç†å™¨ï¼Œå†…å­˜å’Œç£ç›˜ã€‚èŠ‚ç‚¹ä¹‹é—´çš„ä»»ä½•åè°ƒï¼Œéƒ½æ˜¯åœ¨è½¯ä»¶å±‚é¢ä½¿ç”¨ä¼ ç»Ÿç½‘ç»œå®ç°çš„ã€‚ï¼ˆpsï¼šå®ƒå¸¦æ¥äº†é¢å¤–çš„å¤æ‚åº¦ï¼‰ã€‚ å¤åˆ¶å’Œåˆ†åŒº å¤åˆ¶ï¼ˆReplicationï¼‰ï¼š ä¸åŒçš„èŠ‚ç‚¹ä¸Šä¿å­˜æ•°æ®çš„ç›¸åŒå‰¯æœ¬ã€‚æä¾›äº†å†—ä½™ï¼Œä¹Ÿæœ‰åŠ©äºæ”¹å–„æ€§èƒ½ã€‚ åˆ†åŒºï¼ˆPartitioningï¼‰ï¼šå°†ä¸€ä¸ªå¤§å‹æ•°æ®åº“ï¼Œæ‹†åˆ†æˆè¾ƒå°çš„å­é›†ï¼ˆç§°ä¸ºåˆ†åŒºï¼Œpartitionsï¼‰ï¼Œä»è€Œå°†ä¸åŒçš„åˆ†åŒºæŒ‡æ´¾ç»™ä¸åŒçš„èŠ‚ç‚¹ï¼ˆnodesï¼Œä¹Ÿå« åˆ†ç‰‡ï¼Œ å³shardingï¼‰ã€‚ å®ƒä»¬ç»å¸¸åŒæ—¶ä½¿ç”¨ã€‚ ","date":"2024-04-15","objectID":"/posts/ddia/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE-%E6%A6%82%E8%BF%B0/:0:0","series":null,"tags":["åˆ†å¸ƒå¼æ•°æ®"],"title":"åˆ†å¸ƒå¼æ•°æ®-æ¦‚è¿°","uri":"/posts/ddia/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE-%E6%A6%82%E8%BF%B0/#"},{"categories":["æŠ€æœ¯"],"content":" æŸ¥çœ‹åˆ«å Powershell Get-Alias ","date":"2024-01-11","objectID":"/posts/powershell%E6%96%B0%E5%A2%9E%E5%88%AB%E5%90%8D/:1:0","series":null,"tags":["powershell"],"title":"Powershellæ–°å¢åˆ«å","uri":"/posts/powershell%E6%96%B0%E5%A2%9E%E5%88%AB%E5%90%8D/#æŸ¥çœ‹åˆ«å"},{"categories":["æŠ€æœ¯"],"content":" åˆ›å»ºæ°¸ä¹…åˆ«ååœ¨ Powershell ä¸­ä½¿ç”¨ Set-Alias å’Œ New-Alias å®šä¹‰çš„åˆ«åï¼Œåœ¨æ­¤sessionå…³é—­åå³ä¼šå¤±æ•ˆï¼Œé˜²æ­¢æ­¤ç°è±¡ï¼Œå¯ä»¥å°†å®šä¹‰åˆ«åçš„å‘½ä»¤å†™å…¥ Windows Powershell profile æ–‡ä»¶ä¸­ã€‚æŸ¥çœ‹æ­¤æ–‡ä»¶ä½ç½®: Powershell $profile ä¸€èˆ¬è¯¥æ–‡ä»¶åœ¨æ²¡æœ‰åˆ›å»ºæ—¶æ˜¯ä¸å­˜åœ¨çš„ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºï¼š Powershell New-Item -Type file -Force $profile å¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°å’Œåˆ«åç­‰ï¼Œå¦‚ä¸‹ï¼š Powershell function py-v{ python --version } Set-Alias -Name py-v -Value py-v set-Alias -Name vim -Value nvim Invoke-Expression (\u0026starship init powershell) é‡æ–°æ‰“å¼€ Powershell ï¼Œå°±ä¼šåŠ è½½ $profile æ–‡ä»¶ã€‚ ","date":"2024-01-11","objectID":"/posts/powershell%E6%96%B0%E5%A2%9E%E5%88%AB%E5%90%8D/:2:0","series":null,"tags":["powershell"],"title":"Powershellæ–°å¢åˆ«å","uri":"/posts/powershell%E6%96%B0%E5%A2%9E%E5%88%AB%E5%90%8D/#åˆ›å»ºæ°¸ä¹…åˆ«å"},{"categories":["æŠ€æœ¯"],"content":"ä»Šå¤©å‘ç°æ—©ä¸Šç™»å½•æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æ—¥å¿—æœ‰å¤§é‡sshç™»å½•çš„çˆ†ç ´ï¼Œæ‰€ä»¥å…ˆé™åˆ¶rootç”¨æˆ·ä¸å…è®¸è¿œç¨‹ç™»å½•ï¼Œå†ä½¿ç”¨Fail2Banè‡ªåŠ¨å°é”ipé™åˆ¶ä¸€ä¸‹ã€‚ è®°å½•å¦‚ä¸‹ï¼š ","date":"2023-11-27","objectID":"/posts/unixs/fail2ban%E9%98%B2%E6%8A%A4ssh%E7%88%86%E7%A0%B4/:0:0","series":null,"tags":["unix","fail2ban"],"title":"Fail2Bané˜²æŠ¤SSHçˆ†ç ´","uri":"/posts/unixs/fail2ban%E9%98%B2%E6%8A%A4ssh%E7%88%86%E7%A0%B4/#"},{"categories":["æŠ€æœ¯"],"content":" é™åˆ¶rootç”¨æˆ·ä¸å…è®¸è¿œç¨‹ç™»å½• shell vi /etc/ssh/sshd_config ä¿®æ”¹ PermitRootLogin yes ä¸º PermitRootLogin no ã€‚ ç„¶åé‡å¯ ssh æœåŠ¡ shell systemctl restart ssh ","date":"2023-11-27","objectID":"/posts/unixs/fail2ban%E9%98%B2%E6%8A%A4ssh%E7%88%86%E7%A0%B4/:1:0","series":null,"tags":["unix","fail2ban"],"title":"Fail2Bané˜²æŠ¤SSHçˆ†ç ´","uri":"/posts/unixs/fail2ban%E9%98%B2%E6%8A%A4ssh%E7%88%86%E7%A0%B4/#é™åˆ¶rootç”¨æˆ·ä¸å…è®¸è¿œç¨‹ç™»å½•"},{"categories":["æŠ€æœ¯"],"content":" ä½¿ç”¨Fail2Banè‡ªåŠ¨å°é”ip shell // install yum install fail2ban -y ä¿®æ”¹é…ç½®æ–‡ä»¶ shell cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local vi /etc/fail2ban/jail.local æ ¹æ®éœ€è¦è¿›è¡Œé…ç½®ï¼š ignoreip: å…è®¸æŒ‡å®šä¸€ç»„ IP åœ°å€ï¼Œè¿™äº›åœ°å€ä¸ä¼šè¢« fail2ban å°é”ã€‚ bantime: å®šä¹‰ IP åœ°å€è¢«å°é”çš„æ—¶é—´ï¼ˆç§’ï¼‰ã€‚ maxretry: æŒ‡å®šåœ¨å¤šå°‘æ¬¡å¤±è´¥å°è¯•åè§¦å‘å°é”ã€‚ findtime: å®šä¹‰æ£€æŸ¥å¤±è´¥å°è¯•çš„æ—¶é—´çª—å£ã€‚ backend: è®¾ç½® fail2ban ç”¨äºå°é” IP çš„åç«¯ï¼ˆä¾‹å¦‚ iptablesï¼‰ã€‚ é¡»åœ¨ ssh é€‰é¡¹ä¸‹å¢åŠ  enabled=true å¦‚ä¸‹ï¼š shell [sshd] # To use more aggressive sshd modes set filter parameter \"mode\" in jail.local: # normal (default), ddos, extra or aggressive (combines all). # See \"tests/files/logs/sshd\" or \"filter.d/sshd.conf\" for usage example and details. #mode = normal enabled = true port = ssh logpath = %(sshd_log)s backend = %(sshd_backend)s è®¾ç½®å¼€æœºè‡ªåŠ¨ï¼ŒåŒæ—¶ç°åœ¨å¯åŠ¨ shell systemctl enable --now fail2ban.service å¸¸ç”¨å‘½ä»¤ï¼š shell # æŸ¥çœ‹çŠ¶æ€ serviceName å¯¹åº”é…ç½®æ–‡ä»¶çš„ä¸­ [sshd] é€‰é¡¹ fail2ban-client status \u003cserviceName\u003e # æ‰‹åŠ¨ ban ip fail2ban-client set sshd banip 222.186.16.210 # æ‰‹åŠ¨åˆ é™¤è¢« ban çš„ ip fail2ban-client set sshd delignoreip 222.186.16.210 # æŸ¥çœ‹æ—¥å¿— tail /var/log/fail2ban.log psï¼šå½“ç„¶ä¹Ÿå¯ä»¥é™åˆ¶åªå…è®¸å¯†é’¥ç™»å½•ã€‚ å‚è€ƒï¼š centos8ä¸Fail2Banè”åˆä½¿ç”¨ sshåªå…è®¸å¯†é’¥ç™»å½• fail2bané˜²å¾¡ddosæ”»å‡» ","date":"2023-11-27","objectID":"/posts/unixs/fail2ban%E9%98%B2%E6%8A%A4ssh%E7%88%86%E7%A0%B4/:2:0","series":null,"tags":["unix","fail2ban"],"title":"Fail2Bané˜²æŠ¤SSHçˆ†ç ´","uri":"/posts/unixs/fail2ban%E9%98%B2%E6%8A%A4ssh%E7%88%86%E7%A0%B4/#ä½¿ç”¨fail2banè‡ªåŠ¨å°é”ip"},{"categories":["æŠ€æœ¯"],"content":"å¾ˆå¤šå†…ç½‘ç¯å¢ƒéœ€è¦ç¦»çº¿å®‰è£…è½¯ä»¶ï¼Œå°±éœ€è¦æˆ‘ä»¬åœ¨å¯ä»¥ä¸Šç½‘çš„æœåŠ¡å™¨ä¸Šå°†éœ€è¦å®‰è£…çš„è½¯ä»¶çš„ç›¸åº”å®‰è£…åŒ…åŠå…¶ä¾èµ–ä¸‹è½½ä¸‹æ¥ï¼Œä¼ è¾“åˆ°ç¦»çº¿æœºå™¨ï¼Œå†å®‰è£…ã€‚å…¶ä¸­ä¸‹è½½å’Œå¤„ç†ä¾èµ–å…³ç³»å¯èƒ½æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æœ¬æ–‡ç‰¹åšè®°å½•ã€‚ ","date":"2023-11-17","objectID":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/:0:0","series":null,"tags":["unix","centos","yum"],"title":"ç¦»çº¿å®‰è£…åŒ…åŠä¾èµ–å¤„ç†","uri":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/#"},{"categories":["æŠ€æœ¯"],"content":" centos","date":"2023-11-17","objectID":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/:1:0","series":null,"tags":["unix","centos","yum"],"title":"ç¦»çº¿å®‰è£…åŒ…åŠä¾èµ–å¤„ç†","uri":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/#centos"},{"categories":["æŠ€æœ¯"],"content":" æŸ¥çœ‹ä¾èµ– shell # æŸ¥çœ‹ä¾èµ–åˆ—è¡¨ yum deplist docker-ce ","date":"2023-11-17","objectID":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/:1:1","series":null,"tags":["unix","centos","yum"],"title":"ç¦»çº¿å®‰è£…åŒ…åŠä¾èµ–å¤„ç†","uri":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/#æŸ¥çœ‹ä¾èµ–"},{"categories":["æŠ€æœ¯"],"content":" ä¸‹è½½å…¨é‡ä¾èµ–repotrack æ˜¯ä¸€ä¸ª yum-utils åŒ…ä¸­çš„å·¥å…·ï¼Œç”¨äºä¸‹è½½æŒ‡å®šè½¯ä»¶åŒ…åŠå…¶æ‰€æœ‰ä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿åœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥çš„ç¯å¢ƒä¸­å®‰è£…å®ƒä»¬ã€‚ shell yum install yum-utils -y // ä¸‹è½½ docker-ce å…¨é‡ä¾èµ–åŒ… repotrack docker-ce ","date":"2023-11-17","objectID":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/:1:2","series":null,"tags":["unix","centos","yum"],"title":"ç¦»çº¿å®‰è£…åŒ…åŠä¾èµ–å¤„ç†","uri":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/#ä¸‹è½½å…¨é‡ä¾èµ–"},{"categories":["æŠ€æœ¯"],"content":" ä¸‹è½½ä¸»è½¯ä»¶åŒ…å’ŒåŸºäºä½ ç°åœ¨çš„æ“ä½œç³»ç»Ÿæ‰€ç¼ºå°‘çš„ä¾èµ–å…³ç³»åŒ…å¦‚æœä¾èµ–è¾ƒå¤šä¸”åœ¨çº¿ç¯å¢ƒå’Œç¦»çº¿ç¯å¢ƒç›¸åŒï¼Œå°±ä¸éœ€è¦ä¸‹è½½å…¨é‡ä¾èµ–ï¼Œåªéœ€è¦ä¸‹è½½ä¸»è½¯ä»¶åŒ…å’ŒåŸºäºä½ å½“å‰ç¯å¢ƒç¼ºå°‘çš„ä¾èµ–ã€‚æ›´å¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚ æ–¹æ³•1ï¼šä½¿ç”¨ yumdownloader shell yum install yum-utils -y // --resolve ä¸‹è½½ä¾èµ–åŒ… --destdir æŒ‡å®šç›®å½•ï¼Œé»˜è®¤å½“å‰ç›®å½• yumdownloader --resolve --destdir=/tmp nginx æ–¹æ³•2ï¼šyum çš„ downloadonly æ’ä»¶ shell // å®‰è£… yum çš„ downloadonly æ’ä»¶ yum install yum-download -y yum -y install nginx --downloadonly --downloaddir=. ","date":"2023-11-17","objectID":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/:1:3","series":null,"tags":["unix","centos","yum"],"title":"ç¦»çº¿å®‰è£…åŒ…åŠä¾èµ–å¤„ç†","uri":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/#ä¸‹è½½ä¸»è½¯ä»¶åŒ…å’ŒåŸºäºä½ ç°åœ¨çš„æ“ä½œç³»ç»Ÿæ‰€ç¼ºå°‘çš„ä¾èµ–å…³ç³»åŒ…"},{"categories":["æŠ€æœ¯"],"content":" å®‰è£…ä¾èµ–æ–¹æ³•1ï¼šlocalinstall å¯ä»¥å°è¯•è§£å†³å¹¶å®‰è£…æ‰€æœ‰ä¾èµ– ï¼ˆæ¨èï¼‰ shell yum localinstall ./rpm-path/*.rpm æ–¹æ³•2ï¼š rpm shell rmp -ivh \u003cpackage-name-1.rpm\u003e \u003cpackage-name-2.rpm\u003e ... # -U å‡çº§æˆ–å®‰è£… -v è¯¦ç»†æ¨¡å¼ -h æ˜¾ç¤ºè¿›åº¦ --force å¼ºåˆ¶å®‰è£… --nodeps å¿½ç•¥ä¾èµ–æ€§æ£€æŸ¥ rpm -Uvh --force --nodeps *.rpm ä½¿ç”¨ rpm è¯·ç¡®ä¿æŒ‰ç…§æ­£ç¡®çš„é¡ºåºå®‰è£…ï¼Œä»¥æ»¡è¶³ä¾èµ–å…³ç³»ã€‚ å¦‚æœç¼ºå°‘ä¾èµ–ï¼Œé‡å¤ä¸‹è½½ã€ä¼ è¾“ã€å®‰è£…çš„æ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰ä¾èµ–éƒ½è¢«æ»¡è¶³ã€‚ ","date":"2023-11-17","objectID":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/:1:4","series":null,"tags":["unix","centos","yum"],"title":"ç¦»çº¿å®‰è£…åŒ…åŠä¾èµ–å¤„ç†","uri":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/#å®‰è£…ä¾èµ–"},{"categories":["æŠ€æœ¯"],"content":" ä¾èµ–é—®é¢˜æ’æŸ¥å¦‚æœé‡åˆ°å¦‚ä¸‹é—®é¢˜ shell ---\u003e è½¯ä»¶åŒ… audit-libs.x86_64.0.2.8.4-4.el7 å°†è¢« å‡çº§ --\u003e æ­£åœ¨å¤„ç†ä¾èµ–å…³ç³» audit-libs(x86-64) = 2.8.4-4.el7ï¼Œå®ƒè¢«è½¯ä»¶åŒ… audit-2.8.4-4.el7.x86_64 éœ€è¦ Loading mirror speeds from cached hostfile Could not retrieve mirrorlist http://mirrorlist.centos.org/?release=7\u0026arch=x86_64\u0026repo=os\u0026infra=stock error was 14: curl#6 - \"Could not resolve host: mirrorlist.centos.org; æœªçŸ¥çš„é”™è¯¯\" å³ï¼Œaudit-libs-2.8.4 å°†è¢«å‡çº§ï¼Œä½†æ˜¯ç¼ºå°‘ä¾èµ–ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿå·²ç»å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œ shell rpm -qa | grep audit # output audit-libs-python-2.8.4-4.el7.x86_64 audit-libs-2.8.4-4.el7.x86_64 audit-2.8.4-4.el7.x86_64 ç„¶åå»è¿™ä¸ªç½‘å€ä¸‹è½½å‡çº§åçš„è½¯ä»¶åŒ…ï¼ˆæ³¨æ„å¯¹åº”çš„ centos ç‰ˆæœ¬ï¼Œè¿™é‡Œæ˜¯ centos 7ï¼‰: https://centos.pkgs.org/7/centos-x86_64/audit-2.8.5-4.el7.x86_64.rpm.html ä¸€èˆ¬ä¸‹è½½é“¾æ¥ä¸ºï¼š http://mirror.centos.org/centos/7/os/x86_64/Packages/audit-2.8.5-4.el7.x86_64.rpm ç„¶åå®‰è£…å³å¯ã€‚ å‚è€ƒï¼šyum ä¸‹è½½å…¨é‡ä¾èµ– rpm åŒ…åŠç¦»çº¿å®‰è£… ","date":"2023-11-17","objectID":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/:1:5","series":null,"tags":["unix","centos","yum"],"title":"ç¦»çº¿å®‰è£…åŒ…åŠä¾èµ–å¤„ç†","uri":"/posts/unixs/%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%A4%84%E7%90%86/#ä¾èµ–é—®é¢˜æ’æŸ¥"},{"categories":["æŠ€æœ¯"],"content":"F12 æ‰“å¼€å¼€å‘è€…æ¨¡å¼ï¼Œé€‰æ‹©éœ€è¦æˆªå›¾çš„èŠ‚ç‚¹ï¼Œctrl+shift+p æ‰“å¼€è¿è¡Œæ ï¼Œæœç´¢ shotï¼Œé€‰æ‹© Capture node screenshotï¼Œå¦‚ä¸‹å›¾ï¼š å¦‚æœæˆªå–æ‰‹æœºæˆ–å¹³æ¿æ¨¡å¼çš„å›¾ï¼Œå…ˆç‚¹å‡»å·¦ä¸Šè§’çš„ Toggle device toolbar ï¼ˆ Ctrl + Shift + M ï¼‰é€‰æ‹©åˆé€‚çš„è®¾å¤‡ï¼Œå†è¿›è¡Œä¸Šé¢æ­¥éª¤ã€‚ ","date":"2023-11-09","objectID":"/posts/chrome%E7%9A%84%E4%B8%80%E7%A7%8D%E6%88%AA%E5%9B%BE%E6%96%B9%E6%B3%95/:0:0","series":null,"tags":["æŠ˜è…¾"],"title":"Chromeçš„ä¸€ç§æˆªå›¾æ–¹æ³•","uri":"/posts/chrome%E7%9A%84%E4%B8%80%E7%A7%8D%E6%88%AA%E5%9B%BE%E6%96%B9%E6%B3%95/#"},{"categories":["æŠ€æœ¯"],"content":" åœºæ™¯æœ¬åœ°å¼€å‘ä»£ç ï¼Œéœ€è¦åŒæ­¥åˆ° 10.21.30.81 ä¸Šï¼Œ ä½†æ˜¯æœ¬åœ°åªèƒ½é€šè¿‡ ssh è¿æ¥åˆ° 10.21.30.80 ä¸Šï¼Œä¸èƒ½ ssh è¿æ¥åˆ° 10.21.30.81 ä¸Šï¼Œå› æ­¤éœ€è¦å°†ä»£ç é€šè¿‡SFTPä¼ åˆ° 80 ä¸Šï¼Œå†åœ¨ 80 ä¸Š scp åˆ° 81ä¸Šï¼Œå¤ªéº»çƒ¦äº†ï¼Œç½‘ç»œå¦‚ä¸‹ï¼š ","date":"2023-11-09","objectID":"/posts/phpstorm%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BD%91%E4%BC%A0%E8%BE%93%E6%BA%90%E4%BB%A3%E7%A0%81/:1:0","series":null,"tags":["SSHéš§é“"],"title":"PhpStormå®ç°è·¨ç½‘ä¼ è¾“æºä»£ç ","uri":"/posts/phpstorm%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BD%91%E4%BC%A0%E8%BE%93%E6%BA%90%E4%BB%A3%E7%A0%81/#åœºæ™¯"},{"categories":["æŠ€æœ¯"],"content":" SSH éš§é“åœ¨æœ¬æœºä¸Šæ‰§è¡Œ shell ssh -L 2222:10.21.30.81:22 root@10.21.30.80 ä»¥ä¸Šï¼Œæœ¬æœºä¸Šçš„ 2222 ç«¯å£ä¼šè¢«ç›‘å¬ï¼Œè®¿é—®æœ¬æœºçš„ 2222 ç«¯å£ï¼Œç›¸å½“äºè®¿é—® 10.21.30.81 çš„ 22 ç«¯å£ï¼Œå³ sshéš§é“å»ºç«‹åœ¨æœ¬æœºå’Œ 10.21.30.80ä¹‹é—´ã€‚è¿™ä¸ªå‘½ä»¤å¯ä»¥è®©ä½ é€šè¿‡æœ¬åœ°ç«¯å£ 2222 æ¥è®¿é—®è¿œç¨‹ä¸»æœº 10.21.30.81 ä¸Šçš„ SSH æœåŠ¡ã€‚ åœ¨ç¼–è¾‘å™¨ Phpstrom ä¸­é…ç½® Tools-\u003eDeployment-\u003eConfiguration, æ·»åŠ  SFTPï¼Œ ä½¿ç”¨ SSH è¿æ¥ 127.0.0.1:2222ï¼Œå³å¯å®ç°ä»£ç è‡ªåŠ¨ä¸Šä¼ ã€‚ ä¸ä¹‹ç±»ä¼¼çš„ï¼Œæ‰§è¡Œ shell ssh -L 33060:10.21.30.81:3306 root@10.21.30.80 è¿æ¥æœ¬åœ°çš„ 127.0.0.1:33060ï¼Œ å³å¯è®¿é—® 10.21.30.81:3306 çš„ mysql æ•°æ®åº“ã€‚ ","date":"2023-11-09","objectID":"/posts/phpstorm%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BD%91%E4%BC%A0%E8%BE%93%E6%BA%90%E4%BB%A3%E7%A0%81/:2:0","series":null,"tags":["SSHéš§é“"],"title":"PhpStormå®ç°è·¨ç½‘ä¼ è¾“æºä»£ç ","uri":"/posts/phpstorm%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BD%91%E4%BC%A0%E8%BE%93%E6%BA%90%E4%BB%A3%E7%A0%81/#ssh-éš§é“"},{"categories":["æŠ€æœ¯"],"content":" å‚è€ƒè¿æ¥SSHéš§é“ç®€æ˜æ•™ç¨‹ SSH ç«¯å£è½¬å‘ ","date":"2023-11-09","objectID":"/posts/phpstorm%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BD%91%E4%BC%A0%E8%BE%93%E6%BA%90%E4%BB%A3%E7%A0%81/:3:0","series":null,"tags":["SSHéš§é“"],"title":"PhpStormå®ç°è·¨ç½‘ä¼ è¾“æºä»£ç ","uri":"/posts/phpstorm%E5%AE%9E%E7%8E%B0%E8%B7%A8%E7%BD%91%E4%BC%A0%E8%BE%93%E6%BA%90%E4%BB%A3%E7%A0%81/#å‚è€ƒè¿æ¥"},{"categories":["æŠ€æœ¯"],"content":" Shellè§£æymlä»£ç å®ç°å¦‚ä¸‹ï¼š shell # è§£æ yml , æ•°ç»„è‡ªåŠ¨æ·»åŠ åºå· # ### ä¾‹å¦‚ï¼š ### yml å¦‚ä¸‹ï¼š ### global: ### input: ### - \"main.c\" ### - \"main.h\" ### flags: [ \"-O3\", \"-fpic\" ] ### sample_input: ### - { property1: value, property2: \"value2\" } ### - { property1: \"value3\", property2: 'value 4' } ### ### æ‰§è¡Œï¼š eval $(parse_yaml \"config.yml\"ï¼‰ ### ### è§£æç»“æœå¦‚ä¸‹ï¼Œç›¸å½“äºç”Ÿæˆäº†å¦‚ä¸‹ä»£ç : ### global_input_1=\"main.c\" ### global_input_2=\"main.h\" ### global_flags_1=\"-O3\" ### global_flags_2=\"-fpic\" ### global_sample_input_1_property1=\"value\" ### global_sample_input_1_property2=\"value2\" ### global_sample_input_2_property1=\"value3\" ### global_sample_input_2_property2=\"value 4\" ### ### æœ€åå¯ä»¥ä½¿ç”¨é—´æ¥å˜é‡å¼•ç”¨ï¼Œè®¿é—®å˜é‡ ### function parse_yaml { local prefix=$2 local s='[[:space:]]*' w='[a-zA-Z0-9_]*' fs=$(echo -e '\\034') sed -ne \"s|,$s\\]$s\\$|]|\" \\ -e \":1;s|^\\($s\\)\\($w\\)$s:$s\\[$s\\(.*\\)$s,$s\\(.*\\)$s\\]|\\1\\2: [\\3]\\n\\1 - \\4|;t1\" \\ -e \"s|^\\($s\\)\\($w\\)$s:$s\\[$s\\(.*\\)$s\\]|\\1\\2:\\n\\1 - \\3|;p\" $1 | \\ sed -ne \"s|,$s}$s\\$|}|\" \\ -e \":1;s|^\\($s\\)-$s{$s\\(.*\\)$s,$s\\($w\\)$s:$s\\(.*\\)$s}|\\1- {\\2}\\n\\1 \\3: \\4|;t1\" \\ -e \"s|^\\($s\\)-$s{$s\\(.*\\)$s}|\\1-\\n\\1 \\2|;p\" | \\ sed -ne \"s|^\\($s\\):|\\1|\" \\ -e \"s|^\\($s\\)-$s[\\\"']\\(.*\\)[\\\"']$s\\$|\\1$fs$fs\\2|p\" \\ -e \"s|^\\($s\\)-$s\\(.*\\)$s\\$|\\1$fs$fs\\2|p\" \\ -e \"s|^\\($s\\)\\($w\\)$s:$s[\\\"']\\(.*\\)[\\\"']$s\\$|\\1$fs\\2$fs\\3|p\" \\ -e \"s|^\\($s\\)\\($w\\)$s:$s\\(.*\\)$s\\$|\\1$fs\\2$fs\\3|p\" | \\ awk -F$fs '{ indent = length($1)/2; vname[indent] = $2; for (i in vname) {if (i \u003e indent) {delete vname[i]; idx[i]=0}} if(length($2)== 0){ vname[indent]= ++idx[indent] }; if (length($3) \u003e 0) { vn=\"\"; for (i=0; i\u003cindent; i++) { vn=(vn)(vname[i])(\"_\")} gsub(/\\s*#.*$/, \"\", $3); printf(\"%s%s%s=\\\"%s\\\"\\n\", \"'$prefix'\",vn, vname[indent], $3); } }' } ç”¨æ³•ï¼š yml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š yml # yml elasticsearch: - setup/elastic/ilm-policies/my-ilm-policy.request - setup/elastic/index-templates/switch.request mysql: host: 127.0.0.1 è§£æä»£ç å¦‚ä¸‹ï¼š shell elastic_set_file=\"${BASH_SOURCE[0]%/*}\"/elastic/setup-elasticsearch.yml if [[ ! -f \"${elastic_set_file:-}\" ]]; then sublog \"No setup-elastic.yml file found, skipping\" continue fi # è§£æ yml å¹¶æ·»åŠ å‰ç¼€ï¼Œé¿å…å˜é‡åå·²å­˜åœ¨ eval $(parse_yaml \"$elastic_set_file\" \"config_\") # ä¼šç”Ÿæˆå¦‚ä¸‹å˜é‡ config_elasticsearch_1=\"setup/elastic/ilm-policies/my-ilm-policy.request\" config_elasticsearch_2=\"setup/elastic/index-templates/switch.request\" config_mysql_host=\"127.0.0.1\" ","date":"2023-09-25","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/:1:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-2","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/#shellè§£æyml"},{"categories":["æŠ€æœ¯"],"content":" bash åŠ¨æ€å˜é‡åï¼ˆé—´æ¥å˜é‡å¼•ç”¨ï¼‰ shell # å‡è®¾æœ‰ä¸¤ä¸ªå˜é‡ var1=\"Hello\" index=1 # ä½¿ç”¨é—´æ¥å˜é‡å¼•ç”¨æ¥æ„é€ åŠ¨æ€å˜é‡å dynamic_var=\"var${index}\" # ä½¿ç”¨åŠ¨æ€å˜é‡åè®¿é—®å˜é‡çš„å€¼ echo \"${!dynamic_var}\" # è¾“å‡ºï¼šHello # ä¾‹å¦‚ï¼šæœ‰å¤šä¸ªé€’å¢å˜é‡ # global_input_1=\"main.c\" # global_input_2=\"main.h\" # ... # global_input_100=\"xxx.c\" for idx in {1..100}; do variable_name=\"global_input_$idx\" if [ ! -v \"$variable_name\" ]; then break if file_name=\"${!variable_name}\" # more code done ","date":"2023-09-25","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/:2:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-2","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/#bash-åŠ¨æ€å˜é‡åé—´æ¥å˜é‡å¼•ç”¨"},{"categories":["æŠ€æœ¯"],"content":" bash å‚æ•°æ‰©å±•å‚æ•°æ‰©å±•æ˜¯ Bash ä¸­å¼ºå¤§çš„å­—ç¬¦ä¸²æ“ä½œå·¥å…·ï¼Œå¯ä»¥ç”¨äºå„ç§å­—ç¬¦ä¸²å¤„ç†ä»»åŠ¡ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å‚æ•°æ‰©å±•å†™æ³•ç¤ºä¾‹ï¼š ${varname#substring}ï¼šåˆ é™¤æœ€çŸ­åŒ¹é…å‰ç¼€ã€‚ ${varname##substring}ï¼šåˆ é™¤æœ€é•¿åŒ¹é…å‰ç¼€ã€‚ ${varname%suffix}ï¼šåˆ é™¤æœ€çŸ­åŒ¹é…åç¼€ã€‚ ${varname%%substring}ï¼šåˆ é™¤æœ€é•¿åŒ¹é…åç¼€ã€‚ ${varname/old/new}ï¼šå°†ç¬¬ä¸€ä¸ªåŒ¹é…çš„ â€œoldâ€ å­å­—ç¬¦ä¸²æ›¿æ¢ä¸º â€œnewâ€ã€‚ ${varname//old/new}ï¼šå°†æ‰€æœ‰åŒ¹é…çš„ â€œoldâ€ å­å­—ç¬¦ä¸²æ›¿æ¢ä¸º â€œnewâ€ã€‚ ${#varname}ï¼šè·å–å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ ${varname[offset,length]}ï¼šä»å­—ç¬¦ä¸²ä¸­æå–å­å­—ç¬¦ä¸²ï¼Œä» offset ä½ç½®å¼€å§‹ï¼Œé•¿åº¦ä¸º lengthã€‚ ","date":"2023-09-25","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/:3:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-2","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/#bash-å‚æ•°æ‰©å±•"},{"categories":["æŠ€æœ¯"],"content":" bash è¿­ä»£å…³è”æ•°ç»„æˆ–å…³è”åˆ—è¡¨ shell declare -A users_passwords users_passwords=( [logstash_internal]=\"${LOGSTASH_INTERNAL_PASSWORD:-}\" [kibana_system]=\"${KIBANA_SYSTEM_PASSWORD:-}\" [metricbeat_internal]=\"${METRICBEAT_INTERNAL_PASSWORD:-}\" [filebeat_internal]=\"${FILEBEAT_INTERNAL_PASSWORD:-}\" [heartbeat_internal]=\"${HEARTBEAT_INTERNAL_PASSWORD:-}\" [monitoring_internal]=\"${MONITORING_INTERNAL_PASSWORD:-}\" [beats_system]=\"${BEATS_SYSTEM_PASSWORD=:-}\" ) for user in \"${!users_passwords[@]}\"; do echo \"User '$user'\" if [[ -z \"${users_passwords[$user]:-}\" ]]; then echo 'No password defined, skipping' continue fi # code more ... done ","date":"2023-09-25","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/:4:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-2","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/#bash-è¿­ä»£å…³è”æ•°ç»„æˆ–å…³è”åˆ—è¡¨"},{"categories":["æŠ€æœ¯"],"content":" æ•°ç»„å±•å¼€ shell args=(\"http://example.com\" \"-H\" \"User-Agent: MyUserAgent\" \"--data\" \"param1=value1\" \"--header\" \"Content-Type: application/json\") curl \"${args[@]}\" # ä¸ä¸‹è¾¹å½¢å¼ç­‰ä»·ï¼Œé¿å…äº†æ‹¼æ¥å­—ç¬¦ä¸² curl http://example.com -H \"User-Agent: MyUserAgent\" --data \"param1=value1\" --header \"Content-Type: application/json\" ","date":"2023-09-25","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/:5:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-2","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/#æ•°ç»„å±•å¼€"},{"categories":["æŠ€æœ¯"],"content":" æ‹“å±•é“¾æ¥ä¼˜é›…çš„shell ","date":"2023-09-25","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/:6:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-2","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-2/#æ‹“å±•é“¾æ¥"},{"categories":["æŠ€æœ¯"],"content":"æ•°æ®åœ¨ä¸å…±äº«å†…å­˜çš„è¿›ç¨‹ä¼ é€’ï¼Œå°±éœ€è¦ç¼–ç ä¸ºå­—èŠ‚åºåˆ—ã€‚æœ‰å¤šç§æ–¹å¼ã€‚ å…¼å®¹æ€§ å®é™…æè¿°äº† ç¼–ç æ•°æ®çš„è¿›ç¨‹ å’Œ è§£ç æ•°æ®çš„è¿›ç¨‹ ä¹‹é—´çš„å…³ç³»ã€‚å®ƒå¯¹ å¯æ¼”åŒ–æ€§ï¼ˆå…è®¸ä½ å‡çº§ç³»ç»Ÿçš„éƒ¨åˆ†ï¼Œè€Œä¸å¿…å…¨éƒ¨å‡çº§ï¼‰ éå¸¸é‡è¦ã€‚ æ•°æ®å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä»ä¸€ä¸ªæµç¨‹æµå‘å¦ä¸€ä¸ªæµç¨‹ï¼ˆé€šå¸¸å…ˆç¼–ç ä¸ºå­—èŠ‚åºåˆ—ï¼Œå†è§£ç ï¼‰ã€‚è°ç¼–ç ï¼Œè°è§£ç ï¼Ÿä»¥ä¸‹æ˜¯å¸¸è§åœºæ™¯ï¼š æ•°æ®åº“ æœåŠ¡è°ƒç”¨ å¼‚æ­¥æ¶ˆæ¯ä¼ é€’ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:0:0","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®åº“ä¸­çš„æ•°æ®æµå†™å…¥æ•°æ® â€”\u003e ç¼–ç æ•°æ®ï¼›è¯»å–æ•°æ® â€” \u003e è§£ç æ•°æ®ã€‚ å•è¿›ç¨‹è¿æ¥æ•°æ®åº“ï¼Œç°åœ¨å†™å…¥çš„æ•°æ®ï¼Œæœªæ¥æ‰è¯»å–ã€‚å‘åå…¼å®¹ æ˜¯å¿…é¡»çš„ã€‚ å¤šä¸ªè¿›ç¨‹æ›´å¸¸è§ï¼Œå¯èƒ½æ˜¯ä¸åŒçš„åº”ç”¨ç¨‹åºæˆ–æœåŠ¡è¿æ¥ä¸€ä¸ªæ•°æ®åº“ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªæœåŠ¡çš„å‡ ä¸ªå®ä¾‹ï¼ˆå¹¶è¡Œè¿è¡Œï¼Œå¹¶è¡Œçš„ç›®çš„æ˜¯å¯ä¼¸ç¼©æ€§å’Œå®¹é”™æ€§ï¼‰ã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå¯èƒ½å‘ç”Ÿï¼Œä¸€ä¸ªæ•°æ®åº“ä¸­çš„å€¼è¢«è¾ƒæ–°çš„ä»£ç å†™å…¥ï¼Œè¢«æ—§ä»£ç è¯»å–ã€‚å› æ­¤ æ•°æ®åº“ä¹Ÿéœ€è¦ å‘å‰å…¼å®¹ã€‚ å½“ä½ å‘æ•°æ®åº“æ–°å¢äº†ä¸€ä¸ªå­—æ®µï¼ˆå³ä¿®æ”¹äº†æ•°æ®åº“çš„è¡¨ç»“æ„ï¼Œæˆ–è€…è¯´ä¿®æ”¹äº†æ•°æ®çš„æ¨¡å¼ schema ï¼‰ï¼Œè¾ƒæ–°çš„ä»£ç å†™å…¥åŒ…å«æ–°å­—æ®µå†…å®¹çš„æ•°æ®åˆ°æ•°æ®åº“ä¸­ï¼Œæ—§ä»£ç ï¼ˆä¸çŸ¥é“æœ‰æ–°å­—æ®µï¼‰åœ¨è¯»å–ã€æ›´æ–°ã€å†™å›è®°å½•åˆ°æ•°æ®åº“æ—¶ï¼Œç†æƒ³çŠ¶æ€æ—¶éœ€ä¿å€¼æ–°å­—æ®µçš„å€¼ä¸å˜ã€‚ç¼–ç æ ¼å¼éœ€è¦æ”¯æŒï¼Œåœ¨åº”ç”¨å±‚é¢ä¹Ÿéœ€è¦å°å¿ƒã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:1:0","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#æ•°æ®åº“ä¸­çš„æ•°æ®æµ"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸè¶…å‡ºä»£ç çš„ç”Ÿå‘½å‘¨æœŸä»£ç çš„ç‰ˆæœ¬æ›´æ–°é¢‘ç¹ï¼Œæ•°æ®åº“çš„æ•°æ®ç‰ˆæœ¬å¯èƒ½å˜åŒ–å¯èƒ½å¤§å¤šå¹¶ä¸é¢‘ç¹ã€‚ å°†æ•°æ®è¿ç§»åˆ°ä¸€ä¸ªæ–°çš„æ¨¡å¼æ˜¯æ˜‚è´µçš„ï¼Œå¤§å¤šæ•°æ•°æ®åº“å°½å¯èƒ½é¿å…å®ƒï¼Œå¤§å¤šæ•°å…³ç³»æ•°æ®åº“ï¼ˆé™¤äº†mysqlï¼Œå¹¶éçœŸçš„å¿…è¦æ—¶ï¼Œå®ƒä¹Ÿç»å¸¸ä¼šé‡å†™æ•´ä¸ªè¡¨ï¼‰å…è®¸ä¸€äº›ç®€å•çš„æ¨¡å¼å˜æ›´ï¼Œå¦‚æ·»åŠ ä¸€ä¸ªé»˜è®¤ä¸ºç©ºçš„æ–°åˆ—ï¼Œè€Œéé‡å†™ç°æœ‰æ•°æ®ã€‚ LinkedIn çš„æ–‡æ¡£æ•°æ®åº“ Espresso ä½¿ç”¨ Avro å­˜å‚¨ï¼Œå…è®¸å®ƒä½¿ç”¨ Avro çš„æ¨¡å¼æ¼”å˜è§„åˆ™ã€‚ æ¨¡å¼æ¼”å˜å…è®¸æ•´ä¸ªæ•°æ®åº“çœ‹èµ·æ¥å¥½åƒæ˜¯ç”¨å•ä¸ªæ¨¡å¼ç¼–ç çš„ï¼Œå³ä½¿åº•å±‚å­˜å‚¨å¯èƒ½åŒ…å«ç”¨å„ç§å†å²ç‰ˆæœ¬çš„æ¨¡å¼ç¼–ç çš„è®°å½•ã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:1:1","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸè¶…å‡ºä»£ç çš„ç”Ÿå‘½å‘¨æœŸ"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®å½’æ¡£åˆ›å»ºæ•°æ®å¿«ç…§æ—¶ï¼Œå³ä½¿æºæ•°æ®åº“ä¸­çš„åŸå§‹ç¼–ç åŒ…å«æ¥è‡ªä¸åŒæ—¶ä»£çš„æ¨¡å¼ç‰ˆæœ¬çš„æ··åˆï¼Œæ•°æ®è½¬å‚¨é€šå¸¸ä¹Ÿå°†ä½¿ç”¨æœ€æ–°æ¨¡å¼è¿›è¡Œç¼–ç ã€‚æ—¢ç„¶ä½ ä¸ç®¡æ€æ ·éƒ½è¦æ‹·è´æ•°æ®ï¼Œé‚£ä¹ˆä½ å¯ä»¥å¯¹è¿™ä¸ªæ•°æ®æ‹·è´è¿›è¡Œä¸€è‡´çš„ç¼–ç ã€‚ ç”±äºæ•°æ®è½¬å‚¨æ˜¯ä¸€æ¬¡å†™å…¥çš„ï¼Œè€Œä¸”ä»¥åæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ Avro å¯¹è±¡å®¹å™¨æ–‡ä»¶ç­‰æ ¼å¼éå¸¸é€‚åˆã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æœºä¼šï¼Œå¯ä»¥å°†æ•°æ®ç¼–ç ä¸ºé¢å‘åˆ†æçš„åˆ—å¼æ ¼å¼ï¼Œä¾‹å¦‚ Parquetã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:1:2","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#æ•°æ®å½’æ¡£"},{"categories":["æŠ€æœ¯"],"content":" æœåŠ¡ä¸­çš„æ•°æ®æµï¼šREST ä¸ RPCå½“ä½ éœ€è¦é€šè¿‡ç½‘ç»œåœ¨è¿›ç¨‹é—´é€šä¿¡æ—¶ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæœ€å¸¸è§çš„æ˜¯é‡‡ç”¨ cs æ¶æ„ï¼Œå³ æœåŠ¡ç«¯ é€šè¿‡ç½‘ç»œæš´éœ² APIï¼Œå®¢æˆ·ç«¯é€šè¿‡ç½‘ç»œå‘æœåŠ¡ç«¯çš„ API å‘å‡ºè¯·æ±‚ã€‚ æœåŠ¡å™¨å…¬å¼€çš„ API è¢«ç§°ä¸º æœåŠ¡ ã€‚ Web æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œå®¢æˆ·ç«¯ï¼ˆå³æµè§ˆå™¨ï¼‰æƒ³æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œé€šè¿‡ GET è¯·æ±‚ä¸‹è½½ HTMLï¼ŒCSSï¼ŒJavaScriptï¼Œå›¾ç‰‡ç­‰ï¼Œé€šè¿‡ POST è¯·æ±‚å‘é€æ•°æ®ç»™æœåŠ¡å™¨ã€‚API åŒ…å«ä¸€ç»„åè®®å’Œæ•°æ®æ ¼å¼ï¼ˆHTTPï¼ŒURLs, SSL/TLS, HTMLï¼Œç­‰ï¼‰ã€‚æµè§ˆå™¨ã€webæœåŠ¡å™¨ï¼Œç½‘ç«™ä½œè€…éƒ½åŒæ„è¿™äº›æ ‡å‡†ã€‚ é™¤äº†æµè§ˆå™¨ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–å®¢æˆ·ç«¯ï¼Œä¾‹å¦‚ï¼Œç§»åŠ¨ç«¯æˆ–ç”µè„‘ç«¯çš„appï¼Œæµè§ˆå™¨ä¸­çš„å®¢æˆ·ç«¯ JavaScript ç¨‹åºå¯ä»¥ä½¿ç”¨XMLHttpRequestæˆä¸ºå®¢æˆ·ç«¯ã€‚ å¦å¤–æœåŠ¡å™¨æœ¬èº«ä¹Ÿå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªæœåŠ¡çš„å®¢æˆ·ç«¯ï¼ˆå¦‚ Web åº”ç”¨æœåŠ¡å™¨å……å½“æ•°æ®åº“çš„å®¢æˆ·ç«¯ï¼‰ã€‚è¿™ç§æ–¹æ³•é€šå¸¸ç”¨äºå°†å¤§å‹åº”ç”¨ç¨‹åºæŒ‰ç…§åŠŸèƒ½åŒºåŸŸåˆ†è§£ä¸ºè¾ƒå°çš„æœåŠ¡ï¼Œè¿™æ ·å½“ä¸€ä¸ªæœåŠ¡éœ€è¦æ¥è‡ªå¦ä¸€ä¸ªæœåŠ¡çš„æŸäº›åŠŸèƒ½æˆ–æ•°æ®æ—¶ï¼Œå°±ä¼šå‘å¦ä¸€ä¸ªæœåŠ¡å‘å‡ºè¯·æ±‚ã€‚è¿™ç§æ„å»ºåº”ç”¨ç¨‹åºçš„æ–¹å¼ä¼ ç»Ÿä¸Šè¢«ç§°ä¸º é¢å‘æœåŠ¡çš„ä½“ç³»ç»“æ„ï¼ˆservice-oriented architectureï¼ŒSOAï¼‰ ï¼Œæœ€è¿‘è¢«æ”¹è¿›å’Œæ›´åä¸º å¾®æœåŠ¡æ¶æ„ ã€‚ æœåŠ¡ç±»ä¼¼äºæ•°æ®åº“ï¼Œç›¸åŒç‚¹ï¼Œå…è®¸å®¢æˆ·ç«¯æäº¤å’ŒæŸ¥è¯¢æ•°æ®ã€‚ä¸åŒä¹‹å¤„ï¼Œæ•°æ®åº“å…è®¸ä½¿ç”¨ç‰¹å®šçš„æŸ¥è¯¢è¯­è¨€è¿›è¡Œä»»æ„æŸ¥è¯¢ï¼Œä½†æœåŠ¡åªå…¬å¼€äº†ä¸€ä¸ªç‰¹å®šäºåº”ç”¨ç¨‹åºçš„ API ï¼ˆåªå…è®¸ç”±æœåŠ¡ä¸šåŠ¡é€»è¾‘é¢„å®šä¹‰çš„è¾“å…¥å’Œè¾“å‡ºï¼‰ã€‚è¿™ç§é™åˆ¶æ ä¾›äº†ä¸€å®šç¨‹åº¦çš„å°è£…ï¼šæœåŠ¡å¯ä»¥å¯¹å®¢æˆ·å¯ä»¥åšä»€ä¹ˆå’Œä¸å¯ä»¥åšä»€ä¹ˆæ–½åŠ ç»†ç²’åº¦çš„é™åˆ¶ã€‚ é¢å‘æœåŠ¡/å¾®æœåŠ¡æ¶æ„çš„ä¸€ä¸ªå…³é”®è®¾è®¡ç›®æ ‡æ˜¯é€šè¿‡ä½¿æœåŠ¡ç‹¬ç«‹éƒ¨ç½²å’Œæ¼”åŒ–æ¥ä½¿åº”ç”¨ç¨‹åºæ›´æ˜“äºæ›´æ”¹å’Œç»´æŠ¤ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªæœåŠ¡åº”è¯¥ç”±ä¸€ä¸ªå›¢é˜Ÿæ‹¥æœ‰ï¼Œå¹¶ä¸”è¯¥å›¢é˜Ÿåº”è¯¥èƒ½å¤Ÿç»å¸¸å‘å¸ƒæ–°ç‰ˆæœ¬çš„æœåŠ¡ï¼Œè€Œä¸å¿…ä¸å…¶ä»–å›¢é˜Ÿåè°ƒã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åº”è¯¥æœŸæœ›æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„æ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬åŒæ—¶è¿è¡Œï¼Œå› æ­¤æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä½¿ç”¨çš„æ•°æ®ç¼–ç å¿…é¡»åœ¨ä¸åŒç‰ˆæœ¬çš„æœåŠ¡APIä¹‹é—´å…¼å®¹ã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:2:0","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#æœåŠ¡ä¸­çš„æ•°æ®æµrest-ä¸-rpc"},{"categories":["æŠ€æœ¯"],"content":" WebæœåŠ¡å½“æœåŠ¡ä½¿ç”¨HTTPä½œä¸ºåº•å±‚é€šä¿¡åè®®æ—¶ï¼Œå¯ç§°ä¹‹ä¸ºWebæœåŠ¡ã€‚ä¸ä»…åœ¨Webä¸Šä½¿ç”¨ï¼Œè¿˜å¯ä»¥ç”¨äºä¸åŒçš„ç¯å¢ƒä¸­ã€‚å¦‚ï¼š å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºï¼ˆç§»åŠ¨è®¾å¤‡ä¸Šçš„appï¼Œä½¿ç”¨Ajaxçš„ JS åº”ç”¨ç¨‹åºï¼‰é€šè¿‡ HTTP åƒæœåŠ¡å‘å‡ºè¯·æ±‚ã€‚é€šå¸¸é€šè¿‡å…¬å…±äº’è”ç½‘è¿›è¡Œã€‚ ä¸€ç§æœåŠ¡å‘åŒç»„ç»‡æ‹¥æœ‰çš„å¦ä¸€é¡¹æœåŠ¡æå‡ºè¯·æ±‚ï¼Œè¿™äº›æœåŠ¡é€šå¸¸ä½äºåŒä¸€æ•°æ®ä¸­å¿ƒï¼Œä½œä¸ºé¢å‘æœåŠ¡/å¾®å‹æ¶æ„çš„ä¸€éƒ¨åˆ†ã€‚ï¼ˆæ”¯æŒè¿™ç§ç”¨ä¾‹çš„è½¯ä»¶æœ‰æ—¶è¢«ç§°ä¸ºä¸­é—´ä»¶ï¼‰ã€‚ ä¸€ç§æœåŠ¡é€šè¿‡äº’è¿ç½‘å‘ä¸åŒçš„ç»„ç»‡æ‰€æ‹¥æœ‰çš„æœåŠ¡æå‡ºè¯·æ±‚ã€‚ç”¨äºä¸åŒç»„ç»‡åç«¯ç³»ç»Ÿä¹‹å‰çš„æ•°æ®äº¤æ¢ã€‚å¦‚åœ¨çº¿æœåŠ¡æä¾›çš„å…¬å…± APIï¼Œç”¨æˆ·å…±äº«ç”¨æˆ·æ•°æ®çš„OAuth ç­‰ã€‚ ç”±ä¸¤ç§æµè¡Œçš„æœåŠ¡æ–¹æ³•ï¼š REST å’Œ SOAPã€‚ REST ä¸æ˜¯ä¸€ä¸ªåè®®ï¼Œæ˜¯åŸºäºHTTPåŸåˆ™çš„è®¾è®¡å“²å­¦ã€‚å¼ºè°ƒç®€å•çš„æ•°æ®æ ¼å¼ï¼Œä½¿ç”¨ URL æ¥æ ‡è®°èµ„æºï¼Œä½¿ç”¨ HTTP åŠŸèƒ½æ¥è¿›è¡Œç¼“å­˜æ§åˆ¶ï¼Œèº«ä»½éªŒè¯å’Œå†…å®¹ç±»å‹åå•†ã€‚æ ¹æ® REST åŸåˆ™è®¾è®¡çš„ API ç§°ä¸º RESTful ã€‚ SOAPæ˜¯ä¸€ç§åŸºäºXMLçš„ç”¨äºå‘èµ·ç½‘ç»œAPIè¯·æ±‚çš„åè®®ã€‚å°½ç®¡å®ƒæœ€å¸¸ç”¨äºHTTPä¸Šï¼Œä½†å®ƒçš„ç›®æ ‡æ˜¯ç‹¬ç«‹äºHTTPï¼Œå¹¶é¿å…ä½¿ç”¨å¤§å¤šæ•°HTTPç‰¹æ€§ã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:2:1","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#webæœåŠ¡"},{"categories":["æŠ€æœ¯"],"content":" è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰çš„é—®é¢˜RPCæ¨¡å‹è¯•å›¾å‘è¿œç¨‹ç½‘ç»œæœåŠ¡å‘å‡ºè¯·æ±‚ï¼Œçœ‹èµ·æ¥ä¸åœ¨åŒä¸€è¿›ç¨‹ä¸­è°ƒç”¨ç¼–ç¨‹è¯­è¨€ä¸­çš„å‡½æ•°æˆ–æ–¹æ³•ç›¸åŒï¼ˆè¿™ç§æŠ½è±¡ç§°ä¸ºä½ç½®é€æ˜ï¼‰ã€‚å°½ç®¡RPCèµ·åˆçœ‹èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†è¿™ç§æ–¹æ³•æ ¹æœ¬ä¸Šæ˜¯æœ‰ç¼ºé™·çš„ã€‚ç½‘ç»œè¯·æ±‚ä¸æœ¬åœ°å‡½æ•°è°ƒç”¨éå¸¸ä¸åŒï¼š æœ¬åœ°å‡½æ•°å¯é¢„æµ‹ï¼ŒæˆåŠŸæˆ–å¤±è´¥å–å†³äºå‚æ•°ã€‚ç½‘ç»œè¯·æ±‚ä¸å¯é¢„çŸ¥ï¼šç½‘ç»œé—®é¢˜ï¼Œè¯·æ±‚å’Œå“åº”å¯èƒ½ä¸¢å¤±ï¼Œè¿œç¨‹è®¡ç®—æœºå¯èƒ½å¾ˆæ…¢æˆ–ä¸å¯ç”¨ï¼Œè¿™äº›é—®é¢˜ä¸åœ¨æ‚¨çš„æ§åˆ¶èŒƒå›´ä¸”å¸¸è§ï¼Œæ‰€ä»¥ä½ å¿…é¡»é¢„æµ‹å¹¶åº”å¯¹å®ƒä»¬ï¼Œæ¯”å¦‚é‡è¯•å¤±è´¥çš„è¯·æ±‚ã€‚ æœ¬åœ°å‡½æ•°è¦ä¹ˆè¿”å›ç»“æœï¼Œè¦ä¹ˆæŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–æ°¸è¿œä¸è¿”å›ï¼ˆè¿›å…¥æ— é™å¾ªç¯æˆ–è¿›ç¨‹å´©æºƒï¼‰ã€‚ç½‘ç»œè¯·æ±‚å¯èƒ½ç”±äºè¶…æ—¶ä¸è¿”å›ç»“æœï¼Œå¦‚æœä½ æ²¡æœ‰æ”¶åˆ°æ¥è‡ªè¿œç¨‹æœåŠ¡çš„å“åº”ï¼Œå¯èƒ½çš„åŸå› æœ‰æœåŠ¡å™¨å‡ºé”™ï¼Œç½‘ç»œè¶…æ—¶ï¼ˆè¯·æ±‚æœªåˆ°è¾¾ï¼Œå“åº”æœªåˆ°è¾¾ï¼‰ã€‚ è°ƒç”¨æœ¬åœ°åŠŸèƒ½ï¼Œé€šå¸¸éœ€è¦çš„æ—¶é—´æ˜¯å¤§è‡´ç›¸åŒçš„ã€‚ç½‘ç»œè¯·æ±‚æ¯”æœ¬åœ°å‡½æ•°è°ƒç”¨æ…¢çš„å¤šï¼Œä¸”å»¶è¿Ÿéå¸¸å¯å˜ï¼šä¸åˆ°ä¸€æ¯«ç§’å¯ä»¥å®Œæˆçš„è¯·æ±‚ï¼Œåœ¨ç½‘ç»œæ‹¥å¡æˆ–è¿œç¨‹æœåŠ¡è¶…è½½æ—¶ï¼Œå¯èƒ½éœ€è¦å‡ ç§’é’Ÿã€‚ è°ƒç”¨æœ¬åœ°å‡½æ•°æ—¶ï¼Œå¯ä»¥é«˜æ•ˆåœ°å°†å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ä¼ é€’ç»™æœ¬åœ°å†…å­˜ä¸­çš„å¯¹è±¡ã€‚å½“ä½ å‘å‡ºä¸€ä¸ªç½‘ç»œè¯·æ±‚æ—¶ï¼Œæ‰€æœ‰è¿™äº›å‚æ•°éƒ½éœ€è¦è¢«ç¼–ç æˆå¯ä»¥é€šè¿‡ç½‘ç»œå‘é€çš„ä¸€ç³»åˆ—å­—èŠ‚ã€‚å¯¹äºå­—ç¬¦ä¸²å’Œæ•°å­—æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¯¹äºè¾ƒå¤§çš„å¯¹è±¡å¯èƒ½å°±ä¼šæˆä¸ºé—®é¢˜ã€‚ å®¢æˆ·ç«¯å’ŒæœåŠ¡å¯ä»¥ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å®ç°ï¼Œæ‰€ä»¥RPCæ¡†æ¶å¿…é¡»å°†æ•°æ®ç±»å‹ä»ä¸€ç§è¯­è¨€ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€ã€‚è¿™å¯èƒ½ä¼šæ…å‡ºå¤§ç¯“å­ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„è¯­è¨€éƒ½å…·æœ‰ç›¸åŒçš„ç±»å‹ ã€‚ç”¨å•ä¸€è¯­è¨€ç¼–å†™çš„å•ä¸ªè¿›ç¨‹ä¸­ä¸å­˜åœ¨æ­¤é—®é¢˜ã€‚ æ‰€æœ‰è¿™äº›å› ç´ æ„å‘³ç€å°è¯•ä½¿è¿œç¨‹æœåŠ¡çœ‹èµ·æ¥åƒç¼–ç¨‹è¯­è¨€ä¸­çš„æœ¬åœ°å¯¹è±¡ä¸€æ ·æ¯«æ— æ„ä¹‰ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ ¹æœ¬ä¸åŒçš„äº‹æƒ…ã€‚ RESTçš„éƒ¨åˆ†å¸å¼•åŠ›åœ¨äºï¼Œå®ƒå¹¶ä¸è¯•å›¾éšè—å®ƒæ˜¯ä¸€ä¸ªç½‘ç»œåè®®çš„äº‹å®ï¼ˆå°½ç®¡è¿™ä¼¼ä¹å¹¶æ²¡æœ‰é˜»æ­¢äººä»¬åœ¨RESTä¹‹ä¸Šæ„å»ºRPCåº“ï¼‰ã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:2:2","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#è¿œç¨‹è¿‡ç¨‹è°ƒç”¨rpcçš„é—®é¢˜"},{"categories":["æŠ€æœ¯"],"content":" RPC çš„å½“å‰æ–¹å‘å°½ç®¡æœ‰è¿™æ ·é‚£æ ·çš„é—®é¢˜ï¼ŒRPCä¸ä¼šæ¶ˆå¤±ã€‚æœ‰å¾ˆå¤šåŸºäºç¼–ç æ ¼å¼çš„RPCæ¡†æ¶ï¼šThriftå’ŒAvroå¸¦æœ‰RPCæ”¯æŒï¼ŒgRPCæ˜¯ä½¿ç”¨Protocol Buffersçš„RPCå®ç°ï¼ŒFinagleä¹Ÿä½¿ç”¨Thriftï¼ŒRest.li ä½¿ç”¨ JSON over HTTP ã€‚ è¿™ç§æ–°ä¸€ä»£çš„RPCæ¡†æ¶æ›´åŠ æ˜ç¡®çš„æ˜¯ï¼Œè¿œç¨‹è¯·æ±‚ä¸æœ¬åœ°å‡½æ•°è°ƒç”¨ä¸åŒã€‚Finagleå’ŒRest.li ä½¿ç”¨futuresï¼ˆpromisesï¼‰æ¥å°è£…å¯èƒ½å¤±è´¥çš„å¼‚æ­¥æ“ä½œã€‚ Futures è¿˜å¯ä»¥ç®€åŒ–éœ€è¦å¹¶è¡Œå‘å‡ºå¤šé¡¹æœåŠ¡çš„æƒ…å†µï¼Œå¹¶å°†å…¶ç»“æœåˆå¹¶ã€‚gRPCæ”¯æŒæµï¼Œå…¶ä¸­ä¸€ä¸ªè°ƒç”¨ä¸ä»…åŒ…æ‹¬ä¸€ä¸ªè¯·æ±‚å’Œä¸€ä¸ªå“åº”ï¼Œè¿˜åŒ…æ‹¬ä¸€ç³»åˆ—çš„è¯·æ±‚å’Œå“åº” å…¶ä¸­ä¸€äº›æ¡†æ¶è¿˜æä¾›æœåŠ¡å‘ç°ï¼Œå³å…è®¸å®¢æˆ·ç«¯æ‰¾å‡ºåœ¨å“ªä¸ªIPåœ°å€å’Œç«¯å£å·ä¸Šå¯ä»¥æ‰¾åˆ°ç‰¹å®šçš„æœåŠ¡ã€‚ ä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç æ ¼å¼çš„è‡ªå®šä¹‰RPCåè®®å¯ä»¥å®ç°æ¯”é€šç”¨çš„JSON over RESTæ›´å¥½çš„æ€§èƒ½ã€‚ä½†æ˜¯ï¼ŒRESTful APIè¿˜æœ‰å…¶ä»–ä¸€äº›æ˜¾è‘—çš„ä¼˜ç‚¹ï¼š å®éªŒå’Œè°ƒè¯•æ›´å‹å¥½ï¼ˆåªéœ€ä½¿ç”¨Webæµè§ˆå™¨æˆ–å‘½ä»¤è¡Œå·¥å…·curlï¼Œæ— éœ€ä»»ä½•ä»£ç ç”Ÿæˆæˆ–è½¯ä»¶å®‰è£…å³å¯å‘å…¶è¯·æ±‚ï¼‰ å®ƒå—åˆ°æ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€å’Œå¹³å°çš„æ”¯æŒï¼Œå¹¶ä¸”æ‹¥æœ‰åºå¤§çš„å·¥å…·ç”Ÿæ€ç³»ç»Ÿï¼ˆæœåŠ¡å™¨ã€ç¼“å­˜ã€è´Ÿè½½å‡è¡¡å™¨ã€ä»£ç†ã€é˜²ç«å¢™ã€ç›‘æ§ã€è°ƒè¯•å·¥å…·ã€æµ‹è¯•å·¥å…·ç­‰ï¼‰å¯ä¾›ä½¿ç”¨ã€‚ ç”±äºè¿™äº›åŸå› ï¼ŒREST ä¼¼ä¹æ˜¯å…¬å…± API çš„ä¸»è¦é£æ ¼ã€‚ RPCæ¡†æ¶çš„ä¸»è¦é‡ç‚¹åœ¨äºåŒä¸€ç»„ç»‡æ‹¥æœ‰çš„æœåŠ¡ä¹‹é—´çš„è¯·æ±‚ï¼Œé€šå¸¸åœ¨åŒä¸€æ•°æ®ä¸­å¿ƒå†…ã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:2:3","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#rpc-çš„å½“å‰æ–¹å‘"},{"categories":["æŠ€æœ¯"],"content":" æ¶ˆæ¯ä¼ é€’ä¸­çš„æ•°æ®æµRESTå’ŒRPCï¼šå…¶ä¸­ä¸€ä¸ªè¿›ç¨‹é€šè¿‡ç½‘ç»œå‘å¦ä¸€ä¸ªè¿›ç¨‹å‘é€è¯·æ±‚å¹¶æœŸæœ›å°½å¯èƒ½å¿«çš„å“åº”ã€‚ æ•°æ®åº“ï¼šä¸€ä¸ªè¿›ç¨‹å†™å…¥ç¼–ç æ•°æ®ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹åœ¨å°†æ¥å†æ¬¡è¯»å–ã€‚ å¼‚æ­¥æ¶ˆæ¯ä¼ è¾“ æ˜¯ä»‹äº RPC å’Œ æ•°æ®åº“ä¹‹é—´çš„ è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ã€‚ç±»ä¼¼ RPC å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼ˆé€šå¸¸ç§°ä¸ºæ¶ˆæ¯ï¼‰ä»¥ä½å»¶è¿Ÿä¼ é€åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œç±»ä¼¼äºæ•°æ®åº“ï¼Œä¸æ˜¯é€šè¿‡ç›´æ¥çš„ç½‘ç»œè¿æ¥å‘é€æ¶ˆæ¯ï¼Œè€Œæ˜¯é€šè¿‡ç§°ä¸ºæ¶ˆæ¯ä»£ç†ï¼ˆä¹Ÿç§°ä¸ºæ¶ˆæ¯é˜Ÿåˆ—æˆ–é¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶ï¼‰çš„ä¸­ä»‹æ¥ä¸´æ—¶å­˜å‚¨æ¶ˆæ¯ã€‚ VS RPCçš„ä¼˜ç‚¹ï¼š æ¥å—ç«¯ä¸å¯ç”¨æˆ–è€…è¿‡è½½æ—¶ï¼Œå……å½“ç¼“å†²åŒºï¼Œå¯é æ€§++ã€‚ è‡ªåŠ¨çš„é‡ä¼ æ¶ˆæ¯åˆ°å·²ç»å´©æºƒçš„è¿›ç¨‹ï¼Œé˜²æ­¢ä¸¢å¤±ã€‚ é¿å…å‘é€æ–¹çŸ¥é“æ¥æ”¶æ–¹çš„IPå’Œç«¯å£ï¼ˆäº‘éƒ¨ç½²ç¯å¢ƒä¸­ï¼Œè™šæ‹Ÿæœºç»å¸¸åˆ›å»ºå’Œé”€æ¯ï¼Œæ¯”è¾ƒæœ‰ç”¨ï¼‰ å…è®¸ä¸€æ¡æ¶ˆæ¯å‘é€ç»™å¤šä¸ªæ¥å—ç«¯ã€‚ å‘é€ç«¯å’Œæ¥æ”¶ç«¯é€»è¾‘åˆ†ç¦»ã€‚ æ¶ˆæ¯ä¼ é€’é€šä¿¡é€šå¸¸æ˜¯å•å‘çš„ï¼ŒRPCæ˜¯åŒå‘çš„ã€‚å‘é€è€…é€šå¸¸ä¸æœŸæœ›æ”¶åˆ°æ¶ˆæ¯çš„å›å¤ã€‚ä½†æ˜¯å›å¤ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ï¼Œé€šå¸¸æ˜¯åœ¨å¦å¤–ä¸€ä¸ªå•ç‹¬çš„é€šé“ï¼ˆchannelï¼‰ä¸Šï¼Œè¿™ç§æ¨¡å¼å«ä½œ å¼‚æ­¥ ã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:3:0","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#æ¶ˆæ¯ä¼ é€’ä¸­çš„æ•°æ®æµ"},{"categories":["æŠ€æœ¯"],"content":" æ¶ˆæ¯ä»£ç†å¼€æºæ–¹æ¡ˆï¼š RabbitMQï¼ŒActiveMQï¼ŒHornetQï¼ŒNATSï¼ŒApache Kafka æ¶ˆæ¯ä»£ç†çš„å¤§è‡´é€»è¾‘ï¼š ä¸€ä¸ªè¿›ç¨‹ï¼ˆç§°ä¸ºç”Ÿäº§è€…ï¼‰å°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªè¢«å‘½åçš„é˜Ÿåˆ—æˆ–ä¸»é¢˜ï¼ˆtopicï¼‰ï¼Œè€Œæ¶ˆæ¯ä»£ç†ï¼ˆå³ç»çºªäººï¼‰è´Ÿè´£ç¡®ä¿è¯¥æ¶ˆæ¯è¢«ä¼ é€’ç»™è®¢é˜…äº†è¯¥é˜Ÿåˆ—æˆ–ä¸»é¢˜çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ¶ˆè´¹è€…ã€‚ é˜Ÿåˆ—æˆ–ä¸»é¢˜ï¼ˆtopicï¼‰æ˜¯å•å‘çš„ã€‚ä½†æ˜¯ï¼Œæ¶ˆæ¯çš„æ¶ˆè´¹è€…å¯ä»¥å°†å›å¤çš„æ¶ˆæ¯å‘å¸ƒåˆ°å¦ä¸€ä¸ªä¸»é¢˜æˆ–è€…åŸå§‹æ¶ˆæ¯å‘é€è€…ä½¿ç”¨çš„å›å¤é˜Ÿåˆ—ï¼ˆå°±ç±»ä¼¼ä¸RPCäº†ï¼‰ã€‚ æ¶ˆæ¯ä»£ç†é€šå¸¸ä¸å¼ºåˆ¶ç‰¹å®šçš„æ•°æ®æ¨¡å‹â€”â€”ä¸€ä¸ªæ¶ˆæ¯ç»Ÿç§°åªæ˜¯ä¸€ä¸ªåŒ…å«å…ƒæ•°æ®çš„å­—èŠ‚æµã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:3:1","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#æ¶ˆæ¯ä»£ç†"},{"categories":["æŠ€æœ¯"],"content":" åˆ†å¸ƒå¼ actor æ¡†æ¶actor æ¨¡å‹æ˜¯å•è¿›ç¨‹çš„å¹¶å‘æ¨¡å‹ã€‚å¯¹æ¯”ç›´æ¥æ“ä½œçº¿ç¨‹ï¼ˆçº¿ç¨‹å­˜åœ¨çš„é—®é¢˜ç«äº‰æ¡ä»¶ï¼Œé”ï¼Œæ­»é”ï¼‰ï¼Œé€»è¾‘è¢«å°è£…åœ¨ actor ä¸­ï¼Œæ¯ä¸ª actor ä»£è¡¨ä¸€ä¸ªå®¢æˆ·å’Œå®ä½“ï¼Œå®ƒæœ‰ä¸€äº›æœ¬åœ°çŠ¶æ€ï¼ˆä¸ä¸å…¶ä»– actor å…±äº«ï¼‰ï¼Œé€šè¿‡å‘é€å’Œæ¥å—å¼‚æ­¥æ¶ˆæ¯æ¥ä¸å…¶ä»– actor é€šä¿¡ã€‚æ¶ˆæ¯ä¼ é€’ä¸å…·æœ‰ä¿éšœæ€§ï¼Œå¯èƒ½ä¸¢å¤±ã€‚ åœ¨åˆ†å¸ƒå¼çš„ Actoræ¡†æ¶ä¸­ï¼Œæ­¤æ¨¡å‹ç”¨äºè·¨å¤šä¸ªèŠ‚ç‚¹ä¼¸ç¼©åº”ç”¨ç¨‹åºã€‚ä¸ç®¡å‘é€æ–¹å’Œæ¥æ”¶æ–¹æ˜¯ç›¸åŒè¿˜æ˜¯ä¸åŒçš„èŠ‚ç‚¹ï¼Œéƒ½æ˜¯ç”¨ç›¸åŒçš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€‚å¦‚æœå®ƒä»¬ä½äºä¸åŒçš„èŠ‚ç‚¹ï¼Œæ¶ˆæ¯åˆ™è¢«é€æ˜ç¼–ç ä¸ºå­—èŠ‚åºåˆ—ï¼Œé€šè¿‡ç½‘ç»œå‘é€ï¼Œç„¶ååœ¨å¦ä¸€ä¾§è§£ç ã€‚ åœ¨ä½¿ç”¨Actoræ¨¡å‹æ—¶ï¼Œç”±äºè¯¥æ¨¡å‹å·²ç»å‡è®¾äº†æ¶ˆæ¯å¯èƒ½ä¼šä¸¢å¤±ï¼Œå› æ­¤ä½ç½®é€æ˜æ€§æ•ˆæœæ›´å¥½ï¼ˆç›¸æ¯” RPC ï¼‰ã€‚å³ä½¿åœ¨å•ä¸ªè¿›ç¨‹å†…éƒ¨ï¼ŒActoræ¨¡å‹ä¹Ÿèƒ½å¤„ç†æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µã€‚å°½ç®¡ç½‘ç»œå»¶è¿Ÿå¯èƒ½æ¯”åŒä¸€è¿›ç¨‹å†…éƒ¨æ›´é«˜ï¼Œä½†åœ¨ä½¿ç”¨Actoræ¨¡å‹æ—¶ï¼Œæœ¬åœ°å’Œè¿œç¨‹é€šä¿¡ä¹‹é—´çš„åŸºæœ¬ä¸åŒ¹é…è¾ƒå°‘ï¼Œè¿™æ„å‘³ç€åœ¨è®¾è®¡åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°å¤„ç†æœ¬åœ°å’Œè¿œç¨‹é€šä¿¡ä¹‹é—´çš„å·®å¼‚ã€‚ åˆ†å¸ƒå¼çš„ Actor æ¡†æ¶å®è´¨ä¸Šæ˜¯å°†æ¶ˆæ¯ä»£ç†å’Œ actor ç¼–ç¨‹æ¨¡å‹é›†æˆåˆ°ä¸€ä¸ªæ¡†æ¶ä¸­ã€‚ ä¸‰ä¸ªæµè¡Œçš„åˆ†å¸ƒå¼ actor æ¡†æ¶å¤„ç†æ¶ˆæ¯ç¼–ç å¦‚ä¸‹ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼ŒAkka ä½¿ç”¨ Java çš„å†…ç½®åºåˆ—åŒ–ï¼Œä¸æä¾›å‰å‘æˆ–åå‘å…¼å®¹æ€§ã€‚ ä½†æ˜¯ï¼Œä½ å¯ä»¥ç”¨ç±»ä¼¼ Prototol Buffers çš„ä¸œè¥¿æ›¿ä»£å®ƒï¼Œä»è€Œè·å¾—æ»šåŠ¨å‡çº§çš„èƒ½åŠ›ã€‚ Orleans é»˜è®¤ä½¿ç”¨ä¸æ”¯æŒæ»šåŠ¨å‡çº§éƒ¨ç½²çš„è‡ªå®šä¹‰æ•°æ®ç¼–ç æ ¼å¼ï¼›è¦éƒ¨ç½²æ–°ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦è®¾ç½®ä¸€ä¸ªæ–°çš„é›†ç¾¤ï¼Œå°†æµé‡ä»æ—§é›†ç¾¤è¿ç§»åˆ°æ–°é›†ç¾¤ï¼Œç„¶åå…³é—­æ—§é›†ç¾¤ã€‚ åƒ Akka ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—åŒ–æ’ä»¶ã€‚ åœ¨ Erlang OTP ä¸­ï¼Œå¯¹è®°å½•æ¨¡å¼è¿›è¡Œæ›´æ”¹æ˜¯éå¸¸å›°éš¾çš„ï¼ˆå°½ç®¡ç³»ç»Ÿå…·æœ‰è®¸å¤šä¸ºé«˜å¯ç”¨æ€§è®¾è®¡çš„åŠŸèƒ½ï¼‰ã€‚ æ»šåŠ¨å‡çº§æ˜¯å¯èƒ½çš„ï¼Œä½†éœ€è¦ä»”ç»†è®¡åˆ’ã€‚ ä¸€ä¸ªæ–°çš„å®éªŒæ€§çš„ maps æ•°æ®ç±»å‹ï¼ˆ2014 å¹´åœ¨ Erlang R17 ä¸­å¼•å…¥çš„ç±»ä¼¼äº JSON çš„ç»“æ„ï¼‰å¯èƒ½ä½¿å¾—è¿™ä¸ªæ•°æ®ç±»å‹åœ¨æœªæ¥æ›´å®¹æ˜“ã€‚ ","date":"2023-09-07","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/:3:2","series":null,"tags":["æ•°æ®å¯†é›†","æ•°æ®æµ","dataflow","ä¸å…±äº«å†…å­˜æ•°æ®ä¼ é€’"],"title":"æ•°æ®æµçš„ç±»å‹","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E6%B5%81%E7%9A%84%E7%B1%BB%E5%9E%8B/#åˆ†å¸ƒå¼-actor-æ¡†æ¶"},{"categories":["æŠ€æœ¯"],"content":"ç¨‹åºé€šå¸¸ï¼ˆè‡³å°‘ï¼‰ä½¿ç”¨ä¸¤ç§å½¢å¼çš„æ•°æ®ï¼š å†…å­˜ä¸­ï¼Œæ•°æ®å­˜å‚¨åœ¨å¯¹è±¡ã€ç»“æ„ä½“ã€åˆ—è¡¨ã€æ•°ç»„ã€æ•£åˆ—è¡¨ã€æ ‘ç­‰ä¸­ã€‚è¿™äº›æ•°æ®ç»“æ„é’ˆå¯¹CPUçš„é«˜æ•ˆè®¿é—®å’Œæ“ä½œåšäº†ä¼˜åŒ–ï¼ˆé€šå¸¸ä½¿ç”¨æŒ‡é’ˆï¼‰ã€‚ å¦‚æœè¦å°†æ•°æ®å†™å…¥æ–‡ä»¶ï¼Œæˆ–è€…é€šè¿‡ç½‘ç»œå‘é€ï¼Œåˆ™å¿…é¡»å°†å…¶ ç¼–ç ï¼ˆencodeï¼‰ ä¸ºæŸç§è‡ªåŒ…å«çš„å­—èŠ‚åºåˆ—ï¼ˆå¦‚ï¼šjsonæ–‡æ¡£ï¼‰ã€‚ç”±äºæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­çš„æŒ‡é’ˆå¯¹ä»»ä½•å…¶ä»–è¿›ç¨‹éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥è¿™ä¸ªå­—èŠ‚åºåˆ—è¡¨ç¤º ä¸ é€šå¸¸åœ¨å†…å­˜ä¸­ä½¿ç”¨çš„æ•°æ®ç»“æ„å®Œå…¨ä¸åŒ ï¼ˆé™¤äº†ä¸€äº›ç‰¹æ®Šæƒ…å†µå¤–ï¼Œå¦‚æŸäº›å†…å­˜æ˜ å°„æ–‡ä»¶æˆ–ç›´æ¥å‹ç¼©æ•°æ®ä¸Šçš„æ“ä½œï¼‰ã€‚ æ‰€ä»¥ï¼Œä¸¤è€…è¡¨ç¤ºä¹‹é—´ï¼Œéœ€è¦è¿›è¡ŒæŸç§ç±»å‹çš„ç¿»è¯‘ã€‚ ä»å†…å­˜ä¸­è¡¨ç¤º â€”\u003e å­—èŠ‚åºåˆ— ï¼š ç¼–ç ï¼ˆEncodingï¼‰ï¼ˆä¹Ÿç§° åºåˆ—åŒ–ï¼ˆserializationï¼‰ ã€æˆ– ç¼–ç»„ï¼ˆmarshallingï¼‰ï¼‰ å­—èŠ‚åºåˆ— â€”\u003e å†…å­˜ï¼š è§£ç ï¼ˆDecodingï¼‰ ï¼ˆä¹Ÿç§° è§£æï¼ˆParsingï¼‰ï¼Œååºåˆ—åŒ–ï¼ˆdeserialization), åç¼–ç»„ï¼ˆunmarshalling) ps1ï¼šç¼–ç ï¼ˆencodeï¼‰å’Œ åŠ å¯†ï¼ˆencryptionï¼‰ æ— å…³ã€‚ ps2ï¼šMarshal ä¸ Serialization çš„åŒºåˆ«ï¼šMarshal ä¸ä»…ä¼ è¾“å¯¹è±¡çš„çŠ¶æ€ï¼Œè€Œä¸”ä¼šä¸€èµ·ä¼ è¾“å¯¹è±¡çš„æ–¹æ³•ï¼ˆç›¸å…³ä»£ç ï¼‰ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:0:0","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#"},{"categories":["æŠ€æœ¯"],"content":" JSONã€XMLå’ŒäºŒè¿›åˆ¶å˜ä½“JSONï¼ŒXML å’Œ CSV å±äºæ–‡æœ¬æ ¼å¼ï¼Œå› æ­¤å…·æœ‰äººç±»å¯è¯»æ€§ï¼ˆå°½ç®¡å®ƒä»¬çš„è¯­æ³•æ˜¯ä¸€ä¸ªçƒ­é—¨äº‰è®®è¯é¢˜ï¼‰ã€‚é™¤äº†è¡¨é¢çš„è¯­æ³•é—®é¢˜ä¹‹å¤–ï¼Œå®ƒä»¬ä¹Ÿå­˜åœ¨ä¸€äº›å¾®å¦™çš„é—®é¢˜ï¼š æ•°å­—ç¼–ç çš„æ¨¡ç³Šã€‚XML å’Œ CSV æ— æ³•å¤„ç†åŒºåˆ†æ•°å­—å’Œå­—ç¬¦ä¸²ï¼ˆé™¤éä½¿ç”¨å¤–éƒ¨æ¨¡å¼ï¼‰ã€‚JSON è™½ç„¶å¯ä»¥åŒºåˆ†æ•°å­—å’Œå­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä¸èƒ½åŒºåˆ†æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œä¸”ä¸èƒ½æŒ‡å®šç²¾åº¦ã€‚å¤„ç†å¤§æ•°æ—¶è¿™æ˜¯ä¸ªé—®é¢˜ã€‚å¤§äº 2^53 çš„æ•´æ•°æ— æ³•ä½¿ç”¨ IEEE754 åŒç²¾åº¦æµ®ç‚¹æ•°è¡¨ç¤ºã€‚ JSON å’Œ XML å¯¹ Unicode å­—ç¬¦ä¸²æœ‰å¾ˆå¥½çš„æ”¯æŒï¼Œä½†æ˜¯å®ƒä»¬ä¸æ”¯æŒäºŒè¿›åˆ¶æ•°æ®ï¼ˆå³ä¸å¸¦å­—ç¬¦ç¼–ç çš„å­—èŠ‚åºåˆ—ï¼‰ã€‚ XMLå’ŒJSONéƒ½æœ‰å¯é€‰çš„æ¨¡å¼æ”¯æŒã€‚è¿™äº›æ¨¡å¼è¯­è¨€éå¸¸å¼ºå¤§ï¼Œå› æ­¤å­¦ä¹ å’Œå®ç°å®ƒä»¬ç›¸å¯¹å¤æ‚ã€‚XMLæ¨¡å¼çš„ä½¿ç”¨ç›¸å¯¹å¹¿æ³›ï¼Œä½†è®¸å¤šåŸºäºJSONçš„å·¥å…·å¹¶ä¸ä½¿ç”¨æ¨¡å¼ã€‚ç”±äºæ•°æ®çš„æ­£ç¡®è§£é‡Šï¼ˆä¾‹å¦‚æ•°å­—å’ŒäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼‰å–å†³äºæ¨¡å¼ä¸­çš„ä¿¡æ¯ï¼Œä¸ä½¿ç”¨XML/JSONæ¨¡å¼çš„åº”ç”¨ç¨‹åºéœ€è¦åœ¨ç¼–ç /è§£ç é€»è¾‘ä¸­å¯èƒ½ç¡¬ç¼–ç é€‚å½“çš„å¤„ç†æ–¹å¼ã€‚ CSVï¼ˆé€—å·åˆ†éš”å€¼ï¼‰æ²¡æœ‰ä»»ä½•æ¨¡å¼ï¼Œå› æ­¤åº”ç”¨ç¨‹åºéœ€è¦è‡ªè¡Œå®šä¹‰æ¯è¡Œå’Œæ¯åˆ—çš„å«ä¹‰ã€‚å¦‚æœåº”ç”¨ç¨‹åºæ›´æ”¹å¯¼è‡´æ·»åŠ æ–°çš„è¡Œæˆ–åˆ—ï¼Œæ‚¨å¿…é¡»æ‰‹åŠ¨å¤„ç†è¿™äº›æ›´æ”¹ã€‚CSVæ ¼å¼ä¹Ÿæ¯”è¾ƒæ¨¡ç³Šï¼ˆå¦‚æœå€¼ä¸­åŒ…å«é€—å·æˆ–æ¢è¡Œç¬¦ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿï¼‰ã€‚è™½ç„¶å®ƒçš„è½¬ä¹‰è§„åˆ™å·²ç»æ­£å¼è§„å®šï¼Œä½†å¹¶éæ‰€æœ‰è§£æå™¨éƒ½æ­£ç¡®åœ°å®ç°äº†è¿™äº›è§„åˆ™ã€‚ å°½ç®¡å­˜åœ¨è¿™äº›ç¼ºé™·ï¼Œä½† JSONã€XML å’Œ CSV å¯¹å¾ˆå¤šéœ€æ±‚æ¥è¯´å·²ç»è¶³å¤Ÿå¥½äº†ã€‚å®ƒä»¬å¾ˆå¯èƒ½ä¼šç»§ç»­æµè¡Œä¸‹å»ï¼Œç‰¹åˆ«æ˜¯ä½œä¸ºæ•°æ®äº¤æ¢æ ¼å¼æ¥è¯´ï¼ˆå³å°†æ•°æ®ä»ä¸€ä¸ªç»„ç»‡å‘é€åˆ°å¦ä¸€ä¸ªç»„ç»‡ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªè¦äººä»¬å¯¹æ ¼å¼æ˜¯ä»€ä¹ˆæ„è§ä¸€è‡´ï¼Œæ ¼å¼æœ‰å¤šç¾è§‚æˆ–è€…æ•ˆç‡æœ‰å¤šé«˜æ•ˆå°±æ— æ‰€è°“äº†ã€‚è®©ä¸åŒçš„ç»„ç»‡å°±è¿™äº›ä¸œè¥¿è¾¾æˆä¸€è‡´çš„éš¾åº¦è¶…è¿‡äº†ç»å¤§å¤šæ•°é—®é¢˜ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:1:0","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#jsonxmlå’ŒäºŒè¿›åˆ¶å˜ä½“"},{"categories":["æŠ€æœ¯"],"content":" äºŒè¿›åˆ¶ç¼–ç å¯¹äºä»…åœ¨ç»„ç»‡å†…éƒ¨ä½¿ç”¨çš„æ•°æ®ï¼Œä½¿ç”¨æœ€é€šç”¨çš„ç¼–ç æ ¼å¼çš„å‹åŠ›è¾ƒå°ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é€‰æ‹©æ›´ç´§å‡‘æˆ–æ›´å¿«é€Ÿè§£æçš„æ ¼å¼ã€‚å¯¹äºå°å‹æ•°æ®é›†ï¼Œè¿™äº›æ”¹è¿›å¯èƒ½å¾®ä¸è¶³é“ï¼Œä½†ä¸€æ—¦æ¶‰åŠåˆ°å¤§é‡çš„æ•°æ®ï¼ˆä»¥TBä¸ºå•ä½ï¼‰ï¼Œæ•°æ®æ ¼å¼çš„é€‰æ‹©å°±ä¼šäº§ç”Ÿé‡å¤§å½±å“ã€‚ JSONç›¸æ¯”XMLè¾ƒä¸ºç®€æ´ï¼Œä½†ä¸äºŒè¿›åˆ¶æ ¼å¼ç›¸æ¯”ï¼Œå®ƒä»¬ä»ç„¶ä½¿ç”¨äº†å¤§é‡çš„ç©ºé—´ã€‚è¿™ä¸€è§‚å¯Ÿç»“æœå¯¼è‡´äº†é’ˆå¯¹ JSONï¼ˆä¾‹å¦‚MessagePackã€BSONã€BJSONã€UBJSONã€BISONå’ŒSmileï¼‰å’ŒXMLï¼ˆä¾‹å¦‚WBXMLå’ŒFast Infosetï¼‰çš„å¤§é‡äºŒè¿›åˆ¶ç¼–ç çš„å¼€å‘ã€‚è¿™äº›æ ¼å¼åœ¨å„ä¸ªé¢†åŸŸä¸­è¢«é‡‡ç”¨ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªåƒJSONå’ŒXMLçš„æ–‡æœ¬ç‰ˆæœ¬é‚£æ ·è¢«å¹¿æ³›é‡‡çº³ã€‚ ç”±äºå®ƒä»¬æ²¡æœ‰è§„å®šæ¨¡å¼ï¼Œæ‰€ä»¥å®ƒä»¬éœ€è¦åœ¨ç¼–ç æ•°æ®ä¸­åŒ…å«æ‰€æœ‰çš„å¯¹è±¡å­—æ®µåç§°ã€‚ eg: ç¤ºä¾‹ json æ–‡æ¡£ï¼Œä»¥ä¸‹ä¼šç”¨å¤šç§æ ¼å¼å¯¹è¿™æ®µæ•°æ®è¿›è¡Œç¼–ç  json { \"userName\": \"Martin\", \"favoriteNumber\": 1337, \"interests\": [\"daydreaming\", \"hacking\"] } MessagePack ç¼–ç  ç¬¬ä¸€ä¸ªå­—èŠ‚ 0x83 è¡¨ç¤ºæ¥ä¸‹æ¥æ˜¯ 3 ä¸ªå­—æ®µï¼ˆä½å››ä½ = 0x03ï¼‰çš„ å¯¹è±¡ objectï¼ˆé«˜å››ä½ = 0x80ï¼‰ã€‚ ï¼ˆå¦‚æœæƒ³çŸ¥é“å¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰ 15 ä¸ªä»¥ä¸Šçš„å­—æ®µä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œå­—æ®µçš„æ•°é‡å¡ä¸è¿› 4 ä¸ª bit é‡Œï¼Œé‚£ä¹ˆå®ƒä¼šç”¨å¦ä¸€ä¸ªä¸åŒçš„ç±»å‹æ ‡è¯†ç¬¦ï¼Œå­—æ®µçš„æ•°é‡è¢«ç¼–ç ä¸¤ä¸ªæˆ–å››ä¸ªå­—èŠ‚ï¼‰ã€‚ ç¬¬äºŒä¸ªå­—èŠ‚ 0xa8 è¡¨ç¤ºæ¥ä¸‹æ¥æ˜¯ 8 å­—èŠ‚é•¿ï¼ˆä½å››ä½ = 0x08ï¼‰çš„å­—ç¬¦ä¸²ï¼ˆé«˜å››ä½ = 0x0aï¼‰ã€‚ æ¥ä¸‹æ¥å…«ä¸ªå­—èŠ‚æ˜¯ ASCII å­—ç¬¦ä¸²å½¢å¼çš„å­—æ®µåç§° userNameã€‚ç”±äºä¹‹å‰å·²ç»æŒ‡æ˜é•¿åº¦ï¼Œä¸éœ€è¦ä»»ä½•æ ‡è®°æ¥æ ‡è¯†å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ï¼ˆæˆ–è€…ä»»ä½•è½¬ä¹‰ï¼‰ã€‚ æ¥ä¸‹æ¥çš„ä¸ƒä¸ªå­—èŠ‚å¯¹å‰ç¼€ä¸º 0xa6 çš„å…­ä¸ªå­—æ¯çš„å­—ç¬¦ä¸²å€¼ Martin è¿›è¡Œç¼–ç ï¼Œä¾æ­¤ç±»æ¨ã€‚ äºŒè¿›åˆ¶ç¼–ç é•¿åº¦ä¸º 66 ä¸ªå­—èŠ‚ï¼Œä»…ç•¥å°äºæ–‡æœ¬ JSON ç¼–ç æ‰€å–çš„ 81 ä¸ªå­—èŠ‚ï¼ˆåˆ é™¤äº†ç©ºç™½ï¼‰ã€‚æ‰€æœ‰çš„ JSON çš„äºŒè¿›åˆ¶ç¼–ç åœ¨è¿™æ–¹é¢æ˜¯ç›¸ä¼¼çš„ã€‚ç©ºé—´èŠ‚çœäº†ä¸€ä¸ç‚¹ï¼ˆä»¥åŠè§£æåŠ é€Ÿï¼‰æ˜¯å¦èƒ½å¼¥è¡¥å¯è¯»æ€§çš„æŸå¤±ï¼Œè°ä¹Ÿè¯´ä¸å‡†ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:1:1","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#äºŒè¿›åˆ¶ç¼–ç "},{"categories":["æŠ€æœ¯"],"content":" Thrift ä¸ Protocol BuffersFacebook çš„ Thrift å’Œ Google çš„ Protocol Buffers éƒ½éœ€è¦ä¸€ä¸ªæ¨¡å¼æ¥ç¼–å†™æ•°æ®ï¼š thrift struct Person { 1: required string userName, 2: optional i64 favoriteNumber, 3: optional list\u003cstring\u003e interests } Protocol Buffers çš„æ¨¡å¼çœ‹èµ·æ¥æ˜¯éå¸¸ç›¸ä¼¼ protobuf message Person { required string user_name = 1; optional int64 favorte_number = 2; repeated string interests = 3; } å®ƒä»¬éƒ½å¸¦æœ‰ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œæ ¹æ®ç±»ä¼¼ä»¥ä¸Šç¤ºä¾‹çš„æ¨¡å¼å®šä¹‰ï¼Œç”Ÿæˆå„ç§ç¼–ç¨‹è¯­è¨€å®ç°è¯¥æ¨¡å¼çš„ç±»ã€‚ä½ çš„åº”ç”¨ç¨‹åºå¯ä»¥è°ƒç”¨ç”Ÿæˆçš„ä»£ç å¯¹æ¨¡å¼çš„è®°å½•è¿›è¡Œç¼–ç å’Œè§£ç ã€‚ç¼–ç åçš„æ•°æ®å¦‚ä¸‹ï¼š Thrift æä¾›ä¸¤ç§ä¸åŒçš„äºŒè¿›åˆ¶ç¼–ç æ ¼å¼ï¼ˆè¿·ä¹‹æ“ä½œï¼‰ï¼ŒBinaryProtocol å’Œ CompactProtocolã€‚ï¼ˆpsï¼š å®é™…ä¸Šï¼ŒThrift æœ‰ä¸‰ç§äºŒè¿›åˆ¶åè®®ï¼šBinaryProtocolã€CompactProtocol å’Œ DenseProtocolï¼Œå°½ç®¡ DenseProtocol åªæ”¯æŒ C ++ å®ç°ï¼Œæ‰€ä»¥ä¸ç®—ä½œè·¨è¯­è¨€ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸¤ç§ä¸åŒçš„åŸºäº JSON çš„ç¼–ç æ ¼å¼ã€‚ çœŸé€—ï¼ï¼‰ BinaryProtocol ï¼š ä¸å¿…ä¼ é€’å­—æ®µå…¨åï¼Œåªéœ€ä¼ é€’æ¨¡å¼å®šä¹‰ä¸­çš„æ•°å­—ç¼–å·ï¼Œæ‰€ä»¥æ›´ç´§å‡‘ã€‚ CompactProtocol ï¼š å­—æ®µç±»å‹å’Œæ ‡ç­¾å·æ‰“åŒ…åˆ°å•ä¸ªå­—èŠ‚ä¸­ï¼›å¯å˜é•¿åº¦çš„æ•´æ•°ã€‚æ•°å­— 1337 ä¸æ˜¯ä½¿ç”¨å…¨éƒ¨å…«ä¸ªå­—èŠ‚ï¼Œè€Œæ˜¯ç”¨ä¸¤ä¸ªå­—èŠ‚ç¼–ç ï¼Œæ¯ä¸ªå­—èŠ‚çš„æœ€é«˜ä½ç”¨æ¥æŒ‡ç¤ºæ˜¯å¦è¿˜æœ‰æ›´å¤šçš„å­—èŠ‚ã€‚è¿™æ„å‘³ç€ - 64 åˆ° 63 ä¹‹é—´çš„æ•°å­—è¢«ç¼–ç ä¸ºä¸€ä¸ªå­—èŠ‚ï¼Œ-8192 å’Œ 8191 ä¹‹é—´çš„æ•°å­—ä»¥ä¸¤ä¸ªå­—èŠ‚ç¼–ç ï¼Œç­‰ç­‰ã€‚è¾ƒå¤§çš„æ•°å­—ä½¿ç”¨æ›´å¤šçš„å­—èŠ‚ã€‚ Protocol Buffers ç¼–ç ï¼š éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚ï¼šåœ¨å‰é¢æ‰€ç¤ºçš„æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªå­—æ®µè¢«æ ‡è®°ä¸ºå¿…éœ€æˆ–å¯é€‰ï¼Œä½†æ˜¯è¿™å¯¹å­—æ®µå¦‚ä½•ç¼–ç æ²¡æœ‰ä»»ä½•å½±å“ï¼ˆäºŒè¿›åˆ¶æ•°æ®ä¸­æ²¡æœ‰ä»»ä½•å­—æ®µæŒ‡ç¤ºæŸå­—æ®µæ˜¯å¦å¿…é¡»ï¼‰ã€‚åŒºåˆ«åœ¨äºï¼Œå¦‚æœå­—æ®µè®¾ç½®ä¸º requiredï¼Œä½†æœªè®¾ç½®è¯¥å­—æ®µï¼Œåˆ™æ‰€éœ€çš„è¿è¡Œæ—¶æ£€æŸ¥å°†å¤±è´¥ï¼Œè¿™å¯¹äºæ•è·é”™è¯¯éå¸¸æœ‰ç”¨ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:2:0","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#thrift-ä¸-protocol-buffers"},{"categories":["æŠ€æœ¯"],"content":" å­—æ®µæ ‡ç­¾å’Œæ¨¡å¼æ¼”å˜å¦‚ä¸Šä¾‹å­ï¼Œä¸€ä¸ªç¼–ç çš„è®°å½•å°±æ˜¯ä¸€å †ç¼–ç è¿‡çš„å­—æ®µï¼Œæ¯ä¸ªå­—æ®µä½¿ç”¨ æ ‡ç­¾å·ï¼ˆæ¨¡å¼å®šä¹‰ä¸­çš„æ•°å­—1ï¼Œ2ï¼Œ3ï¼‰ å”¯ä¸€æ ‡è¯†ï¼Œå¹¶ä¸”æ ‡æ³¨ä¸€ä¸ªæ•°æ®ç±»å‹ï¼ˆe.g. string æˆ– intï¼‰ã€‚å¦‚æœä¸€ä¸ªå­—æ®µæ²¡æœ‰è®¾ç½®å€¼ï¼Œç¼–ç æ˜¯å³å¯å¿½ç•¥å®ƒã€‚ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥æ”¹å˜å­—æ®µçš„åå­—ï¼Œä½†æ˜¯ä¸èƒ½æ”¹å˜å­—æ®µçš„æ ‡ç­¾å·ï¼Œå¦åˆ™å°†å½±å“å·²ç»ç¼–ç çš„æ•°æ®ã€‚ æ–°å¢å­—æ®µï¼Œç»™æ–°å­—æ®µè®¾ç½®æ ‡ç­¾å·å³å¯ã€‚æ—§ä»£ç ï¼ˆä¸çŸ¥é“æœ‰æ–°å­—æ®µï¼‰å°è¯•è¯»å–åŒ…å«æ–°å­—æ®µçš„æ•°æ®æ—¶ï¼Œå®ƒä¸èƒ½è¯†åˆ«æ–°çš„æ ‡ç­¾å·ï¼Œç›´æ¥å¿½ç•¥å³å¯ã€‚æ•°æ®ç±»å‹æ³¨é‡Šä¼šå‘Šè¯‰è§£æå™¨å®ƒéœ€è¦è·³è¿‡å¤šå°‘å­—èŠ‚ã€‚è¿™ä¿è¯äº† å‘å‰å…¼å®¹ï¼šï¼ˆæ–°ä»£ç äº§ç”Ÿçš„ç¼–ç åæ•°æ®å¯ä»¥è¢«æ—§ä»£ç è¯»å–ï¼‰ã€‚ å¯¹äºå‘åå…¼å®¹ï¼Œå› ä¸ºæ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡ç­¾å·ä¸”æ ‡ç­¾å·ä»£è¡¨è¿™ç›¸åŒçš„æ„æ€ï¼Œæ—§ä»£ç äº§ç”Ÿçš„ç¼–ç åæ•°æ®æ€»æ˜¯èƒ½è¢«æ–°ä»£ç è¯»å–ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ ä¸èƒ½è®¾ç½®å­—æ®µæ˜¯ required çš„ã€‚å¦‚æœä¸€ä¸ªæ–°å¢å­—æ®µè¢«è®¾ç½®ä¸º å¿…é¡»çš„ ï¼Œæ–°ä»£ç è¯»å–æ—¶å°†æ£€æŸ¥è¯¥å­—æ®µæ˜¯å¦å­˜åœ¨ï¼Œè€Œæ—§ä»£ç ç¼–ç çš„æ•°æ®å‹æ ¹ä¸çŸ¥é“æ–°å­—æ®µçš„å­˜åœ¨ã€‚å› æ­¤ï¼Œä¸ºäº†ä¿æŒå‘åå…¼å®¹æ€§ï¼Œåœ¨æ¨¡å¼åˆå§‹åŒ–éƒ¨ç½²ä¹‹åï¼Œæ¯ä¸ªæ–°å¢çš„å­—æ®µå¿…é¡»æ˜¯ optional æˆ–è€…è®¾ç½®é»˜è®¤å€¼ã€‚ åˆ é™¤ä¸€ä¸ªå­—æ®µä¸æ·»åŠ ä¸€ä¸ªå­—æ®µç±»ä¼¼ï¼Œåªæ˜¯å‘å‰å…¼å®¹å’Œå‘åå…¼å®¹çš„å…³æ³¨ç‚¹è¢«é¢ å€’äº†ã€‚è¿™æ„å‘³ç€ä½ åªèƒ½åˆ é™¤ä¸€ä¸ªå¯é€‰çš„å­—æ®µï¼ˆå¿…éœ€å­—æ®µæ°¸è¿œä¸èƒ½åˆ é™¤ï¼‰ï¼Œè€Œä¸”ä½ ä¸èƒ½å†æ¬¡ä½¿ç”¨ç›¸åŒçš„æ ‡ç­¾å·ç ï¼ˆå› ä¸ºä½ å¯èƒ½ä»ç„¶æœ‰æ•°æ®å†™åœ¨åŒ…å«æ—§æ ‡ç­¾å·ç çš„åœ°æ–¹ï¼Œæ–°ä»£ç å·²ç»å¿½ç•¥äº†è¯¥å­—æ®µï¼‰ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:2:1","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#å­—æ®µæ ‡ç­¾å’Œæ¨¡å¼æ¼”å˜"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®ç±»å‹å’Œæ¨¡å¼æ¼”å˜æ”¹å˜æ•°æ®ç±»å‹ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé£é™©ï¼Œå€¼å°†å¤±å»ç²¾åº¦æˆ–è€…è¢«æˆªæ–­ã€‚ä¾‹å¦‚ï¼Œä½ æŠŠ i32 è½¬ä¸º i64, æ–°ä»£ç å¯ä»¥å¾ˆå®¹æ˜“è¯»å–æ—§æ•°æ®ï¼ˆå‰32ä½ç”¨é›¶å¡«å……ï¼‰å³ å‘åå…¼å®¹ã€‚ç„¶è€Œæ–°ä»£ç äº§ç”Ÿçš„ i64 æ•°æ®ï¼Œæ—§ä»£ç åœ¨è¯»å–æ—¶æ˜¯æŒ‰ç…§ i32 è¯»å–çš„ï¼Œä¼šè¢«æˆªæ–­ï¼Œå³æ²¡æœ‰ å‘å‰å…¼å®¹ã€‚ Protobuf æ²¡æœ‰ list æˆ– array çš„æ•°æ®ç±»å‹ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€ä¸ª repeated ï¼ˆå’Œ required å’Œ optional åŒä¸€ä¸ªç­‰çº§ ï¼‰, ä¸€ä¸ªå­—æ®µè¢«å®šä¹‰ä¸º repeated , æ„å‘³ç€,ç›¸åŒæ ‡ç­¾å·çš„å­—æ®µåœ¨è®°å½•å‡ºç°äº†å¤šæ¬¡ ã€‚è¿™ç§è®¾è®¡ï¼Œå¯¹äºå°† optional ï¼ˆå•å€¼ï¼‰å­—æ®µå˜æ›´ä¸º repeated ï¼ˆå¤šå€¼ï¼‰å­—æ®µï¼Œéå¸¸æœ‰ç”¨ã€‚æ–°ä»£ç åœ¨è¯»å– æ—§æ•°æ® æ—¶ï¼Œä¼šçœ‹åˆ°ä¸€ä¸ªå‡ºç°äº† 1æ¬¡æˆ–0æ¬¡çš„å…ƒç´ ï¼ˆå–å†³äºæ—§æ•°æ®å­—æ®µå€¼æ˜¯å¦è¢«è®¾ç½®ï¼‰ï¼›æ—§ä»£ç è¯»å–æ–°æ•°æ®æ—¶ï¼Œåªèƒ½è¯»å–åˆ°åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚ Thrift æœ‰ä¸“é—¨çš„åˆ—è¡¨æ•°æ®ç±»å‹ï¼Œè¯¥æ•°æ®ç±»å‹ä½¿ç”¨åˆ—è¡¨å…ƒç´ çš„æ•°æ®ç±»å‹ä½œä¸ºå‚æ•°ã€‚è¿™ä¸å…è®¸åƒ Protocol Buffers é‚£æ ·ä»å•å€¼åˆ°å¤šå€¼çš„æ¼”åŒ–ï¼Œä½†å®ƒå…·æœ‰æ”¯æŒåµŒå¥—åˆ—è¡¨çš„ä¼˜åŠ¿ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:2:2","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#æ•°æ®ç±»å‹å’Œæ¨¡å¼æ¼”å˜"},{"categories":["æŠ€æœ¯"],"content":" AvroApache Avro æ˜¯ä½œä¸º Hadoop çš„å­é¡¹ç›®ï¼Œåœ¨ 2009 å¹´å¼€å§‹ã€‚ æœ‰ä¸¤ç§æ¨¡å¼ï¼š Avro IDL ç”¨äºäººå·¥ç¼–è¾‘ï¼› åŸºäºjson æ›´æ˜“äºæœºå™¨è¯»å–ã€‚ ä¸Šè¿°ä¾‹å­ï¼Œä½¿ç”¨ Avro IDL ç¼–å†™ï¼Œå¦‚ä¸‹ï¼š avdl record Person { string userName; union { null, long } favoriteNumber = null; array\u003cstring\u003e interests; } ç­‰ä»·çš„ JSON å±•ç¤ºè¿™ä¸ª æ¨¡å¼å¦‚ä¸‹ï¼š json { \"type\": \"record\", \"name\": \"Person\", \"fields\": [ {\"name\": \"userName\", \"type\": \"string\"}, {\"name\": \"favoriteNumber\", \"type\": [\"null\", \"long\"], \"default\": null}, {\"name\": \"interests\", \"type\": {\"type\": \"array\", \"items\": \"string\"}} ] } å…¶ç¼–ç å­—èŠ‚å¦‚ä¸‹æ‰€ç¤º æœ‰å‡ ç‚¹æœ‰è¶£çš„å¦‚ä¸‹ï¼š è¯¥æ¨¡å¼æ²¡æœ‰æ ‡ç­¾åºå· å­—èŠ‚åºåˆ—æ—¢æ²¡æœ‰å­—æ®µçš„å”¯ä¸€æ ‡è¯†ä¹Ÿæ²¡æœ‰å­—æ®µçš„æ•°æ®ç±»å‹ï¼Œåªæ˜¯ä¸€ä¸²è¿åœ¨ä¸€èµ·çš„å€¼ å¦‚ä¸Šä¸€ä¸ª string ç±»å‹çš„å­—æ®µï¼Œåªæœ‰ä¸€ä¸ªé•¿åº¦å‰ç¼€ï¼Œåè·Ÿç€UTF-8 å­—èŠ‚ï¼Œç¼–ç æ•°æ®ä¸­æ²¡æœ‰ä»»ä½•å‘Šè¯‰ä½ è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å®ƒå¯ä»¥è¢«å½“æˆæ•´æ•°ï¼Œæˆ–è€…å…¶ä»–çš„æ•°æ®ç±»å‹ æ•´æ•°ä½¿ç”¨å’Œ Thrift çš„ CompactProtocol ç›¸åŒçš„å¯å˜é•¿åº¦çš„æ–¹å¼ç¼–ç  ä¸ºäº†è§£æäºŒè¿›åˆ¶æ•°æ®ï¼Œä½ åº”è¯¥æŒ‰ç…§æ¨¡å¼ä¸­å®šä¹‰çš„é¡ºåºå’Œæ•°æ®ç±»å‹éå†å„ä¸ªå­—æ®µï¼Œè¿™æ„å‘³ç€ï¼Œåªæœ‰å½“è¯»å–æ•°æ®å’Œå†™å…¥æ•°æ®ä½¿ç”¨ å®Œå…¨ç›¸åŒçš„æ¨¡å¼ æ—¶ï¼ŒäºŒè¿›åˆ¶æ•°æ®æ‰èƒ½è¢«æ­£ç¡®è§£æã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:3:0","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#avro"},{"categories":["æŠ€æœ¯"],"content":" reader schema å’Œ writer schemawriterâ€™s schemaï¼š å½“ä¸€ä¸ªåº”ç”¨æƒ³ç¼–ç ä¸€äº›æ•°æ®ï¼ˆå†™å…¥åˆ°æ–‡ä»¶ã€æ•°æ®åº“ï¼Œæˆ–è€…é€šè¿‡ç½‘ç»œå‘é€ç­‰ï¼‰ï¼Œåº”ç”¨ä¼šä½¿ç”¨ä»»ä¸€ç‰ˆæœ¬çš„æ¨¡å¼ï¼ˆå®ƒçŸ¥é“çš„ï¼Œä¾‹å¦‚è¢«ç¼–è¯‘åˆ°åº”ç”¨ä¸­çš„ï¼‰æ¥ç¼–ç æ•°æ®ã€‚ readerâ€™s schemaï¼šå½“ä¸€ä¸ªåº”ç”¨æƒ³è§£ç ä¸€äº›æ•°æ®ï¼ˆä»æ–‡ä»¶ã€æ•°æ®åº“è¯»å–ï¼Œæˆ–è€…ä»ç½‘ç»œæ¥æ”¶ç­‰ï¼‰ï¼Œå®ƒæœŸå¾…æ•°æ®éµå¾ªä¸€äº›æ¨¡å¼ï¼Œè¿™å«åšè¯»è€…æ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼æ˜¯åº”ç”¨ç¨‹åºä»£ç æ‰€ä¾èµ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»£ç å¯èƒ½åœ¨åº”ç”¨ç¨‹åºçš„æ„å»ºè¿‡ç¨‹ä¸­æ ¹æ®è¿™ä¸ªæ¨¡å¼ç”Ÿæˆã€‚ Avro çš„æ ¸å¿ƒæ€æƒ³æ—¶ï¼Œreader æ¨¡å¼å’Œ writer æ¨¡å¼ä¸å¿…å®Œå…¨ç›¸åŒï¼Œåªéœ€è¦å…¼å®¹ã€‚å½“æ•°æ®è§£ç ï¼ˆè¯»å–ï¼‰æ—¶ï¼ŒAvroåº“é€šè¿‡å¹¶æ’æŸ¥çœ‹ Writer å’Œ Readeræ¨¡å¼ï¼Œå¹¶å°†æ•°æ®ä» Writer æ¨¡å¼è½¬æ¢åˆ°Readeræ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯ä¸ªç¤ºä¾‹ï¼š é¡ºåºä¸åŒï¼Œæ²¡é—®é¢˜ writer ä¸­æœ‰ ï¼Œreader ä¸­æ²¡æœ‰ï¼Œå¿½ç•¥å®ƒ writer ä¸­æ²¡æœ‰ï¼Œreader ä¸­è¦è·å–ï¼Œåˆ™ä½¿ç”¨ reader æ¨¡å¼ä¸­çš„é»˜è®¤å€¼ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:3:1","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#reader-schema-å’Œ-writer-schema"},{"categories":["æŠ€æœ¯"],"content":" æ¨¡å¼æ¼”å˜è§„åˆ™å¯¹äº Avroï¼Œ å‘å‰å…¼å®¹æ„å‘³ç€ä½ æœ‰ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„æ¨¡å¼è¢«ä½œä¸ºwriterï¼Œè€Œæ—§ç‰ˆæœ¬çš„æ¨¡å¼ä½œä¸º readerã€‚ç›¸åï¼Œå‘åå…¼å®¹æ„å‘³ç€ï¼Œä½ æ–°ç‰ˆæœ¬çš„æ¨¡å¼ä½œä¸º readerï¼Œæ—§ç‰ˆæœ¬ä½œä¸ºwriterã€‚ ä¸ºäº†ä¿è¯å…¼å®¹æ€§ï¼Œä½ åªèƒ½æ·»åŠ æˆ–åˆ é™¤æœ‰é»˜è®¤å€¼çš„å­—æ®µã€‚è¿™æ—¶ï¼Œæ–°å­—æ®µä¼šå­˜åœ¨åœ¨æ–°æ¨¡å¼ä¸­è€Œéæ—§æ¨¡å¼ä¸­ï¼Œå½“æ–°æ¨¡å¼çš„readerè¯»å–æ—§æ¨¡å¼å†™å…¥çš„è®°å½•æ—¶ï¼Œç¼ºå°‘çš„å­—æ®µå¡«å……é»˜è®¤å€¼ã€‚ Avro ä¸­å¦‚æœå…è®¸ä¸€ä¸ªå­—æ®µä¸º nullï¼Œåˆ™å¿…é¡»ä½¿ç”¨è”åˆç±»å‹ã€‚å¦‚ï¼šunion {null, long, string} è¡¨ç¤º field å¯ä»¥æ˜¯ null ã€é•¿æ•´å‹å’Œå­—ç¬¦ä¸²ï¼Œä¸”é»˜è®¤å€¼ä¸º nullï¼ˆAvro çš„é™åˆ¶é»˜è®¤å€¼å¿…é¡»ä¸ºè”åˆçš„ç¬¬ä¸€åˆ†æ”¯ï¼‰ã€‚ Avro æ²¡æœ‰ optional å’Œ required ï¼Œå› ä¸ºå®ƒæœ‰è”åˆç±»å‹å’Œé»˜è®¤å€¼ã€‚ åªè¦ Avro å¯ä»¥æ”¯æŒç›¸åº”çš„ç±»å‹è½¬æ¢ï¼Œå°±å¯ä»¥æ”¹å˜å­—æ®µçš„æ•°æ®ç±»å‹ã€‚æ›´æ”¹å­—æ®µçš„åç§°ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œä½†æœ‰ç‚¹æ£˜æ‰‹ï¼šReader æ¨¡å¼å¯ä»¥åŒ…å«å­—æ®µåç§°çš„åˆ«åï¼Œæ‰€ä»¥å®ƒå¯ä»¥åŒ¹é…æ—§ Writer çš„æ¨¡å¼å­—æ®µåç§°ä¸åˆ«åã€‚è¿™æ„å‘³ç€æ›´æ”¹å­—æ®µåç§°æ˜¯å‘åå…¼å®¹çš„ï¼Œä½†ä¸èƒ½å‘å‰å…¼å®¹ã€‚åŒæ ·ï¼Œå‘è”åˆç±»å‹æ·»åŠ åˆ†æ”¯ä¹Ÿæ˜¯å‘åå…¼å®¹çš„ï¼Œä½†ä¸èƒ½å‘å‰å…¼å®¹ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:3:2","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#æ¨¡å¼æ¼”å˜è§„åˆ™"},{"categories":["æŠ€æœ¯"],"content":" writeræ¨¡å¼åˆ°åº•æ˜¯ä»€ä¹ˆå¯¹äºä¸€æ®µç‰¹å®šçš„ç¼–ç æ•°æ®ï¼ŒReader å¦‚ä½•çŸ¥é“å…¶ Writer æ¨¡å¼ï¼Ÿæˆ‘ä»¬ä¸èƒ½åªå°†æ•´ä¸ªæ¨¡å¼åŒ…æ‹¬åœ¨æ¯ä¸ªè®°å½•ä¸­ï¼Œå› ä¸ºæ¨¡å¼å¯èƒ½æ¯”ç¼–ç çš„æ•°æ®å¤§å¾—å¤šï¼Œä»è€Œä½¿äºŒè¿›åˆ¶ç¼–ç èŠ‚çœçš„æ‰€æœ‰ç©ºé—´éƒ½æ˜¯å¾’åŠ³çš„ã€‚ ç­”æ¡ˆæ˜¯ Avro ä½¿ç”¨ä¸Šä¸‹æ–‡ï¼š å¾ˆå¤šè®°å½•çš„å¤§æ–‡ä»¶ Avro çš„ä¸€ä¸ªå¸¸è§ç”¨é€”ï¼Œå°¤å…¶åœ¨ Hadoop ç¯å¢ƒä¸­â€”â€”ç”¨äºå­˜å‚¨æ•°ç™¾ä¸‡æ¡è®°å½•çš„å¤§æ–‡ä»¶ï¼Œæ‰€æœ‰è®°å½•é‡‡ç”¨ç›¸åŒçš„æ¨¡å¼è¿›è¡Œç¼–ç ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥æ–‡ä»¶çš„ä½œè€…å¯ä»¥åœ¨æ–‡ä»¶çš„å¼€å¤´åªåŒ…å«ä¸€æ¬¡ Writer æ¨¡å¼ã€‚ Avro æŒ‡å®šäº†ä¸€ä¸ªæ–‡ä»¶æ ¼å¼ï¼ˆå¯¹è±¡å®¹å™¨æ–‡ä»¶ï¼‰æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ ç‹¬ç«‹å†™å…¥è®°å½•çš„æ•°æ®åº“ åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œä¸åŒçš„è®°å½•å¯èƒ½ä¼šåœ¨ä¸åŒçš„æ—¶é—´ç‚¹ä½¿ç”¨ä¸åŒçš„ Writer æ¨¡å¼æ¥å†™å…¥ - ä½ ä¸èƒ½å‡å®šæ‰€æœ‰çš„è®°å½•éƒ½æœ‰ç›¸åŒçš„æ¨¡å¼ã€‚æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ¯ä¸ªç¼–ç è®°å½•çš„å¼€å§‹å¤„åŒ…å«ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œå¹¶åœ¨æ•°æ®åº“ä¸­ä¿ç•™ä¸€ä¸ªæ¨¡å¼ç‰ˆæœ¬åˆ—è¡¨ã€‚Reader å¯ä»¥è·å–è®°å½•ï¼Œæå–ç‰ˆæœ¬å·ï¼Œç„¶åä»æ•°æ®åº“ä¸­è·å–è¯¥ç‰ˆæœ¬å·çš„ Writer æ¨¡å¼ã€‚ä½¿ç”¨è¯¥ Writer æ¨¡å¼ï¼Œå®ƒå¯ä»¥è§£ç è®°å½•çš„å…¶ä½™éƒ¨åˆ†ï¼ˆä¾‹å¦‚ Espresso å°±æ˜¯è¿™æ ·å·¥ä½œçš„ï¼‰ã€‚ é€šè¿‡ç½‘ç»œè¿æ¥å‘é€çš„è®°å½• å½“ä¸¤ä¸ªè¿›ç¨‹é€šè¿‡åŒå‘ç½‘ç»œè¿æ¥è¿›è¡Œé€šä¿¡æ—¶ï¼Œä»–ä»¬å¯ä»¥åœ¨è¿æ¥è®¾ç½®ä¸Šåå•†æ¨¡å¼ç‰ˆæœ¬ï¼Œç„¶ååœ¨è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨è¯¥æ¨¡å¼ã€‚ Avro RPC åè®®å°±æ˜¯è¿™æ ·å·¥ä½œçš„ã€‚ å­˜å‚¨æ¨¡å¼ç‰ˆæœ¬çš„æ•°æ®åº“å¾ˆæœ‰ç”¨ï¼Œå®ƒå¯ä»¥è®©ä½ æœ‰æœºä¼šæ£€æŸ¥æ–‡æ¡£çš„æ¨¡å¼å…¼å®¹æ€§ã€‚ç‰ˆæœ¬å·å¯ä»¥é€’å¢ï¼Œä¹Ÿå¯ä»¥hashã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:3:3","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#writeræ¨¡å¼åˆ°åº•æ˜¯ä»€ä¹ˆ"},{"categories":["æŠ€æœ¯"],"content":" åŠ¨æ€ç”Ÿæˆçš„æ¨¡å¼Avro ä¸å«ä»»ä½•æ ‡ç­¾å·ç ï¼Œè¿™ä½¿å¾— Avro å¯¹åŠ¨æ€ç”Ÿæˆæ¨¡å¼æ›´å‹å–„ã€‚ å‡å¦‚ï¼Œ ä½ æƒ³æŠŠä¸€ä¸ªå…³ç³»æ•°æ®åº“çš„å†…å®¹è½¬å­˜åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ Avro å¯ä»¥å¾ˆå®¹æ˜“ç”Ÿæˆä¸€ä¸ªæ¨¡å¼ï¼Œå¹¶ç”¨è¯¥æ¨¡å¼å¯¹å†…å®¹è¿›è¡Œç¼–ç ï¼Œç„¶åå°†å…¶å­˜å‚¨åˆ° Avro å¯¹è±¡å®¹å™¨æ–‡ä»¶ä¸­ï¼ˆæ•°æ®åº“çš„åˆ—åï¼Œå°±æ˜ å°„ä¸ºAvroæ¨¡å¼ä¸­çš„å­—æ®µåï¼‰ã€‚ ç°åœ¨ï¼Œæ•°æ®åº“æ¨¡å¼å‘ç”Ÿå˜åŒ–ï¼ˆæ–°å¢æˆ–åˆ é™¤äº†åˆ—ï¼‰ï¼Œåˆ™å¯ä»¥ä»æ–°æ•°æ®åº“æ¨¡å¼ç”Ÿæˆæ–°çš„Avroæ¨¡å¼ï¼Œå¹¶ä½¿ç”¨æ–°æ¨¡å¼å¯¼å‡ºæ•°æ®ã€‚æ›´æ–°çš„ Writer æ¨¡å¼ä»ç„¶å¯ä»¥ä¸æ—§çš„ Reader æ¨¡å¼åŒ¹é…ã€‚ å¦‚æœä½¿ç”¨ Thrift æˆ– Protocol Buffersï¼Œåˆ™å­—æ®µæ ‡ç­¾å¯èƒ½å¿…é¡»æ‰‹åŠ¨åˆ†é…ï¼šæ¯æ¬¡æ•°æ®åº“æ¨¡å¼æ›´æ”¹æ—¶ï¼Œç®¡ç†å‘˜éƒ½å¿…é¡»æ‰‹åŠ¨æ›´æ–°ä»æ•°æ®åº“åˆ—ååˆ°å­—æ®µæ ‡ç­¾çš„æ˜ å°„ï¼ˆè¿™å¯èƒ½ä¼šè‡ªåŠ¨åŒ–ï¼Œä½†æ¨¡å¼ç”Ÿæˆå™¨å¿…é¡»éå¸¸å°å¿ƒï¼Œä¸è¦åˆ†é…ä»¥å‰ä½¿ç”¨çš„å­—æ®µæ ‡ç­¾ï¼‰ã€‚è¿™ç§åŠ¨æ€ç”Ÿæˆçš„æ¨¡å¼æ ¹æœ¬ä¸æ˜¯ Thrift æˆ– Protocol Buffers çš„è®¾è®¡ç›®æ ‡ï¼Œè€Œæ˜¯ Avro çš„ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:3:4","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#åŠ¨æ€ç”Ÿæˆçš„æ¨¡å¼"},{"categories":["æŠ€æœ¯"],"content":" ä»£ç ç”ŸæˆThrift å’Œ Protobuf ä¾èµ–äºä»£ç ç”Ÿæˆã€‚å¯¹äºé™æ€ç±»å‹ç¼–ç¨‹è¯­è¨€çš„ç”¨æˆ·æ¥è¯´ï¼Œä»æ¨¡å¼ç”Ÿæˆä»£ç çš„èƒ½åŠ›æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚å¯¹åŠ¨æ€ç±»å‹çš„è¯­è¨€ï¼Œç”Ÿæˆä»£ç æ²¡æœ‰å¤ªå¤šæ„ä¹‰ã€‚ Avro ä¸ºé™æ€ç±»å‹ç¼–ç¨‹è¯­è¨€æä¾›äº†å¯é€‰çš„ä»£ç ç”ŸæˆåŠŸèƒ½ï¼Œä½†æ˜¯å®ƒä¹Ÿå¯ä»¥åœ¨ä¸ç”Ÿæˆä»»ä½•ä»£ç çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå¯¹è±¡å®¹å™¨æ–‡ä»¶ï¼ˆå®ƒåµŒå…¥äº† Writer æ¨¡å¼ï¼‰ï¼Œä½ å¯ä»¥ç®€å•åœ°ä½¿ç”¨ Avro åº“æ‰“å¼€å®ƒï¼Œå¹¶ä»¥ä¸æŸ¥çœ‹ JSON æ–‡ä»¶ç›¸åŒçš„æ–¹å¼æŸ¥çœ‹æ•°æ®ã€‚è¯¥æ–‡ä»¶æ˜¯è‡ªæè¿°çš„ï¼Œå› ä¸ºå®ƒåŒ…å«æ‰€æœ‰å¿…è¦çš„å…ƒæ•°æ®ã€‚ï¼ˆç‰¹åˆ«é€‚åˆåŠ¨æ€ç±»å‹çš„æ•°æ®å¤„ç†è¯­è¨€å¦‚ Apache Pig ï¼‰ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:3:5","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#ä»£ç ç”Ÿæˆ"},{"categories":["æŠ€æœ¯"],"content":" æ¨¡å¼çš„ä¼˜ç‚¹ å®ƒä»¬å¯ä»¥æ¯”å„ç§ â€œäºŒè¿›åˆ¶ JSONâ€ å˜ä½“æ›´ç´§å‡‘ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥çœç•¥ç¼–ç æ•°æ®ä¸­çš„å­—æ®µåç§°ã€‚ æ¨¡å¼æ˜¯ä¸€ç§æœ‰ä»·å€¼çš„æ–‡æ¡£å½¢å¼ï¼Œå› ä¸ºæ¨¡å¼æ˜¯è§£ç æ‰€å¿…éœ€çš„ï¼Œæ‰€ä»¥å¯ä»¥ç¡®å®šå®ƒæ˜¯æœ€æ–°çš„ï¼ˆè€Œæ‰‹åŠ¨ç»´æŠ¤çš„æ–‡æ¡£å¯èƒ½å¾ˆå®¹æ˜“åç¦»ç°å®ï¼‰ã€‚ ç»´æŠ¤ä¸€ä¸ªå­˜å‚¨æ¨¡å¼çš„æ•°æ®åº“å…è®¸ä½ åœ¨éƒ¨ç½²ä»»ä½•å†…å®¹ä¹‹å‰æ£€æŸ¥æ¨¡å¼å˜æ›´çš„å‘å‰å’Œå‘åå…¼å®¹æ€§ã€‚ å¯¹äºé™æ€ç±»å‹ç¼–ç¨‹è¯­è¨€çš„ç”¨æˆ·æ¥è¯´ï¼Œä»æ¨¡å¼ç”Ÿæˆä»£ç çš„èƒ½åŠ›æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ ","date":"2023-06-16","objectID":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/:3:6","series":null,"tags":["æ•°æ®å¯†é›†","ç¼–ç ","è§£ç ","æ¨¡å¼"],"title":"ç¼–ç æ•°æ®çš„æ ¼å¼","uri":"/posts/ddia/%E7%BC%96%E7%A0%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%A0%BC%E5%BC%8F/#æ¨¡å¼çš„ä¼˜ç‚¹"},{"categories":["æŠ€æœ¯"],"content":"ä¿®æ”¹åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ä¹Ÿä¹Ÿæ„å‘³ç€ä¿®æ”¹å…¶å­˜å‚¨çš„æ•°æ®ï¼šä½¿ç”¨æ–°çš„å­—æ®µæˆ–è®°å½•ç±»å‹ï¼Œæˆ–è€…ä»¥æ–°çš„æ–¹å¼å±•ç¤ºç°æœ‰çš„æ•°æ®ã€‚ ä¸åŒçš„æ•°æ®æ¨¡å‹æœ‰ä¸åŒçš„æ–¹æ³•åº”å¯¹è¿™ç§å˜åŒ–ï¼š å…³ç³»å‹æ•°æ®åº“å‡å®šæ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½éµå¾ªä¸€ä¸ªæ¨¡å¼ï¼šå°½ç®¡å¯ä»¥æ›´æ”¹è¿™ä¸ªæ¨¡å¼ï¼ˆé€šè¿‡æ¨¡å¼è¿ç§»ï¼Œå³ ALTER è¯­å¥ï¼‰ï¼Œä½†æ˜¯åœ¨ä»»ä½•æ—¶é—´ç‚¹éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ­£ç¡®çš„æ¨¡å¼ã€‚ è¯»æ—¶æ¨¡å¼ï¼ˆschema-on-readï¼Œæˆ– æ— æ¨¡å¼ï¼Œå³ schemalessï¼‰æ•°æ®åº“ä¸ä¼šå¼ºåˆ¶ä¸€ä¸ªæ¨¡å¼ï¼Œå› æ­¤æ•°æ®åº“å¯ä»¥åŒ…å«åœ¨ä¸åŒæ—¶é—´å†™å…¥çš„æ–°è€æ•°æ®æ ¼å¼çš„æ··åˆã€‚ å½“æ•°æ® æ ¼å¼ï¼ˆformatï¼‰ æˆ– æ¨¡å¼ï¼ˆschemaï¼‰ å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šå¸¸éœ€è¦å¯¹åº”ç”¨ç¨‹åºä»£ç è¿›è¡Œç›¸åº”çš„æ›´æ”¹ï¼ˆä¾‹å¦‚ï¼Œä¸ºè®°å½•æ·»åŠ æ–°å­—æ®µï¼Œç„¶åä¿®æ”¹ç¨‹åºå¼€å§‹è¯»å†™è¯¥å­—æ®µï¼‰ã€‚ä½†åœ¨å¤§å‹åº”ç”¨ç¨‹åºä¸­ï¼Œä»£ç å˜æ›´é€šå¸¸ä¸ä¼šç«‹å³å®Œæˆï¼š å¯¹äº æœåŠ¡ç«¯ï¼ˆserver-sideï¼‰ åº”ç”¨ç¨‹åºï¼Œå¯èƒ½éœ€è¦æ‰§è¡Œ æ»šåŠ¨å‡çº§ ï¼ˆrolling upgradeï¼‰ ï¼ˆä¹Ÿç§°ä¸º é˜¶æ®µå‘å¸ƒï¼ˆstaged rolloutï¼‰ ï¼‰ï¼Œä¸€æ¬¡å°†æ–°ç‰ˆæœ¬éƒ¨ç½²åˆ°å°‘æ•°å‡ ä¸ªèŠ‚ç‚¹ï¼Œæ£€æŸ¥æ–°ç‰ˆæœ¬æ˜¯å¦è¿è¡Œæ­£å¸¸ï¼Œç„¶åé€æ¸éƒ¨å®Œæ‰€æœ‰çš„èŠ‚ç‚¹ã€‚è¿™æ ·æ— éœ€ä¸­æ–­æœåŠ¡å³å¯éƒ¨ç½²æ–°ç‰ˆæœ¬ï¼Œä¸ºé¢‘ç¹å‘å¸ƒæä¾›äº†å¯è¡Œæ€§ï¼Œä»è€Œå¸¦æ¥æ›´å¥½çš„å¯æ¼”åŒ–æ€§ã€‚ å¯¹äº å®¢æˆ·ç«¯ï¼ˆclient-sideï¼‰ åº”ç”¨ç¨‹åºï¼Œå‡ä¸å‡çº§å°±è¦çœ‹ç”¨æˆ·çš„å¿ƒæƒ…äº†ã€‚ç”¨æˆ·å¯èƒ½ç›¸å½“é•¿ä¸€æ®µæ—¶é—´é‡Œéƒ½ä¸ä¼šå»å‡çº§è½¯ä»¶ã€‚ è¿™æ„å‘³ç€ï¼Œæ–°æ—§ç‰ˆæœ¬çš„ä»£ç ï¼Œä»¥åŠæ–°æ—§æ•°æ®æ ¼å¼å¯èƒ½ä¼šåœ¨ç³»ç»Ÿä¸­åŒæ—¶å…±å¤„ã€‚ç³»ç»Ÿæƒ³è¦ç»§ç»­é¡ºåˆ©è¿è¡Œï¼Œå°±éœ€è¦ä¿æŒ åŒå‘å…¼å®¹æ€§ï¼š å‘åå…¼å®¹ (backward compatibility)ï¼Œ åˆå å‘ä¸‹å…¼å®¹ï¼ˆdownward compatibilityï¼‰ æ–°çš„ä»£ç å¯ä»¥è¯»å–ç”±æ—§çš„ä»£ç å†™å…¥çš„æ•°æ®ã€‚ å‘å‰å…¼å®¹ (forward compatibility)ï¼Œåˆå å‘ä¸Šå…¼å®¹ ï¼ˆupward compatibilityï¼‰ æ—§çš„ä»£ç å¯ä»¥è¯»å–ç”±æ–°çš„ä»£ç å†™å…¥çš„æ•°æ®ã€‚ å‘åå…¼å®¹æ€§é€šå¸¸å¹¶ä¸éš¾å®ç°ï¼šæ–°ä»£ç çš„ä½œè€…å½“ç„¶çŸ¥é“ç”±æ—§ä»£ç ä½¿ç”¨çš„æ•°æ®æ ¼å¼ï¼Œå› æ­¤å¯ä»¥æ˜¾ç¤ºåœ°å¤„ç†å®ƒï¼ˆæœ€ç®€å•çš„åŠæ³•æ˜¯ï¼Œä¿ç•™æ—§ä»£ç å³å¯è¯»å–æ—§æ•°æ®ï¼‰ã€‚ å‘å‰å…¼å®¹æ€§å¯èƒ½ä¼šæ›´æ£˜æ‰‹ï¼Œå› ä¸ºæ—§ç‰ˆçš„ç¨‹åºéœ€è¦å¿½ç•¥æ–°ç‰ˆæ•°æ®æ ¼å¼ä¸­æ–°å¢çš„éƒ¨åˆ†ã€‚ ","date":"2023-06-01","objectID":"/posts/ddia/%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%85%BC%E5%AE%B9/:0:0","series":null,"tags":["æ•°æ®å¯†é›†","æ¨¡å¼","å…¼å®¹"],"title":"æ¨¡å¼ä¸å…¼å®¹","uri":"/posts/ddia/%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%85%BC%E5%AE%B9/#"},{"categories":["æŠ€æœ¯"],"content":" åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰VS åœ¨çº¿åˆ†æå¤„ç†ï¼ˆOLAPï¼‰ å±æ€§ äº‹åŠ¡å¤„ç†ç³»ç»Ÿ OLTP ï¼ˆOnLine Transaction Processingï¼‰ åˆ†æç³»ç»Ÿ OLAP ï¼ˆOnLine Analytice Processingï¼‰ ä¸»è¦è¯»å–æ¨¡å¼ æŸ¥è¯¢å°‘é‡è®°å½•ï¼ŒæŒ‰é”®è¯»å– åœ¨å¤§æ‰¹é‡è®°å½•ä¸Šèšåˆ ä¸»è¦å†™å…¥æ¨¡å¼ éšæœºè®¿é—®ï¼Œå†™å…¥è¦æ±‚ä½å»¶æ—¶ æ‰¹é‡å¯¼å…¥ï¼ˆETLï¼‰æˆ–è€…äº‹ä»¶æµ ä¸»è¦ç”¨æˆ· ç»ˆç«¯ç”¨æˆ·ï¼Œé€šè¿‡ Web åº”ç”¨ å†…éƒ¨æ•°æ®åˆ†æå¸ˆï¼Œç”¨äºå†³ç­–æ”¯æŒ å¤„ç†çš„æ•°æ® æ•°æ®çš„æœ€æ–°çŠ¶æ€ï¼ˆå½“å‰æ—¶é—´ç‚¹ï¼‰ éšæ—¶é—´æ¨ç§»çš„å†å²äº‹ä»¶ æ•°æ®é›†å°ºå¯¸ GB ~ TB TB ~ PB èµ·åˆï¼Œäº‹åŠ¡å¤„ç†å’Œåˆ†ææŸ¥è¯¢ä½¿ç”¨äº†ç›¸åŒçš„æ•°æ®åº“ã€‚ SQL åœ¨è¿™æ–¹é¢å·²è¯æ˜æ˜¯éå¸¸çµæ´»çš„ï¼šå¯¹äº OLTP ç±»å‹çš„æŸ¥è¯¢ä»¥åŠ OLAP ç±»å‹çš„æŸ¥è¯¢æ¥è¯´æ•ˆæœéƒ½å¾ˆå¥½ã€‚å°½ç®¡å¦‚æ­¤ï¼Œåœ¨äºŒåä¸–çºªå…«åå¹´ä»£æœ«å’Œä¹åå¹´ä»£åˆæœŸï¼Œä¼ä¸šæœ‰åœæ­¢ä½¿ç”¨ OLTP ç³»ç»Ÿè¿›è¡Œåˆ†æçš„è¶‹åŠ¿ï¼Œè½¬è€Œåœ¨å•ç‹¬çš„æ•°æ®åº“ä¸Šè¿è¡Œåˆ†æã€‚è¿™ä¸ªå•ç‹¬çš„æ•°æ®åº“è¢«ç§°ä¸º æ•°æ®ä»“åº“ï¼ˆdata warehouseï¼‰ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:1:0","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#åœ¨çº¿äº‹åŠ¡å¤„ç†oltpvs-åœ¨çº¿åˆ†æå¤„ç†olap"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®ä»“åº“OLTP å¾€å¾€å¯¹ä¸šåŠ¡è‡³å…³é‡è¦ï¼Œè¦æ±‚ é«˜å¯ç”¨ å’Œ ä½å»¶è¿Ÿ ã€‚ æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®åº“ï¼ŒåŒ…å«å…¬å¸å„ç§OLTPç³»ç»Ÿçš„æ‰€æœ‰åªè¯»å‰¯æœ¬ã€‚ ä» OLTP æ•°æ®åº“ä¸­æå–æ•°æ®ï¼ˆä½¿ç”¨å®šæœŸçš„æ•°æ®è½¬å­˜å‚¨æˆ–è€…è¿ç»­çš„æ›´æ–°æµï¼‰ï¼Œè½¬æ¢æˆé€‚åˆåˆ†æçš„æ¨¡å¼ï¼Œæ¸…ç†å¹¶åŠ è½½åˆ°æ•°æ®ä»“åº“ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸º â€æŠ½å–ï¼ˆExtractï¼‰-è½¬æ¢ï¼ˆTransformï¼‰-åŠ è½½ï¼ˆLoadï¼‰â€œ ç®€å†™ä¸ºï¼š ETLã€‚ æ•°æ®ä»“åº“å¯é’ˆå¯¹åˆ†æç±»çš„è®¿é—®æ¨¡å¼è¿›è¡Œä¼˜åŒ–ã€‚ æ•°æ®ä»“åº“çš„æ•°æ®æ¨¡å‹é€šå¸¸æ˜¯å…³ç³»å‹çš„ï¼Œå› ä¸º SQL é€šå¸¸é€‚åˆåˆ†ææŸ¥è¯¢ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:2:0","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#æ•°æ®ä»“åº“"},{"categories":["æŠ€æœ¯"],"content":" åˆ†æçš„æ¨¡å¼ï¼šæ˜Ÿå‹æ¨¡å¼å’Œé›ªèŠ±æ¨¡å¼åœ¨åˆ†æå‹ä¸šåŠ¡ä¸­ï¼Œæ•°æ®æ¨¡å‹çš„å¤šæ ·æ€§å¾ˆå°‘ï¼Œè®¸å¤šæ•°æ®ä»“åº“éƒ½ä»¥ç›¸å¯¹å…¬å¼åŒ–çš„æ–¹å¼ä½¿ç”¨ï¼Œå³ æ˜Ÿå‹æ¨¡å¼ï¼ˆä¹Ÿç§°ä¸ºç»´åº¦å»ºæ¨¡ï¼‰ã€‚ æ¨¡å¼ä¸­å¿ƒæœ‰ä¸€ä¸ª äº‹å®è¡¨ ã€‚äº‹å®è¡¨çš„æ¯è¡Œä»£è¡¨åœ¨ç‰¹å®šæ—¶é—´å†…å‘ç”Ÿçš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼šåˆ†æé›¶å”®é¢ï¼Œæ¯è¡Œä»£è¡¨å®¢æˆ·è´­ä¹°çš„äº§å“ï¼›åˆ†å¸ç½‘ç»œæµé‡ï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªç”¨æˆ·çš„é¡µé¢æµè§ˆå’Œç‚¹å‡»ã€‚äº‹å®è¢«è§†ä¸ºå•ç‹¬çš„äº‹ä»¶ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥åœ¨ä»¥ååˆ†æä¸­è·å¾—æœ€å¤§çš„çµæ´»æ€§ã€‚ä½†æ˜¯ï¼Œè¿™æ„å‘³ç€äº‹å®è¡¨å¯ä»¥å˜å¾—éå¸¸å¤§ã€‚ äº‹å®è¡¨ä¸­çš„ä¸€äº›åˆ—æ˜¯å±æ€§ï¼Œä¾‹å¦‚äº§å“é”€å”®çš„ä»·æ ¼å’Œä»ä¾›åº”å•†é‚£é‡Œè´­ä¹°çš„æˆæœ¬ï¼ˆå¯ä»¥ç”¨æ¥è®¡ç®—åˆ©æ¶¦ç‡ï¼‰ã€‚äº‹å®è¡¨ä¸­çš„å…¶ä»–åˆ—æ˜¯å¯¹å…¶ä»–è¡¨ï¼ˆç§°ä¸ºç»´åº¦è¡¨ï¼‰çš„å¤–é”®å¼•ç”¨ã€‚ç”±äºäº‹å®è¡¨ä¸­çš„æ¯ä¸€è¡Œéƒ½è¡¨ç¤ºä¸€ä¸ªäº‹ä»¶ï¼Œå› æ­¤è¿™äº›ç»´åº¦ä»£è¡¨äº‹ä»¶å‘ç”Ÿçš„å¯¹è±¡ã€å†…å®¹ã€åœ°ç‚¹ã€æ—¶é—´ã€æ–¹å¼å’ŒåŸå› ã€‚ ç”šè‡³æ—¥æœŸå’Œæ—¶é—´ä¹Ÿé€šå¸¸ä½¿ç”¨ç»´åº¦è¡¨æ¥è¡¨ç¤ºï¼Œå› ä¸ºè¿™å…è®¸å¯¹æ—¥æœŸçš„é™„åŠ ä¿¡æ¯ï¼ˆè¯¸å¦‚å…¬å…±å‡æœŸï¼‰è¿›è¡Œç¼–ç ï¼Œä»è€Œå…è®¸åŒºåˆ†å‡æœŸå’Œéå‡æœŸçš„é”€å”®æŸ¥è¯¢ã€‚ â€œæ˜Ÿå‹æ¨¡å¼â€ è¿™ä¸ªåå­—æ¥æºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³å½“æˆ‘ä»¬å¯¹è¡¨ä¹‹é—´çš„å…³ç³»è¿›è¡Œå¯è§†åŒ–æ—¶ï¼Œäº‹å®è¡¨åœ¨ä¸­é—´ï¼Œè¢«ç»´åº¦è¡¨åŒ…å›´ï¼›ä¸è¿™äº›è¡¨çš„è¿æ¥å°±åƒæ˜Ÿæ˜Ÿçš„å…‰èŠ’ã€‚ è¿™ä¸ªæ¨¡æ¿çš„å˜ä½“è¢«ç§°ä¸º é›ªèŠ±æ¨¡å¼ï¼Œå…¶ä¸­ç»´åº¦è¢«è¿›ä¸€æ­¥åˆ†è§£ä¸ºå­ç»´åº¦ã€‚ åœ¨å…¸å‹çš„æ•°æ®ä»“åº“ä¸­ï¼Œè¡¨æ ¼é€šå¸¸éå¸¸å®½ï¼šäº‹å®è¡¨é€šå¸¸æœ‰ 100 åˆ—ä»¥ä¸Šï¼Œæœ‰æ—¶ç”šè‡³æœ‰æ•°ç™¾åˆ—ã€‚ç»´åº¦è¡¨ä¹Ÿå¯ä»¥æ˜¯éå¸¸å®½çš„ï¼Œå› ä¸ºå®ƒä»¬åŒ…æ‹¬äº†æ‰€æœ‰å¯èƒ½ä¸åˆ†æç›¸å…³çš„å…ƒæ•°æ®ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:2:1","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#åˆ†æçš„æ¨¡å¼æ˜Ÿå‹æ¨¡å¼å’Œé›ªèŠ±æ¨¡å¼"},{"categories":["æŠ€æœ¯"],"content":" åˆ—å¼å­˜å‚¨å¦‚æœäº‹å®è¡¨ä¸­æœ‰ä¸‡äº¿è¡Œå’Œæ•° PB çš„æ•°æ®ï¼Œé‚£ä¹ˆé«˜æ•ˆåœ°å­˜å‚¨å’ŒæŸ¥è¯¢å®ƒä»¬å°±æˆä¸ºä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ã€‚ åœ¨å¤§å¤šæ•° OLTP æ•°æ®åº“ä¸­ï¼Œå­˜å‚¨éƒ½æ˜¯ä»¥é¢å‘è¡Œçš„æ–¹å¼è¿›è¡Œå¸ƒå±€çš„ï¼šè¡¨æ ¼çš„ä¸€è¡Œä¸­çš„æ‰€æœ‰å€¼éƒ½ç›¸é‚»å­˜å‚¨ã€‚æ–‡æ¡£æ•°æ®åº“ä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼šæ•´ä¸ªæ–‡æ¡£é€šå¸¸å­˜å‚¨ä¸ºä¸€ä¸ªè¿ç»­çš„å­—èŠ‚åºåˆ—ã€‚ é¢å‘è¡Œçš„å­˜å‚¨å¼•æ“ä»ç„¶éœ€è¦å°†æ‰€æœ‰è¿™äº›è¡Œï¼ˆæ¯ä¸ªåŒ…å«è¶…è¿‡ 100 ä¸ªå±æ€§ï¼‰ä»ç¡¬ç›˜åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè§£æå®ƒä»¬ï¼Œå¹¶è¿‡æ»¤æ‰é‚£äº›ä¸ç¬¦åˆè¦æ±‚çš„å±æ€§ã€‚ åˆ—å¼å­˜å‚¨èƒŒåçš„æƒ³æ³•å¾ˆç®€å•ï¼šä¸è¦å°†æ‰€æœ‰æ¥è‡ªä¸€è¡Œçš„å€¼å­˜å‚¨åœ¨ä¸€èµ·ï¼Œè€Œæ˜¯å°†æ¥è‡ªæ¯ä¸€åˆ—çš„æ‰€æœ‰å€¼å­˜å‚¨åœ¨ä¸€èµ·ã€‚å¦‚æœæ¯ä¸ªåˆ—å¼å­˜å‚¨åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼ŒæŸ¥è¯¢åªéœ€è¦è¯»å–å’Œè§£ææŸ¥è¯¢ä¸­ä½¿ç”¨çš„é‚£äº›åˆ—ï¼ˆåˆ†ææ—¶å¾ˆå°‘ select * â€¦ï¼‰ï¼Œè¿™å¯ä»¥èŠ‚çœå¤§é‡çš„å·¥ä½œã€‚ åˆ—å¼å­˜å‚¨å¸ƒå±€ä¾èµ–äºæ¯ä¸ªåˆ—æ–‡ä»¶åŒ…å«ç›¸åŒé¡ºåºçš„è¡Œã€‚ å› ä¸ºï¼Œå¦‚æœä½ éœ€è¦é‡æ–°ç»„è£…å®Œæ•´çš„è¡Œï¼Œä½ å¯ä»¥ä»æ¯ä¸ªå•ç‹¬çš„åˆ—æ–‡ä»¶ä¸­è·å–ç¬¬ 23 é¡¹ï¼Œå¹¶å°†å®ƒä»¬æ”¾åœ¨ä¸€èµ·å½¢æˆè¡¨çš„ç¬¬ 23 è¡Œã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:3:0","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#åˆ—å¼å­˜å‚¨"},{"categories":["æŠ€æœ¯"],"content":" åˆ—å‹ç¼©é™¤äº†ä»…ä»ç¡¬ç›˜åŠ è½½æŸ¥è¯¢æ‰€éœ€çš„åˆ—ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å‹ç¼©æ•°æ®æ¥è¿›ä¸€æ­¥é™ä½å¯¹ç¡¬ç›˜ååé‡çš„éœ€æ±‚ã€‚å¹¸è¿çš„æ˜¯ï¼Œåˆ—å¼å­˜å‚¨é€šå¸¸å¾ˆé€‚åˆå‹ç¼©ã€‚ ä½å›¾ç¼–ç æŠ€æœ¯é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€åˆ—ä¸­ä¸åŒå€¼çš„æ•°é‡ä¸è¡Œæ•°ç›¸æ¯”è¦å°å¾—å¤šï¼ˆä¾‹å¦‚ï¼Œé›¶å”®å•†å¯èƒ½æœ‰æ•°åäº¿çš„é”€å”®äº¤æ˜“ï¼Œä½†åªæœ‰ 100,000 ä¸ªä¸åŒçš„äº§å“ï¼‰ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æ‹¿ä¸€ä¸ªæœ‰ n ä¸ªä¸åŒå€¼çš„åˆ—ï¼Œå¹¶æŠŠå®ƒè½¬æ¢æˆ n ä¸ªç‹¬ç«‹çš„ä½å›¾ï¼šæ¯ä¸ªä¸åŒå€¼å¯¹åº”ä¸€ä¸ªä½å›¾ï¼Œæ¯è¡Œå¯¹åº”ä¸€ä¸ªæ¯”ç‰¹ä½ã€‚å¦‚æœè¯¥è¡Œå…·æœ‰è¯¥å€¼ï¼Œåˆ™è¯¥ä½ä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚ å¦‚æœ n éå¸¸å°ï¼ˆä¾‹å¦‚ï¼Œå›½å®¶ / åœ°åŒºåˆ—å¯èƒ½æœ‰å¤§çº¦ 200 ä¸ªä¸åŒçš„å€¼ï¼‰ï¼Œåˆ™è¿™äº›ä½å›¾å¯ä»¥å°†æ¯è¡Œå­˜å‚¨æˆä¸€ä¸ªæ¯”ç‰¹ä½ã€‚ä½†æ˜¯ï¼Œå¦‚æœ n æ›´å¤§ï¼Œå¤§éƒ¨åˆ†ä½å›¾ä¸­å°†ä¼šæœ‰å¾ˆå¤šçš„é›¶ï¼ˆæˆ‘ä»¬è¯´å®ƒä»¬æ˜¯ç¨€ç–çš„ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½å›¾å¯ä»¥å¦å¤–å†è¿›è¡Œæ¸¸ç¨‹ç¼–ç ï¼ˆrun-length encodingï¼Œä¸€ç§æ— æŸæ•°æ®å‹ç¼©æŠ€æœ¯ï¼‰ã€‚è¿™å¯ä»¥ä½¿åˆ—çš„ç¼–ç éå¸¸ç´§å‡‘ã€‚ ä½å›¾ç´¢å¼•éå¸¸é€‚åˆæ•°æ®ä»“åº“ä¸­å¸¸è§çš„å„ç§æŸ¥è¯¢ã€‚æŒ‰ä½ä¸ï¼ŒæŒ‰ä½æˆ– å³å¯æ»¡è¶³ sql ä¸­çš„ and å’Œ in æŸ¥è¯¢ã€‚ å†…å­˜å¸¦å®½å’Œå‘é‡åŒ–å¤„ç†å¯¹äºéœ€è¦æ‰«ææ•°ç™¾ä¸‡è¡Œçš„æ•°æ®ä»“åº“æŸ¥è¯¢æ¥è¯´ï¼Œä¸€ä¸ªå·¨å¤§çš„ç“¶é¢ˆæ˜¯ä»ç¡¬ç›˜è·å–æ•°æ®åˆ°å†…å­˜çš„å¸¦å®½ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ˜¯å”¯ä¸€çš„ç“¶é¢ˆï¼Œåˆ†æå‹æ•°æ®åº“çš„å¼€å‘äººå‘˜è¿˜å…³æ³¨å¦‚ä½•é«˜æ•ˆåœ°åˆ©ç”¨ä»ä¸»å†…å­˜åˆ°CPUç¼“å­˜çš„å¸¦å®½ï¼Œé¿å…åˆ†æ”¯é¢„æµ‹é”™è¯¯å’ŒCPUæŒ‡ä»¤å¤„ç†æµæ°´çº¿ä¸­çš„åœé¡¿ï¼Œå¹¶åˆ©ç”¨ç°ä»£CPUä¸­çš„å•æŒ‡ä»¤å¤šæ•°æ®ï¼ˆSIMD single-instruction-multi-dataï¼‰æŒ‡ä»¤ã€‚ åˆ—å¼å­˜å‚¨ï¼šå¯ä»¥å‡å°ä»ç¡¬ç›˜åŠ è½½çš„æ•°æ®é‡ï¼›ä¹Ÿå¯ä»¥é«˜æ•ˆçš„åˆ©ç”¨CPUå‘¨æœŸã€‚å¦‚ï¼šæŸ¥è¯¢å¼•æ“å¯ä»¥å°†ä¸€æ•´å—å‹ç¼©å¥½çš„åˆ—æ•°æ®æ”¾è¿› CPU çš„ L1 ç¼“å­˜ä¸­ï¼Œç„¶ååœ¨ç´§å¯†çš„å¾ªç¯ï¼ˆå³æ²¡æœ‰å‡½æ•°è°ƒç”¨ï¼‰ä¸­éå†ã€‚ç›¸æ¯”äºæ¯æ¡è®°å½•çš„å¤„ç†éƒ½éœ€è¦å¤§é‡å‡½æ•°è°ƒç”¨å’Œæ¡ä»¶åˆ¤æ–­çš„ä»£ç ï¼ŒCPU æ‰§è¡Œè¿™æ ·ä¸€ä¸ªå¾ªç¯è¦å¿«å¾—å¤šã€‚åˆ—å‹ç¼©å…è®¸åˆ—ä¸­çš„æ›´å¤šè¡Œè¢«åŒæ—¶æ”¾è¿›å®¹é‡æœ‰é™çš„ L1 ç¼“å­˜ã€‚å‰é¢æè¿°çš„æŒ‰ä½ â€œä¸â€ å’Œ â€œæˆ–â€ è¿ç®—ç¬¦å¯ä»¥è¢«è®¾è®¡ä¸ºç›´æ¥åœ¨è¿™æ ·çš„å‹ç¼©åˆ—æ•°æ®å—ä¸Šæ“ä½œã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºå‘é‡åŒ–å¤„ç†ï¼ˆvectorized processingï¼‰ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:3:1","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#åˆ—å‹ç¼©"},{"categories":["æŠ€æœ¯"],"content":" åˆ—å‹ç¼©é™¤äº†ä»…ä»ç¡¬ç›˜åŠ è½½æŸ¥è¯¢æ‰€éœ€çš„åˆ—ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å‹ç¼©æ•°æ®æ¥è¿›ä¸€æ­¥é™ä½å¯¹ç¡¬ç›˜ååé‡çš„éœ€æ±‚ã€‚å¹¸è¿çš„æ˜¯ï¼Œåˆ—å¼å­˜å‚¨é€šå¸¸å¾ˆé€‚åˆå‹ç¼©ã€‚ ä½å›¾ç¼–ç æŠ€æœ¯é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€åˆ—ä¸­ä¸åŒå€¼çš„æ•°é‡ä¸è¡Œæ•°ç›¸æ¯”è¦å°å¾—å¤šï¼ˆä¾‹å¦‚ï¼Œé›¶å”®å•†å¯èƒ½æœ‰æ•°åäº¿çš„é”€å”®äº¤æ˜“ï¼Œä½†åªæœ‰ 100,000 ä¸ªä¸åŒçš„äº§å“ï¼‰ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æ‹¿ä¸€ä¸ªæœ‰ n ä¸ªä¸åŒå€¼çš„åˆ—ï¼Œå¹¶æŠŠå®ƒè½¬æ¢æˆ n ä¸ªç‹¬ç«‹çš„ä½å›¾ï¼šæ¯ä¸ªä¸åŒå€¼å¯¹åº”ä¸€ä¸ªä½å›¾ï¼Œæ¯è¡Œå¯¹åº”ä¸€ä¸ªæ¯”ç‰¹ä½ã€‚å¦‚æœè¯¥è¡Œå…·æœ‰è¯¥å€¼ï¼Œåˆ™è¯¥ä½ä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚ å¦‚æœ n éå¸¸å°ï¼ˆä¾‹å¦‚ï¼Œå›½å®¶ / åœ°åŒºåˆ—å¯èƒ½æœ‰å¤§çº¦ 200 ä¸ªä¸åŒçš„å€¼ï¼‰ï¼Œåˆ™è¿™äº›ä½å›¾å¯ä»¥å°†æ¯è¡Œå­˜å‚¨æˆä¸€ä¸ªæ¯”ç‰¹ä½ã€‚ä½†æ˜¯ï¼Œå¦‚æœ n æ›´å¤§ï¼Œå¤§éƒ¨åˆ†ä½å›¾ä¸­å°†ä¼šæœ‰å¾ˆå¤šçš„é›¶ï¼ˆæˆ‘ä»¬è¯´å®ƒä»¬æ˜¯ç¨€ç–çš„ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½å›¾å¯ä»¥å¦å¤–å†è¿›è¡Œæ¸¸ç¨‹ç¼–ç ï¼ˆrun-length encodingï¼Œä¸€ç§æ— æŸæ•°æ®å‹ç¼©æŠ€æœ¯ï¼‰ã€‚è¿™å¯ä»¥ä½¿åˆ—çš„ç¼–ç éå¸¸ç´§å‡‘ã€‚ ä½å›¾ç´¢å¼•éå¸¸é€‚åˆæ•°æ®ä»“åº“ä¸­å¸¸è§çš„å„ç§æŸ¥è¯¢ã€‚æŒ‰ä½ä¸ï¼ŒæŒ‰ä½æˆ– å³å¯æ»¡è¶³ sql ä¸­çš„ and å’Œ in æŸ¥è¯¢ã€‚ å†…å­˜å¸¦å®½å’Œå‘é‡åŒ–å¤„ç†å¯¹äºéœ€è¦æ‰«ææ•°ç™¾ä¸‡è¡Œçš„æ•°æ®ä»“åº“æŸ¥è¯¢æ¥è¯´ï¼Œä¸€ä¸ªå·¨å¤§çš„ç“¶é¢ˆæ˜¯ä»ç¡¬ç›˜è·å–æ•°æ®åˆ°å†…å­˜çš„å¸¦å®½ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ˜¯å”¯ä¸€çš„ç“¶é¢ˆï¼Œåˆ†æå‹æ•°æ®åº“çš„å¼€å‘äººå‘˜è¿˜å…³æ³¨å¦‚ä½•é«˜æ•ˆåœ°åˆ©ç”¨ä»ä¸»å†…å­˜åˆ°CPUç¼“å­˜çš„å¸¦å®½ï¼Œé¿å…åˆ†æ”¯é¢„æµ‹é”™è¯¯å’ŒCPUæŒ‡ä»¤å¤„ç†æµæ°´çº¿ä¸­çš„åœé¡¿ï¼Œå¹¶åˆ©ç”¨ç°ä»£CPUä¸­çš„å•æŒ‡ä»¤å¤šæ•°æ®ï¼ˆSIMD single-instruction-multi-dataï¼‰æŒ‡ä»¤ã€‚ åˆ—å¼å­˜å‚¨ï¼šå¯ä»¥å‡å°ä»ç¡¬ç›˜åŠ è½½çš„æ•°æ®é‡ï¼›ä¹Ÿå¯ä»¥é«˜æ•ˆçš„åˆ©ç”¨CPUå‘¨æœŸã€‚å¦‚ï¼šæŸ¥è¯¢å¼•æ“å¯ä»¥å°†ä¸€æ•´å—å‹ç¼©å¥½çš„åˆ—æ•°æ®æ”¾è¿› CPU çš„ L1 ç¼“å­˜ä¸­ï¼Œç„¶ååœ¨ç´§å¯†çš„å¾ªç¯ï¼ˆå³æ²¡æœ‰å‡½æ•°è°ƒç”¨ï¼‰ä¸­éå†ã€‚ç›¸æ¯”äºæ¯æ¡è®°å½•çš„å¤„ç†éƒ½éœ€è¦å¤§é‡å‡½æ•°è°ƒç”¨å’Œæ¡ä»¶åˆ¤æ–­çš„ä»£ç ï¼ŒCPU æ‰§è¡Œè¿™æ ·ä¸€ä¸ªå¾ªç¯è¦å¿«å¾—å¤šã€‚åˆ—å‹ç¼©å…è®¸åˆ—ä¸­çš„æ›´å¤šè¡Œè¢«åŒæ—¶æ”¾è¿›å®¹é‡æœ‰é™çš„ L1 ç¼“å­˜ã€‚å‰é¢æè¿°çš„æŒ‰ä½ â€œä¸â€ å’Œ â€œæˆ–â€ è¿ç®—ç¬¦å¯ä»¥è¢«è®¾è®¡ä¸ºç›´æ¥åœ¨è¿™æ ·çš„å‹ç¼©åˆ—æ•°æ®å—ä¸Šæ“ä½œã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºå‘é‡åŒ–å¤„ç†ï¼ˆvectorized processingï¼‰ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:3:1","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#ä½å›¾ç¼–ç æŠ€æœ¯"},{"categories":["æŠ€æœ¯"],"content":" åˆ—å‹ç¼©é™¤äº†ä»…ä»ç¡¬ç›˜åŠ è½½æŸ¥è¯¢æ‰€éœ€çš„åˆ—ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å‹ç¼©æ•°æ®æ¥è¿›ä¸€æ­¥é™ä½å¯¹ç¡¬ç›˜ååé‡çš„éœ€æ±‚ã€‚å¹¸è¿çš„æ˜¯ï¼Œåˆ—å¼å­˜å‚¨é€šå¸¸å¾ˆé€‚åˆå‹ç¼©ã€‚ ä½å›¾ç¼–ç æŠ€æœ¯é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€åˆ—ä¸­ä¸åŒå€¼çš„æ•°é‡ä¸è¡Œæ•°ç›¸æ¯”è¦å°å¾—å¤šï¼ˆä¾‹å¦‚ï¼Œé›¶å”®å•†å¯èƒ½æœ‰æ•°åäº¿çš„é”€å”®äº¤æ˜“ï¼Œä½†åªæœ‰ 100,000 ä¸ªä¸åŒçš„äº§å“ï¼‰ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æ‹¿ä¸€ä¸ªæœ‰ n ä¸ªä¸åŒå€¼çš„åˆ—ï¼Œå¹¶æŠŠå®ƒè½¬æ¢æˆ n ä¸ªç‹¬ç«‹çš„ä½å›¾ï¼šæ¯ä¸ªä¸åŒå€¼å¯¹åº”ä¸€ä¸ªä½å›¾ï¼Œæ¯è¡Œå¯¹åº”ä¸€ä¸ªæ¯”ç‰¹ä½ã€‚å¦‚æœè¯¥è¡Œå…·æœ‰è¯¥å€¼ï¼Œåˆ™è¯¥ä½ä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚ å¦‚æœ n éå¸¸å°ï¼ˆä¾‹å¦‚ï¼Œå›½å®¶ / åœ°åŒºåˆ—å¯èƒ½æœ‰å¤§çº¦ 200 ä¸ªä¸åŒçš„å€¼ï¼‰ï¼Œåˆ™è¿™äº›ä½å›¾å¯ä»¥å°†æ¯è¡Œå­˜å‚¨æˆä¸€ä¸ªæ¯”ç‰¹ä½ã€‚ä½†æ˜¯ï¼Œå¦‚æœ n æ›´å¤§ï¼Œå¤§éƒ¨åˆ†ä½å›¾ä¸­å°†ä¼šæœ‰å¾ˆå¤šçš„é›¶ï¼ˆæˆ‘ä»¬è¯´å®ƒä»¬æ˜¯ç¨€ç–çš„ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½å›¾å¯ä»¥å¦å¤–å†è¿›è¡Œæ¸¸ç¨‹ç¼–ç ï¼ˆrun-length encodingï¼Œä¸€ç§æ— æŸæ•°æ®å‹ç¼©æŠ€æœ¯ï¼‰ã€‚è¿™å¯ä»¥ä½¿åˆ—çš„ç¼–ç éå¸¸ç´§å‡‘ã€‚ ä½å›¾ç´¢å¼•éå¸¸é€‚åˆæ•°æ®ä»“åº“ä¸­å¸¸è§çš„å„ç§æŸ¥è¯¢ã€‚æŒ‰ä½ä¸ï¼ŒæŒ‰ä½æˆ– å³å¯æ»¡è¶³ sql ä¸­çš„ and å’Œ in æŸ¥è¯¢ã€‚ å†…å­˜å¸¦å®½å’Œå‘é‡åŒ–å¤„ç†å¯¹äºéœ€è¦æ‰«ææ•°ç™¾ä¸‡è¡Œçš„æ•°æ®ä»“åº“æŸ¥è¯¢æ¥è¯´ï¼Œä¸€ä¸ªå·¨å¤§çš„ç“¶é¢ˆæ˜¯ä»ç¡¬ç›˜è·å–æ•°æ®åˆ°å†…å­˜çš„å¸¦å®½ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ˜¯å”¯ä¸€çš„ç“¶é¢ˆï¼Œåˆ†æå‹æ•°æ®åº“çš„å¼€å‘äººå‘˜è¿˜å…³æ³¨å¦‚ä½•é«˜æ•ˆåœ°åˆ©ç”¨ä»ä¸»å†…å­˜åˆ°CPUç¼“å­˜çš„å¸¦å®½ï¼Œé¿å…åˆ†æ”¯é¢„æµ‹é”™è¯¯å’ŒCPUæŒ‡ä»¤å¤„ç†æµæ°´çº¿ä¸­çš„åœé¡¿ï¼Œå¹¶åˆ©ç”¨ç°ä»£CPUä¸­çš„å•æŒ‡ä»¤å¤šæ•°æ®ï¼ˆSIMD single-instruction-multi-dataï¼‰æŒ‡ä»¤ã€‚ åˆ—å¼å­˜å‚¨ï¼šå¯ä»¥å‡å°ä»ç¡¬ç›˜åŠ è½½çš„æ•°æ®é‡ï¼›ä¹Ÿå¯ä»¥é«˜æ•ˆçš„åˆ©ç”¨CPUå‘¨æœŸã€‚å¦‚ï¼šæŸ¥è¯¢å¼•æ“å¯ä»¥å°†ä¸€æ•´å—å‹ç¼©å¥½çš„åˆ—æ•°æ®æ”¾è¿› CPU çš„ L1 ç¼“å­˜ä¸­ï¼Œç„¶ååœ¨ç´§å¯†çš„å¾ªç¯ï¼ˆå³æ²¡æœ‰å‡½æ•°è°ƒç”¨ï¼‰ä¸­éå†ã€‚ç›¸æ¯”äºæ¯æ¡è®°å½•çš„å¤„ç†éƒ½éœ€è¦å¤§é‡å‡½æ•°è°ƒç”¨å’Œæ¡ä»¶åˆ¤æ–­çš„ä»£ç ï¼ŒCPU æ‰§è¡Œè¿™æ ·ä¸€ä¸ªå¾ªç¯è¦å¿«å¾—å¤šã€‚åˆ—å‹ç¼©å…è®¸åˆ—ä¸­çš„æ›´å¤šè¡Œè¢«åŒæ—¶æ”¾è¿›å®¹é‡æœ‰é™çš„ L1 ç¼“å­˜ã€‚å‰é¢æè¿°çš„æŒ‰ä½ â€œä¸â€ å’Œ â€œæˆ–â€ è¿ç®—ç¬¦å¯ä»¥è¢«è®¾è®¡ä¸ºç›´æ¥åœ¨è¿™æ ·çš„å‹ç¼©åˆ—æ•°æ®å—ä¸Šæ“ä½œã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºå‘é‡åŒ–å¤„ç†ï¼ˆvectorized processingï¼‰ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:3:1","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#å†…å­˜å¸¦å®½å’Œå‘é‡åŒ–å¤„ç†"},{"categories":["æŠ€æœ¯"],"content":" åˆ—å¼å­˜å‚¨ä¸­çš„æ’åºé¡ºåºåˆ—å¼å­˜å‚¨ä¸­ï¼Œå­˜å‚¨åˆ—çš„é¡ºåºå¹¶ä¸å…³é”®ï¼ŒæŒ‰æ’å…¥é¡ºåºå­˜å‚¨å®ƒä»¬æœ€ç®€å•ï¼Œå› ä¸ºæ’å…¥ä¸€ä¸ªæ–°è¡Œåªéœ€è¦è¿½åŠ åˆ°æ¯ä¸ªåˆ—æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‰æŸç§é¡ºåºæ¥æ’åˆ—æ•°æ®ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰å¯¹ SSTables æ‰€åšçš„é‚£æ ·ï¼Œå¹¶å°†å…¶ç”¨ä½œç´¢å¼•æœºåˆ¶ã€‚ æ³¨æ„ï¼Œå¯¹æ¯åˆ—åˆ†åˆ«æ‰§è¡Œæ’åºä¹Ÿæ˜¯æ— æ„ä¹‰çš„ï¼Œå› ä¸ºé‚£æ ·å°±æ²¡æ³•çŸ¥é“ä¸åŒåˆ—ä¸­çš„å“ªäº›é¡¹å±äºåŒä¸€è¡Œã€‚æˆ‘ä»¬åªèƒ½åœ¨æ˜ç¡®ä¸€åˆ—ä¸­çš„ç¬¬ k é¡¹ä¸å¦ä¸€åˆ—ä¸­çš„ç¬¬ k é¡¹å±äºåŒä¸€è¡Œçš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½é‡å»ºå‡ºå®Œæ•´çš„è¡Œã€‚ å¯¹æ•°æ®çš„æ’åºéœ€è¦å¯¹æ•´è¡Œè¿›è¡Œç»Ÿä¸€æ“ä½œï¼Œå³ä½¿å®ƒä»¬çš„å­˜å‚¨æ–¹å¼æ˜¯æŒ‰åˆ—çš„ã€‚æ•°æ®åº“ç®¡ç†å‘˜å¯ä»¥æ ¹æ®ä»–ä»¬å¯¹å¸¸ç”¨æŸ¥è¯¢çš„äº†è§£ï¼Œæ¥é€‰æ‹©è¡¨æ ¼ä¸­ç”¨æ¥æ’åºçš„åˆ—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥è¯¢é€šå¸¸ä»¥æ—¥æœŸèŒƒå›´ä¸ºç›®æ ‡ï¼Œä¾‹å¦‚â€œä¸Šä¸ªæœˆâ€ï¼Œåˆ™å¯ä»¥å°† date_key ä½œä¸ºç¬¬ä¸€ä¸ªæ’åºé”®ã€‚è¿™æ ·æŸ¥è¯¢ä¼˜åŒ–å™¨å°±å¯ä»¥åªæ‰«æè¿‘1ä¸ªæœˆèŒƒå›´çš„è¡Œäº†ï¼Œè¿™æ¯”æ‰«ææ‰€æœ‰è¡Œè¦å¿«å¾—å¤šã€‚ å¯¹äºç¬¬ä¸€æ’åºåˆ—ä¸­å…·æœ‰ç›¸åŒå€¼çš„è¡Œï¼Œå¯ä»¥ç”¨ç¬¬äºŒæ’åºåˆ—æ¥è¿›ä¸€æ­¥æ’åºã€‚ä¾‹å¦‚ï¼Œå¦‚æœ date_key æ˜¯ä¸­çš„ç¬¬ä¸€ä¸ªæ’åºå…³é”®å­—ï¼Œé‚£ä¹ˆ product_sk å¯èƒ½æ˜¯ç¬¬äºŒä¸ªæ’åºå…³é”®å­—ï¼Œä»¥ä¾¿åŒä¸€å¤©çš„åŒä¸€äº§å“çš„æ‰€æœ‰é”€å”®æ•°æ®éƒ½è¢«å­˜å‚¨åœ¨ç›¸é‚»ä½ç½®ã€‚è¿™å°†æœ‰åŠ©äºéœ€è¦åœ¨ç‰¹å®šæ—¥æœŸèŒƒå›´å†…æŒ‰äº§å“å¯¹é”€å”®è¿›è¡Œåˆ†ç»„æˆ–è¿‡æ»¤çš„æŸ¥è¯¢ã€‚ æŒ‰é¡ºåºæ’åºçš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å®ƒå¯ä»¥å¸®åŠ©å‹ç¼©åˆ—ã€‚å¦‚æœä¸»è¦æ’åºåˆ—æ²¡æœ‰å¤ªå¤šä¸ªä¸åŒçš„å€¼ï¼Œé‚£ä¹ˆåœ¨æ’åºä¹‹åï¼Œå°†ä¼šå¾—åˆ°ä¸€ä¸ªç›¸åŒçš„å€¼è¿ç»­é‡å¤å¤šæ¬¡çš„åºåˆ—ã€‚ä¸€ä¸ªç®€å•çš„æ¸¸ç¨‹ç¼–ç å¯ä»¥å°†è¯¥åˆ—å‹ç¼©åˆ°å‡  KB â€”â€” å³ä½¿è¡¨ä¸­æœ‰æ•°åäº¿è¡Œã€‚ ç¬¬ä¸€ä¸ªæ’åºé”®çš„å‹ç¼©æ•ˆæœæœ€å¼ºã€‚ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªæ’åºé”®ä¼šæ›´æ··ä¹±ï¼Œå› æ­¤ä¸ä¼šæœ‰è¿™ä¹ˆé•¿çš„è¿ç»­çš„é‡å¤å€¼ã€‚æ’åºä¼˜å…ˆçº§æ›´ä½çš„åˆ—ä»¥å‡ ä¹éšæœºçš„é¡ºåºå‡ºç°ï¼Œæ‰€ä»¥å¯èƒ½ä¸ä¼šè¢«å‹ç¼©ã€‚ä½†å¯¹å‰å‡ åˆ—åšæ’åºåœ¨æ•´ä½“ä¸Šä»ç„¶æ˜¯æœ‰å¥½å¤„çš„ã€‚ å‡ ä¸ªä¸åŒçš„æ’åºé¡ºåºå¯¹è¿™ä¸ªæƒ³æ³•ï¼Œæœ‰ä¸€ä¸ªå·§å¦™çš„æ‰©å±•è¢« C-Store å‘ç°ï¼Œå¹¶åœ¨å•†ä¸šæ•°æ®ä»“åº“ Vertica ä¸­è¢«é‡‡ç”¨ï¼šæ—¢ç„¶ä¸åŒçš„æŸ¥è¯¢å—ç›Šäºä¸åŒçš„æ’åºé¡ºåºï¼Œä¸ºä»€ä¹ˆä¸ä»¥å‡ ç§ä¸åŒçš„æ–¹å¼æ¥å­˜å‚¨ç›¸åŒçš„æ•°æ®å‘¢ï¼Ÿåæ­£æ•°æ®éƒ½éœ€è¦åšå¤‡ä»½ï¼Œä»¥é˜²å•ç‚¹æ•…éšœæ—¶ä¸¢å¤±æ•°æ®ã€‚å› æ­¤ä½ å¯ä»¥ç”¨ä¸åŒæ’åºæ–¹å¼æ¥å­˜å‚¨å†—ä½™æ•°æ®ï¼Œä»¥ä¾¿åœ¨å¤„ç†æŸ¥è¯¢æ—¶ï¼Œè°ƒç”¨æœ€é€‚åˆæŸ¥è¯¢æ¨¡å¼çš„ç‰ˆæœ¬ã€‚ åœ¨ä¸€ä¸ªåˆ—å¼å­˜å‚¨ä¸­æœ‰å¤šä¸ªæ’åºé¡ºåºæœ‰ç‚¹ç±»ä¼¼äºåœ¨ä¸€ä¸ªé¢å‘è¡Œçš„å­˜å‚¨ä¸­æœ‰å¤šä¸ªæ¬¡çº§ç´¢å¼•ã€‚ä½†æœ€å¤§çš„åŒºåˆ«åœ¨äº é¢å‘è¡Œçš„å­˜å‚¨å°†æ¯ä¸€è¡Œä¿å­˜åœ¨ä¸€ä¸ªåœ°æ–¹ï¼ˆåœ¨å †æ–‡ä»¶æˆ–èšé›†ç´¢å¼•ä¸­ï¼‰ï¼Œæ¬¡çº§ç´¢å¼•åªåŒ…å«æŒ‡å‘åŒ¹é…è¡Œçš„æŒ‡é’ˆã€‚ åœ¨åˆ—å¼å­˜å‚¨ä¸­ï¼Œé€šå¸¸åœ¨å…¶ä»–åœ°æ–¹æ²¡æœ‰ä»»ä½•æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆï¼Œåªæœ‰åŒ…å«å€¼çš„åˆ—ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:3:2","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#åˆ—å¼å­˜å‚¨ä¸­çš„æ’åºé¡ºåº"},{"categories":["æŠ€æœ¯"],"content":" åˆ—å¼å­˜å‚¨ä¸­çš„æ’åºé¡ºåºåˆ—å¼å­˜å‚¨ä¸­ï¼Œå­˜å‚¨åˆ—çš„é¡ºåºå¹¶ä¸å…³é”®ï¼ŒæŒ‰æ’å…¥é¡ºåºå­˜å‚¨å®ƒä»¬æœ€ç®€å•ï¼Œå› ä¸ºæ’å…¥ä¸€ä¸ªæ–°è¡Œåªéœ€è¦è¿½åŠ åˆ°æ¯ä¸ªåˆ—æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‰æŸç§é¡ºåºæ¥æ’åˆ—æ•°æ®ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰å¯¹ SSTables æ‰€åšçš„é‚£æ ·ï¼Œå¹¶å°†å…¶ç”¨ä½œç´¢å¼•æœºåˆ¶ã€‚ æ³¨æ„ï¼Œå¯¹æ¯åˆ—åˆ†åˆ«æ‰§è¡Œæ’åºä¹Ÿæ˜¯æ— æ„ä¹‰çš„ï¼Œå› ä¸ºé‚£æ ·å°±æ²¡æ³•çŸ¥é“ä¸åŒåˆ—ä¸­çš„å“ªäº›é¡¹å±äºåŒä¸€è¡Œã€‚æˆ‘ä»¬åªèƒ½åœ¨æ˜ç¡®ä¸€åˆ—ä¸­çš„ç¬¬ k é¡¹ä¸å¦ä¸€åˆ—ä¸­çš„ç¬¬ k é¡¹å±äºåŒä¸€è¡Œçš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½é‡å»ºå‡ºå®Œæ•´çš„è¡Œã€‚ å¯¹æ•°æ®çš„æ’åºéœ€è¦å¯¹æ•´è¡Œè¿›è¡Œç»Ÿä¸€æ“ä½œï¼Œå³ä½¿å®ƒä»¬çš„å­˜å‚¨æ–¹å¼æ˜¯æŒ‰åˆ—çš„ã€‚æ•°æ®åº“ç®¡ç†å‘˜å¯ä»¥æ ¹æ®ä»–ä»¬å¯¹å¸¸ç”¨æŸ¥è¯¢çš„äº†è§£ï¼Œæ¥é€‰æ‹©è¡¨æ ¼ä¸­ç”¨æ¥æ’åºçš„åˆ—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥è¯¢é€šå¸¸ä»¥æ—¥æœŸèŒƒå›´ä¸ºç›®æ ‡ï¼Œä¾‹å¦‚â€œä¸Šä¸ªæœˆâ€ï¼Œåˆ™å¯ä»¥å°† date_key ä½œä¸ºç¬¬ä¸€ä¸ªæ’åºé”®ã€‚è¿™æ ·æŸ¥è¯¢ä¼˜åŒ–å™¨å°±å¯ä»¥åªæ‰«æè¿‘1ä¸ªæœˆèŒƒå›´çš„è¡Œäº†ï¼Œè¿™æ¯”æ‰«ææ‰€æœ‰è¡Œè¦å¿«å¾—å¤šã€‚ å¯¹äºç¬¬ä¸€æ’åºåˆ—ä¸­å…·æœ‰ç›¸åŒå€¼çš„è¡Œï¼Œå¯ä»¥ç”¨ç¬¬äºŒæ’åºåˆ—æ¥è¿›ä¸€æ­¥æ’åºã€‚ä¾‹å¦‚ï¼Œå¦‚æœ date_key æ˜¯ä¸­çš„ç¬¬ä¸€ä¸ªæ’åºå…³é”®å­—ï¼Œé‚£ä¹ˆ product_sk å¯èƒ½æ˜¯ç¬¬äºŒä¸ªæ’åºå…³é”®å­—ï¼Œä»¥ä¾¿åŒä¸€å¤©çš„åŒä¸€äº§å“çš„æ‰€æœ‰é”€å”®æ•°æ®éƒ½è¢«å­˜å‚¨åœ¨ç›¸é‚»ä½ç½®ã€‚è¿™å°†æœ‰åŠ©äºéœ€è¦åœ¨ç‰¹å®šæ—¥æœŸèŒƒå›´å†…æŒ‰äº§å“å¯¹é”€å”®è¿›è¡Œåˆ†ç»„æˆ–è¿‡æ»¤çš„æŸ¥è¯¢ã€‚ æŒ‰é¡ºåºæ’åºçš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å®ƒå¯ä»¥å¸®åŠ©å‹ç¼©åˆ—ã€‚å¦‚æœä¸»è¦æ’åºåˆ—æ²¡æœ‰å¤ªå¤šä¸ªä¸åŒçš„å€¼ï¼Œé‚£ä¹ˆåœ¨æ’åºä¹‹åï¼Œå°†ä¼šå¾—åˆ°ä¸€ä¸ªç›¸åŒçš„å€¼è¿ç»­é‡å¤å¤šæ¬¡çš„åºåˆ—ã€‚ä¸€ä¸ªç®€å•çš„æ¸¸ç¨‹ç¼–ç å¯ä»¥å°†è¯¥åˆ—å‹ç¼©åˆ°å‡  KB â€”â€” å³ä½¿è¡¨ä¸­æœ‰æ•°åäº¿è¡Œã€‚ ç¬¬ä¸€ä¸ªæ’åºé”®çš„å‹ç¼©æ•ˆæœæœ€å¼ºã€‚ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªæ’åºé”®ä¼šæ›´æ··ä¹±ï¼Œå› æ­¤ä¸ä¼šæœ‰è¿™ä¹ˆé•¿çš„è¿ç»­çš„é‡å¤å€¼ã€‚æ’åºä¼˜å…ˆçº§æ›´ä½çš„åˆ—ä»¥å‡ ä¹éšæœºçš„é¡ºåºå‡ºç°ï¼Œæ‰€ä»¥å¯èƒ½ä¸ä¼šè¢«å‹ç¼©ã€‚ä½†å¯¹å‰å‡ åˆ—åšæ’åºåœ¨æ•´ä½“ä¸Šä»ç„¶æ˜¯æœ‰å¥½å¤„çš„ã€‚ å‡ ä¸ªä¸åŒçš„æ’åºé¡ºåºå¯¹è¿™ä¸ªæƒ³æ³•ï¼Œæœ‰ä¸€ä¸ªå·§å¦™çš„æ‰©å±•è¢« C-Store å‘ç°ï¼Œå¹¶åœ¨å•†ä¸šæ•°æ®ä»“åº“ Vertica ä¸­è¢«é‡‡ç”¨ï¼šæ—¢ç„¶ä¸åŒçš„æŸ¥è¯¢å—ç›Šäºä¸åŒçš„æ’åºé¡ºåºï¼Œä¸ºä»€ä¹ˆä¸ä»¥å‡ ç§ä¸åŒçš„æ–¹å¼æ¥å­˜å‚¨ç›¸åŒçš„æ•°æ®å‘¢ï¼Ÿåæ­£æ•°æ®éƒ½éœ€è¦åšå¤‡ä»½ï¼Œä»¥é˜²å•ç‚¹æ•…éšœæ—¶ä¸¢å¤±æ•°æ®ã€‚å› æ­¤ä½ å¯ä»¥ç”¨ä¸åŒæ’åºæ–¹å¼æ¥å­˜å‚¨å†—ä½™æ•°æ®ï¼Œä»¥ä¾¿åœ¨å¤„ç†æŸ¥è¯¢æ—¶ï¼Œè°ƒç”¨æœ€é€‚åˆæŸ¥è¯¢æ¨¡å¼çš„ç‰ˆæœ¬ã€‚ åœ¨ä¸€ä¸ªåˆ—å¼å­˜å‚¨ä¸­æœ‰å¤šä¸ªæ’åºé¡ºåºæœ‰ç‚¹ç±»ä¼¼äºåœ¨ä¸€ä¸ªé¢å‘è¡Œçš„å­˜å‚¨ä¸­æœ‰å¤šä¸ªæ¬¡çº§ç´¢å¼•ã€‚ä½†æœ€å¤§çš„åŒºåˆ«åœ¨äº é¢å‘è¡Œçš„å­˜å‚¨å°†æ¯ä¸€è¡Œä¿å­˜åœ¨ä¸€ä¸ªåœ°æ–¹ï¼ˆåœ¨å †æ–‡ä»¶æˆ–èšé›†ç´¢å¼•ä¸­ï¼‰ï¼Œæ¬¡çº§ç´¢å¼•åªåŒ…å«æŒ‡å‘åŒ¹é…è¡Œçš„æŒ‡é’ˆã€‚ åœ¨åˆ—å¼å­˜å‚¨ä¸­ï¼Œé€šå¸¸åœ¨å…¶ä»–åœ°æ–¹æ²¡æœ‰ä»»ä½•æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆï¼Œåªæœ‰åŒ…å«å€¼çš„åˆ—ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:3:2","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#å‡ ä¸ªä¸åŒçš„æ’åºé¡ºåº"},{"categories":["æŠ€æœ¯"],"content":" å†™å…¥åˆ—å¼å­˜å‚¨è¿™äº›ä¼˜åŒ–åœ¨æ•°æ®ä»“åº“ä¸­æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå…¶è´Ÿè½½ä¸»è¦ç”±åˆ†æäººå‘˜è¿è¡Œçš„å¤§å‹åªè¯»æŸ¥è¯¢ç»„æˆã€‚åˆ—å¼å­˜å‚¨ã€å‹ç¼©å’Œæ’åºéƒ½æœ‰åŠ©äºæ›´å¿«åœ°è¯»å–è¿™äº›æŸ¥è¯¢ã€‚ç„¶è€Œï¼Œä»–ä»¬çš„ç¼ºç‚¹æ˜¯å†™å…¥æ›´åŠ å›°éš¾ã€‚ ä½¿ç”¨ B æ ‘çš„å°±åœ°æ›´æ–°æ–¹æ³•å¯¹äºå‹ç¼©çš„åˆ—æ˜¯ä¸å¯èƒ½çš„ã€‚å¦‚æœä½ æƒ³åœ¨æ’åºè¡¨çš„ä¸­é—´æ’å…¥ä¸€è¡Œï¼Œä½ å¾ˆå¯èƒ½ä¸å¾—ä¸é‡å†™æ‰€æœ‰çš„åˆ—æ–‡ä»¶ã€‚ç”±äºè¡Œç”±åˆ—ä¸­çš„ä½ç½®æ ‡è¯†ï¼Œå› æ­¤æ’å…¥å¿…é¡»å¯¹æ‰€æœ‰åˆ—è¿›è¡Œä¸€è‡´åœ°æ›´æ–°ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæœ¬ç« å‰é¢å·²ç»çœ‹åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼šLSM æ ‘ã€‚æ‰€æœ‰çš„å†™æ“ä½œé¦–å…ˆè¿›å…¥ä¸€ä¸ªå†…å­˜ä¸­çš„å­˜å‚¨ï¼Œåœ¨è¿™é‡Œå®ƒä»¬è¢«æ·»åŠ åˆ°ä¸€ä¸ªå·²æ’åºçš„ç»“æ„ä¸­ï¼Œå¹¶å‡†å¤‡å†™å…¥ç¡¬ç›˜ã€‚å†…å­˜ä¸­çš„å­˜å‚¨æ˜¯é¢å‘è¡Œè¿˜æ˜¯åˆ—çš„å¹¶ä¸é‡è¦ã€‚å½“å·²ç»ç§¯ç´¯äº†è¶³å¤Ÿçš„å†™å…¥æ•°æ®æ—¶ï¼Œå®ƒä»¬å°†ä¸ç¡¬ç›˜ä¸Šçš„åˆ—æ–‡ä»¶åˆå¹¶ï¼Œå¹¶æ‰¹é‡å†™å…¥æ–°æ–‡ä»¶ã€‚è¿™åŸºæœ¬ä¸Šæ˜¯ Vertica æ‰€åšçš„ã€‚ æŸ¥è¯¢æ“ä½œéœ€è¦æ£€æŸ¥ç¡¬ç›˜ä¸Šçš„åˆ—æ•°æ®å’Œå†…å­˜ä¸­çš„æœ€è¿‘å†™å…¥ï¼Œå¹¶å°†ä¸¤è€…çš„ç»“æœåˆå¹¶èµ·æ¥ã€‚ä½†æ˜¯ï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨å¯¹ç”¨æˆ·éšè—äº†è¿™ä¸ªç»†èŠ‚ã€‚ä»åˆ†æå¸ˆçš„è§’åº¦æ¥çœ‹ï¼Œé€šè¿‡æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ“ä½œè¿›è¡Œä¿®æ”¹çš„æ•°æ®ä¼šç«‹å³åæ˜ åœ¨åç»­çš„æŸ¥è¯¢ä¸­ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:3:3","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#å†™å…¥åˆ—å¼å­˜å‚¨"},{"categories":["æŠ€æœ¯"],"content":" èšåˆï¼šæ•°æ®ç«‹æ–¹ä½“å’Œç‰©åŒ–è§†å›¾æ•°æ®ä»“åº“çš„å¦ä¸€ä¸ªå€¼å¾—ä¸€æçš„æ–¹é¢æ˜¯ç‰©åŒ–èšåˆï¼ˆmaterialized aggregatesï¼‰ã€‚å¦‚å‰æ‰€è¿°ï¼Œæ•°æ®ä»“åº“æŸ¥è¯¢é€šå¸¸æ¶‰åŠä¸€ä¸ªèšåˆå‡½æ•°ï¼Œå¦‚ SQL ä¸­çš„ COUNTã€SUMã€AVGã€MIN æˆ– MAXã€‚å¦‚æœç›¸åŒçš„èšåˆè¢«è®¸å¤šä¸åŒçš„æŸ¥è¯¢ä½¿ç”¨ï¼Œé‚£ä¹ˆæ¯æ¬¡éƒ½é€šè¿‡åŸå§‹æ•°æ®æ¥å¤„ç†å¯èƒ½å¤ªæµªè´¹äº†ã€‚ä¸ºä»€ä¹ˆä¸å°†ä¸€äº›æŸ¥è¯¢ä½¿ç”¨æœ€é¢‘ç¹çš„è®¡æ•°æˆ–æ€»å’Œç¼“å­˜èµ·æ¥ï¼Ÿ åˆ›å»ºè¿™ç§ç¼“å­˜çš„ä¸€ç§æ–¹å¼æ˜¯ç‰©åŒ–è§†å›¾ï¼ˆMaterialized Viewï¼‰ã€‚åœ¨å…³ç³»æ•°æ®æ¨¡å‹ä¸­ï¼Œå®ƒé€šå¸¸è¢«å®šä¹‰ä¸ºä¸€ä¸ªæ ‡å‡†ï¼ˆè™šæ‹Ÿï¼‰è§†å›¾ï¼šä¸€ä¸ªç±»ä¼¼äºè¡¨çš„å¯¹è±¡ï¼Œå…¶å†…å®¹æ˜¯ä¸€äº›æŸ¥è¯¢çš„ç»“æœã€‚ä¸åŒçš„æ˜¯ï¼Œç‰©åŒ–è§†å›¾æ˜¯æŸ¥è¯¢ç»“æœçš„å®é™…å‰¯æœ¬ï¼Œä¼šè¢«å†™å…¥ç¡¬ç›˜ï¼Œè€Œè™šæ‹Ÿè§†å›¾åªæ˜¯ç¼–å†™æŸ¥è¯¢çš„ä¸€ä¸ªæ·å¾„ã€‚ä»è™šæ‹Ÿè§†å›¾è¯»å–æ—¶ï¼ŒSQL å¼•æ“ä¼šå°†å…¶å±•å¼€åˆ°è§†å›¾çš„åº•å±‚æŸ¥è¯¢ä¸­ï¼Œç„¶åå†å¤„ç†å±•å¼€çš„æŸ¥è¯¢ã€‚ å½“åº•å±‚æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç‰©åŒ–è§†å›¾éœ€è¦æ›´æ–°ï¼Œå› ä¸ºå®ƒæ˜¯æ•°æ®çš„éè§„èŒƒåŒ–å‰¯æœ¬ã€‚æ•°æ®åº“å¯ä»¥è‡ªåŠ¨å®Œæˆè¯¥æ“ä½œï¼Œä½†æ˜¯è¿™æ ·çš„æ›´æ–°ä½¿å¾—å†™å…¥æˆæœ¬æ›´é«˜ï¼Œè¿™å°±æ˜¯åœ¨ OLTP æ•°æ®åº“ä¸­ä¸ç»å¸¸ä½¿ç”¨ç‰©åŒ–è§†å›¾çš„åŸå› ã€‚åœ¨è¯»å–ç¹é‡çš„æ•°æ®ä»“åº“ä¸­ï¼Œå®ƒä»¬å¯èƒ½æ›´æœ‰æ„ä¹‰ï¼ˆå®ƒä»¬æ˜¯å¦å®é™…ä¸Šæ”¹å–„äº†è¯»å–æ€§èƒ½å–å†³äºä½¿ç”¨åœºæ™¯ï¼‰ã€‚ ç‰©åŒ–è§†å›¾çš„å¸¸è§ç‰¹ä¾‹ç§°ä¸ºæ•°æ®ç«‹æ–¹ä½“æˆ– OLAP ç«‹æ–¹ã€‚å®ƒæ˜¯æŒ‰ä¸åŒç»´åº¦åˆ†ç»„çš„èšåˆç½‘æ ¼ã€‚æ˜¾ç¤ºäº†ä¸€ä¸ªä¾‹å­ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œç°åœ¨æ¯ä¸ªäº‹å®éƒ½åªæœ‰ä¸¤ä¸ªç»´åº¦è¡¨çš„å¤–é”® â€”â€” åœ¨ä¸Šå›¾ä¸­åˆ†åˆ«æ˜¯æ—¥æœŸå’Œäº§å“ã€‚ä½ ç°åœ¨å¯ä»¥ç»˜åˆ¶ä¸€ä¸ªäºŒç»´è¡¨æ ¼ï¼Œä¸€ä¸ªè½´çº¿ä¸Šæ˜¯æ—¥æœŸï¼Œå¦ä¸€ä¸ªè½´çº¿ä¸Šæ˜¯äº§å“ã€‚æ¯ä¸ªå•å…ƒæ ¼åŒ…å«å…·æœ‰è¯¥æ—¥æœŸ - äº§å“ç»„åˆçš„æ‰€æœ‰äº‹å®çš„å±æ€§ï¼ˆä¾‹å¦‚ net_priceï¼‰çš„èšåˆï¼ˆä¾‹å¦‚ SUMï¼‰ã€‚ç„¶åï¼Œä½ å¯ä»¥æ²¿ç€æ¯è¡Œæˆ–æ¯åˆ—åº”ç”¨ç›¸åŒçš„æ±‡æ€»ï¼Œå¹¶è·å¾—å‡å°‘äº†ä¸€ä¸ªç»´åº¦çš„æ±‡æ€»ï¼ˆæŒ‰äº§å“çš„é”€å”®é¢ï¼Œæ— è®ºæ—¥æœŸï¼Œæˆ–è€…æŒ‰æ—¥æœŸçš„é”€å”®é¢ï¼Œæ— è®ºäº§å“ï¼‰ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œäº‹å®å¾€å¾€æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„ç»´åº¦ã€‚åœ¨ä¸­æœ‰äº”ä¸ªç»´åº¦ï¼šæ—¥æœŸã€äº§å“ã€å•†åº—ã€ä¿ƒé”€å’Œå®¢æˆ·ã€‚è¦æƒ³è±¡ä¸€ä¸ªäº”ç»´è¶…ç«‹æ–¹ä½“æ˜¯ä»€ä¹ˆæ ·å­æ˜¯å¾ˆå›°éš¾çš„ï¼Œä½†æ˜¯åŸç†æ˜¯ä¸€æ ·çš„ï¼šæ¯ä¸ªå•å…ƒæ ¼éƒ½åŒ…å«ç‰¹å®šæ—¥æœŸ - äº§å“ - å•†åº— - ä¿ƒé”€ - å®¢æˆ·ç»„åˆçš„é”€å”®é¢ã€‚è¿™äº›å€¼å¯ä»¥åœ¨æ¯ä¸ªç»´åº¦ä¸Šæ±‚å’Œæ±‡æ€»ã€‚ ç‰©åŒ–æ•°æ®ç«‹æ–¹ä½“çš„ä¼˜ç‚¹æ˜¯å¯ä»¥è®©æŸäº›æŸ¥è¯¢å˜å¾—éå¸¸å¿«ï¼Œå› ä¸ºå®ƒä»¬å·²ç»è¢«æœ‰æ•ˆåœ°é¢„å…ˆè®¡ç®—äº†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³çŸ¥é“æ¯ä¸ªå•†åº—çš„æ€»é”€å”®é¢ï¼Œåˆ™åªéœ€æŸ¥çœ‹åˆé€‚ç»´åº¦çš„æ€»è®¡ï¼Œè€Œæ— éœ€æ‰«ææ•°ç™¾ä¸‡è¡Œçš„åŸå§‹æ•°æ®ã€‚ æ•°æ®ç«‹æ–¹ä½“çš„ç¼ºç‚¹æ˜¯ä¸å…·æœ‰æŸ¥è¯¢åŸå§‹æ•°æ®çš„çµæ´»æ€§ã€‚ä¾‹å¦‚ï¼Œæ²¡æœ‰åŠæ³•è®¡ç®—æœ‰å¤šå°‘æ¯”ä¾‹çš„é”€å”®æ¥è‡ªæˆæœ¬è¶…è¿‡ 100 ç¾å…ƒçš„é¡¹ç›®ï¼Œå› ä¸ºä»·æ ¼ä¸æ˜¯å…¶ä¸­çš„ä¸€ä¸ªç»´åº¦ã€‚å› æ­¤ï¼Œå¤§å¤šæ•°æ•°æ®ä»“åº“è¯•å›¾ä¿ç•™å°½å¯èƒ½å¤šçš„åŸå§‹æ•°æ®ï¼Œå¹¶å°†èšåˆæ•°æ®ï¼ˆå¦‚æ•°æ®ç«‹æ–¹ä½“ï¼‰ä»…ç”¨ä½œæŸäº›æŸ¥è¯¢çš„æ€§èƒ½æå‡æ‰‹æ®µ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:3:4","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#èšåˆæ•°æ®ç«‹æ–¹ä½“å’Œç‰©åŒ–è§†å›¾"},{"categories":["æŠ€æœ¯"],"content":" å°ç»“åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°å­˜å‚¨å¼•æ“åˆ†ä¸ºä¸¤å¤§ç±»ï¼šé’ˆå¯¹ äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ ä¼˜åŒ–çš„å­˜å‚¨å¼•æ“å’Œé’ˆå¯¹ åœ¨çº¿åˆ†æï¼ˆOLAPï¼‰ ä¼˜åŒ–çš„å­˜å‚¨å¼•æ“ã€‚è¿™ä¸¤ç±»ä½¿ç”¨åœºæ™¯çš„è®¿é—®æ¨¡å¼ä¹‹é—´æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼š OLTP ç³»ç»Ÿé€šå¸¸é¢å‘æœ€ç»ˆç”¨æˆ·ï¼Œè¿™æ„å‘³ç€ç³»ç»Ÿå¯èƒ½ä¼šæ”¶åˆ°å¤§é‡çš„è¯·æ±‚ã€‚ä¸ºäº†å¤„ç†è´Ÿè½½ï¼Œåº”ç”¨ç¨‹åºåœ¨æ¯ä¸ªæŸ¥è¯¢ä¸­é€šå¸¸åªè®¿é—®å°‘é‡çš„è®°å½•ã€‚åº”ç”¨ç¨‹åºä½¿ç”¨æŸç§é”®æ¥è¯·æ±‚è®°å½•ï¼Œå­˜å‚¨å¼•æ“ä½¿ç”¨ç´¢å¼•æ¥æŸ¥æ‰¾æ‰€è¯·æ±‚çš„é”®çš„æ•°æ®ã€‚ç¡¬ç›˜æŸ¥æ‰¾æ—¶é—´å¾€å¾€æ˜¯è¿™é‡Œçš„ç“¶é¢ˆã€‚ æ•°æ®ä»“åº“å’Œç±»ä¼¼çš„åˆ†æç³»ç»Ÿä¼šå°‘è§ä¸€äº›ï¼Œå› ä¸ºå®ƒä»¬ä¸»è¦ç”±ä¸šåŠ¡åˆ†æäººå‘˜ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æœ€ç»ˆç”¨æˆ·ã€‚å®ƒä»¬çš„æŸ¥è¯¢é‡è¦æ¯” OLTP ç³»ç»Ÿå°‘å¾—å¤šï¼Œä½†é€šå¸¸æ¯ä¸ªæŸ¥è¯¢å¼€é”€é«˜æ˜‚ï¼Œéœ€è¦åœ¨çŸ­æ—¶é—´å†…æ‰«ææ•°ç™¾ä¸‡æ¡è®°å½•ã€‚ç¡¬ç›˜å¸¦å®½ï¼ˆè€Œä¸æ˜¯æŸ¥æ‰¾æ—¶é—´ï¼‰å¾€å¾€æ˜¯ç“¶é¢ˆï¼Œåˆ—å¼å­˜å‚¨æ˜¯é’ˆå¯¹è¿™ç§å·¥ä½œè´Ÿè½½çš„æ—¥ç›Šæµè¡Œçš„è§£å†³æ–¹æ¡ˆã€‚ åœ¨ OLTP è¿™ä¸€è¾¹ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸¤æ´¾ä¸»æµçš„å­˜å‚¨å¼•æ“ï¼š æ—¥å¿—ç»“æ„å­¦æ´¾ï¼šåªå…è®¸è¿½åŠ åˆ°æ–‡ä»¶å’Œåˆ é™¤è¿‡æ—¶çš„æ–‡ä»¶ï¼Œä½†ä¸ä¼šæ›´æ–°å·²ç»å†™å…¥çš„æ–‡ä»¶ã€‚Bitcaskã€SSTablesã€LSM æ ‘ã€LevelDBã€Cassandraã€HBaseã€Lucene ç­‰éƒ½å±äºè¿™ä¸ªç±»åˆ«ã€‚ å°±åœ°æ›´æ–°å­¦æ´¾ï¼šå°†ç¡¬ç›˜è§†ä¸ºä¸€ç»„å¯ä»¥è¦†å†™çš„å›ºå®šå¤§å°çš„é¡µé¢ã€‚ B æ ‘æ˜¯è¿™ç§ç†å¿µçš„å…¸èŒƒï¼Œç”¨åœ¨æ‰€æœ‰ä¸»è¦çš„å…³ç³»æ•°æ®åº“å’Œè®¸å¤šéå…³ç³»å‹æ•°æ®åº“ä¸­ã€‚ æ—¥å¿—ç»“æ„çš„å­˜å‚¨å¼•æ“æ˜¯ç›¸å¯¹è¾ƒæ–°çš„æŠ€æœ¯ã€‚ä»–ä»¬çš„ä¸»è¦æƒ³æ³•æ˜¯ï¼Œé€šè¿‡ç³»ç»Ÿæ€§åœ°å°†éšæœºè®¿é—®å†™å…¥è½¬æ¢ä¸ºç¡¬ç›˜ä¸Šçš„é¡ºåºå†™å…¥ï¼Œç”±äºç¡¬ç›˜é©±åŠ¨å™¨å’Œå›ºæ€ç¡¬ç›˜çš„æ€§èƒ½ç‰¹ç‚¹ï¼Œå¯ä»¥å®ç°æ›´é«˜çš„å†™å…¥ååé‡ã€‚ å…³äº OLTPï¼Œæˆ‘ä»¬æœ€åè¿˜ä»‹ç»äº†ä¸€äº›æ›´å¤æ‚çš„ç´¢å¼•ç»“æ„ï¼Œä»¥åŠé’ˆå¯¹æ‰€æœ‰æ•°æ®éƒ½æ”¾åœ¨å†…å­˜é‡Œè€Œä¼˜åŒ–çš„æ•°æ®åº“ã€‚ ç„¶åï¼Œæˆ‘ä»¬æš‚æ—¶æ”¾ä¸‹äº†å­˜å‚¨å¼•æ“çš„å†…éƒ¨ç»†èŠ‚ï¼ŒæŸ¥çœ‹äº†å…¸å‹æ•°æ®ä»“åº“çš„é«˜çº§æ¶æ„ï¼Œå¹¶è¯´æ˜äº†ä¸ºä»€ä¹ˆåˆ†æå·¥ä½œè´Ÿè½½ä¸ OLTP å·®åˆ«å¾ˆå¤§ï¼šå½“ä½ çš„æŸ¥è¯¢éœ€è¦åœ¨å¤§é‡è¡Œä¸­é¡ºåºæ‰«ææ—¶ï¼Œç´¢å¼•çš„é‡è¦æ€§å°±ä¼šé™ä½å¾ˆå¤šã€‚ç›¸åï¼Œéå¸¸ç´§å‡‘åœ°ç¼–ç æ•°æ®å˜å¾—éå¸¸é‡è¦ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘æŸ¥è¯¢éœ€è¦ä»ç¡¬ç›˜è¯»å–çš„æ•°æ®é‡ã€‚æˆ‘ä»¬è®¨è®ºäº†åˆ—å¼å­˜å‚¨å¦‚ä½•å¸®åŠ©å®ç°è¿™ä¸€ç›®æ ‡ã€‚ ","date":"2023-05-20","objectID":"/posts/ddia/oltp-or-olap/:4:0","series":null,"tags":["æ•°æ®å¯†é›†","OLTP","OLAP","åˆ—å¼å­˜å‚¨"],"title":"OLTP-or-OLAP","uri":"/posts/ddia/oltp-or-olap/#å°ç»“"},{"categories":["æŠ€æœ¯"],"content":" word æ–‡æ¡£ç®¡ç†æœ€è¿‘å†™wordæ–‡æ¡£æœ‰ç‚¹å¤šï¼Œå¹¶ä¸”æ˜¯å¤šäººç¼–å†™ï¼Œç„¶åå°±é€ æˆæ–‡æ¡£çš„æ ‡é¢˜å˜æˆäº†ï¼š txt xxxx-1.docx xxxx(1).docx xxxx-0517.docx æ€»ä¹‹ä¹±ä¸ƒå…«ç³Ÿã€‚ æ‰€ä»¥å°±æœç´¢äº†ä¸€ä¸‹ï¼Œword çš„ç‰ˆæœ¬ç®¡ç†æ–¹æ¡ˆï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ Git+Pandoc çš„ç‰ˆæœ¬ç®¡ç†æ–¹æ¡ˆï¼ˆéœ€è¦ä¸€å®šçš„ Git åŸºç¡€ï¼‰ã€‚ å®‰è£… Git å’Œ Pandoc é…ç½® git çš„ diff å·®å¼‚å¼•æ“ pandocï¼Œå…¶å¯ä»¥å°† word æ–‡ä»¶è½¬æ¢ä¸º md æ–‡ä»¶ï¼Œä¸”è®¾ç½®ä¸ºPandocå·®å¼‚å¼•æ“çš„æç¤ºæ–¹å¼ä¸ºä¸æ˜¾ç¤ºæç¤ºä¿¡æ¯ã€‚ git # ä½¿ç”¨äºå½“å‰ä»“åº“ git config diff.pandoc.textconv \"pandoc --to=markdown\" git config diff.pandoc.prompt false # å…¨å±€é…ç½® git config --global diff.pandoc.textconv \"pandoc --to=markdown\" git config --global diff.pandoc.prompt false ã€å¯é€‰ã€‘é…ç½®åˆ«å git # ä»¥å•è¯ä¸ºå•ä½è¿›è¡Œæ¯”è¾ƒ git config alias.wdiff 'diff --word-diff=color --unified=1' åœ¨éœ€è¦ç®¡ç†çš„ä»“åº“ä¸‹æ–°å»ºæ–‡ä»¶ .gitattributesï¼ŒåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼Œç”¨äºæŒ‡å®š Git åœ¨æ¯”è¾ƒ .docx æ–‡ä»¶æ—¶ä½¿ç”¨ Pandoc å·®å¼‚å¼•æ“ã€‚ git *.docx diff=pandoc ","date":"2023-05-17","objectID":"/posts/git%E7%AE%A1%E7%90%86word%E6%96%87%E6%A1%A3/:1:0","series":null,"tags":["git"],"title":"Gitç®¡ç†wordæ–‡æ¡£","uri":"/posts/git%E7%AE%A1%E7%90%86word%E6%96%87%E6%A1%A3/#word-æ–‡æ¡£ç®¡ç†"},{"categories":["æŠ€æœ¯"],"content":" æ‹“å±•å…¶ä»– diff å¼•æ“å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ”¯æŒçš„ git diff/ git merge æ’ä»¶ git git difftool --tool-help git mergetool --tool-help æ‰€ä»¥å¯ä»¥æŒ‡å®š diff æ’ä»¶ä¸º Beyond Compare ï¼Œå‚è€ƒé“¾æ¥ Beyond Compareã€‚ ","date":"2023-05-17","objectID":"/posts/git%E7%AE%A1%E7%90%86word%E6%96%87%E6%A1%A3/:2:0","series":null,"tags":["git"],"title":"Gitç®¡ç†wordæ–‡æ¡£","uri":"/posts/git%E7%AE%A1%E7%90%86word%E6%96%87%E6%A1%A3/#æ‹“å±•å…¶ä»–-diff-å¼•æ“"},{"categories":["æŠ€æœ¯"],"content":" æœ€ç®€å•çš„æ•°æ®åº“ shell #!/bin/bash db_set () { echo \"$1,$2\" \u003e\u003e database } db_get () { grep \"^$1,\" database | sed -e \"s/^$1,//\" | tail -n 1 } ä½¿ç”¨æ–¹æ³• shell source db.sh db_set 123456 '{\"name\":\"London\",\"attractions\":[\"Big Ben\",\"London Eye\"]}' db_get 123456 è¯¥æ•°æ®åº“ï¼Œå†™å…¥æ€§èƒ½å¾ˆå¥½ï¼Œä½†æ˜¯è¯»å–æ€§èƒ½éå¸¸ç³Ÿç³•ï¼ŒæŸ¥æ‰¾å¼€é”€ O(n) ã€‚ ä¸ºäº†é«˜æ•ˆçš„æŸ¥æ‰¾æ•°æ®å¯ç‰¹æœ‰çš„é”®ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„ï¼šç´¢å¼•ï¼ˆindexï¼‰ã€‚å³é¢å¤–ä¿å­˜ä¸€äº›å…ƒæ•°æ®ä½œä¸ºè·¯æ ‡ï¼Œå¸®åŠ©æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚ç´¢å¼•æ˜¯ä¸»æ•°æ®çš„é™„åŠ æ•°æ®ï¼Œåœ¨è§£å†³æå‡æŸ¥è¯¢æ€§èƒ½è¿™ä¸€é—®é¢˜çš„åŒæ—¶ï¼Œå¼•å…¥äº†æ–°çš„é—®é¢˜ï¼Œå³å†™å…¥æ•°æ®æ—¶ï¼Œè¦é¢å¤–ç»´æŠ¤ç´¢å¼•ï¼Œä¹Ÿå°±äº§ç”Ÿäº†é¢å¤–å¼€é”€ã€‚è¿™æ˜¯ä¸€ä¸ªæƒè¡¡é—®é¢˜ã€‚ å½“ç„¶ï¼Œå†™å…¥çš„æ€§èƒ½å¾ˆéš¾è¶…è¿‡ç®€å•çš„è¿½åŠ æ–‡ä»¶ï¼Œå› ä¸ºåªæ˜¯æœ€ç®€å•çš„å†™å…¥æ“ä½œã€‚ä»»ä½•ç´¢å¼•éƒ½ä¼šå‡æ…¢å†™å…¥é€Ÿåº¦ï¼Œå› ä¸ºæ¯æ¬¡å†™å…¥æ•°æ®éƒ½éœ€æ›´æ–°ç´¢å¼•ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:1:0","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#æœ€ç®€å•çš„æ•°æ®åº“"},{"categories":["æŠ€æœ¯"],"content":" Hash ç´¢å¼•å³åœ¨å†…å­˜ä¸­ä¿å­˜ä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼Œhash mapçš„keyä¸ºä¸Šè¾¹æ•°æ®åº“çš„é”®å€¼ï¼Œå€¼ä¸ºå®é™…å†…å®¹çš„å­—èŠ‚åç§»é‡ã€‚ å½“æ•°æ®åº“ä¸­å­˜å‚¨æ–°çš„å€¼æ—¶ï¼Œé™¤äº†å°†æ–°çš„é”®å€¼å¯¹è¿½åŠ åˆ°æ–‡ä»¶å¤–ï¼Œè¿˜éœ€è¦æ›´æ–°å†…å­˜ä¸­çš„hashæ˜ å°„ï¼ˆä¹Ÿé€‚ç”¨äºæ’å…¥ã€æ›´æ–°ç°æœ‰é”®å€¼å¯¹ï¼‰ï¼›å½“æŸ¥æ‰¾ä¸€ä¸ªå€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å“ˆå¸Œæ˜ å°„æ¥æŸ¥æ‰¾æ•°æ®æ–‡ä»¶ä¸­çš„åç§»é‡ï¼Œå¯»æ‰¾ï¼ˆseekï¼‰è¯¥ä½ç½®å¹¶è¯»å–è¯¥å€¼ã€‚ ç°å®ä¸­ï¼ŒBitcaskï¼ˆé»˜è®¤ Riak å¼•æ“ï¼‰ å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚Ritcaskæä¾›é«˜æ€§èƒ½è¯»å†™çš„å¿…è¦æ¡ä»¶æ˜¯æ‰€æœ‰çš„ key éƒ½æ”¾ç½®åœ¨å¯ç”¨RAMä¸­ï¼Œå› ä¸ºå“ˆå¸Œæ˜ å°„å®Œå…¨åœ¨å†…å­˜ä¸­ã€‚ value å¯ä»¥ä½¿ç”¨æ¯”å†…å­˜å¤§çš„ç©ºé—´ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é€šè¿‡ç£ç›˜seekåŠ è½½ã€‚å¦‚æœéƒ¨åˆ†æ•°æ®å·²ç»å­˜åœ¨åœ¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ä¸­ï¼Œè¯»å–åˆ™ä¸éœ€è¦ç£ç›˜ I/O äº†ã€‚ åƒ Bitcask è¿™æ ·çš„å­˜å‚¨å¼•æ“é€‚åˆæ¯ä¸ªé”®ç»å¸¸æ›´æ–°çš„æƒ…å†µã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:2:0","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#hash-ç´¢å¼•"},{"categories":["æŠ€æœ¯"],"content":" SSTableså’ŒLSMæ ‘Sorted String Tableï¼ˆSSTableï¼‰æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨é”®å€¼å¯¹çš„æ•°æ®ç»“æ„ï¼Œå¸¸ç”¨äºåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­ã€‚å®ƒå°†é”®å€¼å¯¹æŒ‰ç…§é”®çš„å¤§å°æœ‰åºå­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ä¸­ï¼Œä½¿å¾—æŸ¥æ‰¾å’Œè¿­ä»£æ“ä½œå˜å¾—é«˜æ•ˆã€‚SSTableé€šå¸¸è¢«è®¾è®¡æˆä¸å¯å˜çš„ï¼Œå³ä¸€æ—¦å­˜å‚¨å°±ä¸èƒ½è¢«ä¿®æ”¹ï¼Œè¿™æ ·å¯ä»¥é¿å…æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚ä¸ºäº†æ”¯æŒæ•°æ®çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼ŒSSTableé€šå¸¸ä¼šä¸å†…å­˜ä¸­çš„æ•°æ®ç»“æ„ï¼ˆå¦‚å“ˆå¸Œè¡¨ï¼‰ç»“åˆä½¿ç”¨ï¼Œå½¢æˆLSM-Treeï¼ˆLog-Structured Merge-Treeï¼‰ç­‰æ•°æ®ç»“æ„ã€‚SSTableåœ¨å¤§è§„æ¨¡æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢åœºæ™¯ä¸­å…·æœ‰å¾ˆé«˜çš„æ€§èƒ½å’Œå¯é æ€§ï¼Œè¢«å¹¿æ³›åº”ç”¨äºå„ç§åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œå¦‚Hadoopã€Cassandraã€LevelDBç­‰ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:3:0","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#sstableså’Œlsmæ ‘"},{"categories":["æŠ€æœ¯"],"content":" Sorted String Table å¯¹æ¯” Hash çš„ä¼˜ç‚¹1ã€åˆå¹¶æ®µç®€å•é«˜æ•ˆã€‚ 2ã€æŸ¥æ‰¾ç‰¹å®šçš„é”®ï¼Œä¸éœ€è¦å†…å­˜ä¸­æ‰€ä»¥çš„ç´¢å¼•ã€‚ 3ã€å› ä¸ºè¯»è¯·æ±‚æ— è®ºå¦‚ä½•éƒ½æœ‰æ‰«æä¸€éƒ¨åˆ†é”®å€¼å¯¹ï¼Œå› æ­¤åœ¨å†™å…¥ç£ç›˜å‰ï¼Œå¯ä»¥å°†è®°å½•åˆ†ç»„ã€å‹ç¼©ï¼Œå¹¶åœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªå‹ç¼©å—å¼€å§‹çš„keyå’Œåç§»é‡çš„ç´¢å¼•ã€‚æ—¢å¯ä»¥èŠ‚çº¦ç£ç›˜ç©ºé—´ï¼Œä¹Ÿå¯ä»¥å‡å°‘IOå¸¦å®½çš„ä½¿ç”¨ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:3:1","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#sorted-string-table-å¯¹æ¯”-hash-çš„ä¼˜ç‚¹"},{"categories":["æŠ€æœ¯"],"content":" æ„å»ºå’Œç»´æŠ¤ SSTablesbæ ‘ï¼Œåœ¨ç£ç›˜ä¸Šç»´æŠ¤æœ‰åºç»“æ„ã€‚ çº¢é»‘æ ‘ã€AVLæ ‘ï¼Œåœ¨å†…å­˜ä¸­ç»´æŠ¤æœ‰åºç»“æ„ã€‚ å†™å…¥æ—¶ï¼Œå°†å…¶æ·»åŠ åˆ°å†…å­˜ä¸­çš„å¹³è¡¡æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚ï¼Œçº¢é»‘æ ‘ï¼‰ã€‚è¿™ç§å†…å­˜ä¸­çš„æ ‘æœ‰æ—¶å« å†…å­˜è¡¨ï¼ˆmemtableï¼‰ã€‚ å½“å†…å­˜è¡¨å¤§äºæŸä¸ªé˜ˆå€¼ï¼ˆé€šå¸¸å‡ å…†ï¼‰æ—¶ï¼Œå°†å…¶ä½œä¸º SSTable æ–‡ä»¶å†™å…¥ç£ç›˜ã€‚æ ‘å·²ç»ç»´æŠ¤äº†æ’åºçš„é”®å€¼å¯¹ï¼Œæ‰€ä»¥å†™å…¥å¯ä»¥é«˜æ•ˆå®Œæˆã€‚æ–°çš„ SSTable æ–‡ä»¶æˆä¸ºæ•°æ®åº“æœ€æ–°çš„éƒ¨åˆ†ã€‚å½“ SSTable æ­£åœ¨è¢«å†™å…¥ç£ç›˜æ—¶ï¼Œç¬¬ä¸€æ­¥çš„å†™å…¥æ“ä½œå¯ä»¥ç»§ç»­åˆ°ä¸€ä¸ªæ–°çš„å†…å­˜è¡¨å®ä¾‹ä¸­ã€‚ ä¸ºäº†æä¾›è¯»å–è¯·æ±‚ï¼Œé¦–å…ˆå°è¯•åœ¨å†…å­˜è¡¨ä¸­æ‰¾åˆ°å…³é”®å­—ï¼Œç„¶ååœ¨æœ€è¿‘çš„ç£ç›˜æ®µä¸­ï¼Œç„¶ååœ¨ä¸‹ä¸€ä¸ªè¾ƒæ—§çš„æ®µä¸­æ‰¾å…³é”®å­—ã€‚ ä¸æ—¶ï¼Œä¼šåœ¨åå°è¿è¡Œåˆå¹¶å’Œå‹ç¼©è¿›ç¨‹ä»¥ç»„åˆæ–‡ä»¶æ®µã€ä¸¢å¼ƒè¦†ç›–å’Œåˆ é™¤å€¼ã€‚ æ­¤æ–¹æ¡ˆé—®é¢˜ï¼šå¦‚æœæ•°æ®åº“å´©æºƒï¼Œæœ€è¿‘å†™å…¥çš„ï¼ˆåœ¨å†…å­˜è¡¨ä¸­ï¼Œè¿˜æœªå†™å…¥ç£ç›˜ï¼‰æ•°æ®å°†ä¸¢å¤±ã€‚ è§£å†³é—®é¢˜ï¼šåœ¨ç£ç›˜ä¸Šä¿å­˜ä¸€ä¸ªå•ç‹¬çš„æ—¥å¿—ï¼Œæ¯ä¸ªå†™å…¥æ“ä½œéƒ½è¢«ç«‹åˆ»è¿½åŠ åˆ°è¯¥æ–‡ä»¶ä¸­ã€‚æ­¤æ“ä½œæ—¥å¿—çš„å”¯ä¸€ç›®çš„æ˜¯ä¸ºäº†å´©æºƒåæ¢å¤å†…å­˜è¡¨ã€‚æ‰€ä»¥æ¯å½“å†…å­˜è¡¨ä¸­çš„æ•°æ®è¢«å½“ä½œSSTableæ–‡ä»¶å†™å…¥ç£ç›˜æ—¶ï¼Œç›¸åº”çš„æ—¥å¿—æ–‡ä»¶éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:3:2","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#æ„å»ºå’Œç»´æŠ¤-sstables"},{"categories":["æŠ€æœ¯"],"content":" ç”¨ SSTables åˆ¶ä½œ LSM Treeè¯¥ç®—æ³•æœ¬è´¨å°±æ˜¯ LevelDB ï¼ˆgoogle å¼€å‘ï¼‰ å’Œ RocksDBï¼ˆfacebook å¼€å‘ï¼‰æ‰€ä½¿ç”¨çš„ç®—æ³•ï¼Œå®ƒä»¬éƒ½æ˜¯è¢«è®¾è®¡æˆå¯ä»¥åµŒå…¥åˆ°å…¶ä»–åº”ç”¨ç¨‹åºä¸­çš„é”®å€¼å­˜å‚¨å¼•æ“åº“ã€‚å¦å¤–LevelDBå¯ä»¥ä½œä¸ºBitcaskçš„æ›¿ä»£é€‰é¡¹ï¼Œåœ¨Riakä¸­ä½¿ç”¨ã€‚ç±»ä¼¼çš„å­˜å‚¨å¼•æ“ä¹Ÿè¢«ç”¨äº Cassandra å’Œ HBase ä¸­ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:3:3","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#ç”¨-sstables-åˆ¶ä½œ-lsm-tree"},{"categories":["æŠ€æœ¯"],"content":" æ€§èƒ½ä¼˜åŒ– æŸ¥æ‰¾æ•°æ®åº“ä¸­ä¸å­˜åœ¨çš„é”®ï¼ŒLSM-tree ç®—æ³•å¾ˆæ…¢ï¼šå¿…é¡»å…ˆæ£€æŸ¥å†…å­˜è¡¨ï¼Œç„¶åæ£€æŸ¥ç£ç›˜æ–‡ä»¶ç«¯ä¸€ç›´åˆ°æœ€ä¹…çš„æ•°æ®ï¼ˆå¯èƒ½éœ€è¦è¯»å–æ¯ä¸€ä¸ªï¼‰ï¼Œæ‰èƒ½ç¡®å®šé”®ä¸å­˜åœ¨ã€‚é€šå¸¸ä½¿ç”¨å­˜å‚¨å¼•æ“é€šå¸¸ä½¿ç”¨é¢å¤–çš„Bloomè¿‡æ»¤å™¨è§£å†³è¿™ç§é—®é¢˜ã€‚ é€‰æ‹©SSTableså‹ç¼©å’Œåˆå¹¶çš„é¡ºåºå’Œæ—¶æœºä¼šæœ‰ä¸åŒçš„ç­–ç•¥ã€‚æœ€å¸¸è§çš„ç­–ç•¥æœ‰ å¤§å°åˆ†å±‚ï¼ˆSize-tiered Compactionï¼‰å’Œ å¹³å¦å‹ç¼© ï¼ˆLeveled compactionï¼‰[è§å‚è€ƒè¿æ¥]ã€‚LevelDB å’Œ RocksDB ä½¿ç”¨äº† å¹³å¦å‹ç¼© ï¼ŒHBase ä½¿ç”¨äº† å¤§å°åˆ†å±‚ï¼Œ Cassandra åŒæ—¶éƒ½æ”¯æŒã€‚ Size-Tiered Compaction ç­–ç•¥ï¼šmemtable é€æ­¥åˆ·å…¥åˆ°ç£ç›˜ sstï¼Œåˆšå¼€å§‹ sst éƒ½æ˜¯å°æ–‡ä»¶ï¼Œéšç€å°æ–‡ä»¶è¶Šæ¥è¶Šå¤šï¼Œå½“æ•°æ®é‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼ŒSTCS ç­–ç•¥ä¼šå°†è¿™äº›å°æ–‡ä»¶ compaction æˆä¸€ä¸ªä¸­ç­‰å¤§å°çš„æ–°æ–‡ä»¶ã€‚åŒæ ·çš„é“ç†ï¼Œå½“ä¸­ç­‰æ–‡ä»¶æ•°é‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼ï¼Œè¿™äº›æ–‡ä»¶å°†è¢« compaction æˆå¤§æ–‡ä»¶ï¼Œè¿™ç§æ–¹å¼ä¸æ–­é€’å½’ï¼Œä¼šæŒç»­ç”Ÿæˆè¶Šæ¥è¶Šå¤§çš„æ–‡ä»¶ã€‚æ•°æ®åˆå¹¶ä¸æ˜¯å³æ—¶çš„ï¼ˆè¾¾åˆ°é˜ˆå€¼åˆå¹¶ï¼‰ï¼Œç›¸åŒæ•°æ®çš„æ–‡ä»¶ï¼Œå¯èƒ½å­˜åœ¨äºä¸åŒå¤§å°ç­‰çº§çš„å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œæ•…å­˜åœ¨ ç©ºé—´æ”¾å¤§ï¼ˆå®é™…æ•°æ®é‡åªæœ‰1Gï¼Œå¯èƒ½å­˜å‚¨è¿‡ç¨‹ä¸­å ç”¨è¿œè¶…1Gï¼‰ã€‚å¯¹äºè¦†å†™é¢‘ç¹çš„åœºæ™¯å¹¶ä¸é€‚ç”¨ã€‚ Leveled compaction ç­–ç•¥ï¼š sst çš„å¤§å°å¯æ§ï¼Œé»˜è®¤æ¯ä¸ª sst çš„å¤§å°ä¸€è‡´ï¼ˆSize-Tiered Compaction ç­–ç•¥æœ€ç»ˆä¼šäº§ç”Ÿè¶…å¤§æ–‡ä»¶ï¼‰ LCS åœ¨åˆå¹¶æ—¶ï¼Œä¼šä¿è¯é™¤ Level 0ï¼ˆL0ï¼‰ä¹‹å¤–çš„å…¶ä»– Level æœ‰åºä¸”æ— è¦†ç›–ã€‚ é™¤ L0 å¤–ï¼Œæ¯å±‚æ–‡ä»¶çš„æ€»å¤§å°å‘ˆæŒ‡æ•°å¢é•¿ï¼Œå‡å¦‚ L1 æœ€å¤š 10 ä¸ªï¼Œåˆ™ L2 ä¸º 100 ä¸ªï¼ŒL3 ä¸º 1000 ä¸ªâ€¦ å…³é”®èŒƒå›´è¢«æ‹†åˆ†æˆæ›´å°çš„SSTablesï¼Œè€Œè¾ƒæ—§çš„æ•°æ®è¢«ç§»åŠ¨åˆ°å•ç‹¬çš„â€œæ°´å¹³â€ï¼Œè¿™ä½¿å¾—å‹ç¼©èƒ½å¤Ÿæ›´åŠ é€’å¢åœ°è¿›è¡Œï¼Œå¹¶ä¸”ä½¿ç”¨æ›´å°‘çš„ç£ç›˜ç©ºé—´ã€‚ è¯¥ç­–ç•¥ä¼šé€ æˆ å†™æ”¾å¤§ ã€‚ LSMæ ‘çš„åŸºæœ¬æ€æƒ³ â€”â€” ä¿å­˜ä¸€ç³»åˆ—åœ¨åå°åˆå¹¶çš„SSTables â€”â€” ç®€å•è€Œæœ‰æ•ˆã€‚å³ä½¿æ•°æ®é›†æ¯”å¯ç”¨å†…å­˜å¤§å¾—å¤šï¼Œå®ƒä»èƒ½ç»§ç»­æ­£å¸¸å·¥ä½œã€‚ç”±äºæ•°æ®æŒ‰æ’åºé¡ºåºå­˜ å‚¨ï¼Œå› æ­¤å¯ä»¥é«˜æ•ˆåœ°æ‰§è¡ŒèŒƒå›´æŸ¥è¯¢ï¼ˆæ‰«ææ‰€æœ‰é«˜äºæŸäº›æœ€å°å€¼å’Œæœ€é«˜å€¼çš„æ‰€æœ‰é”®ï¼‰ï¼Œå¹¶ä¸”å› ä¸ºç£ç›˜å†™å…¥æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥LSMæ ‘å¯ä»¥æ”¯æŒéå¸¸é«˜çš„å†™å…¥ååé‡ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:3:4","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#æ€§èƒ½ä¼˜åŒ–"},{"categories":["æŠ€æœ¯"],"content":" Bæ ‘åƒ SSTables ä¸€æ ·ï¼ŒB æ ‘ä¿æŒæŒ‰é”®æ’åºçš„é”®å€¼å¯¹ï¼Œè¿™å…è®¸é«˜æ•ˆçš„é”®å€¼æŸ¥æ‰¾å’ŒèŒƒå›´æŸ¥è¯¢ã€‚ä½†è¿™ä¹Ÿå°±æ˜¯ä»…æœ‰çš„ç›¸ä¼¼ä¹‹å¤„äº†ï¼šB æ ‘æœ‰ç€éå¸¸ä¸åŒçš„è®¾è®¡ç†å¿µã€‚ ä¸åŒä¹‹å¤„ï¼š æ—¥å¿—ç»“æ„ç´¢å¼•ï¼šå°†æ•°æ®åº“åˆ†è§£ä¸ºå¯å˜å¤§å°çš„ æ®µï¼ˆsegmentsï¼‰ï¼Œé€šå¸¸å‡ å…†æˆ–æ›´å¤§ï¼Œä¸”éƒ½æ˜¯é¡ºåºå†™å…¥æ®µã€‚ B-tree ï¼šå°†æ•°æ®åº“åˆ†è§£ä¸ºå›ºå®šå¤§å°çš„ **å—ï¼ˆblockï¼‰**æˆ– é¡µï¼ˆpageï¼‰, ä¼ ç»Ÿä¸Šå¤§å°ä¸º 4KBï¼ˆæœ‰æ—¶ä¼šæ›´å¤§ï¼‰ï¼Œä¸”ä¸€æ¬¡åªèƒ½è¯»å–æˆ–å†™å…¥ä¸€é¡µã€‚è¿™æ ·çš„è®¾è®¡æ›´æ¥è¿‘ç¡¬ä»¶åº•å±‚ï¼ˆunix ä¸Šå¯ä»¥é€šè¿‡ dumpe2fs æˆ–è€… xfs_info æŸ¥çœ‹çš„å—å¤§å° ï¼‰ã€‚æ¯ä¸ªé¡µé¢ä½¿ç”¨åœ°å€æˆ–ä½ç½®æ¥æ ‡è®°ï¼Œå…è®¸ä¸€ä¸ªé¡µé¢å¼•ç”¨å¦ä¸€ä¸ªé¡µé¢â€”â€”ç±»ä¼¼æŒ‡é’ˆï¼ˆç¡¬ç›˜ä¸­éå†…å­˜ä¸­ï¼‰ã€‚ æœ‰ä¸€ä¸ª page æ˜¯ B-tree çš„æ ¹ï¼ˆæŸ¥æ‰¾ key æ—¶ï¼Œä»è¿™é‡Œå¼€å§‹ï¼‰ï¼Œè¿™ä¸ª page åŒ…å«å‡ ä¸ª key å’Œä¸€äº› child page çš„å¼•ç”¨ã€‚child page è´Ÿè´£ä¸€æ®µè¿ç»­çš„ key èŒƒå›´ ï¼Œå¼•ç”¨ä¹‹é—´çš„ key è¡¨æ˜äº†èŒƒå›´çš„è¾¹ç•Œåœ¨é‚£é‡Œã€‚ å¶å­é¡µé¢ï¼ˆldaf pageï¼‰ï¼Œè¦ä¹ˆç›´æ¥åŒ…å«äº†æ¯ä¸ª key çš„valueï¼Œè¦ä¹ˆåŒ…å«äº† key å¯¹åº” value å­˜æ”¾ä½ç½®çš„å¼•ç”¨ã€‚ åˆ†æ”¯å› å­ï¼ˆbranching factorï¼‰ï¼ŒB-tree ä¸­ä¸€ä¸ªé¡µé¢å¯¹å­é¡µé¢å¼•ç”¨çš„æ•°é‡ã€‚ æ›´æ–°æ“ä½œæŸä¸ªkeyçš„å€¼ï¼šå…ˆæœç´¢è¯¥ key æ‰€åœ¨çš„å¶å­é¡µé¢ï¼Œå†æ›´æ”¹è¯¥é¡µä¸­çš„å€¼ï¼Œå¹¶å°†è¯¥é¡µé¢å†™å›ç¡¬ç›˜ä¸­ã€‚ æ–°å¢ä¸€ä¸ª key ï¼šå…ˆæ‰¾åˆ°å…¶èŒƒå›´åŒ…å«æ–° key çš„é¡µé¢ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°è¯¥é¡µé¢ä¸­ï¼Œå¦‚æœè¯¥é¡µæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å®¹çº³æ–° keyï¼Œåˆ™å°†å…¶åˆ†æˆä¸¤ä¸ª åŠé¡µï¼Œå¹¶æ›´æ–°çˆ¶é¡µé¢ä»¥åæ˜ æ–°çš„é”®èŒƒå›´åˆ†åŒºã€‚ åˆ é™¤ä¸€ä¸ª keyï¼šï¼ˆåŒæ—¶ä¿æŒæ ‘å¹³è¡¡ï¼‰å°±ä¼šç‰µæ‰¯å¾ˆå¤šå…¶ä»–ä¸œè¥¿ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:4:0","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#bæ ‘"},{"categories":["æŠ€æœ¯"],"content":" è®© B-Trees æ›´å¯é B-trees åº•å±‚å†™æ“ä½œï¼šç”¨æ–°æ•°æ®è¦†å†™ç¡¬ç›˜ä¸Šçš„é¡µé¢ï¼Œå¹¶å‡å®šå¯¹è¯¥é¡µé¢çš„å¼•ç”¨ä¿æŒå®Œæ•´ã€‚ æ—¥å¿—ç»“æ„çš„ç´¢å¼•ï¼ˆLSM-treesï¼‰ï¼šåªè¿½åŠ æ–‡ä»¶ï¼ˆæœ€ç»ˆåˆ é™¤è¿‡æ—¶çš„æ–‡ä»¶ï¼‰ï¼Œä»ä¸ä¿®æ”¹æ–‡ä»¶ä¸­å·²æœ‰çš„å†…å®¹ã€‚ è¦†å†™ç¡¬ç›˜é¡µé¢å¯¹åº”çš„å®é™…ç¡¬ä»¶å±‚é¢çš„æ“ä½œï¼šç£æ€§ç¡¬ç›˜é©±åŠ¨å™¨ï¼Œå°†ç£å¤´ç§»åŠ¨åˆ°æ­£ç¡®çš„åŠå¾„ä½ç½®ï¼Œç­‰å¾…æ—‹è½¬ç›˜è½¬åˆ°æ­£ç¡®çš„èµ·å§‹è§’åº¦ï¼Œä½¿ç”¨æ–°æ•°æ®è¦†å†™é€‚å½“çš„æ‰‡åŒºã€‚å›ºæ€ç¡¬ç›˜ä¸Šï¼Œæ›´å¤æ‚ï¼Œssdå¿…é¡»ä¸€æ¬¡æ“¦é™¤å’Œé‡å†™ç›¸å½“å¤§çš„å­˜å‚¨èŠ¯ç‰‡å—ã€‚ æƒ…å†µä¸€ ï¼š ä¸€äº›æ“ä½œéœ€è¦è¦†å†™å‡ ä¸ªä¸åŒçš„é¡µé¢ï¼Œå¦‚ï¼šå› ä¸ºæ’å…¥å¯¼è‡´é¡µé¢è¿‡æ»¡è€Œæ‹†åˆ†é¡µé¢ï¼Œåˆ™éœ€è¦å†™å…¥æ–°æ‹†åˆ†çš„ä¸¤ä¸ªé¡µé¢ï¼Œå¹¶è¦†å†™å…¶çˆ¶é¡µé¢ä»¥æ›´æ–°å¯¹ä¸¤ä¸ªå­é¡µé¢çš„å¼•ç”¨ã€‚è¿™æ˜¯ä¸€ä¸ªå±é™©çš„æ“ä½œï¼Œå› ä¸ºå¦‚æœæ•°æ®åº“åœ¨ç³»åˆ—æ“ä½œè¿›è¡Œåˆ°ä¸€åŠæ—¶å´©æºƒï¼Œé‚£ä¹ˆæœ€ç»ˆå°†å¯¼è‡´ä¸€ä¸ªæŸåçš„ç´¢å¼•ï¼ˆä¾‹å¦‚ï¼Œå¯èƒ½æœ‰ä¸€ä¸ªå­¤å„¿é¡µé¢æ²¡æœ‰è¢«ä»»ä½•é¡µé¢å¼•ç”¨ï¼‰ ã€‚ ä¸ºäº†åº”å¯¹è¿™ç§æƒ…å†µï¼ŒB æ ‘å®ç°é€šå¸¸ä¼šå¸¦æœ‰ä¸€ä¸ªé¢å¤–çš„ç¡¬ç›˜æ•°æ®ç»“æ„ï¼šé¢„å†™å¼æ—¥å¿—ï¼ˆWALï¼Œå³ write-ahead logï¼Œä¹Ÿç§°ä¸º é‡åšæ—¥å¿—ï¼Œå³ redo logï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªä»…è¿½åŠ çš„æ–‡ä»¶ï¼Œæ¯ä¸ª B æ ‘çš„ä¿®æ”¹åœ¨å…¶èƒ½è¢«åº”ç”¨åˆ°æ ‘æœ¬èº«çš„é¡µé¢ä¹‹å‰éƒ½å¿…é¡»å…ˆå†™å…¥åˆ°è¯¥æ–‡ä»¶ã€‚å½“æ•°æ®åº“åœ¨å´©æºƒåæ¢å¤æ—¶ï¼Œè¿™ä¸ªæ—¥å¿—å°†è¢«ç”¨æ¥ä½¿ B æ ‘æ¢å¤åˆ°ä¸€è‡´çš„çŠ¶æ€ã€‚ æƒ…å†µäºŒï¼šå¦‚æœå¤šä¸ªçº¿ç¨‹è¦åŒæ—¶è®¿é—® B æ ‘ï¼Œåˆ™éœ€è¦ä»”ç»†çš„å¹¶å‘æ§åˆ¶ â€”â€” å¦åˆ™çº¿ç¨‹å¯èƒ½ä¼šçœ‹åˆ°æ ‘å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚è¿™é€šå¸¸æ˜¯é€šè¿‡ä½¿ç”¨ é”å­˜å™¨ï¼ˆlatchesï¼Œè½»é‡çº§é”ï¼‰ä¿æŠ¤æ ‘çš„æ•°æ®ç»“æ„æ¥å®Œæˆã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:4:1","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#è®©-b-trees-æ›´å¯é "},{"categories":["æŠ€æœ¯"],"content":" B-Trees çš„ä¼˜åŒ– ä½¿ç”¨å†™æ—¶å¤åˆ¶æ–¹æ¡ˆï¼ˆé WAL ï¼‰ æ¥å¤„ç†å´©æºƒï¼šç»è¿‡ä¿®æ”¹çš„é¡µé¢è¢«å†™å…¥åˆ°ä¸åŒçš„ä½ç½®ï¼Œå¹¶ä¸”è¿˜åœ¨æ ‘ä¸­åˆ›å»ºäº†çˆ¶é¡µé¢çš„æ–°ç‰ˆæœ¬ï¼Œä»¥æŒ‡å‘æ–°çš„ä½ç½®ã€‚åŒæ—¶ï¼Œæ­¤æ–¹æ³•å¯¹å¹¶å‘æ§åˆ¶ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸å­˜å‚¨æ•´ä¸ªé”®ï¼Œè€Œæ˜¯ç¼©çŸ­å…¶å¤§å°ï¼Œæ¥èŠ‚çœé¡µé¢ç©ºé—´ã€‚ç‰¹åˆ«æ˜¯åœ¨æ ‘å†…éƒ¨çš„é¡µé¢ä¸Šï¼Œé”®åªéœ€è¦æä¾›è¶³å¤Ÿçš„ä¿¡æ¯æ¥å……å½“é”®èŒƒå›´ä¹‹é—´çš„è¾¹ç•Œã€‚åœ¨é¡µé¢ä¸­åŒ…å«æ›´å¤šçš„é”®å…è®¸æ ‘å…·æœ‰æ›´é«˜çš„åˆ†æ”¯å› å­ï¼Œå› æ­¤ä¹Ÿå°±å…è®¸æ›´å°‘çš„å±‚çº§ã€‚ é€šå¸¸ï¼Œé¡µé¢å¯ä»¥æ”¾ç½®åœ¨ç¡¬ç›˜ä¸Šçš„ä»»ä½•ä½ç½®ï¼›æ²¡æœ‰ä»€ä¹ˆè¦æ±‚ç›¸é‚»é”®èŒƒå›´çš„é¡µé¢ä¹Ÿæ”¾åœ¨ç¡¬ç›˜ä¸Šç›¸é‚»çš„åŒºåŸŸã€‚å¦‚æœæŸä¸ªæŸ¥è¯¢éœ€è¦æŒ‰ç…§æ’åºé¡ºåºæ‰«æå¤§éƒ¨åˆ†çš„é”®èŒƒå›´ï¼Œé‚£ä¹ˆè¿™ç§æŒ‰é¡µé¢å­˜å‚¨çš„å¸ƒå±€å¯èƒ½ä¼šæ•ˆç‡ä½ä¸‹ï¼Œå› ä¸ºæ¯ä¸ªé¡µé¢çš„è¯»å–éƒ½éœ€è¦æ‰§è¡Œä¸€æ¬¡ç¡¬ç›˜æŸ¥æ‰¾ã€‚å› æ­¤ï¼Œè®¸å¤š B æ ‘çš„å®ç°åœ¨å¸ƒå±€æ ‘æ—¶ä¼šå°½é‡ä½¿å¶å­é¡µé¢æŒ‰é¡ºåºå‡ºç°åœ¨ç¡¬ç›˜ä¸Šã€‚ä½†æ˜¯ï¼Œéšç€æ ‘çš„å¢é•¿ï¼Œè¦ç»´æŒè¿™ä¸ªé¡ºåºæ˜¯å¾ˆå›°éš¾çš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç”±äº LSM æ ‘åœ¨åˆå¹¶è¿‡ç¨‹ä¸­ä¸€æ¬¡æ€§é‡å†™ä¸€å¤§æ®µå­˜å‚¨ï¼Œæ‰€ä»¥å®ƒä»¬æ›´å®¹æ˜“ä½¿é¡ºåºé”®åœ¨ç¡¬ç›˜ä¸Šè¿ç»­å­˜å‚¨ã€‚ é¢å¤–çš„æŒ‡é’ˆè¢«æ·»åŠ åˆ°æ ‘ä¸­ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªå¶å­é¡µé¢å¯ä»¥å¼•ç”¨å…¶å·¦è¾¹å’Œå³è¾¹çš„å…„å¼Ÿé¡µé¢ï¼Œä½¿å¾—ä¸ç”¨è·³å›çˆ¶é¡µé¢å°±èƒ½æŒ‰é¡ºåºå¯¹é”®è¿›è¡Œæ‰«æã€‚ B æ ‘çš„å˜ä½“å¦‚ åˆ†å½¢æ ‘ï¼ˆfractal treesï¼‰ å€Ÿç”¨äº†ä¸€äº›æ—¥å¿—ç»“æ„çš„æ€æƒ³æ¥å‡å°‘ç¡¬ç›˜æŸ¥æ‰¾ï¼ˆè€Œä¸”å®ƒä»¬ä¸åˆ†å½¢æ— å…³ï¼‰ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:4:2","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#b-trees-çš„ä¼˜åŒ–"},{"categories":["æŠ€æœ¯"],"content":" æ¯”è¾ƒ B-Trees å’Œ LSM-Trees","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:5:0","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#æ¯”è¾ƒ-b-trees-å’Œ-lsm-trees"},{"categories":["æŠ€æœ¯"],"content":" LSM-Trees çš„ä¼˜ç‚¹B æ ‘ç´¢å¼•æ¯å—æ•°æ®å¿…é¡»è‡³å°‘å†™å…¥ä¸¤æ¬¡ï¼šä¸€æ¬¡å†™å…¥é¢„å†™å…¥æ—¥å¿—ï¼ˆWALï¼‰ï¼Œä¸€æ¬¡å†™å…¥æ ‘æœ¬èº«ï¼ˆå¦‚æœåˆ†é¡µè¿˜éœ€å†å†™å…¥ä¸€æ¬¡ï¼‰ã€‚å³ä½¿å‡ ä¸ªå­—èŠ‚çš„å˜åŒ–ï¼Œä¹Ÿéœ€è¦æ¥æ”¶å†™å…¥æ•´ä¸ªé¡µé¢çš„å¼€é”€ã€‚æœ‰äº›å­˜å‚¨å¼•æ“ç”šè‡³è¦†å†™åŒä¸€ä¸ªé¡µé¢ä¸¤æ¬¡ï¼Œä»¥å…ç”µæºæ•…éšœæƒ…å†µä¸‹é¡µé¢æœªå®Œæ•´æ›´æ–°ã€‚ ç”±äºåå¤å‹ç¼©ä¸åˆå¹¶SSTableï¼Œæ—¥å¿—ç»“æ„ç´¢å¼•ä¼šå¤šæ¬¡é‡å†™æ•°æ®ã€‚è¿™ç§å½±å“â€”â€”åœ¨æ•°æ®åº“çš„ç”Ÿå‘½å‘¨æœŸä¸­æ¯ç¬”æ•°æ®å¯¼è‡´å¯¹ç¡¬ç›˜çš„å¤šæ¬¡å†™å…¥ â€”â€” è¢«ç§°ä¸º å†™å…¥æ”¾å¤§ï¼ˆwrite amplificationï¼‰ã€‚ä½¿ç”¨å›ºæ€ç¡¬ç›˜çš„æœºå™¨éœ€è¦é¢å¤–å…³æ³¨è¿™ç‚¹ï¼Œå›ºæ€ç¡¬ç›˜çš„é—ªå­˜å¯¿å‘½åœ¨è¦†å†™æœ‰é™æ¬¡æ•°åå°±ä¼šè€—å°½ã€‚ å†™æ”¾å¤§ä¼šå¯¼è‡´ç›´æ¥çš„æ€§èƒ½ä»£ä»·ï¼šå­˜å‚¨å¼•æ“å†™å…¥ç¡¬ç›˜çš„æ¬¡æ•°è¶Šå¤šï¼Œå¯ç”¨ç¡¬ç›˜å¸¦å®½å†…å®ƒèƒ½å¤„ç†çš„æ¯ç§’å†™å…¥æ¬¡æ•°å°±è¶Šå°‘ã€‚ LSM æ ‘é€šå¸¸èƒ½å¤Ÿæ¯” B æ ‘æ”¯æŒæ›´é«˜çš„å†™å…¥ååé‡ï¼š â€‹ åŸå› ä¸€ï¼šå®ƒä»¬æœ‰æ—¶å…·æœ‰è¾ƒä½çš„å†™æ”¾å¤§ï¼ˆå°½ç®¡è¿™å–å†³äºå­˜å‚¨å¼•æ“çš„é…ç½®å’Œå·¥ä½œè´Ÿè½½ï¼‰ â€‹ åŸå› äºŒï¼šå®ƒä»¬é¡ºåºåœ°å†™å…¥ç´§å‡‘çš„ SSTable æ–‡ä»¶è€Œä¸æ˜¯å¿…é¡»è¦†å†™æ ‘ä¸­çš„å‡ ä¸ªé¡µé¢ã€‚è¿™ç§å·®å¼‚åœ¨æœºæ¢°ç¡¬ç›˜ä¸Šå°¤å…¶é‡è¦ï¼Œå…¶é¡ºåºå†™å…¥æ¯”éšæœºå†™å…¥è¦å¿«å¾—å¤šã€‚ LSM æ ‘å¯ä»¥è¢«å‹ç¼©å¾—æ›´å¥½ï¼Œå› æ­¤é€šå¸¸èƒ½æ¯” B æ ‘åœ¨ç¡¬ç›˜ä¸Šäº§ç”Ÿæ›´å°çš„æ–‡ä»¶ã€‚B æ ‘å­˜å‚¨å¼•æ“ä¼šç”±äºç¢ç‰‡åŒ–ï¼ˆfragmentationï¼‰è€Œç•™ä¸‹ä¸€äº›æœªä½¿ç”¨çš„ç¡¬ç›˜ç©ºé—´ï¼šå½“é¡µé¢è¢«æ‹†åˆ†æˆ–æŸè¡Œä¸èƒ½æ”¾å…¥ç°æœ‰é¡µé¢æ—¶ï¼Œé¡µé¢ä¸­çš„æŸäº›ç©ºé—´ä»æœªè¢«ä½¿ç”¨ã€‚ç”±äº LSM æ ‘ä¸æ˜¯é¢å‘é¡µé¢çš„ï¼Œå¹¶ä¸”ä¼šé€šè¿‡å®šæœŸé‡å†™ SSTables ä»¥å»é™¤ç¢ç‰‡ï¼Œæ‰€ä»¥å®ƒä»¬å…·æœ‰è¾ƒä½çš„å­˜å‚¨å¼€é”€ï¼Œç‰¹åˆ«æ˜¯å½“ä½¿ç”¨åˆ†å±‚å‹ç¼©ï¼ˆleveled compactionï¼‰æ—¶ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:5:1","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#lsm-trees-çš„ä¼˜ç‚¹"},{"categories":["æŠ€æœ¯"],"content":" LSM-Trees çš„ç¼ºç‚¹æ—¥å¿—ç»“æ„å­˜å‚¨çš„ç¼ºç‚¹å‹ç¼©è¿‡ç¨‹æœ‰æ—¶ä¼šå¹²æ‰°æ­£åœ¨è¿›è¡Œçš„è¯»å†™æ“ä½œã€‚å°½ç®¡å­˜å‚¨å¼•æ“å°è¯•å¢é‡åœ°æ‰§è¡Œå‹ç¼©ä»¥å°½é‡ä¸å½±å“å¹¶å‘è®¿é—®ï¼Œä½†æ˜¯ç¡¬ç›˜èµ„æºæœ‰é™ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å‘ç”ŸæŸä¸ªè¯·æ±‚éœ€è¦ç­‰å¾…ç¡¬ç›˜å…ˆå®Œæˆæ˜‚è´µçš„å‹ç¼©æ“ä½œã€‚å¯¹ååé‡å’Œå¹³å‡å“åº”æ—¶é—´çš„å½±å“é€šå¸¸å¾ˆå°ï¼Œä½†æ˜¯æ—¥å¿—ç»“æ„åŒ–å­˜å‚¨å¼•æ“åœ¨æ›´é«˜ç™¾åˆ†ä½çš„å“åº”æ—¶é—´æœ‰æ—¶ä¼šç›¸å½“é•¿ï¼Œè€Œ B æ ‘çš„è¡Œä¸ºåˆ™ç›¸å¯¹æ›´å…·æœ‰å¯é¢„æµ‹æ€§ã€‚ å‹ç¼©çš„å¦ä¸€ä¸ªé—®é¢˜å‡ºç°åœ¨é«˜å†™å…¥ååé‡æ—¶ï¼šç¡¬ç›˜çš„æœ‰é™å†™å…¥å¸¦å®½ éœ€è¦åœ¨ åˆå§‹å†™å…¥ï¼ˆè®°å½•å’Œåˆ·æ–°å†…å­˜è¡¨åˆ°ç¡¬ç›˜ï¼‰å’Œåœ¨åå°è¿è¡Œçš„å‹ç¼©çº¿ç¨‹ä¹‹é—´å…±äº«ã€‚å½“å‘ä¸€ä¸ªç©ºæ•°æ®åº“å†™å…¥æ—¶ï¼Œæ•´ä¸ªç£ç›˜å¸¦å®½å¯ä»¥ç”¨äºåˆå§‹å†™å…¥ï¼Œä½†æ˜¯éšç€æ•°æ®åº“å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œå‹ç¼©éœ€è¦æ›´å¤šçš„ç£ç›˜å¸¦å®½ã€‚ å¦‚æœåœ¨é«˜å†™å…¥ååé‡çš„æƒ…å†µä¸‹ï¼Œå¦‚æœå‹ç¼©æ²¡æœ‰ç»è¿‡ä»”ç»†é…ç½®ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå‹ç¼©æ— æ³•è·Ÿä¸Šå†™å…¥é€Ÿç‡ã€‚è¿™æ—¶ï¼Œç£ç›˜ä¸Šçš„æœªåˆå¹¶æ®µï¼ˆnmerged segmentsï¼‰ä¼šä¸æ–­å¢åŠ ï¼Œç›´åˆ°ç£ç›˜ç©ºé—´ç”¨å°½ï¼Œè¯»å–é€Ÿåº¦ä¹Ÿä¼šå˜æ…¢ï¼Œå› ä¸ºè¦æ£€æŸ¥æ›´å¤šçš„æ®µæ–‡ä»¶ã€‚é€šå¸¸SSTableå­˜å‚¨å¼•æ“ä¸ä¼šé™åˆ¶ä¼ å…¥å†™å…¥é€Ÿç‡ï¼Œå³ä½¿å‹ç¼©è·Ÿä¸ä¸Šï¼Œæ‰€ä»¥ä½ éœ€è¦å»ºç«‹ç›‘æ§æ¥æ£€æµ‹è¿™ç§æƒ…å†µã€‚ B æ ‘çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯æ¯ä¸ªé”®åªå­˜åœ¨äºç´¢å¼•ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œè€Œæ—¥å¿—ç»“æ„åŒ–çš„å­˜å‚¨å¼•æ“å¯èƒ½åœ¨ä¸åŒçš„æ®µä¸­æœ‰ç›¸åŒé”®çš„å¤šä¸ªå‰¯æœ¬ã€‚è¿™ä¸ªæ–¹é¢ä½¿å¾— B æ ‘åœ¨æƒ³è¦æä¾›å¼ºå¤§çš„äº‹åŠ¡è¯­ä¹‰çš„æ•°æ®åº“ä¸­å¾ˆæœ‰å¸å¼•åŠ›ï¼šåœ¨è®¸å¤šå…³ç³»æ•°æ®åº“ä¸­ï¼Œäº‹åŠ¡éš”ç¦»æ˜¯é€šè¿‡åœ¨é”®èŒƒå›´ä¸Šä½¿ç”¨é”æ¥å®ç°çš„ï¼Œåœ¨ B æ ‘ç´¢å¼•ä¸­ï¼Œè¿™äº›é”å¯ä»¥ç›´æ¥é™„åŠ åˆ°æ ‘ä¸Šã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:5:2","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#lsm-trees-çš„ç¼ºç‚¹"},{"categories":["æŠ€æœ¯"],"content":" å…¶ä»–ç´¢å¼•ä¸»é”®ï¼ˆprimary keyï¼‰ ç´¢å¼•ã€‚ä¸»é”®å”¯ä¸€æ ‡è¯†å…³ç³»è¡¨ä¸­çš„ä¸€è¡Œï¼Œæˆ–æ–‡æ¡£æ•°æ®åº“ä¸­çš„ä¸€ä¸ªæ–‡æ¡£æˆ–å›¾å½¢æ•°æ®åº“ä¸­çš„ä¸€ä¸ªé¡¶ç‚¹ã€‚æ•°æ®åº“ä¸­çš„å…¶ä»–è®°å½•å¯ä»¥é€šè¿‡å…¶ä¸»é”®ï¼ˆæˆ– IDï¼‰å¼•ç”¨è¯¥è¡Œ / æ–‡æ¡£ / é¡¶ç‚¹ï¼Œç´¢å¼•å°±è¢«ç”¨äºè§£æè¿™æ ·çš„å¼•ç”¨ã€‚ æ¬¡çº§ç´¢å¼•å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»é”®å€¼ç´¢å¼•æ„å»ºã€‚æ¬¡çº§ç´¢å¼•ä¸»è¦çš„ä¸åŒæ˜¯é”®ä¸æ˜¯å”¯ä¸€çš„ï¼Œå³å¯èƒ½æœ‰è®¸å¤šè¡Œï¼ˆæ–‡æ¡£ï¼Œé¡¶ç‚¹ï¼‰å…·æœ‰ç›¸åŒçš„é”®ã€‚è¿™å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥è§£å†³ï¼šå°†åŒ¹é…è¡Œæ ‡è¯†ç¬¦çš„åˆ—è¡¨ä½œä¸ºç´¢å¼•é‡Œçš„å€¼ï¼ˆå°±åƒå…¨æ–‡ç´¢å¼•ä¸­çš„è®°å½•åˆ—è¡¨ï¼‰ï¼Œæˆ–è€…é€šè¿‡å‘æ¯ä¸ªé”®æ·»åŠ è¡Œæ ‡è¯†ç¬¦æ¥ä½¿é”®å”¯ä¸€ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:6:0","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#å…¶ä»–ç´¢å¼•"},{"categories":["æŠ€æœ¯"],"content":" å°†å€¼å­˜å‚¨åˆ°ç´¢å¼•ä¸­ç´¢å¼•ä¸­çš„å€¼å¯ä»¥å­˜å‚¨å®é™…çš„è¡Œï¼ˆæ–‡æ¡£ã€é¡¶ç‚¹ï¼‰ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨ä¸€ä¸ªå¼•ç”¨ï¼ˆè¡Œå®é™…å­˜å‚¨çš„ä½ç½®çš„å¼•ç”¨ï¼‰ã€‚é€šå¸¸æ˜¯ å †æ–‡ä»¶ï¼ˆheap fileï¼‰ ï¼Œå®ƒå­˜å‚¨çš„æ•°æ®æ˜¯æ— åºçš„ã€‚å®ƒé¿å…äº†å­˜åœ¨å¤šä¸ªæ¬¡çº§ç´¢å¼•æ—¶å¯¹æ•°æ®çš„å¤åˆ¶ï¼šç´¢å¼•åªå¼•ç”¨å †æ–‡ä»¶ä¸Šçš„ä¸€ä¸ªä½ç½®ï¼Œå®é™…æ•°æ®ä¿å­˜åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚ åœ¨ä¸æ›´æ”¹é”®å€¼æ—¶æ›´æ–°å€¼ï¼Œå †æ–‡ä»¶æ˜¯éå¸¸é«˜æ•ˆçš„ï¼šæ–°å€¼å ç”¨å­—èŠ‚æ•°æ®ä¸å¤§äºæ—§å€¼æ—¶ï¼Œè¦†ç›–è¯¥è®°å½•å³å¯ï¼›æ–°å€¼å ç”¨ç©ºé—´å¤§äºæ—§å€¼æ—¶ï¼Œå°±éœ€è¦å°†æ–°å€¼ç§»åŠ¨åˆ°å †ä¸­è¶³å¤Ÿç©ºé—´çš„æ–°ä½ç½®ï¼Œè¿™æ˜¯è¦ä¹ˆæ›´æ–°æ‰€æœ‰çš„ç´¢å¼•ï¼ŒæŒ‡å‘æ–°çš„å †ä½ç½®ï¼Œè¦ä¹ˆåœ¨æ—§çš„å †ä½ç½®ç•™ä¸€ä¸ªè½¬å‘æŒ‡é’ˆã€‚ ä»ç´¢å¼•åˆ°å †æ–‡ä»¶çš„é¢å¤–è·³è·ƒå¯¹è¯»å–æ¥è¯´æ€§èƒ½æŸå¤±è¾ƒå¤§ï¼Œå¸Œæœ›ç´¢å¼•çš„è¡Œç›´æ¥å­˜å‚¨åœ¨ç´¢å¼•ä¸­ã€‚è¿™è¢«ç§°ä¸º èšç°‡ç´¢å¼•ï¼ˆClustered Indexï¼‰ ï¼Œå¦‚ Mysql çš„ InnoDB å­˜å‚¨å¼•æ“ä¸­è¡¨ä¸»é”®æ€»æ˜¯ä¸€ä¸ª èšç°‡ç´¢å¼•ï¼Œæ¬¡çº§ç´¢å¼•åˆ™å¼•ç”¨ä¸»é”®ã€‚ èšç°‡ç´¢å¼•ï¼ˆåœ¨ç´¢å¼•ä¸­å­˜å‚¨æ‰€æœ‰çš„è¡Œæ•°æ®ï¼‰ å’Œ éèšç°‡ç´¢å¼•ï¼ˆä»…åœ¨ç´¢å¼•ä¸­å­˜å‚¨å¯¹æ•°æ®çš„å¼•ç”¨ï¼‰ ä¹‹é—´çš„æŠ˜è¡·ç§°ä¸º è¦†ç›–ç´¢å¼•ï¼ˆcovering indexï¼‰ï¼Œå…¶åœ¨ç´¢å¼•å†…éƒ¨å­˜å‚¨äº†ä¸€éƒ¨åˆ†åˆ—ã€‚è¿™å°±å…è®¸äº†é€šè¿‡å•ç‹¬ä½¿ç”¨ç´¢å¼•æ¥å¤„ç†ä¸€äº›æŸ¥è¯¢ï¼ˆè¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è¯´ç´¢å¼• è¦†ç›–ï¼ˆcoverï¼‰ äº†æŸ¥è¯¢ï¼‰ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:6:1","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#å°†å€¼å­˜å‚¨åˆ°ç´¢å¼•ä¸­"},{"categories":["æŠ€æœ¯"],"content":" å¤šåˆ—ç´¢å¼•è¿æ¥ç´¢å¼•ï¼ˆconcatenated indexï¼‰ ï¼Œå®ƒé€šè¿‡å°†ä¸€åˆ—çš„å€¼è¿½åŠ åˆ°å¦ä¸€åˆ—åé¢ï¼Œç®€å•åœ°å°†å¤šä¸ªå­—æ®µç»„åˆæˆä¸€ä¸ªé”®ï¼ˆç´¢å¼•å®šä¹‰ä¸­æŒ‡å®šäº†å­—æ®µçš„è¿æ¥é¡ºåºï¼‰ã€‚ å¤šç»´ç´¢å¼•ï¼ˆmulti-dimensional indexï¼‰ æ˜¯ä¸€ç§æŸ¥è¯¢å¤šä¸ªåˆ—çš„æ›´ä¸€èˆ¬çš„æ–¹æ³•ï¼Œè¿™å¯¹äºåœ°ç†ç©ºé—´æ•°æ®å°¤ä¸ºé‡è¦ã€‚ ä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨ ç©ºé—´å¡«å……æ›²çº¿ï¼ˆspace-filling curveï¼‰ å°†äºŒç»´ä½ç½®è½¬æ¢ä¸ºå•ä¸ªæ•°å­—ï¼Œç„¶åä½¿ç”¨å¸¸è§„ B æ ‘ç´¢å¼•ã€‚æ›´æ™®éçš„æ˜¯ï¼Œä½¿ç”¨ç‰¹æ®ŠåŒ–çš„ç©ºé—´ç´¢å¼•ï¼Œä¾‹å¦‚ R æ ‘ã€‚ä¾‹å¦‚ï¼ŒPostGIS ä½¿ç”¨ PostgreSQL çš„é€šç”¨ GiST å·¥å…·å°†åœ°ç†ç©ºé—´ç´¢å¼•å®ç°ä¸º R æ ‘ã€‚ å¤šç»´ç´¢å¼•ä¸ä»…å¯ä»¥ç”¨äºåœ°ç†ä½ç½®ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”µå­å•†åŠ¡ç½‘ç«™ä¸Šå¯ä»¥ä½¿ç”¨å»ºç«‹åœ¨ï¼ˆçº¢ï¼Œç»¿ï¼Œè“ï¼‰ç»´åº¦ä¸Šçš„ä¸‰ç»´ç´¢å¼•æ¥æœç´¢ç‰¹å®šé¢œè‰²èŒƒå›´å†…çš„äº§å“ï¼Œä¹Ÿå¯ä»¥åœ¨å¤©æ°”è§‚æµ‹æ•°æ®åº“ä¸­å»ºç«‹ï¼ˆæ—¥æœŸï¼Œæ¸©åº¦ï¼‰çš„äºŒç»´ç´¢å¼•ï¼Œä»¥ä¾¿æœ‰æ•ˆåœ°æœç´¢ 2013 å¹´å†…çš„æ¸©åº¦åœ¨ 25 è‡³ 30Â°C ä¹‹é—´çš„æ‰€æœ‰è§‚æµ‹èµ„æ–™ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:6:2","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#å¤šåˆ—ç´¢å¼•"},{"categories":["æŠ€æœ¯"],"content":" å…¨æ–‡ç´¢å¼•å’Œæ¨¡ç³Šç´¢å¼•å…¨æ–‡æœç´¢å¼•æ“é€šå¸¸å…è®¸æœç´¢ç›®æ ‡ä»ä¸€ä¸ªå•è¯æ‰©å±•ä¸ºåŒ…æ‹¬è¯¥å•è¯çš„åŒä¹‰è¯ï¼Œå¿½ç•¥å•è¯çš„è¯­æ³•å˜ä½“ï¼Œæœç´¢åœ¨ç›¸åŒæ–‡æ¡£ä¸­çš„è¿‘ä¹‰è¯ï¼Œå¹¶ä¸”æ”¯æŒå„ç§å…¶ä»–å–å†³äºæ–‡æœ¬çš„è¯­è¨€åˆ†æåŠŸèƒ½ã€‚ä¸ºäº†å¤„ç†æ–‡æ¡£æˆ–æŸ¥è¯¢ä¸­çš„æ‹¼å†™é”™è¯¯ï¼ŒLucene èƒ½å¤Ÿåœ¨ä¸€å®šçš„ç¼–è¾‘è·ç¦»å†…æœç´¢æ–‡æœ¬ï¼ˆç¼–è¾‘è·ç¦» 1 æ„å‘³ç€å•è¯å†…å‘ç”Ÿäº† 1 ä¸ªå­—æ¯çš„æ·»åŠ ã€åˆ é™¤æˆ–æ›¿æ¢ï¼‰ã€‚ Lucene ä¸ºå…¶è¯å…¸ä½¿ç”¨äº†ä¸€ä¸ªç±»ä¼¼äº SSTable çš„ç»“æ„ã€‚è¿™ä¸ªç»“æ„éœ€è¦ä¸€ä¸ªå°çš„å†…å­˜ç´¢å¼•ï¼Œå‘Šè¯‰æŸ¥è¯¢éœ€è¦åœ¨æ’åºæ–‡ä»¶ä¸­å“ªä¸ªåç§»é‡æŸ¥æ‰¾é”®ã€‚åœ¨ LevelDB ä¸­ï¼Œè¿™ä¸ªå†…å­˜ä¸­çš„ç´¢å¼•æ˜¯ä¸€äº›é”®çš„ç¨€ç–é›†åˆï¼Œä½†åœ¨ Lucene ä¸­ï¼Œå†…å­˜ä¸­çš„ç´¢å¼•æ˜¯é”®ä¸­å­—ç¬¦çš„æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºï¼Œç±»ä¼¼äº trie ã€‚è¿™ä¸ªè‡ªåŠ¨æœºå¯ä»¥è½¬æ¢æˆ Levenshtein è‡ªåŠ¨æœºï¼Œå®ƒæ”¯æŒåœ¨ç»™å®šçš„ç¼–è¾‘è·ç¦»å†…æœ‰æ•ˆåœ°æœç´¢å•è¯ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:6:3","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#å…¨æ–‡ç´¢å¼•å’Œæ¨¡ç³Šç´¢å¼•"},{"categories":["æŠ€æœ¯"],"content":" åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€åˆ‡æŸäº›å†…å­˜ä¸­çš„é”®å€¼å­˜å‚¨ï¼ˆå¦‚ Memcachedï¼‰ä»…ç”¨äºç¼“å­˜ï¼Œåœ¨é‡æ–°å¯åŠ¨è®¡ç®—æœºæ—¶ä¸¢å¤±çš„æ•°æ®æ˜¯å¯ä»¥æ¥å—çš„ã€‚ä½†å…¶ä»–å†…å­˜æ•°æ®åº“çš„ç›®æ ‡æ˜¯æŒä¹…æ€§ï¼Œå¯ä»¥é€šè¿‡ç‰¹æ®Šçš„ç¡¬ä»¶ï¼ˆä¾‹å¦‚ç”µæ± ä¾›ç”µçš„ RAMï¼‰æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥å°†æ›´æ”¹æ—¥å¿—å†™å…¥ç¡¬ç›˜ï¼Œè¿˜å¯ä»¥å°†å®šæ—¶å¿«ç…§å†™å…¥ç¡¬ç›˜æˆ–è€…å°†å†…å­˜ä¸­çš„çŠ¶æ€å¤åˆ¶åˆ°å…¶ä»–æœºå™¨ä¸Šã€‚ å†…å­˜æ•°æ®åº“é‡æ–°å¯åŠ¨æ—¶ï¼Œéœ€è¦ä»ç¡¬ç›˜æˆ–é€šè¿‡ç½‘ç»œä»å‰¯æœ¬é‡æ–°åŠ è½½å…¶çŠ¶æ€ï¼ˆé™¤éä½¿ç”¨ç‰¹æ®Šçš„ç¡¬ä»¶ï¼‰ã€‚å°½ç®¡å†™å…¥ç¡¬ç›˜ï¼Œå®ƒä»ç„¶æ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œå› ä¸ºç¡¬ç›˜ä»…å‡ºäºæŒä¹…æ€§ç›®çš„è¿›è¡Œæ—¥å¿—è¿½åŠ ï¼Œè¯»å–è¯·æ±‚å®Œå…¨ç”±å†…å­˜æ¥å¤„ç†ã€‚å†™å…¥ç¡¬ç›˜åŒæ—¶è¿˜æœ‰è¿ç»´ä¸Šçš„å¥½å¤„ï¼šç¡¬ç›˜ä¸Šçš„æ–‡ä»¶å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”±å¤–éƒ¨ç¨‹åºè¿›è¡Œå¤‡ä»½ã€æ£€æŸ¥å’Œåˆ†æã€‚ åç›´è§‰çš„æ˜¯ï¼Œå†…å­˜æ•°æ®åº“çš„æ€§èƒ½ä¼˜åŠ¿å¹¶ä¸æ˜¯å› ä¸ºå®ƒä»¬ä¸éœ€è¦ä»ç¡¬ç›˜è¯»å–çš„äº‹å®ã€‚åªè¦æœ‰è¶³å¤Ÿçš„å†…å­˜å³ä½¿æ˜¯åŸºäºç¡¬ç›˜çš„å­˜å‚¨å¼•æ“ä¹Ÿå¯èƒ½æ°¸è¿œä¸éœ€è¦ä»ç¡¬ç›˜è¯»å–ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿåœ¨å†…å­˜ä¸­ç¼“å­˜äº†æœ€è¿‘ä½¿ç”¨çš„ç¡¬ç›˜å—ã€‚ç›¸åï¼Œå®ƒä»¬æ›´å¿«çš„åŸå› åœ¨äºçœå»äº†å°†å†…å­˜æ•°æ®ç»“æ„ç¼–ç ä¸ºç¡¬ç›˜æ•°æ®ç»“æ„çš„å¼€é”€ã€‚ å†…å­˜æ•°æ®åº“çš„å¦ä¸€ä¸ªæœ‰è¶£çš„åœ°æ–¹æ˜¯æä¾›äº†éš¾ä»¥ç”¨åŸºäºç¡¬ç›˜çš„ç´¢å¼•å®ç°çš„æ•°æ®æ¨¡å‹ã€‚ä¾‹å¦‚ï¼ŒRedis ä¸ºå„ç§æ•°æ®ç»“æ„ï¼ˆå¦‚ä¼˜å…ˆçº§é˜Ÿåˆ—å’Œé›†åˆï¼‰æä¾›äº†ç±»ä¼¼æ•°æ®åº“çš„æ¥å£ã€‚å› ä¸ºå®ƒå°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥å®ƒçš„å®ç°ç›¸å¯¹ç®€å•ã€‚ å†…å­˜æ•°æ®åº“ä½“ç³»ç»“æ„å¯ä»¥æ‰©å±•åˆ°æ”¯æŒæ¯”å¯ç”¨å†…å­˜æ›´å¤§çš„æ•°æ®é›†ï¼Œè€Œä¸å¿…é‡æ–°é‡‡ç”¨ä»¥ç¡¬ç›˜ä¸ºä¸­å¿ƒçš„ä½“ç³»ç»“æ„ã€‚æ‰€è°“çš„ åç¼“å­˜ï¼ˆanti-cachingï¼‰ æ–¹æ³•é€šè¿‡åœ¨å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹å°†æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®ä»å†…å­˜è½¬ç§»åˆ°ç¡¬ç›˜ï¼Œå¹¶åœ¨å°†æ¥å†æ¬¡è®¿é—®æ—¶å°†å…¶é‡æ–°åŠ è½½åˆ°å†…å­˜ä¸­ã€‚è¿™ä¸æ“ä½œç³»ç»Ÿå¯¹è™šæ‹Ÿå†…å­˜å’Œäº¤æ¢æ–‡ä»¶çš„æ“ä½œç±»ä¼¼ï¼Œä½†æ•°æ®åº“å¯ä»¥æ¯”æ“ä½œç³»ç»Ÿæ›´æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜ï¼Œå› ä¸ºå®ƒå¯ä»¥æŒ‰å•ä¸ªè®°å½•çš„ç²’åº¦å·¥ä½œï¼Œè€Œä¸æ˜¯æ•´ä¸ªå†…å­˜é¡µé¢ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™ç§æ–¹æ³•ä»ç„¶éœ€è¦ç´¢å¼•èƒ½å®Œå…¨æ”¾å…¥å†…å­˜ä¸­ï¼ˆå°±åƒæœ¬ç« å¼€å¤´çš„ Bitcask ä¾‹å­ï¼‰ã€‚ ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:6:4","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#åœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€åˆ‡"},{"categories":["æŠ€æœ¯"],"content":" å‚è€ƒé“¾æ¥Compaction ç­–ç•¥ - Size-Tiered Compaction ç­–ç•¥ â€“ Leveled ","date":"2023-04-03","objectID":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/:7:0","series":null,"tags":["æ•°æ®å¯†é›†","SSTable","LSM-Trees","B-Trees","ç´¢å¼•"],"title":"æ•°æ®çš„å­˜å‚¨ä¸æ£€ç´¢","uri":"/posts/ddia/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E4%B8%8E%E6%A3%80%E7%B4%A2/#å‚è€ƒé“¾æ¥"},{"categories":["æŠ€æœ¯"],"content":" BitMapåŸç†ä½¿ç”¨ä¸€ä¸ª bit ä½æ¥å­˜å‚¨æŸç§çŠ¶æ€ï¼ˆæ¯”å¦‚ç­¾åˆ°ä¸å¦ï¼Œæ˜¯å¦å­˜åœ¨ç­‰ï¼‰ã€‚ å¦‚è®°å½• 0-7 è¿™å‡ ä¸ªæ•°å­—ä¸­å“ªäº›å­˜åœ¨ï¼Œåªéœ€è¦ 8 ä¸ª bit ä½ã€‚0 è¡¨ç¤ºæ•°å­—ä¸å­˜åœ¨ï¼Œ1 è¡¨ç¤ºæ•°å­—å­˜åœ¨ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ5 è¿™å‡ ä¸ªæ•°å­˜åœ¨ï¼Œ å­˜å‚¨å¦‚ä¸‹ï¼š ä»£è¡¨æ•°å­— 7 6 5 4 3 2 1 0 bitä½è¡¨ç¤º 0 0 1 0 1 1 1 0 ä¾‹å¦‚ï¼šè®°å½•ä¸€ä¸ªè‹±æ–‡å¥å­ï¼ˆå°å†™ï¼‰ä¸­æ˜¯å¦å­˜åœ¨ a - z æ‰€æœ‰å­—æ¯ï¼š go // æ–¹æ³•1ï¼š ä½¿ç”¨ hash å­˜å‚¨ var hash = map[rune]bool{ 'a':false, 'b':false, // ... 'z':false, } // æ–¹æ³•2ï¼šä½¿ç”¨æ•°ç»„ï¼Œä½¿ç”¨ä¸‹æ ‡è¡¨ç¤ºå­—æ¯ var arr [26]bool // æ–¹æ³•3ï¼šä½¿ç”¨ int32 çš„ä½ 26 ä½å­˜å‚¨ï¼Œæ¯ä½ 0 è¡¨ç¤ºä¸å­˜åœ¨ï¼Œ1 è¡¨ç¤ºå­˜åœ¨ï¼Œä»ä½åˆ°é«˜ä¾æ¬¡è¡¨ç¤º a-z var bit int32 bit |= 1\u003c\u003c0 // å­˜å‚¨ a å­˜åœ¨ bit |= 1\u003c\u003c1 // å­˜å‚¨ b å­˜åœ¨ bit == 0x3ffffff // åˆ¤æ–­ a-z å…¨éƒ¨å­˜åœ¨, 0x3ffffff è½¬ä¸º 2 è¿›åˆ¶ ä½ 26 ä½å…¨éƒ¨ä¸º 1 // å†…å­˜å ç”¨æƒ…å†µ fmt.Printf(\"%d\\n\", unsafe.Sizeof(hash)) // 8 å­—èŠ‚ fmt.Printf(\"%d\\n\", unsafe.Sizeof(arr)) // 26 å­—èŠ‚ fmt.Printf(\"%d\\n\", unsafe.Sizeof(bit)) // 4 å­—èŠ‚ ","date":"2022-10-11","objectID":"/posts/algorithm/bitmap/:1:0","series":null,"tags":["ç®—æ³•","bitmap"],"title":"BitMap","uri":"/posts/algorithm/bitmap/#bitmapåŸç†"},{"categories":["æŠ€æœ¯"],"content":" ç¤ºä¾‹å¯¹æ¯”é¢˜ç›® go // hashmap æ–¹å¼ package summultiples func SumMultiples(limit int, divisors ...int) int { sum := 0 set := make(map[int]bool) for _, d := range divisors { if d == 0 { continue } for m := d; m \u003c limit; m += d { if _, ok := set[m]; !ok { sum += m set[m] = true } } } return sum } // æ€§èƒ½æµ‹è¯•ç»“æœ // BenchmarkSumMultiples-12 1593 700847 ns/op 487055 B/op 451 allocs/op // bitmap æ–¹å¼ func SumMultiples(limit int, divisors ...int) (sum int) { bits := make([]byte, (limit\u003e\u003e3)+1) for _, divisor := range divisors { if divisor == 0 { continue } for i := 1; ; i++ { num := divisor * i if num \u003e= limit { break } index := num \u003e\u003e 3 pos := num \u0026 0x07 if bits[index]\u0026(1\u003c\u003cpos) == 0 { sum += num bits[index] |= 1 \u003c\u003c pos } } } return } // æ€§èƒ½æµ‹è¯•ç»“æœ // BenchmarkSumMultiples-12 66572 17749 ns/op 4040 B/op 16 allocs/op ","date":"2022-10-11","objectID":"/posts/algorithm/bitmap/:2:0","series":null,"tags":["ç®—æ³•","bitmap"],"title":"BitMap","uri":"/posts/algorithm/bitmap/#ç¤ºä¾‹å¯¹æ¯”"},{"categories":["æŠ€æœ¯"],"content":" ç¼ºç‚¹ï¼ˆ1ï¼‰æ•°æ®ç¢°æ’ã€‚æ¯”å¦‚å°†å­—ç¬¦ä¸²æ˜ å°„åˆ° BitMap çš„æ—¶å€™ä¼šæœ‰ç¢°æ’çš„é—®é¢˜ï¼Œé‚£å°±å¯ä»¥è€ƒè™‘ç”¨ Bloom Filter æ¥è§£å†³ï¼ŒBloom Filter ä½¿ç”¨å¤šä¸ª Hash å‡½æ•°æ¥å‡å°‘å†²çªçš„æ¦‚ç‡ã€‚ ï¼ˆ2ï¼‰æ•°æ®ç¨€ç–ã€‚åˆæ¯”å¦‚è¦å­˜å…¥(10,8887983,93452134)è¿™ä¸‰ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ª 99999999 é•¿åº¦çš„ BitMap ï¼Œä½†æ˜¯å®é™…ä¸Šåªå­˜äº†3ä¸ªæ•°æ®ï¼Œè¿™æ—¶å€™å°±æœ‰å¾ˆå¤§çš„ç©ºé—´æµªè´¹ï¼Œç¢°åˆ°è¿™ç§é—®é¢˜çš„è¯ï¼Œå¯ä»¥é€šè¿‡å¼•å…¥ Roaring BitMap æ¥è§£å†³ã€‚ ","date":"2022-10-11","objectID":"/posts/algorithm/bitmap/:3:0","series":null,"tags":["ç®—æ³•","bitmap"],"title":"BitMap","uri":"/posts/algorithm/bitmap/#ç¼ºç‚¹"},{"categories":["æŠ€æœ¯"],"content":" å…³äº Roaring BitMapåç»­å†è¡¥å……ï¼Œå…ˆæ”¾ä¸¤ä¸ªé“¾æ¥å§ ä¸€æ–‡è¯»æ‡‚æ¯”BitMapæœ‰æ›´å¥½æ€§èƒ½çš„Roaring Bitmap ä¸æ·±å…¥è€Œæµ…å‡º Roaring Bitmaps çš„åŸºæœ¬åŸç† ","date":"2022-10-11","objectID":"/posts/algorithm/bitmap/:4:0","series":null,"tags":["ç®—æ³•","bitmap"],"title":"BitMap","uri":"/posts/algorithm/bitmap/#å…³äº-roaring-bitmap"},{"categories":["æŠ€æœ¯"],"content":" å‚è€ƒé“¾æ¥ go bitmap å®ç° bitmapåŸç†åŠåº”ç”¨ ","date":"2022-10-11","objectID":"/posts/algorithm/bitmap/:5:0","series":null,"tags":["ç®—æ³•","bitmap"],"title":"BitMap","uri":"/posts/algorithm/bitmap/#å‚è€ƒé“¾æ¥"},{"categories":["æŠ€æœ¯"],"content":" è¯­æ³•ä¸€è§ˆå›¾ç»´åŸºç™¾ç§‘ æˆªå›¾åœ°å€ ","date":"2022-09-22","objectID":"/posts/regex/:1:0","series":null,"tags":["æ­£åˆ™"],"title":"æ­£åˆ™ç›¸å…³","uri":"/posts/regex/#è¯­æ³•ä¸€è§ˆå›¾"},{"categories":["æŠ€æœ¯"],"content":" è¡¥å……è¯´æ˜","date":"2022-09-22","objectID":"/posts/regex/:2:0","series":null,"tags":["æ­£åˆ™"],"title":"æ­£åˆ™ç›¸å…³","uri":"/posts/regex/#è¡¥å……è¯´æ˜"},{"categories":["æŠ€æœ¯"],"content":" åˆ†ç»„éæ•è·ç»„ sh `What is -?\\d+(?: (?:plus|minus|divided by|multiplied by) -?\\d+)*\\?` ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒ¹é… â€œWhat is 5?â€ â€œWhat is -10?â€ â€œWhat is 4 plus 5?â€ â€œWhat is 3 minus 2 divided by 1?â€ â€œWhat is -2 multiplied by -4 divided by 2 plus 6?â€ ","date":"2022-09-22","objectID":"/posts/regex/:2:1","series":null,"tags":["æ­£åˆ™"],"title":"æ­£åˆ™ç›¸å…³","uri":"/posts/regex/#åˆ†ç»„"},{"categories":["æŠ€æœ¯"],"content":" æµ‹è¯•ç½‘ç«™https://regex101.com/ ","date":"2022-09-22","objectID":"/posts/regex/:3:0","series":null,"tags":["æ­£åˆ™"],"title":"æ­£åˆ™ç›¸å…³","uri":"/posts/regex/#æµ‹è¯•ç½‘ç«™"},{"categories":["æŠ€æœ¯"],"content":" ç»ƒä¹ ç½‘ç«™https://alf.nu/RegexGolf ","date":"2022-09-22","objectID":"/posts/regex/:4:0","series":null,"tags":["æ­£åˆ™"],"title":"æ­£åˆ™ç›¸å…³","uri":"/posts/regex/#ç»ƒä¹ ç½‘ç«™"},{"categories":["æŠ€æœ¯"],"content":" æ­£åˆ™å¯è§†åŒ–https://regex-vis.com/ https://jex.im/regulex/#!flags=\u0026re=%5E(a%7Cb)*%3F%24 https://regexper.com/ ","date":"2022-09-22","objectID":"/posts/regex/:5:0","series":null,"tags":["æ­£åˆ™"],"title":"æ­£åˆ™ç›¸å…³","uri":"/posts/regex/#æ­£åˆ™å¯è§†åŒ–"},{"categories":["æŠ€æœ¯"],"content":" å­—ç¬¦ä¸² shell # å•å¼•å·ï¼šåŸæ ·ï¼Œ åŒå¼•å·ï¼šä¼šè§£æå˜é‡ a=1 # = ä¸¤è¾¹ä¸åŠ ç©ºæ ¼ str_1='a=$a' # a=$a str_2=\"a=$a\" # a=1 str_3=`pwd` # `(åå¼•å·)å†…çš„å­—ç¬¦ä¸²è¢«å½“ä½œshellå‘½ä»¤ï¼Œæ‰§è¡Œå®Œç»“æœè¿”å›ç»™ str_3 # å­—ç¬¦ä¸²é•¿åº¦ s='abcd' len=${#s} # ç­‰ä»·äº ${#s[0]} # æˆªå– ä»ç¬¬1ä¸ªå­—ç¬¦å¼€å§‹ï¼Œæˆªå–3ä¸ªå­—ç¬¦ï¼Œç´¢å¼•ä»0å¼€å§‹ sub_s=${s:1:3} ","date":"2022-09-20","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/:1:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-1","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/#å­—ç¬¦ä¸²"},{"categories":["æŠ€æœ¯"],"content":" è·å–å½“å‰è„šæœ¬çš„ç»å¯¹è·¯å¾„ shell BASE_DIR=$(cd $(dirname $0) \u0026\u0026 pwd) ","date":"2022-09-20","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/:2:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-1","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/#è·å–å½“å‰è„šæœ¬çš„ç»å¯¹è·¯å¾„"},{"categories":["æŠ€æœ¯"],"content":" è·å–é…ç½®æ–‡ä»¶å†…å®¹ shell # config.ini å†…å®¹å¦‚ä¸‹ï¼š # [mysql] # host=\"1.1.1.3\" # [redis] # host=\"1.1.1.4\" # db=\"7\" # è·å–é…ç½®ä¿¡æ¯ function getconf(){ Section=$1; Item=$2 _readIni=`awk -F '=' '/\\['$Section'\\]/{a=1}a==1\u0026\u0026$1~/'$Item'/{print $2;exit}' $BASE_DIR/config.ini` echo ${_readIni} } mysql_ip=$(getconf mysql host) # mysql_ipçš„å€¼ä¸ºï¼š1.1.1.3 ","date":"2022-09-20","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/:3:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-1","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/#è·å–é…ç½®æ–‡ä»¶å†…å®¹"},{"categories":["æŠ€æœ¯"],"content":" æ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£ shell #!/bin/sh ### ### my-script â€” start or end data analysis server ### ### Usage: ### my-script \u003ccommand\u003e ### ### Command: ### up Start data analysis server. ### down End data analysis server. ### -h Show this message. function help() { sed -rn 's/^### ?//;T;p' \"$0\" } if [[ $# == 0 ]] || [[ \"$1\" == \"-h\" ]]; then help exit 1 fi ","date":"2022-09-20","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/:4:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-1","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/#æ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£"},{"categories":["æŠ€æœ¯"],"content":" shell å‚æ•° $# å‚æ•°ä¸ªæ•° $0 æ‰§è¡Œæ–‡ä»¶åï¼ˆå«è·¯å¾„ï¼‰$1.. $n ç¬¬å‡ ä¸ªå‚æ•° $$ å½“å‰è¿›ç¨‹ id $* å’Œ $@ å¼•ç”¨æ‰€æœ‰å‚æ•°ï¼ŒåŒºåˆ« åœ¨åŒå¼•å·ä¸­ï¼Œå‡è®¾åœ¨è„šæœ¬è¿è¡Œæ—¶å†™äº†ä¸‰ä¸ªå‚æ•° 1ã€2ã€3ï¼Œåˆ™ $* ç­‰ä»·äº \"1 2 3\"ï¼ˆä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼‰ï¼Œè€Œ $@ ç­‰ä»·äº \"1\" \"2\" \"3\"ï¼ˆä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼‰ $? æ˜¾ç¤ºæœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ 0 è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä½™è¡¨ç¤ºæœ‰é”™è¯¯ ","date":"2022-09-20","objectID":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/:5:0","series":null,"tags":["unix","shell"],"title":"Shellç¼–ç¨‹-1","uri":"/posts/unixs/shell%E7%BC%96%E7%A8%8B-1/#shell-å‚æ•°"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®æœ¬æœºå¯ä»¥æ¥æ”¶è¿œç«¯çš„syslogæ—¥å¿—æ ¹æ®éœ€è¦å¯ç”¨udpæˆ–tcpæ¨¡å—ï¼Œå¹¶è®¾ç½®ç«¯å£ï¼Œä½¿å…¶èƒ½å¤Ÿæ¥æ”¶æ¶ˆæ¯ã€‚ shell # vim /etc/rsyslog.conf $ModLoad imudp $UDPServerRun 514 é‡å¯ rsyslog æœåŠ¡ bash systemctl restart rsyslog é˜²ç«å¢™æ”¾è¡Œç«¯å£ bash iptables -A INPUT -p udp --dport 514 -j ACCEPT ç›‘å¬æ”¾è¡Œçš„ç«¯å£ bash # -l listen -p source-port -4 ipv4 -u udp nc -l -p 514 -4 -u åœ¨è¿œç«¯çš„ä¸»æœºä¸Šå‘é€æ—¥å¿—æµ‹è¯• shell logger \"hello logs\" --server {{hostname}} --port 514 ä»¥ä¸Šç›‘å¬å°†ä¼šæ˜¾ç¤ºç±»ä¼¼å¦‚ä¸‹ä¿¡æ¯ï¼š shell \u003c5\u003eSep 15 15:36:00 root: hello logs ","date":"2022-09-15","objectID":"/posts/unixs/rsyslog-%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E8%BF%9C%E7%A8%8B%E6%97%A5%E5%BF%97/:1:0","series":null,"tags":["unix","linux","syslog"],"title":" rsyslog å‘é€å’Œæ¥æ”¶è¿œç¨‹æ—¥å¿—","uri":"/posts/unixs/rsyslog-%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E8%BF%9C%E7%A8%8B%E6%97%A5%E5%BF%97/#é…ç½®æœ¬æœºå¯ä»¥æ¥æ”¶è¿œç«¯çš„syslogæ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®æœ¬æœºå°†syslogæ—¥å¿—å‘é€è¿œç«¯ä¿®æ”¹é…ç½®æ–‡ä»¶ shell # æ—§ç‰ˆæœ¬è¯­æ³• # An on-disk queue is created for this action. If the remote host is # down, messages are spooled to disk and sent when it is up again. #$ActionQueueFileName fwdRule1 # unique name prefix for spool files #$ActionQueueMaxDiskSpace 1g # 1gb space limit (use as much as possible) #$ActionQueueSaveOnShutdown on # save messages to disk on shutdown #$ActionQueueType LinkedList # run asynchronously #$ActionResumeRetryCount -1 # infinite retries if host is down # Facility.Severity *.* è¡¨ç¤ºæ‰€æœ‰ @è¡¨ç¤ºä¼ è¾“åè®®ï¼ˆ@è¡¨ç¤ºudpï¼Œ@@è¡¨ç¤ºtcpï¼‰ï¼Œåé¢æ˜¯ipå’Œç«¯å£ã€‚ *.* @@remote-host:514 # æ–°ç‰ˆæœ¬è¯­æ³• *.* action(type=\"omfwd\" target=\"192.0.2.1\" port=\"10514\" protocol=\"tcp\") *.* action(type=\"omfwd\" #ä½¿ç”¨ omfwd udp å’Œ tcp è½¬å‘æ’ä»¶ queue.type=\"LinkedList\" # å¯ç”¨ LinkedList å†…å­˜é˜Ÿåˆ—ï¼Œqueue_type å¯ä»¥æ˜¯ directã€linkedlist æˆ–è€… fixedarrayï¼ˆå®ƒä»¬æ˜¯å†…å­˜é˜Ÿåˆ—ï¼‰æˆ–è€…ç£ç›˜ action.resumeRetryCount=\"-1\" # è¿œç¨‹ä¸»æœºå…³é—­æ—¶é‡è¯•æ¬¡æ•° -1 æ— é™æ¬¡ queue.size=\"10000\" # å†…å­˜ä¸­é˜Ÿåˆ—çš„æ•°é‡ï¼Œéå­—èŠ‚å¤§å°ï¼Œé˜²æ­¢å³°å€¼ queue.saveonshutdown=\"on\" # æœ¬åœ°ä¸»æœºå…³é—­æ—¶ï¼Œæ˜¯å¦ä¿å­˜å†…å­˜ä¸­çš„é˜Ÿåˆ—åˆ°ç£ç›˜ target=\"10.43.138.1\" Port=\"10514\" Protocol=\"tcp\") é‡å¯ rsyslog æœåŠ¡ shell systemctl restart rsyslog å¯¹äº rsyslog ä½ ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œé‡æ–°å¯åŠ¨ä¸€ä¸ªæ–°çš„è¿›ç¨‹ã€‚ shell rsyslogd -i /var/run/rsyslog_reindexer.pid -f /home/me/rsyslog_reindexer.conf å‚è€ƒï¼š å¦‚ä½•ä½¿ç”¨ tcp å’Œ udp ç«¯å£å°† syslog æ—¥å¿—å‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Š syslog è¯¦è§£å’Œé…ç½® ä½¿ç”¨ rsyslog é‡æ’ es æ•°æ® rsysæ–‡æ¡£ man æ‰‹å†Œ ","date":"2022-09-15","objectID":"/posts/unixs/rsyslog-%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E8%BF%9C%E7%A8%8B%E6%97%A5%E5%BF%97/:2:0","series":null,"tags":["unix","linux","syslog"],"title":" rsyslog å‘é€å’Œæ¥æ”¶è¿œç¨‹æ—¥å¿—","uri":"/posts/unixs/rsyslog-%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E8%BF%9C%E7%A8%8B%E6%97%A5%E5%BF%97/#é…ç½®æœ¬æœºå°†syslogæ—¥å¿—å‘é€è¿œç«¯"},{"categories":["æŠ€æœ¯"],"content":"Go è¯­è¨€ä¸­æ–¹æ³•åˆ†ä¸º å…·åå’ŒåŒ¿åï¼Œå½“åŒ¿åå‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å˜é‡æ—¶å€™å°±æˆäº†é—­åŒ…å‡½æ•°ã€‚ æ–¹æ³•æ˜¯ç»‘å®šåˆ°ä¸€ä¸ªå…·ä½“ç±»å‹çš„ç‰¹æ®Šå‡½æ•°ï¼Œæ–¹æ³•ä¾æ‰˜ç±»å‹ã€‚å¿…é¡»åœ¨ç¼–è¯‘æ—¶é™æ€ç»‘å®šã€‚ æ¥å£å®šä¹‰äº†æ–¹æ³•çš„é›†åˆï¼Œè¿™äº›æ–¹æ³•ä¾æ‰˜äºè¿è¡Œæ—¶çš„å¯¹è±¡ï¼ˆå®ç°äº†æ¥å£ä¸­çš„æ–¹æ³•ï¼‰ï¼Œå› æ­¤æ¥å£å¯¹åº”çš„æ–¹æ³•æ˜¯è¿è¡Œæ—¶åŠ¨æ€ç»‘å®šçš„ã€‚ Go è¯­è¨€ç¨‹åºçš„åˆå§‹åŒ–å’Œæ‰§è¡ŒåŒ–æ€»æ˜¯ä» main.main å¼€å§‹ã€‚å¦‚æœ main å¯¼å…¥äº†å…¶ä»–åŒ…ï¼Œåˆ™æŒ‰é¡ºåºå°†ä»–ä»¬åŒ…å«è¿›æ¥ï¼Œä¸€ç›´é€’å½’ï¼›åŒ…å«æ—¶ï¼Œå…ˆåˆ›å»ºå’Œåˆå§‹åŒ–åŒ…çš„å¸¸é‡ã€å˜é‡ï¼Œç„¶åè°ƒç”¨åŒ…ä¸­çš„ init å‡½æ•°ã€‚å¦‚ä¸‹ï¼š è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ main.main å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨åŒä¸€ä¸ª Goroutine ä¸­ï¼Œä¹Ÿæ˜¯è¿è¡Œåœ¨ç¨‹åºçš„ä¸»ç³»ç»Ÿçº¿ç¨‹ä¸­ã€‚å¦‚æœæŸä¸ª init å‡½æ•°å†…éƒ¨ç”¨ go å…³é”®å­—å¯åŠ¨äº†æ–°çš„ Goroutine çš„è¯ï¼Œæ–°çš„ Goroutine å’Œ main.main å‡½æ•°æ˜¯å¹¶å‘æ‰§è¡Œçš„ã€‚ ","date":"2022-09-09","objectID":"/posts/golang/function-method-interface-of-golang/:0:0","series":null,"tags":["golang"],"title":"Function-Method-Interface-of-Golang","uri":"/posts/golang/function-method-interface-of-golang/#"},{"categories":["æŠ€æœ¯"],"content":" å‡½æ•°Go è¯­è¨€ä¸­å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªè¿”å›å€¼ã€‚ å‚æ•°å’Œè¿”å›å€¼éƒ½æ˜¯ä»¥å€¼çš„å½¢å¼å’Œè¢«è°ƒç”¨è€…äº¤æ¢æ•°æ®çš„ã€‚ å‡½æ•°æ”¯æŒå¯å˜æ•°é‡çš„å‚æ•°ï¼Œå¯å˜æ•°é‡çš„å‚æ•°å¿…é¡»æ˜¯æœ€åä¸€ä¸ªã€‚å¯å˜æ•°é‡çš„å‚æ•°å…¶å®æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ç±»å‹çš„å‚æ•°ã€‚ go func Swap(a,b int) (int, int){ return b,a } func Sum(a int, more ...int) int{ for _,v :=range more{ a += v } return a } å‡½æ•°çš„è¿”å›å€¼ä¹Ÿå¯ä»¥ç”¨åå­—ï¼š go func Find(m map[int]int, key int) (value int, ok bool) { value, ok = m[key] return } derfer å¯ä»¥åœ¨ reurn ä¹‹åä¿®æ”¹è¿”å›å€¼ï¼š go func Inc() (v int) { defer func(){ v++ } () return 42 } Go è¯­è¨€ä¸­ï¼Œå‡½æ•°ä¼ å‚æ˜¯ä¼ å€¼ï¼Œåªæ˜¯é’ˆå¯¹äº†æ•°æ®ç»“æ„ä¸­å›ºå®šéƒ¨åˆ†ä¼ å€¼ã€‚å¦‚ï¼šå­—ç¬¦ä¸²æˆ–åˆ‡ç‰‡ä¼ å‚æ—¶ï¼Œåªæ˜¯å¤åˆ¶äº†å¯¹åº”æ•°æ®ç»“æ„ä¸­çš„æŒ‡é’ˆã€å­—ç¬¦ä¸²é•¿åº¦ã€åˆ‡ç‰‡å®¹é‡ç­‰å€¼ï¼Œå¹¶ä¸åŒ…å«æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ã€‚å¯ä»¥å°†å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡ç±»å‹çš„å‚æ•°è½¬æ¢ä¸º reflect.StringHeader reflect.SliceHeaderçš„ç»“æ„ä½“ï¼Œå¯ä»¥æ›´å¥½çš„ç†è§£ä¼ å€¼çš„å«ä¹‰ï¼š go func twice(x []int){ for i := range x{ x[i] *= 2 } } type IntSliceHeader struct { Data []int Len int Cap int } func twice(x IntSliceHeader){ for i:= 0; i\u003cx.Len; i++{ x.Data[i] *= 2 } } å¦‚ä¸Šï¼Œåˆ‡ç‰‡ä¸­çš„åº•å±‚æ•°ç»„éƒ¨åˆ†æ˜¯é€šè¿‡éšå¼æŒ‡é’ˆä¼ é€’(æŒ‡é’ˆæœ¬èº«ä¾ç„¶æ˜¯ä¼ å€¼çš„ï¼Œä½†æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å´æ˜¯åŒä¸€ä»½çš„å†…å­˜æ•°æ®)ï¼Œæ‰€ä»¥è¢«è°ƒç”¨å‡½æ•°æ˜¯å¯ä»¥é€šè¿‡ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®ï¼ˆæŒ‡é’ˆæœ¬èº«çš„æŒ‡å‘å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼‰ï¼Œä»è€Œè¾¾åˆ°ä¿®æ”¹æ‰è°ƒç”¨å‚æ•°åˆ‡ç‰‡ä¸­æ•°æ®çš„æ•ˆæœã€‚ Go è¯­è¨€æ”¯æŒé€’å½’è°ƒç”¨ï¼Œä¸”è°ƒç”¨æ·±åº¦é€»è¾‘ä¸Šæ²¡æœ‰é™åˆ¶ï¼Œå‡½æ•°è°ƒç”¨æ ˆä¸ä¼šå‡ºç°æº¢å‡ºé”™è¯¯ï¼Œè¿™æ˜¯å› ä¸º Go è¯­è¨€è¿è¡Œæ—¶ä¼šæ ¹æ®éœ€è¦åŠ¨æ€è°ƒæ•´å‡½æ•°æ ˆçš„å¤§å°ã€‚æ ˆæœ€å¤§å¯è¾¾åˆ°GBçº§ã€‚ Go 1.4 ä¹‹å‰ï¼ŒåŠ¨æ€æ ˆé‡‡ç”¨çš„æ—¶åˆ†æ®µå¼çš„åŠ¨æ€æ ˆï¼Œé€šä¿—è¯´å°±æ˜¯é‡‡ç”¨ä¸€ä¸ªé“¾è¡¨å®ç°åŠ¨æ€æ ˆã€‚é“¾è¡¨èŠ‚ç‚¹ä½ç½®ä¸å˜ï¼Œç¼ºç‚¹: è·¨èŠ‚ç‚¹åœ°å€ä½ç½®ä¸æ˜¯ä¸€å®šæ˜¯è¿ç»­çš„ï¼ŒCPUç¼“å­˜å‘½ä¸­ç‡ä½ã€‚ Go 1.4 ä¹‹åæ”¹ç”¨è¿ç»­çš„åŠ¨æ€æ ˆå®ç°ï¼Œé€šä¿—æ¥è¯´æ˜¯é‡‡ç”¨ä¸€ä¸ªç±»ä¼¼åŠ¨æ€æ•°ç»„æ¥å®ç°æ ˆã€‚ç¼ºç‚¹ï¼šå½“è¿ç»­æ ˆéœ€è¦åŠ¨æ€å¢é•¿æ—¶å€™ï¼Œéœ€è¦é‡æ–°åˆ†é…å†…å­˜ç©ºé—´å¹¶å¤åˆ¶æ•°æ®åˆ°æ–°çš„ç©ºé—´ï¼Œè¿™å¯¼è‡´äº†æ ˆä¸­ä¹‹å‰å˜é‡çš„åœ°å€å‘ç”Ÿå˜åŒ–ï¼ˆGo çš„è¿è¡Œæ—¶ä¼šè‡ªåŠ¨æ›´æ–°è¿™äº›å˜åŒ–ï¼‰ã€‚ä½†æ˜¯è¿™æ„å‘³ç€ ï¼ŒGo è¯­è¨€ä¸­çš„æŒ‡é’ˆä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œä¸èƒ½éšæ„å°†æŒ‡é’ˆä¿å­˜åœ¨æ•°å€¼å˜é‡ä¸­ï¼Œä¸èƒ½å°† Go è¯­è¨€çš„åœ°å€éšæ„ä¿å­˜åˆ°é GC çš„ç¯å¢ƒä¸­ï¼ˆå¦‚ï¼šä½¿ç”¨ CGO æ—¶ï¼ŒC è¯­è¨€ä¸èƒ½é•¿æœŸæŒæœ‰ Go ä¸è¯­è¨€çš„åœ°å€ï¼‰ã€‚ Go è¯­è¨€éšè—äº†å †æ ˆçš„ç»†èŠ‚ï¼Œç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶å¸®æˆ‘ä»¬åšäº†è¿˜å¤šå·¥ä½œï¼Œä»¥ä¸‹ä»£ç åœ¨ C/C++ ä¸­ä¸å¯è¡Œçš„ï¼Œä½†åœ¨ Go è¯­è¨€ä¸­å¹¶æ²¡é—®é¢˜ï¼š go // å¦‚æœå‚æ•°å˜é‡åœ¨æ ˆä¸Šçš„è¯ï¼Œå‡½æ•°è¿”å›ä¹‹åæ ˆå˜é‡å°±å¤±æ•ˆäº†ï¼Œè¿”å›çš„åœ°å€è‡ªç„¶ä¹Ÿåº”è¯¥å¤±æ•ˆäº† func f(x int) *int { return \u0026x } // å†…éƒ¨è™½ç„¶è°ƒç”¨ new å‡½æ•°åˆ›å»ºäº† *int ç±»å‹çš„æŒ‡é’ˆå¯¹è±¡ï¼Œä½†æ˜¯ä¾ç„¶ä¸çŸ¥é“å®ƒå…·ä½“ä¿å­˜åœ¨å“ªé‡Œ func g() int { x := new(int) return *x } éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¸è¦å‡è®¾å˜é‡åœ¨å†…å­˜ä¸­çš„ä½ç½®æ˜¯å›ºå®šä¸å˜çš„ï¼ŒæŒ‡é’ˆéšæ—¶å¯èƒ½ä¼šå˜åŒ–ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ ä¸æœŸæœ›å®ƒå˜åŒ–çš„æ—¶å€™ã€‚ ","date":"2022-09-09","objectID":"/posts/golang/function-method-interface-of-golang/:1:0","series":null,"tags":["golang"],"title":"Function-Method-Interface-of-Golang","uri":"/posts/golang/function-method-interface-of-golang/#å‡½æ•°"},{"categories":["æŠ€æœ¯"],"content":" æ–¹æ³•Go è¯­è¨€æ–¹æ³•å…³è”åˆ°ç»“æ„ä½“ä¸Šï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆé™æ€ç»‘å®šã€‚ æˆ‘ä»¬å¯ä»¥ç»™ä»»æ„è‡ªå®šä¹‰çš„ç»“æ„ä½“æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ã€‚æ–¹æ³•å’Œç»“æ„ä½“å®šä¹‰å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…é‡Œã€‚ å…¶å®ï¼Œæ–¹æ³•æ˜¯ç”±å‡½æ•°æ¼”åŒ–è€Œæ¥ï¼Œåªæ˜¯å°†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå¯¹è±¡å‚æ•°ç§»åŠ¨åˆ°å‡½æ•°åå‰é¢è€Œå·²ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–¹æ³•è¡¨è¾¾å¼çš„ç‰¹æ€§å°†æ–¹æ³•è¿˜åŸä¸ºæ™®é€šç±»å‹å‡½æ•°ï¼š go // func ReadFile(f *File, offset int64, data []byte) int var ReadFile = (*File).Read // func CloseFile(f *File) error var CloseFile = (*File).Close f, _:= OpenFile(\"foo.txt\") ReadFile(f,0,data) CloseFile(f) å¯¹äºæœ‰äº›åœºæ™¯ï¼Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒå…·ä½“æ“ä½œå¯¹è±¡çš„ç±»å‹ï¼Œåªè¦æ»¡è¶³é€šç”¨çš„ è¡Œä¸º å°±å¯ä»¥äº†ã€‚åœ¨Goè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é—­åŒ…åšå‚æ•°ç»‘å®šï¼Œä»è€Œæ¶ˆé™¤ä¸Šè¾¹å‡½æ•°å‚æ•°ç±»å‹çš„çš„é™åˆ¶ï¼š go f, _:=OpenFile(\"foo.txt\") // ç»‘å®šäº† f å¯¹è±¡ // func Close() error var Close = func() err(){ return (*File).Close(f) } // ç»‘å®šåˆ°äº† f å¯¹è±¡ // func Read(offset int64, data []byte) int var Read = func(offset int64, data []byte) int { return (*File).Read(f, offset, data) } // æ–‡ä»¶å¤„ç† Read(0, data) Close() // ä½¿ç”¨æ–¹æ³•å€¼ç®€åŒ–ä»¥ä¸Šé—®é¢˜ï¼š // æ–¹æ³•å€¼: ç»‘å®šåˆ°äº† f å¯¹è±¡ // func Close() error var Close = f.Close // æ–¹æ³•å€¼: ç»‘å®šåˆ°äº† f å¯¹è±¡ // func Read(offset int64, data []byte) int var Read = f.Read // æ–‡ä»¶å¤„ç† Read(0, data) Close() Goè¯­è¨€ä½¿ç”¨ç»„åˆçš„æ–¹å¼æ”¯æŒç»§æ‰¿ã€‚ä½¿ç”¨ç»“æ„ä½“ä¸­çš„åŒ¿åæˆå‘˜æ¥å®ç°ç»§æ‰¿ã€‚å› æ­¤ç»§æ‰¿æ¥çš„æ–¹æ³•çš„æ¥æ”¶è€…å‚æ•°ä¾ç„¶æ˜¯åŒ¿åæˆå‘˜è‡ªèº«ï¼Œè€Œä¸æ˜¯å½“å‰å˜é‡ã€‚ ä¼ ç»Ÿç»§æ‰¿ï¼Œå­ç±»çš„æ–¹æ³•æ˜¯è¿è¡Œæ—¶åŠ¨æ€ç»‘å®šåˆ°å¯¹è±¡çš„ï¼Œthis å¯èƒ½ä¸æ˜¯é›†ç±»ç±»å‹å¯¹åº”çš„å¯¹è±¡ï¼Œä¸ç¡®å®šæ€§ã€‚ Goè¯­è¨€ç»§æ‰¿ï¼Œå­ç±»æ–¹æ³•æ˜¯ç¼–è¯‘æ—¶é™æ€ç»‘å®šçš„ï¼Œthis å°±æ˜¯å®ç°è¯¥æ–¹æ³•çš„ç±»å‹å¯¹è±¡ï¼Œç¡®å®šæ€§ã€‚ ","date":"2022-09-09","objectID":"/posts/golang/function-method-interface-of-golang/:2:0","series":null,"tags":["golang"],"title":"Function-Method-Interface-of-Golang","uri":"/posts/golang/function-method-interface-of-golang/#æ–¹æ³•"},{"categories":["æŠ€æœ¯"],"content":" æ¥å£Go è¯­è¨€çš„æ¥å£æ»¡è¶³éšå¼çš„é¸­å­ç±»å‹ã€‚å³ï¼šèµ°è·¯çœ‹ç€åƒé¸­å­ï¼Œå«èµ·æ¥ä¹Ÿåƒé¸­å­çš„ï¼Œå°±å¯ä»¥å½“ä½œé¸­å­ã€‚goè¯­è¨€ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡åªè¦çœ‹èµ·æ¥åƒæ˜¯æŸä¸ªæ¥å£çš„å®ç°ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠä»–ä½œä¸ºè¯¥æ¥å£ä½¿ç”¨ã€‚ è¿™ç§è®¾è®¡å¯ä»¥è®©ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„æ¥å£ç±»å‹æ»¡è¶³å·²ç»å­˜åœ¨çš„å…·ä½“ç±»å‹å´ä¸ç”¨å»ç ´åè¿™äº›ç±»å‹åŸæœ‰çš„å®šä¹‰ã€‚ Goè¯­è¨€çš„æ¥å£ç±»å‹æ˜¯å»¶è¿Ÿç»‘å®šçš„ï¼Œå¯ä»¥å®ç°è™šå‡½æ•°çš„å¤šæ€åŠŸèƒ½ã€‚ go // fmt.Fprintf ç­¾å func Fprintf(w io.Writer, format string, args ...interface{}) (int, error) // io.Writer æ˜¯ç”¨äºè¾“å‡ºçš„æ¥å£ type io.Writer interface { Write(p []byte) (n int, err error) } æˆ‘ä»¬å¯ä»¥å®šåˆ¶è‡ªå·±çš„è¾“å‡ºå¯¹è±¡ï¼š go type UpperWrite struct{ io.Writer } func (p *UppperWriter) Write(data []byte) (n int, err error){ return p.Writer.Write(bytes.ToUpper(data)) } å¦‚æœæ»¡è¶³ fmt.Stringer æ¥å£ï¼Œåˆ™é»˜è®¤ä½¿ç”¨å¯¹è±¡çš„ String æ–¹æ³•çš„è¿”å›ç»“æ„æ‰“å°ï¼š go type UpperString string func (s UpperString) String() string { return strings.ToUpper(string(s)) } å¯¹äºåŸºç¡€ç±»å‹ï¼ˆéæ¥å£ï¼‰ï¼Œgo ä¸æ”¯æŒéšå¼çš„ç±»å‹è½¬æ¢ï¼Œä¾‹å¦‚æˆ‘ä»¬æ— æ³•å°†ä¸€ä¸ª int ç±»å‹ç›´æ¥èµ‹å€¼ç»™ int64ç±»å‹çš„å˜é‡ã€‚ å¯¹äºæ¥å£ç±»å‹ï¼Œå¯ä»¥éšå¼è½¬æ¢ï¼Œå¯¹è±¡å’Œæ¥å£ï¼Œæ¥å£å’Œæ¥å£éƒ½å¯ä»¥è½¬æ¢ï¼š go var ( a io.ReadCloser = (*os.File)(f) // éšå¼è½¬æ¢, *os.File æ»¡è¶³ io.ReadCloser æ¥å£ b io.Reader = a // éšå¼è½¬æ¢, io.ReadCloser æ»¡è¶³ io.Reader æ¥å£ c io.Closer = a // éšå¼è½¬æ¢, io.ReadCloser æ»¡è¶³ io.Closer æ¥å£ d io.Reader = c.(io.Reader) // æ˜¾å¼è½¬æ¢, io.Closer ä¸æ»¡è¶³ io.Reader æ¥å£ ) é˜²æ­¢è¿™ç§å¯¹è±¡å’Œæ¥å£å¤ªçµæ´»çš„æ–¹å¼ï¼š åŒ…å«ç‰¹æ®Šæ–¹æ³•ï¼Œæ¥åŒºåˆ†æ¥å£ã€‚(å›å­åå®š) go type runtime.Error interface { error // RuntimeError æ–¹æ³• ç”¨äºé¿å…å…¶å®ƒç±»å‹æ— æ„ä¸­é€‚é…äº†è¯¥æ¥å£ RuntimeError() } type proto.Message interface { Reset() String() string // ç”¨äºé¿å…å…¶å®ƒç±»å‹æ— æ„ä¸­é€‚é…äº†è¯¥æ¥å£ ProtoMessage() } è¿™æ˜¯å¯ä»¥ä¼ªé€ çš„ã€‚ æ›´ä¸¥æ ¼ä¸€ç‚¹ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªç§æœ‰æ–¹æ³•ã€‚ go type testing.TB interface { Error(args ...interface{}) Errorf(format string, args ...interface{}) ... // A private method to prevent users implementing the // interface and so future additions to it will not // violate Go 1 compatibility. private() } è¿™æ˜¯æœ‰ä»£ä»·çš„ï¼š è¿™ä¸ªæ¥å£åªèƒ½å†…éƒ¨ä½¿ç”¨ã€‚ è¿™ç§é˜²æŠ¤ä¹Ÿä¸æ˜¯ç»å¯¹çš„ã€‚ï¼ˆå¯ä»¥åœ¨ç»“æ„ä½“ä¸­åµŒå…¥åŒ¿åç±»å‹çš„æˆå‘˜æ¥ç»•è¿‡ï¼‰ã€‚ æˆ‘ä»¬åœ¨è‡ªå·±çš„ TB ç»“æ„ä½“ç±»å‹ä¸­é‡æ–°å®ç°äº† Fatal æ–¹æ³•ï¼Œç„¶åé€šè¿‡å°†å¯¹è±¡éšå¼è½¬æ¢ä¸º testing.TB æ¥å£ç±»å‹ï¼ˆå› ä¸ºå†…åµŒäº†åŒ¿åçš„ testing.TB å¯¹è±¡ï¼Œå› æ­¤æ˜¯æ»¡è¶³ testing.TB æ¥å£çš„ï¼‰ï¼Œç„¶åé€šè¿‡ testing.TB æ¥å£æ¥è°ƒç”¨æˆ‘ä»¬è‡ªå·±çš„ Fatal æ–¹æ³•ã€‚ go package main import ( \"fmt\" \"testing\" ) type TB struct { testing.TB } func (p *TB) Fatal(args ...interface{}) { fmt.Println(\"TB.Fatal disabled!\") } func main() { var tb testing.TB = new(TB) tb.Fatal(\"Hello, playground\") } è¿™ç§é€šè¿‡åµŒå…¥åŒ¿åæ¥å£æˆ–åµŒå…¥åŒ¿åæŒ‡é’ˆå¯¹è±¡æ¥å®ç°ç»§æ‰¿çš„åšæ³•å…¶å®æ˜¯ä¸€ç§çº¯è™šç»§æ‰¿ï¼Œæˆ‘ä»¬ç»§æ‰¿çš„åªæ˜¯æ¥å£æŒ‡å®šçš„è§„èŒƒï¼ŒçœŸæ­£çš„å®ç°åœ¨è¿è¡Œçš„æ—¶å€™æ‰è¢«æ³¨å…¥ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªgRPCçš„æ’ä»¶ï¼š go type grpcPlugin struct { *generator.Generator } func (p *grpcPlugin) Name() string { return \"grpc\" } func (p *grpcPlugin) Init(g *generator.Generator) { p.Generator = g } func (p *grpcPlugin) GenerateImports(file *generator.FileDescriptor) { if len(file.Service) == 0 { return } p.P(`import \"google.golang.org/grpc\"`) // ... } æ„å»ºçš„å¯¹è±¡å¿…é¡»æ»¡è¶³ https://github.com/golang/protobuf/blob/master/protoc-gen-go/generator/generator.go ä¸­ Plugin æ¥å£ã€‚ ä¹Ÿå°±æ˜¯è¯´ grpcPlugin ç±»å‹çš„ GenerateImports æ–¹æ³•ä¸­ä½¿ç”¨çš„ p.P(...) å‡½æ•°å´æ˜¯é€šè¿‡ Init å‡½æ•°æ³¨å…¥çš„ generator.Generator å¯¹è±¡å®ç°ï¼ˆå› ä¸ºgrpcPlugin ç±»å‹ä¸­æ¯”æ²¡æœ‰ P æ–¹æ³•ï¼Œä¸”åªè¦ä¸€ä¸ªæˆå‘˜ï¼‰ã€‚ https://chai2010.cn/advanced-go-programming-book/ch1-basic/ch1-04-func-method-interface.html ","date":"2022-09-09","objectID":"/posts/golang/function-method-interface-of-golang/:3:0","series":null,"tags":["golang"],"title":"Function-Method-Interface-of-Golang","uri":"/posts/golang/function-method-interface-of-golang/#æ¥å£"},{"categories":["æŠ€æœ¯"],"content":" æ•°ç»„","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:1:0","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#æ•°ç»„"},{"categories":["æŠ€æœ¯"],"content":" å®šä¹‰æ–¹å¼ go var a[3] int var b = [...]int{1, 2, 3} var c = [...]int{2:3, 1:2} // é•¿åº¦ä¸º3 {0,2,3} // æ··åˆä»¥ä¸Šæ–¹å¼ var d = [...]int{1,2,4:5,6} // {1, 2, 0, 0, 5, 6} Go è¯­è¨€ä¸­æ•°ç»„æ˜¯å€¼è¯­ä¹‰ã€‚ä¸€ä¸ªæ•°ç»„å˜é‡å³è¡¨ç¤ºæ•´ä¸ªæ•°ç»„ï¼Œå®ƒå¹¶ä¸æ˜¯éšå¼çš„æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼ˆæ¯”å¦‚ C è¯­è¨€çš„æ•°ç»„ï¼‰ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„å€¼ã€‚å½“ä¸€ä¸ªæ•°ç»„å˜é‡è¢«èµ‹å€¼æˆ–è€…è¢«ä¼ é€’çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ã€‚å¦‚æœæ•°ç»„è¾ƒå¤§çš„è¯ï¼Œæ•°ç»„çš„èµ‹å€¼ä¹Ÿä¼šæœ‰è¾ƒå¤§çš„å¼€é”€ã€‚ä¸ºäº†é¿å…å¤åˆ¶æ•°ç»„å¸¦æ¥çš„å¼€é”€ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œä½†æ˜¯æ•°ç»„æŒ‡é’ˆå¹¶ä¸æ˜¯æ•°ç»„ã€‚ ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:1:1","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#å®šä¹‰æ–¹å¼"},{"categories":["æŠ€æœ¯"],"content":" å¾ªç¯ go // æ•°ç»„å…ƒç´ å¤§å°ä¸º 0 ï¼Œ æ‰€ä»¥æ²¡æœ‰å†…å­˜å ç”¨ var times [5][0]int for range times { fmt.Println(\"aaa\") } ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:1:2","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#å¾ªç¯"},{"categories":["æŠ€æœ¯"],"content":" å¤šç§æ•°ç»„ go // å‡½æ•°æ•°ç»„ å›¾åƒè§£ç å™¨ var decoder1 [2]func(io.Reader) (image.Image, error) var decoder2 = [...]func (io.Reader) (image.Image,error) { png.Decode, jpeg.Decode, } // æ¥å£æ•°ç»„ var unknown1 [2]interface {} var unknown2 = [...]interface {}{ 123 , \"ä½ å¥½\" } // ç®¡é“æ•°ç»„ var chanlist = [2]chan int{} ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:1:3","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#å¤šç§æ•°ç»„"},{"categories":["æŠ€æœ¯"],"content":" ç©ºæ•°ç»„é•¿åº¦ä¸º 0 çš„æ•°ç»„éƒ¨å ç”¨ç©ºé—´ã€‚å¯ç”¨äºå¼ºè°ƒæŸç§ç‰¹æœ‰çš„ç±»å‹ã€‚å¦‚ç®¡é“çš„åŒæ­¥æ“ä½œ go c1 := make(chan [0]int) go func() { fmt.Println(\"c1\") c1 \u003c- [0]int{} }() \u003c-c1 æˆ‘ä»¬å¹¶ä¸å…³å¿ƒç®¡é“ä¸­ä¼ è¾“æ•°æ®çš„çœŸå®ç±»å‹ï¼Œå…¶ä¸­ç®¡é“æ¥æ”¶å’Œå‘é€æ“ä½œåªæ˜¯ç”¨äºæ¶ˆæ¯çš„åŒæ­¥ã€‚å¯¹äºè¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬ç”¨ç©ºæ•°ç»„æ¥ä½œä¸ºç®¡é“ç±»å‹å¯ä»¥å‡å°‘ç®¡é“å…ƒç´ èµ‹å€¼æ—¶çš„å¼€é”€ã€‚å½“ç„¶ä¸€èˆ¬æ›´å€¾å‘äºç”¨æ— ç±»å‹çš„åŒ¿åç»“æ„ä½“ä»£æ›¿ï¼š go c2 := make(chan struct{}) go func(){ fmt.Println(\"c2\") c2 \u003c- struct{}{} // struct{} éƒ¨åˆ†æ˜¯ç±»å‹ï¼Œ {} è¡¨ç¤ºå¯¹åº”ç»“æ„ä½“çš„å€¼ }() \u003c-c2 ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:1:4","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#ç©ºæ•°ç»„"},{"categories":["æŠ€æœ¯"],"content":" å­—ç¬¦ä¸²å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªä¸å¯æ”¹å˜çš„å­—èŠ‚åºåˆ—ã€‚go æºç è¦æ±‚ UTF8 ç¼–ç ã€‚æ‰€ä»¥æºç ä¸­çš„å­—ç¬¦ä¸²å­—é¢é‡é€šå¸¸è¢«è§£é‡Šä¸º UTF8ç¼–ç çš„ unicode rune åºåˆ—ã€‚ åº•å±‚ç»“æ„: go type StringHeader struct { Data uintptr Len int } ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:2:0","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#å­—ç¬¦ä¸²"},{"categories":["æŠ€æœ¯"],"content":" å­—ç¬¦ä¸²æ‹¼æ¥ go s1:=\"hello\" s2:=\"world\" s3 = s1+s2 å› ä¸º å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªä¸å¯æ”¹å˜çš„å­—èŠ‚åºåˆ—ï¼Œæ‰€ä»¥ä»¥ä¸Šä»£ç æ€§èƒ½è¾ƒå·®ï¼Œæ¨èä½¿ç”¨ bytes.Buffer æˆ– strings.Builderã€‚ go var sb strings.Builder sb.Write([]byte(\"hello world\")) sb.WriteByte('!') sb.WriteRune(rune(\"~\")) sb.WriteString(\"la la la ...\") sb.Strring() // è·å–æœ€ç»ˆçš„å­—ç¬¦ä¸² ï¼š \"hello world!~la la la ...\" strings.Builder å†…éƒ¨ä½¿ç”¨ slice å®ç°æ¥ä¿å­˜å’Œç®¡ç†å†…å®¹ã€‚é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆæ¥æŒ‡å‘å®é™…ä¿å­˜çš„å†…å®¹ï¼ˆè§ä¸‹èŠ‚åˆ‡ç‰‡å†…éƒ¨æ•°æ®ç»“æ„ï¼‰ã€‚å› æ­¤ï¼Œå¤åˆ¶æ—¶ï¼Œå°±å¤åˆ¶äº† slice çš„æŒ‡é’ˆï¼Œå‡ºç°ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥ strings.Builder ä¸å…è®¸å¤åˆ¶ã€‚ go var b1 strings.Builder b1.WriteString(\"ABC\") b2 := b1 b2.WriteString(\"DEF\") // illegal use of non-zero Builder copied by value ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:2:1","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#å­—ç¬¦ä¸²æ‹¼æ¥"},{"categories":["æŠ€æœ¯"],"content":" åˆ‡ç‰‡åˆ‡ç‰‡æ˜¯ä¸€ç§ç®€åŒ–ç‰ˆçš„åŠ¨æ€æ•°ç»„ã€‚ go x := []int{2, 3, 5, 7, 11} y := x[1:3] // output: [2 3 5 7 11] len(x): 5 cap(x): 5 fmt.Println(x, \" len(x):\", len(x), \" cap(x):\", cap(x)) // output: [3 5] len(y): 2 cap(y): 4 fmt.Println(y, \" len(y):\", len(y), \" cap(y):\", cap(y)) ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:3:0","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#åˆ‡ç‰‡"},{"categories":["æŠ€æœ¯"],"content":" å®šä¹‰æ–¹å¼ go var ( a []int // nil åˆ‡ç‰‡, å’Œ nil ç›¸ç­‰, ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªä¸å­˜åœ¨çš„åˆ‡ç‰‡ b = []int{} // ç©ºåˆ‡ç‰‡, å’Œ nil ä¸ç›¸ç­‰, ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç©ºçš„é›†åˆ c = []int{1, 2, 3} // æœ‰ 3 ä¸ªå…ƒç´ çš„åˆ‡ç‰‡, len å’Œ cap éƒ½ä¸º 3 d = c[:2] // æœ‰ 2 ä¸ªå…ƒç´ çš„åˆ‡ç‰‡, len ä¸º 2, cap ä¸º 3 , [0,2) e = c[0:2:cap(c)] // æœ‰ 2 ä¸ªå…ƒç´ çš„åˆ‡ç‰‡, len ä¸º 2, cap ä¸º 3 , [0,2) ä¸”æŒ‡å®š cap ä¸º c çš„ cap f = c[:0] // æœ‰ 0 ä¸ªå…ƒç´ çš„åˆ‡ç‰‡, len ä¸º 0, cap ä¸º 3 g = make([]int, 3) // æœ‰ 3 ä¸ªå…ƒç´ çš„åˆ‡ç‰‡, len å’Œ cap éƒ½ä¸º 3 h = make([]int, 2, 3) // æœ‰ 2 ä¸ªå…ƒç´ çš„åˆ‡ç‰‡, len ä¸º 2, cap ä¸º 3 i = make([]int, 0, 3) // æœ‰ 0 ä¸ªå…ƒç´ çš„åˆ‡ç‰‡, len ä¸º 0, cap ä¸º 3 ) åˆ‡ç‰‡çš„å†…éƒ¨ç»“æ„ go type SliceHeader struct { Data uintptr //å¼•ç”¨æ•°ç»„æŒ‡é’ˆåœ°å€ Len int // åˆ‡ç‰‡çš„ç›®å‰ä½¿ç”¨é•¿åº¦ Cap int // åˆ‡ç‰‡çš„å®¹é‡ } ps ï¼š nil åˆ‡ç‰‡å’Œç©ºåˆ‡ç‰‡çš„æœ¬è´¨åŒºåˆ«åœ¨äºï¼Œnil åˆ‡ç‰‡çš„ data æŒ‡å‘åœ°å€ä¸º 0 åœ°å€ï¼ˆå³ä¸åˆ†é…åœ°å€ç©ºé—´ï¼‰ï¼› ç©ºåˆ‡ç‰‡å…±äº«ç›¸åŒçš„ data pointerï¼ŒæŒ‡å‘åŒä¸€ä¸ªå¤§å°ä¸º 0 å†…å­˜åœ°å€ã€‚stackoverflow ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:3:1","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#å®šä¹‰æ–¹å¼-1"},{"categories":["æŠ€æœ¯"],"content":" æ·»åŠ åˆ‡ç‰‡å…ƒç´  go var a []int a = append(a, 1) // è¿½åŠ  1 ä¸ªå…ƒç´  a = append(a, 1, 2, 3) // è¿½åŠ å¤šä¸ªå…ƒç´ , æ‰‹å†™è§£åŒ…æ–¹å¼ a = append(a, []int{1,2,3}...) // è¿½åŠ  1 ä¸ªåˆ‡ç‰‡, åˆ‡ç‰‡éœ€è¦è§£åŒ… å½“å®¹é‡ä¸è¶³æ—¶ï¼Œappend ä¼šé‡æ–°åˆ†é…å†…å­˜ï¼Œå¯¼è‡´å·¨å¤§çš„å†…å­˜åˆ†é…å’Œå¤åˆ¶æ•°æ®å¼€é”€ã€‚ å¤´éƒ¨è¿½åŠ å…ƒç´  go var a = []int{1,2,3} a = append([]int{0}, a...) a = append([]int{-3,-2,-1}, a...) ä¸­é—´æ’å…¥å…ƒç´  go var a []int a = append(a[:i], append([]int{x}, a[i:]...)...) // åœ¨ç¬¬ i ä¸ªä½ç½®æ’å…¥ x a = append(a[:i], append([]int{1,2,3}, a[i:]...)...) // åœ¨ç¬¬ i ä¸ªä½ç½®æ’å…¥åˆ‡ç‰‡ // ä»¥ä¸Šä¼šåˆ›å»ºä¸­é—´çš„ä¸´æ—¶åˆ‡ç‰‡ï¼Œä½¿ç”¨ copy å’Œ append ä¼šé¿å… a = append(a, 0) // åˆ‡ç‰‡æ‰©å±• 1 ä¸ªç©ºé—´ copy(a[i+1:], a[i:]) // a[i:] å‘åç§»åŠ¨ 1 ä¸ªä½ç½® a[i] = x // è®¾ç½®æ–°æ·»åŠ çš„å…ƒç´  a = append(a, x...) // ä¸º x åˆ‡ç‰‡æ‰©å±•è¶³å¤Ÿçš„ç©ºé—´ copy(a[i+len(x):], a[i:]) // a[i:] å‘åç§»åŠ¨ len(x) ä¸ªä½ç½® copy(a[i:], x) // å¤åˆ¶æ–°æ·»åŠ çš„åˆ‡ç‰‡ ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:3:2","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#æ·»åŠ åˆ‡ç‰‡å…ƒç´ "},{"categories":["æŠ€æœ¯"],"content":" åˆ é™¤åˆ‡ç‰‡å…ƒç´ å°¾éƒ¨åˆ é™¤ go a = []int{1,2,3} a = a[:len(a)-1] // åˆ é™¤å°¾éƒ¨ä¸€ä¸ªå…ƒç´  a = a[:len(a)-n] // åˆ é™¤å°¾éƒ¨nä¸ªå…ƒç´  åˆ é™¤å¼€å¤´ go a = []int{1, 2, 3} a = a[1:] // åˆ é™¤å¼€å¤´ 1 ä¸ªå…ƒç´  a = a[N:] // åˆ é™¤å¼€å¤´ N ä¸ªå…ƒç´  a = []int{1, 2, 3} a = append(a[:0], a[1:]...) // åˆ é™¤å¼€å¤´ 1 ä¸ªå…ƒç´  a = append(a[:0], a[N:]...) // åˆ é™¤å¼€å¤´ N ä¸ªå…ƒç´  a = []int{1, 2, 3} a = a[:copy(a, a[1:])] // åˆ é™¤å¼€å¤´ 1 ä¸ªå…ƒç´  a = a[:copy(a, a[N:])] // åˆ é™¤å¼€å¤´ N ä¸ªå…ƒç´  åˆ é™¤ä¸­é—´ go a = []int{1, 2, 3, ...} a = append(a[:i], a[i+1:]...) // åˆ é™¤ä¸­é—´ 1 ä¸ªå…ƒç´  a = append(a[:i], a[i+N:]...) // åˆ é™¤ä¸­é—´ N ä¸ªå…ƒç´  a = a[:i+copy(a[i:], a[i+1:])] // åˆ é™¤ä¸­é—´ 1 ä¸ªå…ƒç´  a = a[:i+copy(a[i:], a[i+N:])] // åˆ é™¤ä¸­é—´ N ä¸ªå…ƒç´  ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:3:3","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#åˆ é™¤åˆ‡ç‰‡å…ƒç´ "},{"categories":["æŠ€æœ¯"],"content":" åˆ‡ç‰‡å†…å­˜æŠ€å·§len ä¸º 0 ä¸” cap ä¸ä¸º 0 çš„åˆ‡ç‰‡éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é™ä½å†…å­˜åˆ†é…çš„æ¬¡æ•°ã€‚ go func TrimSpace(s []byte) []byte { b := s[:0] for _, x := range s { if x != ' ' { b = append(b, x) } } return b } func Filter(s []byte, fn func(x byte) bool) []byte { b := s[:0] for _, x := range s { if !fn(x) { b = append(b, x) } } return b } ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:3:4","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#åˆ‡ç‰‡å†…å­˜æŠ€å·§"},{"categories":["æŠ€æœ¯"],"content":" é¿å…å†…å­˜æ³„æ¼åˆ‡ç‰‡æ“ä½œå¹¶ä¸ä¼šå¤åˆ¶åº•å±‚çš„æ•°æ®ã€‚åº•å±‚çš„æ•°ç»„ä¼šè¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°å®ƒä¸å†è¢«å¼•ç”¨ã€‚ä½†æ˜¯æœ‰æ—¶å€™å¯èƒ½ä¼šå› ä¸ºä¸€ä¸ªå°çš„å†…å­˜å¼•ç”¨è€Œå¯¼è‡´åº•å±‚æ•´ä¸ªæ•°ç»„å¤„äºè¢«ä½¿ç”¨çš„çŠ¶æ€ï¼Œè¿™ä¼šå»¶è¿Ÿè‡ªåŠ¨å†…å­˜å›æ”¶å™¨å¯¹åº•å±‚æ•°ç»„çš„å›æ”¶ã€‚ ä¾‹å¦‚ï¼ŒFindPhoneNumber å‡½æ•°åŠ è½½æ•´ä¸ªæ–‡ä»¶åˆ°å†…å­˜ï¼Œç„¶åæœç´¢ç¬¬ä¸€ä¸ªå‡ºç°çš„ç”µè¯å·ç ï¼Œæœ€åç»“æœä»¥åˆ‡ç‰‡æ–¹å¼è¿”å›ã€‚ go func FindPhoneNumber(filename string) []byte { b, _ := ioutil.ReadFile(filename) return regexp.MustCompile(\"[0-9]+\").Find(b) } è¿™æ®µä»£ç è¿”å›çš„ []byte æŒ‡å‘ä¿å­˜æ•´ä¸ªæ–‡ä»¶çš„æ•°ç»„ã€‚å› ä¸ºåˆ‡ç‰‡å¼•ç”¨äº†æ•´ä¸ªåŸå§‹æ•°ç»„ï¼Œå¯¼è‡´è‡ªåŠ¨åƒåœ¾å›æ”¶å™¨ä¸èƒ½åŠæ—¶é‡Šæ”¾åº•å±‚æ•°ç»„çš„ç©ºé—´ã€‚ä¸€ä¸ªå°çš„éœ€æ±‚å¯èƒ½å¯¼è‡´éœ€è¦é•¿æ—¶é—´ä¿å­˜æ•´ä¸ªæ–‡ä»¶æ•°æ®ã€‚è¿™è™½ç„¶è¿™å¹¶ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„å†…å­˜æ³„æ¼ï¼Œä½†æ˜¯å¯èƒ½ä¼šæ‹–æ…¢ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ã€‚ è¦ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†æ„Ÿå…´è¶£çš„æ•°æ®å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ä¸­ï¼ˆæ•°æ®çš„ä¼ å€¼æ˜¯ Go è¯­è¨€ç¼–ç¨‹çš„ä¸€ä¸ªå“²å­¦ï¼Œè™½ç„¶ä¼ å€¼æœ‰ä¸€å®šçš„ä»£ä»·ï¼Œä½†æ˜¯æ¢å–çš„å¥½å¤„æ˜¯åˆ‡æ–­äº†å¯¹åŸå§‹æ•°æ®çš„ä¾èµ–ï¼‰ï¼š go func FindPhoneNumber(filename string) []byte { b, _ := ioutil.ReadFile(filename) b = regexp.MustCompile(\"[0-9]+\").Find(b) return append([]byte{}, b...) } æŒ‡å‘æŒ‡é’ˆçš„åˆ‡ç‰‡ä¹Ÿå¯èƒ½é‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼š go var a []*int{ ... } a = a[:len(a)-1] // è¢«åˆ é™¤çš„æœ€åä¸€ä¸ªå…ƒç´ ä¾ç„¶è¢«å¼•ç”¨, å¯èƒ½å¯¼è‡´ GC æ“ä½œè¢«é˜»ç¢ var a []*int{ ... } a[len(a)-1] = nil // GC å›æ”¶æœ€åä¸€ä¸ªå…ƒç´ å†…å­˜ a = a[:len(a)-1] // ä»åˆ‡ç‰‡åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´  ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:3:5","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#é¿å…å†…å­˜æ³„æ¼"},{"categories":["æŠ€æœ¯"],"content":" å‚è€ƒæ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼Œåˆ‡ç‰‡ strings.Builder çš„ 7ä¸ªè¦ç‚¹ ","date":"2022-09-09","objectID":"/posts/golang/array-string-slice-of-golang/:4:0","series":null,"tags":["golang"],"title":"Golang ä¸­çš„æ•°ç»„å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡","uri":"/posts/golang/array-string-slice-of-golang/#å‚è€ƒ"},{"categories":["ç”Ÿæ´»"],"content":" å¥½å¥‡å¿ƒæ˜¯ä»€ä¹ˆå¥½å¥‡å¿ƒæ˜¯ ã€æˆ‘ä¸çŸ¥é“ã€‘ï¼šæˆ‘ä¸çŸ¥é“æ¥ä¸‹æ¥ä¼šç»å†ä»€ä¹ˆï¼Œä½†æˆ‘æ„¿æ„å°è¯•ã€‚ å¥½å¥‡å¿ƒæ˜¯ã€æˆ‘å…è®¸ã€‘ï¼šå°è¯•çš„è¿‡ç¨‹ä¸­ï¼Œä¸€äº›æ„å¤–çŠ¶å†µæ˜¯æ­£å¸¸ç°è±¡ï¼Œæˆ‘å…è®¸è‡ªå·±åšä¸å¥½ã€‚ å¥½å¥‡å¿ƒæ˜¯ã€æˆ‘ä¸ç€æ€¥ã€‘ï¼šæˆ‘ä¸ç€æ€¥ç«‹åˆ»å¾—å‡ºç»“è®ºï¼Œè€Œæ˜¯å¤šè§‚å¯Ÿä¸€é˜µå­å†è¯´ã€‚ çœŸæ­£çš„å¥½å¥‡å¿ƒï¼Œæ„å‘³ç€ ã€å¯¹æ–°ç»éªŒçš„å¼€æ”¾ã€‘ã€‚ æš‚åœå®éªŒå®¤ ","date":"2022-06-13","objectID":"/posts/mess/%E5%A5%BD%E5%A5%87%E5%BF%83%E6%98%AF%E4%BB%80%E4%B9%88/:1:0","series":null,"tags":["æ—¥å¸¸","äººé—´æ¸…é†’"],"title":"å¥½å¥‡å¿ƒæ˜¯ä»€ä¹ˆ","uri":"/posts/mess/%E5%A5%BD%E5%A5%87%E5%BF%83%E6%98%AF%E4%BB%80%E4%B9%88/#å¥½å¥‡å¿ƒæ˜¯ä»€ä¹ˆ"},{"categories":["æŠ€æœ¯"],"content":" scp å¤šä¸ªä¸»æœºå¹¶å¡«å†™å¯†ç  shell #!/usr/bin/expect set filename [lindex $argv 0] set dir_path [lindex $argv 1] set IP_NOS_1 \"192.168.122.11\" set IP_NOS_2 \"192.168.122.12\" set IP_NOS_3 \"192.168.122.13\" set IP_NOS_4 \"192.168.122.14\" set IP_NOS_5 \"192.168.122.15\" set username \"root\" set passwd \"root\" set timeout 200 if { $argc!=2 } { puts \"WARNING ! srcipt needs two parameter !\" puts \" Usage: (parameter 1: filename) filename you want to transfer\" puts \" Usage: (parameter 2: path) path you want to save to where.\" puts \"this scripts will cp file into 5 kvm!\" exit 0 } for {set i 1} {$i \u003c 6} {incr i} { switch $i { 1 {set ip $IP_NOS_1} 3 {set ip $IP_NOS_3} 4 {set ip $IP_NOS_4} 5 {set ip $IP_NOS_5} } puts \"#---------------------copy file to kvm$i------------------#\" spawn scp ./$filename $username@$ip:$dir_path expect { \"(yes/no)?\" { send \"yes\"; exp_continue } \"assword:\" { send \"$passwd\\r\" } } expect \"100%\" sleep 1 } ","date":"2022-06-01","objectID":"/posts/unixs/expect%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC/:1:0","series":null,"tags":["linux","unix","è„šæœ¬"],"title":"expect-è‡ªåŠ¨äº¤äº’è„šæœ¬","uri":"/posts/unixs/expect%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC/#scp-å¤šä¸ªä¸»æœºå¹¶å¡«å†™å¯†ç "},{"categories":["æŠ€æœ¯"],"content":" å‚è€ƒç½‘ç«™expectèŒƒä¾‹ expectå®‰è£… ","date":"2022-06-01","objectID":"/posts/unixs/expect%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC/:2:0","series":null,"tags":["linux","unix","è„šæœ¬"],"title":"expect-è‡ªåŠ¨äº¤äº’è„šæœ¬","uri":"/posts/unixs/expect%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC/#å‚è€ƒç½‘ç«™"},{"categories":["æŠ€æœ¯"],"content":"Unixä¸­ï¼Œæ¯ä¸ªå¯¹è±¡æˆ–è€…ç”±æ–‡ä»¶è¡¨ç¤ºï¼Œæˆ–è€…ç”±è¿›ç¨‹è¡¨ç¤ºã€‚ç®€å•æ¥è®²ï¼Œæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªè¾“å‡ºæºæˆ–è€…è¾“å‡ºç›®æ ‡ã€‚è¿›ç¨‹æ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚æ–‡ä»¶æä¾›å¯¹æ•°æ®çš„è®¿é—®ï¼Œè€Œè¿›ç¨‹ä½¿äº‹ä»¶å‘ç”Ÿã€‚ è¿›ç¨‹æ¥æºä½•å¤„ï¼Ÿç³»ç»Ÿå¦‚ä½•ç®¡ç†è‡ªå·±çš„è¿›ç¨‹ï¼Ÿå¦‚ä½•æ§åˆ¶è‡ªå·±çš„è¿›ç¨‹ï¼Ÿ ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:0:0","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#"},{"categories":["æŠ€æœ¯"],"content":" å†…æ ¸ç®¡ç†è¿›ç¨‹çš„æ–¹å¼ç²¾ç¡®è®²ï¼Œè¿›ç¨‹æ˜¯ä¸€ä¸ªåŠ è½½åˆ°å†…å­˜ä¸­å‡†å¤‡è¿è¡Œçš„ç¨‹åºï¼Œå†åŠ ä¸Šç¨‹åºæ‰€éœ€çš„æ•°æ®ï¼Œä»¥åŠè·Ÿè¸ªç®¡ç†ç¨‹åºçŠ¶æ€æ‰€éœ€è¦çš„å„ç§ä¿¡æ¯ã€‚ æ‰€æœ‰è¿›ç¨‹ç”±å†…æ ¸ç®¡ç†ã€‚ å½“è¿›ç¨‹åˆ›å»ºæ—¶ï¼Œå†…æ ¸èµ‹äºˆå…¶ä¸€ä¸ªå”¯ä¸€æ ‡è¯†å·ï¼Œå«åšè¿›ç¨‹IDæˆ– PID ã€‚ä¸ºäº†è·Ÿè¸ªç®¡ç†ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼Œå†…æ ¸ç»´æŠ¤ä¸€ä¸ªè¿›ç¨‹è¡¨ï¼ˆprocess tableï¼‰ã€‚æŒ‰ç…§ PID ç´¢å¼•ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨è¿›ç¨‹è¡¨ä¸­æœ‰ä¸€ä¸ªæ¡ç›®ã€‚é™¤äº† PID ï¼Œæ¯ä¸ªæ¡ç›®è¿˜åŒ…å«æœ‰æè¿°å’Œç®¡ç†è¿›ç¨‹æ‰€éœ€çš„ä¿¡æ¯ã€‚ è¿›ç¨‹å…±äº«ç³»ç»Ÿçš„èµ„æºï¼šå¤„ç†å™¨ã€å†…å­˜ã€I/Oè®¾å¤‡ã€ç½‘ç»œè¿æ¥ç­‰ã€‚ä¸ºäº†ç®¡ç†è¿™æ ·ä¸€ä¸ªå¤æ‚çš„å·¥ä½œè´Ÿè·ï¼Œå†…æ ¸æä¾›äº†ä¸€ä¸ªå¤æ‚çš„è°ƒåº¦æœåŠ¡ï¼Œå³ è°ƒåº¦å™¨ï¼ˆschedulerï¼‰ã€‚ è°ƒåº¦å™¨ä¸€ç›´ç»´æŠ¤è¿™ä¸€ä¸ªæ‰€æœ‰æ­£åœ¨ç­‰å¾…æ‰§è¡Œçš„è¿›ç¨‹çš„åˆ—è¡¨ã€‚é€šè¿‡å¤æ‚çš„ç®—æ³•ï¼Œè°ƒåº¦å™¨æ¯æ¬¡é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹ï¼Œç»™äºˆè¿™ä¸ªè¿›ç¨‹åœ¨ä¸€ä¸ªçŸ­æš‚çš„äº‹ä»¶é—´éš”ï¼ˆç§°ä¸ºæ—¶é—´ç‰‡ï¼‰ä¸­è¿è¡Œçš„æœºä¼šï¼ˆå¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œè°ƒåº¦å™¨æ¯æ¬¡å¯ä»¥é€‰æ‹©å¤šä¸ªè¿›ç¨‹ï¼‰ã€‚ æ—¶é—´ç‰‡åˆç§° CPUæ—¶é—´ã€‚é€šå¸¸æ˜¯10æ¯«ç§’ï¼ˆåƒåˆ†ä¹‹åç§’ï¼‰çš„ CPU æ—¶é—´ã€‚ä¸€æ—¦æ—¶é—´ç‰‡ç”¨å°½ï¼Œè¯¥è¿›ç¨‹å°±è¿”å›è°ƒåº¦åˆ—è¡¨ï¼Œç”±å†…æ ¸å¯åŠ¨å¦ä¸€ä¸ªè¿›ç¨‹ã€‚ ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:1:0","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#å†…æ ¸ç®¡ç†è¿›ç¨‹çš„æ–¹å¼"},{"categories":["æŠ€æœ¯"],"content":" è¿›ç¨‹åˆ†å‰åˆ°æ­»äº¡è¿›ç¨‹æ˜¯å¦‚ä½•åˆ›å»ºçš„å‘¢ï¼Ÿ å†…æ ¸ä¸ºè¿›ç¨‹æä¾›åŸºæœ¬æœåŠ¡ï¼š å†…å­˜ç®¡ç†ï¼ˆè™šæ‹Ÿå†…å­˜ç®¡ç†ï¼ŒåŒ…æ‹¬åˆ†é¡µï¼‰ è¿›ç¨‹ç®¡ç†ï¼ˆè¿›ç¨‹åˆ›å»ºã€ç»ˆæ­¢ã€è°ƒåº¦ï¼‰ è¿›ç¨‹é—´é€šä¿¡ï¼ˆæœ¬åœ°ã€ç½‘ç»œï¼‰ è¾“å…¥ã€è¾“å‡ºï¼ˆé€šè¿‡è®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œå³ä¸ç‰©ç†è®¾å¤‡å®é™…é€šä¿¡çš„ç¨‹åºï¼‰ æ–‡ä»¶ç®¡ç† å®‰å…¨å’Œè®¿é—®æ§åˆ¶ ç½‘ç»œè®¿é—®ï¼ˆå¦‚ TCPã€IPï¼‰ å½“è¿›ç¨‹éœ€è¦å†…æ ¸æ‰§è¡ŒæœåŠ¡æ—¶ï¼Œå®ƒå°±ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨å‘é€è¯·æ±‚ã€‚æœ€é‡è¦çš„ç³»ç»Ÿè°ƒç”¨å°±æ˜¯é‚£äº›ç”¨æˆ·è¿›ç¨‹æ§åˆ¶å’Œ I/O çš„ç³»ç»Ÿè°ƒç”¨ã€‚ ç³»ç»Ÿè°ƒç”¨ ç›®çš„ fork åˆ›å»ºå½“å‰è¿›ç¨‹çš„ä¸€ä¸ªå‰¯æœ¬ï¼ˆåŸå§‹è¿›ç¨‹ç§°ä¸º çˆ¶è¿›ç¨‹ï¼ˆparent processï¼‰ï¼Œæ–°è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¸€æ¨¡ä¸€æ ·ï¼Œç§°ä¸º å­è¿›ç¨‹ï¼ˆchild processï¼‰ï¼‰ wait ç­‰å¾…å¦ä¸€ä¸ªè¿›ç¨‹ç»“æŸæ‰§è¡Œ exec åœ¨å½“å‰è¿›ç¨‹ä¸­æ‰§è¡Œä¸€ä¸ªæ–°çš„ç¨‹åº exit ç»ˆæ­¢å½“å‰è¿›ç¨‹ kill å‘å¦ä¸€ä¸ªè¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å· open æ‰“å¼€ä¸€ä¸ªç”¨æˆ·è¯»å–æˆ–å†™å…¥çš„æ–‡ä»¶ read ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ® write å‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ® close å…³é—­æ–‡ä»¶ æ˜¾ç¤ºå½“å‰ shell çš„ PIDï¼šecho $$ å‘½ä»¤æœ‰ä¸¤ç§ç±»å‹ï¼šå†…éƒ¨å‘½ä»¤å’Œå¤–éƒ¨å‘½ä»¤ã€‚å†…éƒ¨å‘½ä»¤ç›´æ¥ç”±shellè§£é‡Šä¸åˆ›å»ºæ–°è¿›ç¨‹ã€‚å¤–éƒ¨å‘½ä»¤éœ€è¦shellè¿è¡Œä¸€ä¸ªå•ç‹¬çš„ç¨‹åºã€‚ shell ä½¿ç”¨ fork ç³»ç»Ÿè°ƒç”¨åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„è¿›ç¨‹ã€‚ å­è¿›ç¨‹ä½¿ç”¨ exec ç³»ç»Ÿè°ƒç”¨å°†å®ƒè‡ªèº«ä»è¿è¡Œ shell çš„è¿›ç¨‹å˜æˆè¿è¡Œå¤–éƒ¨ç¨‹åºçš„è¿›ç¨‹ï¼› çˆ¶è¿›ç¨‹ä½¿ç”¨ wait ç³»ç»Ÿè°ƒç”¨æš‚åœï¼Œç›´åˆ°å­è¿›ç¨‹æ‰§è¡Œç»“æŸã€‚ å¤–éƒ¨ç¨‹åºç»“æŸï¼Œå­è¿›ç¨‹ä½¿ç”¨ exit ç³»ç»Ÿè°ƒç”¨åœæ­¢è‡ªèº«ã€‚ç§°ä¸ºè¿›ç¨‹ æ­»äº¡ï¼ˆdieï¼‰ æˆ– ç»ˆæ­¢(terminate)ã€‚æ•…æ„åœæ­¢ä¸€ä¸ªè¿›ç¨‹ï¼Œç§°ä¸º æ€æ­»ï¼ˆkillï¼‰ã€‚ è¿›ç¨‹æ­»äº¡æ—¶ï¼Œè¿›ç¨‹æ‰€ä½¿ç”¨çš„èµ„æºï¼ˆå†…å­˜ã€æ–‡ä»¶ç­‰ï¼‰éƒ½è¢«é‡Šæ”¾ï¼Œä»è€Œå¯ä»¥è¢«å…¶ä»–è¿›ç¨‹ä½¿ç”¨ã€‚ å­è¿›ç¨‹å·²æ­»ä½†ä»ç„¶æ²¡æœ‰è¢«å›æ”¶ç§°ä¸º åƒµè¿›ç¨‹ï¼ˆzombieï¼‰ï¼Œå°½ç®¡åƒµè¿›ç¨‹å·²ç»æ­»äº†ï¼Œè¿›ç¨‹è¡¨é‡Œä»ç„¶ä¿å­˜è¿™è‡ªå·±çš„æ¡ç›®ï¼Œè¿™æ˜¯å› ä¸ºè¯¥æ¡ç›®åŒ…å«ç€ï¼Œæœ€è¿‘æ­»äº¡çš„å­è¿›ç¨‹çš„æ•°æ®ï¼Œè€Œçˆ¶è¿›ç¨‹å¯èƒ½å¯¹è¿™äº›æ•°æ®æ„Ÿå…´è¶£ã€‚ åœ¨ç±»UNIXç³»ç»Ÿä¸­ï¼Œåƒµå°¸è¿›ç¨‹æ˜¯æŒ‡å®Œæˆæ‰§è¡Œï¼ˆé€šè¿‡exitç³»ç»Ÿè°ƒç”¨ï¼Œæˆ–è¿è¡Œæ—¶å‘ç”Ÿè‡´å‘½é”™è¯¯æˆ–æ”¶åˆ°ç»ˆæ­¢ä¿¡å·æ‰€è‡´ï¼‰ï¼Œä½†åœ¨æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹è¡¨ä¸­ä»ç„¶å­˜åœ¨å…¶è¿›ç¨‹æ§åˆ¶å—ï¼Œå¤„äº\"ç»ˆæ­¢çŠ¶æ€â€œçš„è¿›ç¨‹ã€‚è¿™å‘ç”Ÿäºå­è¿›ç¨‹éœ€è¦ä¿ç•™è¡¨é¡¹ä»¥å…è®¸å…¶çˆ¶è¿›ç¨‹è¯»å–å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼šä¸€æ—¦é€€å‡ºæ€é€šè¿‡waitç³»ç»Ÿè°ƒç”¨è¯»å–ï¼Œåƒµå°¸è¿›ç¨‹æ¡ç›®å°±ä»è¿›ç¨‹è¡¨ä¸­åˆ é™¤ï¼Œç§°ä¹‹ä¸º\"å›æ”¶â€ï¼ˆreapedï¼‰ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ç›´æ¥è¢«å…¶çˆ¶è¿›ç¨‹waitå¹¶ç”±ç³»ç»Ÿå›æ”¶ã€‚è¿›ç¨‹é•¿æ—¶é—´ä¿æŒåƒµå°¸çŠ¶æ€ä¸€èˆ¬æ˜¯é”™è¯¯çš„å¹¶å¯¼è‡´èµ„æºæ³„æ¼ã€‚ çˆ¶è¿›ç¨‹ä¸€ç›´åœ¨ç­‰å¾…å­è¿›ç¨‹çš„æ­»äº¡ï¼Œå½“å­è¿›ç¨‹æˆä¸ºåƒµè¿›ç¨‹ä¹‹åï¼Œç«‹å³è¢«å†…æ ¸å”¤é†’ã€‚ ç°åœ¨çˆ¶è¿›ç¨‹æœ‰æœºä¼šæŸ¥çœ‹è¿›ç¨‹è¡¨ä¸­çš„åƒµè¿›ç¨‹æ¡ç›®ï¼Œçœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆç»“æœã€‚ ç„¶åå†…æ ¸å°†è¿›ç¨‹è¡¨ä¸­çš„åƒµè¿›ç¨‹æ¡ç›®ç§»é™¤ã€‚ ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:1:1","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#è¿›ç¨‹åˆ†å‰åˆ°æ­»äº¡"},{"categories":["æŠ€æœ¯"],"content":" å­¤å„¿è¿›ç¨‹å’ŒåºŸå¼ƒè¿›ç¨‹ å½“çˆ¶è¿›ç¨‹åˆ†å‰åï¼Œæ„å¤–æ­»äº¡ ï¼Œåªå‰©ä¸‹å­è¿›ç¨‹ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ â€‹ å­è¿›ç¨‹ç»§ç»­æ‰§è¡Œï¼Œç§°ä¸º å­¤å„¿ è¿›ç¨‹ã€‚å­¤å„¿è¿›ç¨‹å®Œæˆå·¥ä½œæ­»äº¡æ—¶ï¼Œæ²¡æœ‰çˆ¶è¿›ç¨‹è¢«å”¤é†’ï¼Œä»¥åƒµè¿›ç¨‹çš„å½¢å¼å­˜åœ¨ã€‚ â€‹ ç°ä»£æ“ä½œç³»ç»Ÿï¼Œå­¤å„¿è¿›ç¨‹å°†è‡ªåŠ¨è¢« #1 è¿›ç¨‹ ï¼ˆinitè¿›ç¨‹ï¼‰æ”¶å…»ï¼Œå­¤å„¿è¿›ç¨‹æ­»äº¡æ—¶ï¼Œinit è¿›ç¨‹å……å½“çˆ¶è¿›ç¨‹ï¼Œå¿«é€Ÿæ¸…ç†åƒµè¿›ç¨‹ã€‚ çˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹ï¼Œä½†æ˜¯æ²¡æœ‰ç­‰å¾…è¿›ç¨‹æ­»äº¡ï¼Ÿï¼ˆä»…å½“ç¨‹åºæœ‰ bug ï¼Œå…è®¸ç¨‹åºåˆ›å»ºå­è¿›ç¨‹è€Œä¸ç­‰å¾…å­è¿›ç¨‹æ­»äº¡ï¼‰ æƒ…å†µ1. çˆ¶è¿›ç¨‹æ­»äº¡ï¼Œå½¢æˆå­¤å„¿è¿›ç¨‹å¦‚ä¸Šã€‚ æƒ…å†µ2. å­è¿›ç¨‹æ­»äº¡æ—¶ï¼Œå­è¿›ç¨‹å°±ç§°ä¸ºäº†åƒµè¿›ç¨‹ï¼ˆæ²¡æœ‰çˆ¶è¿›ç¨‹è¯»å–å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼Œå¯¼è‡´è¿›ç¨‹è¡¨çš„æ¡ç›®æ— æ³•è¢«å›æ”¶ï¼‰ã€‚ â€‹ å¦‚æœç¨‹åºä»¥å¶ç„¶çš„æ–¹å¼åˆ›å»ºäº†ä¸€ä¸ªåƒµè¿›ç¨‹ï¼Œé‚£ä¹ˆå°†æ²¡æœ‰åŠæ³•æ¸…é™¤è¿™ä¸ªè¿›ç¨‹ï¼ˆkill å¯¹åƒµè¿›ç¨‹æ— æ•ˆï¼‰ï¼Œæ¯•ç«Ÿæ— æ³•æ€æ­»å·²ç»æ­»æ‰çš„ä¸œè¥¿ã€‚ â€‹ ä¸ºäº†æ¸…é™¤æˆä¸ºåƒµè¿›ç¨‹çš„åºŸå¼ƒå­è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ kill ç¨‹åºç»ˆæ­¢çˆ¶è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹æ­»äº¡ï¼Œåƒµè¿›ç¨‹å°±æˆä¸ºå­¤å„¿è¿›ç¨‹ï¼Œä»è€Œè‡ªåŠ¨è¢«initè¿›ç¨‹æ”¶å…»ã€‚é€‚å½“çš„æ—¶å€™ï¼Œinit è¿›ç¨‹å°†å±¥è¡Œç»§çˆ¶çš„èŒè´£ï¼Œæ¸…é™¤åƒµå°¸è¿›ç¨‹çš„å‚ä¸ä¿¡æ¯ã€‚ ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:1:2","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#å­¤å„¿è¿›ç¨‹å’ŒåºŸå¼ƒè¿›ç¨‹"},{"categories":["æŠ€æœ¯"],"content":" åŒºåˆ†çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹fork ä¸¤ä¸ªç›¸åŒçš„è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ã€‚å¦‚æœä¸¤ä¸ªè¿›ç¨‹ç›¸åŒï¼Œé‚£ä¹ˆçˆ¶è¿›ç¨‹æ€ä¹ˆç›´åˆ°å®ƒæ˜¯çˆ¶è¿›ç¨‹ï¼Œå­è¿›ç¨‹å¦‚ä½•çŸ¥é“ä»–æ˜¯å­è¿›ç¨‹å‘¢ï¼Ÿ å½“ fork ç³»ç»Ÿè°ƒç”¨ç»“æŸå®ƒçš„å·¥ä½œæ—¶ï¼Œå®ƒå‘çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹å„ä¼ é€’ä¸€ä¸ªæ•°å€¼ï¼Œè¿™ä¸ªæ•°å€¼æˆä¸ºè¿”å›å€¼ã€‚å­è¿›ç¨‹è¿”å›å€¼æ˜¯ 0ï¼Œçˆ¶è¿›ç¨‹çš„è¿”å›å€¼æ˜¯æ–°åˆ›å»ºçš„è¿›ç¨‹çš„çš„è¿›ç¨‹ IDã€‚ ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:1:3","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#åŒºåˆ†çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹"},{"categories":["æŠ€æœ¯"],"content":" ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼šinitå¦‚æœè¿›ç¨‹æ˜¯ä½¿ç”¨ fork åˆ›å»ºï¼Œé‚£ä¹ˆæ¯ä¸ªå­è¿›ç¨‹å¿…é¡»æœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹ã€‚é‚£ä¹ˆåœ¨æŸä¸ªåœ°æ–¹å¿…ç„¶å­˜åœ¨ç¬¬ä¸€ä¸ªè¿›ç¨‹ã€‚ åœ¨å¼•å¯¼è¿‡ç¨‹çš„æœ«å°¾ï¼Œå†…æ ¸ â€œæ‰‹åŠ¨â€ åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„è¿›ç¨‹ï¼Œä¸æ˜¯é€šè¿‡forkã€‚è¿™ä¸ªè¿›ç¨‹çš„ PID æ˜¯ 0ã€‚ç§°ä¸º ç©ºé—²è¿›ç¨‹ï¼ˆidle processï¼‰ã€‚ åœ¨æ‰§è¡Œäº†ä¸€äº›é‡è¦çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚ åˆå§‹åŒ–å†…æ ¸æ‰€éœ€è¦çš„æ•°æ®ç»“æ„ï¼‰ä¹‹åï¼Œç©ºé—²è¿›ç¨‹è¿›è¡Œåˆ†å‰ï¼Œåˆ›å»º#1å·è¿›ç¨‹ã€‚ç„¶åç©ºé—²è¿›ç¨‹æ‰§è¡Œä¸€ä¸ªéå¸¸ç®€å•çš„ç¨‹åºï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªæ— ç©·çš„å¾ªç¯ï¼Œä¸åšä»»ä½•äº‹æƒ…ï¼ˆå› æ­¤è¿™ä¸ªè¿›ç¨‹è¢«å‘½åä¸ºç©ºé—²è¿›ç¨‹ï¼‰ã€‚è¿™é‡Œçš„æ€æƒ³æ˜¯ï¼Œæ¯å½“æ²¡æœ‰è¿›ç¨‹ç­‰å¾…æ‰§è¡Œæ—¶ï¼Œè°ƒåº¦å™¨å°±è¿è¡Œç©ºé—²è¿›ç¨‹ã€‚ è¿›ç¨‹#1æ‰§è¡Œè®¾ç½®å†…æ ¸ä»¥åŠç»“æŸå¼•å¯¼è¿‡ç¨‹æ‰€éœ€çš„å‰©ä½™æ­¥éª¤ã€‚å› æ­¤ç§°å®ƒä¸º åˆå§‹åŒ–è¿›ç¨‹ï¼ˆinit processï¼‰ï¼Œå…·ä½“è€Œè¨€ï¼Œåˆå§‹åŒ–è¿›ç¨‹ï¼Œæ‰“å¼€ç³»ç»Ÿæ§åˆ¶å°ï¼ŒæŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œè¿è¡ŒåŒ…å«åœ¨æ–‡ä»¶/etc/inittab ä¸­çš„è„šæœ¬ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œinit å¤šæ¬¡forkï¼Œåˆ›å»ºè¿è¡Œç³»ç»Ÿæ‰€éœ€çš„åŸºæœ¬è¿›ç¨‹ï¼ˆå¦‚ï¼Œè¿è¡Œçº§åˆ«è®¾ç½®ï¼‰ï¼Œå¹¶å…è®¸ç”¨æˆ·ç™»å½•ï¼Œåœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œinit æˆä¸ºç³»ç»Ÿä¸­æ‰€æœ‰å…¶ä»–è¿›ç¨‹çš„ç¥–å…ˆã€‚ ä¸ ç©ºé—²è¿›ç¨‹ï¼ˆ#0ï¼‰ è¿›ç¨‹ä¸åŒï¼Œåˆå§‹åŒ–è¿›ç¨‹ ï¼ˆ#1ï¼‰ è¿›ç¨‹æ°¸è¿œä¸ä¼šåœæ­¢ã€‚ä¸”æ˜¯è¿›ç¨‹è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ç›´å­˜åœ¨è¿›ç¨‹è¡¨ä¸­ï¼Œç›´åˆ°ç³»ç»Ÿå…³é—­ã€‚ Linuxç³»ç»Ÿåœ¨å¼•å¯¼æ—¶åŠ è½½Linuxå†…æ ¸åï¼Œä¾¿ç”±Linuxå†…æ ¸åŠ è½½initç¨‹åºï¼Œç”±initç¨‹åºå®Œæˆä½™ä¸‹çš„å¼•å¯¼è¿‡ç¨‹ï¼Œæ¯”å¦‚åŠ è½½æ‰§è¡Œçº§åˆ«ï¼ŒåŠ è½½æœåŠ¡ï¼Œå¯åŠ¨Shell/å›¾å½¢åŒ–ç•Œé¢ç­‰ç­‰ã€‚â€“ ç»´åŸºç™¾ç§‘ ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:1:4","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#ç¬¬ä¸€ä¸ªè¿›ç¨‹init"},{"categories":["æŠ€æœ¯"],"content":" å‰å°è¿›ç¨‹ä¸åå°è¿›ç¨‹åœ¨å‘½ä»¤çš„æœ«å°¾é”®å…¥ä¸€ä¸ª \u0026 å­—ç¬¦ï¼Œå¯ä»¥å°†å‰å°è¿›ç¨‹è½¬æ¢æˆåå°è¿›ç¨‹ (ä¹Ÿå« å¼‚æ­¥è¿›ç¨‹ï¼ˆasynchronous processï¼‰)ã€‚ å‰å°è¿›ç¨‹: shell åœ¨æç¤ºç”¨æˆ·è¾“å…¥æ–°å‘½ä»¤ä¹‹å‰ç­‰å¾…å½“å‰ç¨‹åºç»“æŸï¼Œè¿™æ ·çš„è¿›ç¨‹ã€‚ åå°è¿›ç¨‹ï¼šshell å¯åŠ¨ä¸€ä¸ªç¨‹åºï¼Œä½†åˆè®©è¯¥ç¨‹åºè‡ªå·±è¿è¡Œï¼Œè¿™æ ·çš„è¿›ç¨‹ã€‚ å¤§å¤šæ•°unixç¨‹åºä»æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰è¯»å–è¾“å…¥ï¼Œå°†è¾“å‡ºå†™åˆ°æ ‡å‡†è¾“å‡ºï¼ˆstdoutï¼‰ï¼Œé”™è¯¯æ¶ˆæ¯åˆ™å†™å…¥æ ‡å‡†é”™è¯¯ï¼ˆstderrï¼‰ã€‚stdin ç›¸è¿ é”®ç›˜ï¼Œstdout å’Œ stderr ç›¸è¿æ˜¾ç¤ºå™¨ã€‚æˆ‘ä»¬å¯ä»¥é‡å®šå‘ stdinã€ stdout å’Œ stderrã€‚å¦‚æœç”¨æˆ·æƒ³è¦åœ¨è¿›ç¨‹è‡ªå·±ç»“æŸä¹‹å‰ç»ˆæ­¢è¿›ç¨‹ï¼Œå¯ä»¥æŒ‰ ^C å‘é€ intr ä¿¡å·ï¼Œæˆ–è€… ^\\ å‘é€ quit ä¿¡å·ï¼ŒåŒºåˆ«æ˜¯ quit ä¿¡å·ä¼šç”Ÿæˆä¸€ä¸ªä¾›è°ƒè¯•ä½¿ç”¨çš„ç£èŠ¯è½¬å­˜ã€‚ å¼‚æ­¥è¿›ç¨‹ é»˜è®¤æƒ…å†µä¸‹æ ‡å‡†è¾“å…¥ä¸ç©ºæ–‡ä»¶ dev/null ç›¸è¿ï¼Œä¹Ÿä¸å“åº” intr å’Œ quit ä¿¡å·ã€‚ å½“åå°ç¨‹åºè¯•å›¾ä»æ ‡å‡† I/Oè¯»å–å¹¶å†™åˆ°æ ‡å‡† I/Oæ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ åå°è¿è¡Œçš„ç¨‹åºè¯•å›¾ä» stdin è¯»å–æ•°æ®ï¼Œä½†æ˜¯stdin ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè¿›ç¨‹å°†æ— é™æœŸçš„æš‚åœï¼Œç­‰å¾…è¾“å…¥ã€‚ï¼ˆå¯é€šè¿‡fg å‘½ä»¤ï¼Œå°†å…¶ç§»åŠ¨è‡³å‰å°ï¼‰ åå°è¿è¡Œçš„ç¨‹åºå‘ stdout å’Œ stderr å†™å…¥æ•°æ®æ—¶ï¼Œå°†æ˜¾ç¤ºåœ¨æ˜¾ç¤ºå™¨ä¸Šã€‚ ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:2:0","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#å‰å°è¿›ç¨‹ä¸åå°è¿›ç¨‹"},{"categories":["æŠ€æœ¯"],"content":" ä½œä¸šæ§åˆ¶ä½œä¸šæ§åˆ¶ä½¿å¤šä¸ªè¿›ç¨‹åŒæ—¶è¿è¡Œæˆä¸ºå¯èƒ½ï¼šä¸€ä¸ªè¿›ç¨‹åœ¨å‰å°è¿è¡Œï¼Œå…¶ä»–è¿›ç¨‹åœ¨åå°è¿è¡Œã€‚ ä½œä¸šçš„æœ¬è´¨æ˜¯å°†æ¯æ¡è¾“å…¥çš„å‘½ä»¤è§†ä¸ºä¸€ä¸ªä½œä¸šï¼Œè¯¥ä½œä¸šç”±ä¸€ä¸ªå”¯ä¸€çš„ä½œä¸šå·ï¼ˆjob numberï¼‰æ ‡è¯†ã€‚ ä½œä¸šæ§åˆ¶å‘½ä»¤ jobs æ˜¾ç¤ºä½œä¸šåˆ—è¡¨ ps æ˜¾ç¤ºè¿›ç¨‹åˆ—è¡¨ fg å°†ä½œä¸šç§»åŠ¨è‡³å‰å° bg å°†ä½œä¸šç§»åŠ¨è‡³åå° supend æŒ‚èµ·å½“å‰ shell ^Z æŒ‚èµ·å½“å‰å‰å°ä½œä¸š kill å‘ä½œä¸šå‘é€ä¿¡å·ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œç»ˆæ­¢ä½œä¸š å˜é‡ echo $$ æ˜¾ç¤ºå½“å‰ shell çš„ PID echo $! æ˜¾ç¤ºä¸Šä¸€æ¡ç§»è‡³åå°çš„å‘½ä»¤çš„ PID ç»ˆç«¯è®¾ç½® stty tostop æŒ‚èµ·è¯•å›¾å‘ç»ˆç«¯å†™æ•°æ®çš„åå°ä½œä¸š stty -tostop å…³é—­ tostop shell é€‰é¡¹ï¼šBash ã€Korn shell set -o monitor å…è®¸ä½œä¸šæ§åˆ¶ set +o nomonitor å…³é—­ monitor set -o notify å½“åå°ä½œä¸šç»“æŸæ—¶ï¼Œç«‹å³é€šæŠ¥ set +o nonotify å…³é—­ notify ä½œä¸šå’Œè¿›ç¨‹çš„åŒºåˆ« è¿›ç¨‹æ˜¯æ­£åœ¨æ‰§è¡Œæˆ–è€…å‡†å¤‡æ‰§è¡Œçš„ç¨‹åºï¼Œä½œä¸šæŒ‡è§£é‡Šæ•´ä¸ªå‘½ä»¤è¡Œæ‰€éœ€çš„å…¨éƒ¨è¿›ç¨‹ã€‚ è¿›ç¨‹å†…æ ¸æ§åˆ¶çš„ï¼Œä½œä¸š shell æ§åˆ¶çš„ã€‚ å†…æ ¸ä½¿ç”¨è¿›ç¨‹è¡¨è®°å½•è¿›ç¨‹ï¼Œshell ä½¿ç”¨ **ä½œä¸šè¡¨ï¼ˆjob tableï¼‰**è®°å½•ä½œä¸šã€‚ shell # 1ä¸ªè¿›ç¨‹ï¼›1ä¸ªä½œä¸š date # 4ä¸ªè¿›ç¨‹ï¼›1ä¸ªä½œä¸š who | cut -c 1-8 | sort | uniq -c date; who; uptime; cal 12 2008 ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:2:1","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#ä½œä¸šæ§åˆ¶"},{"categories":["æŠ€æœ¯"],"content":" å‰åå°è¿è¡Œç¤ºä¾‹ ä½œä¸šç»“æŸé€šçŸ¥æ˜¾ç¤ºæ—¶æœº shell # åå°è¿è¡Œä½œä¸š ls \u003e temp \u0026 # æ­¤æ—¶ä¼šè¾“å‡º [ä½œä¸šID] è¿›ç¨‹ID [1] 4003 # å¦‚æœä¸€ä¸ªä½œä¸šç”±å¤šä¸ªç¨‹åºæ„æˆçš„è¯ æ˜¾ç¤ºæœ€åä¸€ä¸ªç¨‹åºçš„è¿›ç¨‹ID who | cut -c 1-8 | sort |uniq -c \u0026 # ä¼šè¾“å‡º 4356 æ˜¯ uniq çš„è¿›ç¨‹ID [2] 4356 # å½“åå°ä½œä¸šç»“æŸæ—¶ï¼Œshell ä¸ä¼šç«‹å³é€šçŸ¥æ‚¨ï¼Œä»¥é˜²æ­¢å¹²æ‰°æ‚¨æ­£åœ¨åšçš„äº‹æƒ…ã€‚ # shell ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°è¦æ˜¾ç¤ºä¸‹ä¸€ä¸ª shell æç¤ºæ—¶æ˜¾ç¤ºï¼Œå¦‚ä¸‹ [1] Done ls \u003e temp # å¼ºåˆ¶ä½œä¸šç»“æŸæ—¶ï¼Œç«‹å³é€šçŸ¥æ‚¨ set -o notify # æ¢å¤é»˜è®¤è®¾ç½® set +o notify # C-Shell å®¶æ— åˆ†åˆ«å¯¹åº” set notify unset notify æŒ‚èµ·ä½œä¸šä»»ä½•æ—¶å€™ä½œä¸šæœ‰ä¸‰ç§çŠ¶æ€ï¼šå‰å°è¿è¡Œï¼›åå°è¿è¡Œï¼›æš‚åœï¼Œç­‰å¾…ä¿¡å·æ¢å¤ã€‚ æš‚åœå‰å°ä½œä¸šï¼Œå¯ä»¥æŒ‰ ^Z é”®(Ctrl-Z)ï¼Œå³å‘é€ susp ä¿¡å·ã€‚æˆ‘ä»¬ç§°å°†è¿›ç¨‹**æŒ‚èµ·ï¼ˆsuspendï¼‰**æˆ–è¿›ç¨‹ åœæ­¢ï¼ˆstopï¼‰ï¼ˆå®é™…æ˜¯ä¸´æ—¶ä¸­æ­¢ï¼Œå¯ä»¥é‡æ–°å¯åŠ¨ï¼‰ã€‚æ°¸ä¹…åœæ­¢å¿…é¡» ^C é”®æˆ– kill å‘½ä»¤ã€‚ æ¢å¤æŒ‚èµ·çš„ç¨‹åºï¼Œä½¿ç”¨ fg å‘½ä»¤ã€‚ shell # egï¼š æŒ‚èµ· vim ç„¶åæŸ¥çœ‹ cal è¯´æ˜ä¹¦ï¼Œç„¶åå†è¿”å› vim vi a.txt ^Z # æŒ‚èµ·vim man cal fg # è¿”å›vim æŒ‚èµ·ä½œä¸šæ—¶ï¼Œè¿›ç¨‹ä¼šæ— é™æœŸåœæ­¢ã€‚å¦‚æœè¯•å›¾æ³¨é”€ç³»ç»Ÿï¼Œshell ä¼šå¾—åˆ°ä¸€æ¡è­¦å‘Šï¼Œä½ å¯ä»¥ fg å°†æŒ‚èµ·çš„ä½œä¸šç§»åŠ¨åˆ°å‰å°ï¼Œå¹¶æ­£ç¡®çš„é€€å‡ºç¨‹åºï¼Œæˆ–è€…ç¬¬äºŒæ¬¡æ³¨é”€ç³»ç»Ÿï¼ˆå¯èƒ½ä¼šä¸¢å¤±æ•°æ®ï¼‰ã€‚ shell # egï¼š æŒ‚èµ·shell # åˆ‡æ¢ root ç”¨æˆ· su - # åšä¸€äº›å·¥ä½œ ... # æŒ‚èµ·rootç”¨æˆ·çš„ shell,æœ‰å¯†ç éœ€ -f å¼ºåˆ¶æŒ‚èµ· suspend -f # åšä¸€äº›å·¥ä½œ... # å›åˆ°rootçš„shell fg ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:2:2","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#å‰åå°è¿è¡Œç¤ºä¾‹"},{"categories":["æŠ€æœ¯"],"content":" å‰åå°è¿è¡Œç¤ºä¾‹ ä½œä¸šç»“æŸé€šçŸ¥æ˜¾ç¤ºæ—¶æœº shell # åå°è¿è¡Œä½œä¸š ls \u003e temp \u0026 # æ­¤æ—¶ä¼šè¾“å‡º [ä½œä¸šID] è¿›ç¨‹ID [1] 4003 # å¦‚æœä¸€ä¸ªä½œä¸šç”±å¤šä¸ªç¨‹åºæ„æˆçš„è¯ æ˜¾ç¤ºæœ€åä¸€ä¸ªç¨‹åºçš„è¿›ç¨‹ID who | cut -c 1-8 | sort |uniq -c \u0026 # ä¼šè¾“å‡º 4356 æ˜¯ uniq çš„è¿›ç¨‹ID [2] 4356 # å½“åå°ä½œä¸šç»“æŸæ—¶ï¼Œshell ä¸ä¼šç«‹å³é€šçŸ¥æ‚¨ï¼Œä»¥é˜²æ­¢å¹²æ‰°æ‚¨æ­£åœ¨åšçš„äº‹æƒ…ã€‚ # shell ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°è¦æ˜¾ç¤ºä¸‹ä¸€ä¸ª shell æç¤ºæ—¶æ˜¾ç¤ºï¼Œå¦‚ä¸‹ [1] Done ls \u003e temp # å¼ºåˆ¶ä½œä¸šç»“æŸæ—¶ï¼Œç«‹å³é€šçŸ¥æ‚¨ set -o notify # æ¢å¤é»˜è®¤è®¾ç½® set +o notify # C-Shell å®¶æ— åˆ†åˆ«å¯¹åº” set notify unset notify æŒ‚èµ·ä½œä¸šä»»ä½•æ—¶å€™ä½œä¸šæœ‰ä¸‰ç§çŠ¶æ€ï¼šå‰å°è¿è¡Œï¼›åå°è¿è¡Œï¼›æš‚åœï¼Œç­‰å¾…ä¿¡å·æ¢å¤ã€‚ æš‚åœå‰å°ä½œä¸šï¼Œå¯ä»¥æŒ‰ ^Z é”®(Ctrl-Z)ï¼Œå³å‘é€ susp ä¿¡å·ã€‚æˆ‘ä»¬ç§°å°†è¿›ç¨‹**æŒ‚èµ·ï¼ˆsuspendï¼‰**æˆ–è¿›ç¨‹ åœæ­¢ï¼ˆstopï¼‰ï¼ˆå®é™…æ˜¯ä¸´æ—¶ä¸­æ­¢ï¼Œå¯ä»¥é‡æ–°å¯åŠ¨ï¼‰ã€‚æ°¸ä¹…åœæ­¢å¿…é¡» ^C é”®æˆ– kill å‘½ä»¤ã€‚ æ¢å¤æŒ‚èµ·çš„ç¨‹åºï¼Œä½¿ç”¨ fg å‘½ä»¤ã€‚ shell # egï¼š æŒ‚èµ· vim ç„¶åæŸ¥çœ‹ cal è¯´æ˜ä¹¦ï¼Œç„¶åå†è¿”å› vim vi a.txt ^Z # æŒ‚èµ·vim man cal fg # è¿”å›vim æŒ‚èµ·ä½œä¸šæ—¶ï¼Œè¿›ç¨‹ä¼šæ— é™æœŸåœæ­¢ã€‚å¦‚æœè¯•å›¾æ³¨é”€ç³»ç»Ÿï¼Œshell ä¼šå¾—åˆ°ä¸€æ¡è­¦å‘Šï¼Œä½ å¯ä»¥ fg å°†æŒ‚èµ·çš„ä½œä¸šç§»åŠ¨åˆ°å‰å°ï¼Œå¹¶æ­£ç¡®çš„é€€å‡ºç¨‹åºï¼Œæˆ–è€…ç¬¬äºŒæ¬¡æ³¨é”€ç³»ç»Ÿï¼ˆå¯èƒ½ä¼šä¸¢å¤±æ•°æ®ï¼‰ã€‚ shell # egï¼š æŒ‚èµ·shell # åˆ‡æ¢ root ç”¨æˆ· su - # åšä¸€äº›å·¥ä½œ ... # æŒ‚èµ·rootç”¨æˆ·çš„ shell,æœ‰å¯†ç éœ€ -f å¼ºåˆ¶æŒ‚èµ· suspend -f # åšä¸€äº›å·¥ä½œ... # å›åˆ°rootçš„shell fg ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:2:2","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#ä½œä¸šç»“æŸé€šçŸ¥æ˜¾ç¤ºæ—¶æœº"},{"categories":["æŠ€æœ¯"],"content":" å‰åå°è¿è¡Œç¤ºä¾‹ ä½œä¸šç»“æŸé€šçŸ¥æ˜¾ç¤ºæ—¶æœº shell # åå°è¿è¡Œä½œä¸š ls \u003e temp \u0026 # æ­¤æ—¶ä¼šè¾“å‡º [ä½œä¸šID] è¿›ç¨‹ID [1] 4003 # å¦‚æœä¸€ä¸ªä½œä¸šç”±å¤šä¸ªç¨‹åºæ„æˆçš„è¯ æ˜¾ç¤ºæœ€åä¸€ä¸ªç¨‹åºçš„è¿›ç¨‹ID who | cut -c 1-8 | sort |uniq -c \u0026 # ä¼šè¾“å‡º 4356 æ˜¯ uniq çš„è¿›ç¨‹ID [2] 4356 # å½“åå°ä½œä¸šç»“æŸæ—¶ï¼Œshell ä¸ä¼šç«‹å³é€šçŸ¥æ‚¨ï¼Œä»¥é˜²æ­¢å¹²æ‰°æ‚¨æ­£åœ¨åšçš„äº‹æƒ…ã€‚ # shell ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°è¦æ˜¾ç¤ºä¸‹ä¸€ä¸ª shell æç¤ºæ—¶æ˜¾ç¤ºï¼Œå¦‚ä¸‹ [1] Done ls \u003e temp # å¼ºåˆ¶ä½œä¸šç»“æŸæ—¶ï¼Œç«‹å³é€šçŸ¥æ‚¨ set -o notify # æ¢å¤é»˜è®¤è®¾ç½® set +o notify # C-Shell å®¶æ— åˆ†åˆ«å¯¹åº” set notify unset notify æŒ‚èµ·ä½œä¸šä»»ä½•æ—¶å€™ä½œä¸šæœ‰ä¸‰ç§çŠ¶æ€ï¼šå‰å°è¿è¡Œï¼›åå°è¿è¡Œï¼›æš‚åœï¼Œç­‰å¾…ä¿¡å·æ¢å¤ã€‚ æš‚åœå‰å°ä½œä¸šï¼Œå¯ä»¥æŒ‰ ^Z é”®(Ctrl-Z)ï¼Œå³å‘é€ susp ä¿¡å·ã€‚æˆ‘ä»¬ç§°å°†è¿›ç¨‹**æŒ‚èµ·ï¼ˆsuspendï¼‰**æˆ–è¿›ç¨‹ åœæ­¢ï¼ˆstopï¼‰ï¼ˆå®é™…æ˜¯ä¸´æ—¶ä¸­æ­¢ï¼Œå¯ä»¥é‡æ–°å¯åŠ¨ï¼‰ã€‚æ°¸ä¹…åœæ­¢å¿…é¡» ^C é”®æˆ– kill å‘½ä»¤ã€‚ æ¢å¤æŒ‚èµ·çš„ç¨‹åºï¼Œä½¿ç”¨ fg å‘½ä»¤ã€‚ shell # egï¼š æŒ‚èµ· vim ç„¶åæŸ¥çœ‹ cal è¯´æ˜ä¹¦ï¼Œç„¶åå†è¿”å› vim vi a.txt ^Z # æŒ‚èµ·vim man cal fg # è¿”å›vim æŒ‚èµ·ä½œä¸šæ—¶ï¼Œè¿›ç¨‹ä¼šæ— é™æœŸåœæ­¢ã€‚å¦‚æœè¯•å›¾æ³¨é”€ç³»ç»Ÿï¼Œshell ä¼šå¾—åˆ°ä¸€æ¡è­¦å‘Šï¼Œä½ å¯ä»¥ fg å°†æŒ‚èµ·çš„ä½œä¸šç§»åŠ¨åˆ°å‰å°ï¼Œå¹¶æ­£ç¡®çš„é€€å‡ºç¨‹åºï¼Œæˆ–è€…ç¬¬äºŒæ¬¡æ³¨é”€ç³»ç»Ÿï¼ˆå¯èƒ½ä¼šä¸¢å¤±æ•°æ®ï¼‰ã€‚ shell # egï¼š æŒ‚èµ·shell # åˆ‡æ¢ root ç”¨æˆ· su - # åšä¸€äº›å·¥ä½œ ... # æŒ‚èµ·rootç”¨æˆ·çš„ shell,æœ‰å¯†ç éœ€ -f å¼ºåˆ¶æŒ‚èµ· suspend -f # åšä¸€äº›å·¥ä½œ... # å›åˆ°rootçš„shell fg ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:2:2","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#æŒ‚èµ·ä½œä¸š"},{"categories":["æŠ€æœ¯"],"content":" æ˜¾ç¤ºä½œä¸šåˆ—è¡¨ shell # -l ä¼šæ˜¾ç¤ºè¿›ç¨‹å· jobs [-l] # å°†ä½œä¸šç§»åŠ¨è‡³å‰å° fg %[job] %[job] # å°†ä½œä¸šç§»åŠ¨è‡³åå° bg [%job...] ä½œä¸šå· å«ä¹‰ %% å½“å‰ä½œä¸š %+ å½“å‰ä½œä¸š %- å‰ä¸€ä¸ªä½œä¸š %n ä½œä¸š#n %name å«æœ‰æŒ‡å®šå‘½ä»¤åçš„ä½œä¸š %?name å‘½ä»¤ä¸­ä»»æ„ä½ç½®å«æœ‰nameçš„ä½œä¸š ps: å½“å‡†å¤‡åå°è¿è¡Œç¨‹åºï¼Œä½†æ˜¯è¾“å…¥å‘½ä»¤æ—¶å¿˜è®°é”®å…¥ \u0026 å­—ç¬¦ï¼Œåªéœ€æŒ‰ä¸‹ ^Z æŒ‚èµ·ä½œä¸šï¼Œç„¶åä½¿ç”¨ bg å‘½ä»¤å°†ä½œä¸šç§»åŠ¨è‡³åå°ã€‚ ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:2:3","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#æ˜¾ç¤ºä½œä¸šåˆ—è¡¨"},{"categories":["æŠ€æœ¯"],"content":" ps ç¨‹åºçš„ä½¿ç”¨ps éš¾ç”¨çš„åŸå› æ˜¯20ä¸–çºª80å¹´ä»£ï¼Œunix åˆ†æ”¯ï¼šå®˜æ–¹ Unixï¼ˆAT\u0026Tå…¬å¸ï¼‰ã€éå®˜æ–¹ï¼ˆåŠ åˆ©ç¦å°¼äºšå¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ï¼‰ã€‚UNIX é€‰é¡¹ å’Œ BSD é€‰é¡¹ã€‚ unix é€‰é¡¹ä»¥è¿å­—ç¬¦ - å¼€å¤´ï¼ŒBSD é€‰é¡¹æ²¡æœ‰è¿å­—ç¬¦ã€‚ shell # unix é€‰é¡¹ ps [-aefFly] [-p pid] [-u userid] # BSD ps [ajluvx] [p pid] [U userid] UNIX é€‰é¡¹ æ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Ÿ ps ä¸æ‚¨ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps -a ä¸ä»»ä½•ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps -e æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…å«å®ˆæŠ¤è¿›ç¨‹ï¼‰ ps -p pid ä¸æŒ‡å®šè¿›ç¨‹ ID pid ç›¸å…³çš„è¿›ç¨‹ ps -u userid ä¸æŒ‡å®šç”¨æˆ·æ ‡è¯† userid ç›¸å…³çš„è¿›ç¨‹ æ˜¾ç¤ºå“ªäº›æ•°æ®åˆ—ï¼Ÿ ps PID TTY TIME CMD ps -f UID PID PPID C TTY TIME CMD ps -F UID PID PPID C SZ RSS STIME TTY TIME CMD ps -l F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD ps -ly S UID PID PPID C PRI NI RSS SZ WCHAN TTY TIME CMD æœ‰ç”¨çš„ç‰¹æ®Šç»„åˆ ps æ˜¾ç¤ºè‡ªå·±çš„è¿›ç¨‹ ps -ef æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·è¿›ç¨‹ï¼Œå®Œæ•´ç»™è¾“å‡º ps -a æ˜¾ç¤ºæ‰€æœ‰éå®ˆæŠ¤è¿›ç¨‹çš„ è¿›ç¨‹ ps -t - ï¼ˆä»…æ˜¾ç¤ºæ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼‰ æ•°æ®åˆ—è¯´æ˜ï¼š UNIX æ ‡é¢˜ å«ä¹‰ ADDR è¿›ç¨‹è¡¨ä¸­çš„ è™šæ‹Ÿåœ°å€ C å¤„ç†å™¨åˆ©ç”¨ç‡ï¼ˆåºŸå¼ƒç‡ï¼‰ CMD æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤å F ä¸è¿›ç¨‹ç›¸å…³çš„æ ‡è¯† NI nice å€¼ï¼Œç”¨äºè®¾ç½®ä¼˜å…ˆçº§ PID è¿›ç¨‹ ID PPID çˆ¶è¿›ç¨‹ ID PRI ä¼˜å…ˆçº§ï¼ˆè¾ƒå¤§çš„æ•°å­—ï¼šä¼˜å…ˆçº§ä½ï¼‰ RSS å†…å­˜é©»ç•™ç©ºé—´ S çŠ¶æ€ä»£ç ï¼ˆDã€Rã€Sã€Tã€Zï¼‰ STIME ç´¯è®¡ç³»ç»Ÿæ—¶é—´ SZ ç‰©ç†é¡µçš„å¤§å°ï¼ˆå†…å­˜ç®¡ç†ï¼‰ TIME ç´¯è®¡ CPU æ—¶é—´ TTY æ§åˆ¶ç»ˆç«¯çš„å®Œæ•´åç§° UID ç”¨æˆ·æ ‡è¯† WCHAN ç­‰å¾…é€šé“ BSD é€‰é¡¹ æ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Ÿ ps ä¸ä½ çš„ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps a ä¸ä»»ä½•ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps e æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…å«å®ˆæŠ¤è¿›ç¨‹ï¼‰ ps p pid ä¸æŒ‡å®šè¿›ç¨‹ ID pid ç›¸å…³çš„è¿›ç¨‹ ps U userid ä¸æŒ‡å®šç”¨æˆ·æ ‡è¯† userid ç›¸å…³çš„è¿›ç¨‹ æ˜¾ç¤ºå“ªäº›æ•°æ®åˆ—ï¼Ÿ ps PID TT STAT TIME COMMAND ps j USER PID PPID PGID SESS JOBC STAT TT TIME COMMAND ps l UID PID PPID CPU PRI NI VSZ RSS WCHAN STAT TT TIME COMMAND ps u USER PID %CPU %MEM VSZ RSS TT STAT STARTED TIME COMMAND ps v PID STAT TIME SL RE PAGEN VSZ RSS LIM TSIZ %CPU %MEM COMMAND æœ‰ç”¨çš„ç‰¹æ®Šç»„åˆ ps æ˜¾ç¤ºè‡ªå·±çš„è¿›ç¨‹ ps ax æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ ps aux æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œå®Œæ•´è¾“å‡º æ•°æ®åˆ—è¯´æ˜ï¼š BSD æ ‡é¢˜ å«ä¹‰ %CPU CPU ä½¿ç”¨ç™¾åˆ†æ¯” %MEM çœŸå®å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯” CMD æ­£è¢«æ‰§è¡Œçš„å‘½ä»¤çš„åç§° COMMAND æ­£è¢«æ‰§è¡Œçš„å‘½ä»¤çš„å®Œæ•´åç§° CPU çŸ­æœŸ CPU ä½¿ç”¨ï¼ˆè°ƒåº¦ï¼‰ JOBC ä½œä¸šæ§åˆ¶ç»Ÿè®¡ LIM å†…å­˜ä½¿ç”¨é™é¢ NI nice å€¼ï¼Œç”¨æˆ·è®¾ç½®ä¼˜å…ˆçº§ PAGEIN æ€»çš„ç¼ºé¡µé”™è¯¯ï¼ˆå†…å­˜é”™è¯¯ ï¼‰ PGID è¿›ç¨‹ç»„å· PID è¿›ç¨‹å·ID PPID çˆ¶è¿›ç¨‹çš„è¿›ç¨‹ID PRI è°ƒåº¦æœ‰é™çº§ RE å†…å­˜é©»ç•™æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ RSS å†…å­˜é©»ç•™ç©ºé—´å¤§å°ï¼ˆå†…å­˜ç®¡ç†ï¼‰ SESS ä¼šè¯æŒ‡é’ˆ SL ç¡çœ æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ STARTED å®šæ—¶å¯åŠ¨ STAT çŠ¶æ€ä»£ç ï¼ˆOã€Rã€Sã€Tã€Zï¼‰ TIME ç§¯ç´¯çš„CPUæ—¶é—´ TSIZ æ–‡æœ¬å¤§å°ï¼ˆå•ä½KBï¼‰ TT æ§åˆ¶ç»ˆç«¯çš„ç¼©å†™åç§° TTY æ§åˆ¶ç»ˆç«¯çš„å®Œæ•´åç§° UID ç”¨æˆ·æ ‡è¯† USER ç”¨æˆ·å VSZ è™šæ‹Ÿå¤§å°ï¼ˆå•ä½KBï¼‰ WCHAN ç­‰å¾…é€šé“ çŠ¶æ€ç è¯´æ˜ï¼š Linuxã€FreeBSD D ä¸å¯ä¸­æ–­ç¡çœ ï¼šç­‰å¾…æ—¶é—´ç»“æŸï¼ˆé€šå¸¸æ˜¯I/Oï¼ŒD=â€œç£ç›˜â€ï¼‰ I ç©ºé—²ï¼šè¶…è¿‡20ç§’çš„ç¡çœ ï¼ˆä»…ä»…é€‚ç”¨äº FreeBSDï¼‰ R æ­£åœ¨è¿è¡Œæˆ–å¯è¿è¡Œï¼ˆå¯è¿è¡Œ=æ­£åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…ï¼‰ S å¯ä¸­æ–­ç¡çœ ï¼šç­‰å¾…äº‹ä»¶ç»“æŸ T æŒ‚èµ·ï¼šç”±ä½œä¸šæ§åˆ¶ä¿¡å·æŒ‚èµ·æˆ–è€…å› ä¸ºè¿½è¸ªè€Œè¢«æŒ‚èµ· Z åƒµè¿›ç¨‹ï¼šç»ˆæ­¢åï¼Œçˆ¶è¿›ç¨‹æ²¡æœ‰ç­‰å¾… ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:3:0","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#ps-ç¨‹åºçš„ä½¿ç”¨"},{"categories":["æŠ€æœ¯"],"content":" ps ç¨‹åºçš„ä½¿ç”¨ps éš¾ç”¨çš„åŸå› æ˜¯20ä¸–çºª80å¹´ä»£ï¼Œunix åˆ†æ”¯ï¼šå®˜æ–¹ Unixï¼ˆAT\u0026Tå…¬å¸ï¼‰ã€éå®˜æ–¹ï¼ˆåŠ åˆ©ç¦å°¼äºšå¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ï¼‰ã€‚UNIX é€‰é¡¹ å’Œ BSD é€‰é¡¹ã€‚ unix é€‰é¡¹ä»¥è¿å­—ç¬¦ - å¼€å¤´ï¼ŒBSD é€‰é¡¹æ²¡æœ‰è¿å­—ç¬¦ã€‚ shell # unix é€‰é¡¹ ps [-aefFly] [-p pid] [-u userid] # BSD ps [ajluvx] [p pid] [U userid] UNIX é€‰é¡¹ æ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Ÿ ps ä¸æ‚¨ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps -a ä¸ä»»ä½•ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps -e æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…å«å®ˆæŠ¤è¿›ç¨‹ï¼‰ ps -p pid ä¸æŒ‡å®šè¿›ç¨‹ ID pid ç›¸å…³çš„è¿›ç¨‹ ps -u userid ä¸æŒ‡å®šç”¨æˆ·æ ‡è¯† userid ç›¸å…³çš„è¿›ç¨‹ æ˜¾ç¤ºå“ªäº›æ•°æ®åˆ—ï¼Ÿ ps PID TTY TIME CMD ps -f UID PID PPID C TTY TIME CMD ps -F UID PID PPID C SZ RSS STIME TTY TIME CMD ps -l F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD ps -ly S UID PID PPID C PRI NI RSS SZ WCHAN TTY TIME CMD æœ‰ç”¨çš„ç‰¹æ®Šç»„åˆ ps æ˜¾ç¤ºè‡ªå·±çš„è¿›ç¨‹ ps -ef æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·è¿›ç¨‹ï¼Œå®Œæ•´ç»™è¾“å‡º ps -a æ˜¾ç¤ºæ‰€æœ‰éå®ˆæŠ¤è¿›ç¨‹çš„ è¿›ç¨‹ ps -t - ï¼ˆä»…æ˜¾ç¤ºæ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼‰ æ•°æ®åˆ—è¯´æ˜ï¼š UNIX æ ‡é¢˜ å«ä¹‰ ADDR è¿›ç¨‹è¡¨ä¸­çš„ è™šæ‹Ÿåœ°å€ C å¤„ç†å™¨åˆ©ç”¨ç‡ï¼ˆåºŸå¼ƒç‡ï¼‰ CMD æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤å F ä¸è¿›ç¨‹ç›¸å…³çš„æ ‡è¯† NI nice å€¼ï¼Œç”¨äºè®¾ç½®ä¼˜å…ˆçº§ PID è¿›ç¨‹ ID PPID çˆ¶è¿›ç¨‹ ID PRI ä¼˜å…ˆçº§ï¼ˆè¾ƒå¤§çš„æ•°å­—ï¼šä¼˜å…ˆçº§ä½ï¼‰ RSS å†…å­˜é©»ç•™ç©ºé—´ S çŠ¶æ€ä»£ç ï¼ˆDã€Rã€Sã€Tã€Zï¼‰ STIME ç´¯è®¡ç³»ç»Ÿæ—¶é—´ SZ ç‰©ç†é¡µçš„å¤§å°ï¼ˆå†…å­˜ç®¡ç†ï¼‰ TIME ç´¯è®¡ CPU æ—¶é—´ TTY æ§åˆ¶ç»ˆç«¯çš„å®Œæ•´åç§° UID ç”¨æˆ·æ ‡è¯† WCHAN ç­‰å¾…é€šé“ BSD é€‰é¡¹ æ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Ÿ ps ä¸ä½ çš„ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps a ä¸ä»»ä½•ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps e æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…å«å®ˆæŠ¤è¿›ç¨‹ï¼‰ ps p pid ä¸æŒ‡å®šè¿›ç¨‹ ID pid ç›¸å…³çš„è¿›ç¨‹ ps U userid ä¸æŒ‡å®šç”¨æˆ·æ ‡è¯† userid ç›¸å…³çš„è¿›ç¨‹ æ˜¾ç¤ºå“ªäº›æ•°æ®åˆ—ï¼Ÿ ps PID TT STAT TIME COMMAND ps j USER PID PPID PGID SESS JOBC STAT TT TIME COMMAND ps l UID PID PPID CPU PRI NI VSZ RSS WCHAN STAT TT TIME COMMAND ps u USER PID %CPU %MEM VSZ RSS TT STAT STARTED TIME COMMAND ps v PID STAT TIME SL RE PAGEN VSZ RSS LIM TSIZ %CPU %MEM COMMAND æœ‰ç”¨çš„ç‰¹æ®Šç»„åˆ ps æ˜¾ç¤ºè‡ªå·±çš„è¿›ç¨‹ ps ax æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ ps aux æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œå®Œæ•´è¾“å‡º æ•°æ®åˆ—è¯´æ˜ï¼š BSD æ ‡é¢˜ å«ä¹‰ %CPU CPU ä½¿ç”¨ç™¾åˆ†æ¯” %MEM çœŸå®å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯” CMD æ­£è¢«æ‰§è¡Œçš„å‘½ä»¤çš„åç§° COMMAND æ­£è¢«æ‰§è¡Œçš„å‘½ä»¤çš„å®Œæ•´åç§° CPU çŸ­æœŸ CPU ä½¿ç”¨ï¼ˆè°ƒåº¦ï¼‰ JOBC ä½œä¸šæ§åˆ¶ç»Ÿè®¡ LIM å†…å­˜ä½¿ç”¨é™é¢ NI nice å€¼ï¼Œç”¨æˆ·è®¾ç½®ä¼˜å…ˆçº§ PAGEIN æ€»çš„ç¼ºé¡µé”™è¯¯ï¼ˆå†…å­˜é”™è¯¯ ï¼‰ PGID è¿›ç¨‹ç»„å· PID è¿›ç¨‹å·ID PPID çˆ¶è¿›ç¨‹çš„è¿›ç¨‹ID PRI è°ƒåº¦æœ‰é™çº§ RE å†…å­˜é©»ç•™æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ RSS å†…å­˜é©»ç•™ç©ºé—´å¤§å°ï¼ˆå†…å­˜ç®¡ç†ï¼‰ SESS ä¼šè¯æŒ‡é’ˆ SL ç¡çœ æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ STARTED å®šæ—¶å¯åŠ¨ STAT çŠ¶æ€ä»£ç ï¼ˆOã€Rã€Sã€Tã€Zï¼‰ TIME ç§¯ç´¯çš„CPUæ—¶é—´ TSIZ æ–‡æœ¬å¤§å°ï¼ˆå•ä½KBï¼‰ TT æ§åˆ¶ç»ˆç«¯çš„ç¼©å†™åç§° TTY æ§åˆ¶ç»ˆç«¯çš„å®Œæ•´åç§° UID ç”¨æˆ·æ ‡è¯† USER ç”¨æˆ·å VSZ è™šæ‹Ÿå¤§å°ï¼ˆå•ä½KBï¼‰ WCHAN ç­‰å¾…é€šé“ çŠ¶æ€ç è¯´æ˜ï¼š Linuxã€FreeBSD D ä¸å¯ä¸­æ–­ç¡çœ ï¼šç­‰å¾…æ—¶é—´ç»“æŸï¼ˆé€šå¸¸æ˜¯I/Oï¼ŒD=â€œç£ç›˜â€ï¼‰ I ç©ºé—²ï¼šè¶…è¿‡20ç§’çš„ç¡çœ ï¼ˆä»…ä»…é€‚ç”¨äº FreeBSDï¼‰ R æ­£åœ¨è¿è¡Œæˆ–å¯è¿è¡Œï¼ˆå¯è¿è¡Œ=æ­£åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…ï¼‰ S å¯ä¸­æ–­ç¡çœ ï¼šç­‰å¾…äº‹ä»¶ç»“æŸ T æŒ‚èµ·ï¼šç”±ä½œä¸šæ§åˆ¶ä¿¡å·æŒ‚èµ·æˆ–è€…å› ä¸ºè¿½è¸ªè€Œè¢«æŒ‚èµ· Z åƒµè¿›ç¨‹ï¼šç»ˆæ­¢åï¼Œçˆ¶è¿›ç¨‹æ²¡æœ‰ç­‰å¾… ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:3:0","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#unix-é€‰é¡¹"},{"categories":["æŠ€æœ¯"],"content":" ps ç¨‹åºçš„ä½¿ç”¨ps éš¾ç”¨çš„åŸå› æ˜¯20ä¸–çºª80å¹´ä»£ï¼Œunix åˆ†æ”¯ï¼šå®˜æ–¹ Unixï¼ˆAT\u0026Tå…¬å¸ï¼‰ã€éå®˜æ–¹ï¼ˆåŠ åˆ©ç¦å°¼äºšå¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ï¼‰ã€‚UNIX é€‰é¡¹ å’Œ BSD é€‰é¡¹ã€‚ unix é€‰é¡¹ä»¥è¿å­—ç¬¦ - å¼€å¤´ï¼ŒBSD é€‰é¡¹æ²¡æœ‰è¿å­—ç¬¦ã€‚ shell # unix é€‰é¡¹ ps [-aefFly] [-p pid] [-u userid] # BSD ps [ajluvx] [p pid] [U userid] UNIX é€‰é¡¹ æ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Ÿ ps ä¸æ‚¨ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps -a ä¸ä»»ä½•ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps -e æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…å«å®ˆæŠ¤è¿›ç¨‹ï¼‰ ps -p pid ä¸æŒ‡å®šè¿›ç¨‹ ID pid ç›¸å…³çš„è¿›ç¨‹ ps -u userid ä¸æŒ‡å®šç”¨æˆ·æ ‡è¯† userid ç›¸å…³çš„è¿›ç¨‹ æ˜¾ç¤ºå“ªäº›æ•°æ®åˆ—ï¼Ÿ ps PID TTY TIME CMD ps -f UID PID PPID C TTY TIME CMD ps -F UID PID PPID C SZ RSS STIME TTY TIME CMD ps -l F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD ps -ly S UID PID PPID C PRI NI RSS SZ WCHAN TTY TIME CMD æœ‰ç”¨çš„ç‰¹æ®Šç»„åˆ ps æ˜¾ç¤ºè‡ªå·±çš„è¿›ç¨‹ ps -ef æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·è¿›ç¨‹ï¼Œå®Œæ•´ç»™è¾“å‡º ps -a æ˜¾ç¤ºæ‰€æœ‰éå®ˆæŠ¤è¿›ç¨‹çš„ è¿›ç¨‹ ps -t - ï¼ˆä»…æ˜¾ç¤ºæ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼‰ æ•°æ®åˆ—è¯´æ˜ï¼š UNIX æ ‡é¢˜ å«ä¹‰ ADDR è¿›ç¨‹è¡¨ä¸­çš„ è™šæ‹Ÿåœ°å€ C å¤„ç†å™¨åˆ©ç”¨ç‡ï¼ˆåºŸå¼ƒç‡ï¼‰ CMD æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤å F ä¸è¿›ç¨‹ç›¸å…³çš„æ ‡è¯† NI nice å€¼ï¼Œç”¨äºè®¾ç½®ä¼˜å…ˆçº§ PID è¿›ç¨‹ ID PPID çˆ¶è¿›ç¨‹ ID PRI ä¼˜å…ˆçº§ï¼ˆè¾ƒå¤§çš„æ•°å­—ï¼šä¼˜å…ˆçº§ä½ï¼‰ RSS å†…å­˜é©»ç•™ç©ºé—´ S çŠ¶æ€ä»£ç ï¼ˆDã€Rã€Sã€Tã€Zï¼‰ STIME ç´¯è®¡ç³»ç»Ÿæ—¶é—´ SZ ç‰©ç†é¡µçš„å¤§å°ï¼ˆå†…å­˜ç®¡ç†ï¼‰ TIME ç´¯è®¡ CPU æ—¶é—´ TTY æ§åˆ¶ç»ˆç«¯çš„å®Œæ•´åç§° UID ç”¨æˆ·æ ‡è¯† WCHAN ç­‰å¾…é€šé“ BSD é€‰é¡¹ æ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Ÿ ps ä¸ä½ çš„ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps a ä¸ä»»ä½•ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps e æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…å«å®ˆæŠ¤è¿›ç¨‹ï¼‰ ps p pid ä¸æŒ‡å®šè¿›ç¨‹ ID pid ç›¸å…³çš„è¿›ç¨‹ ps U userid ä¸æŒ‡å®šç”¨æˆ·æ ‡è¯† userid ç›¸å…³çš„è¿›ç¨‹ æ˜¾ç¤ºå“ªäº›æ•°æ®åˆ—ï¼Ÿ ps PID TT STAT TIME COMMAND ps j USER PID PPID PGID SESS JOBC STAT TT TIME COMMAND ps l UID PID PPID CPU PRI NI VSZ RSS WCHAN STAT TT TIME COMMAND ps u USER PID %CPU %MEM VSZ RSS TT STAT STARTED TIME COMMAND ps v PID STAT TIME SL RE PAGEN VSZ RSS LIM TSIZ %CPU %MEM COMMAND æœ‰ç”¨çš„ç‰¹æ®Šç»„åˆ ps æ˜¾ç¤ºè‡ªå·±çš„è¿›ç¨‹ ps ax æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ ps aux æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œå®Œæ•´è¾“å‡º æ•°æ®åˆ—è¯´æ˜ï¼š BSD æ ‡é¢˜ å«ä¹‰ %CPU CPU ä½¿ç”¨ç™¾åˆ†æ¯” %MEM çœŸå®å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯” CMD æ­£è¢«æ‰§è¡Œçš„å‘½ä»¤çš„åç§° COMMAND æ­£è¢«æ‰§è¡Œçš„å‘½ä»¤çš„å®Œæ•´åç§° CPU çŸ­æœŸ CPU ä½¿ç”¨ï¼ˆè°ƒåº¦ï¼‰ JOBC ä½œä¸šæ§åˆ¶ç»Ÿè®¡ LIM å†…å­˜ä½¿ç”¨é™é¢ NI nice å€¼ï¼Œç”¨æˆ·è®¾ç½®ä¼˜å…ˆçº§ PAGEIN æ€»çš„ç¼ºé¡µé”™è¯¯ï¼ˆå†…å­˜é”™è¯¯ ï¼‰ PGID è¿›ç¨‹ç»„å· PID è¿›ç¨‹å·ID PPID çˆ¶è¿›ç¨‹çš„è¿›ç¨‹ID PRI è°ƒåº¦æœ‰é™çº§ RE å†…å­˜é©»ç•™æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ RSS å†…å­˜é©»ç•™ç©ºé—´å¤§å°ï¼ˆå†…å­˜ç®¡ç†ï¼‰ SESS ä¼šè¯æŒ‡é’ˆ SL ç¡çœ æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ STARTED å®šæ—¶å¯åŠ¨ STAT çŠ¶æ€ä»£ç ï¼ˆOã€Rã€Sã€Tã€Zï¼‰ TIME ç§¯ç´¯çš„CPUæ—¶é—´ TSIZ æ–‡æœ¬å¤§å°ï¼ˆå•ä½KBï¼‰ TT æ§åˆ¶ç»ˆç«¯çš„ç¼©å†™åç§° TTY æ§åˆ¶ç»ˆç«¯çš„å®Œæ•´åç§° UID ç”¨æˆ·æ ‡è¯† USER ç”¨æˆ·å VSZ è™šæ‹Ÿå¤§å°ï¼ˆå•ä½KBï¼‰ WCHAN ç­‰å¾…é€šé“ çŠ¶æ€ç è¯´æ˜ï¼š Linuxã€FreeBSD D ä¸å¯ä¸­æ–­ç¡çœ ï¼šç­‰å¾…æ—¶é—´ç»“æŸï¼ˆé€šå¸¸æ˜¯I/Oï¼ŒD=â€œç£ç›˜â€ï¼‰ I ç©ºé—²ï¼šè¶…è¿‡20ç§’çš„ç¡çœ ï¼ˆä»…ä»…é€‚ç”¨äº FreeBSDï¼‰ R æ­£åœ¨è¿è¡Œæˆ–å¯è¿è¡Œï¼ˆå¯è¿è¡Œ=æ­£åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…ï¼‰ S å¯ä¸­æ–­ç¡çœ ï¼šç­‰å¾…äº‹ä»¶ç»“æŸ T æŒ‚èµ·ï¼šç”±ä½œä¸šæ§åˆ¶ä¿¡å·æŒ‚èµ·æˆ–è€…å› ä¸ºè¿½è¸ªè€Œè¢«æŒ‚èµ· Z åƒµè¿›ç¨‹ï¼šç»ˆæ­¢åï¼Œçˆ¶è¿›ç¨‹æ²¡æœ‰ç­‰å¾… ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:3:0","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#bsd-é€‰é¡¹"},{"categories":["æŠ€æœ¯"],"content":" ps ç¨‹åºçš„ä½¿ç”¨ps éš¾ç”¨çš„åŸå› æ˜¯20ä¸–çºª80å¹´ä»£ï¼Œunix åˆ†æ”¯ï¼šå®˜æ–¹ Unixï¼ˆAT\u0026Tå…¬å¸ï¼‰ã€éå®˜æ–¹ï¼ˆåŠ åˆ©ç¦å°¼äºšå¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ï¼‰ã€‚UNIX é€‰é¡¹ å’Œ BSD é€‰é¡¹ã€‚ unix é€‰é¡¹ä»¥è¿å­—ç¬¦ - å¼€å¤´ï¼ŒBSD é€‰é¡¹æ²¡æœ‰è¿å­—ç¬¦ã€‚ shell # unix é€‰é¡¹ ps [-aefFly] [-p pid] [-u userid] # BSD ps [ajluvx] [p pid] [U userid] UNIX é€‰é¡¹ æ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Ÿ ps ä¸æ‚¨ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps -a ä¸ä»»ä½•ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps -e æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…å«å®ˆæŠ¤è¿›ç¨‹ï¼‰ ps -p pid ä¸æŒ‡å®šè¿›ç¨‹ ID pid ç›¸å…³çš„è¿›ç¨‹ ps -u userid ä¸æŒ‡å®šç”¨æˆ·æ ‡è¯† userid ç›¸å…³çš„è¿›ç¨‹ æ˜¾ç¤ºå“ªäº›æ•°æ®åˆ—ï¼Ÿ ps PID TTY TIME CMD ps -f UID PID PPID C TTY TIME CMD ps -F UID PID PPID C SZ RSS STIME TTY TIME CMD ps -l F S UID PID PPID C PRI NI ADDR SZ WCHAN TTY TIME CMD ps -ly S UID PID PPID C PRI NI RSS SZ WCHAN TTY TIME CMD æœ‰ç”¨çš„ç‰¹æ®Šç»„åˆ ps æ˜¾ç¤ºè‡ªå·±çš„è¿›ç¨‹ ps -ef æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·è¿›ç¨‹ï¼Œå®Œæ•´ç»™è¾“å‡º ps -a æ˜¾ç¤ºæ‰€æœ‰éå®ˆæŠ¤è¿›ç¨‹çš„ è¿›ç¨‹ ps -t - ï¼ˆä»…æ˜¾ç¤ºæ‰€æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼‰ æ•°æ®åˆ—è¯´æ˜ï¼š UNIX æ ‡é¢˜ å«ä¹‰ ADDR è¿›ç¨‹è¡¨ä¸­çš„ è™šæ‹Ÿåœ°å€ C å¤„ç†å™¨åˆ©ç”¨ç‡ï¼ˆåºŸå¼ƒç‡ï¼‰ CMD æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤å F ä¸è¿›ç¨‹ç›¸å…³çš„æ ‡è¯† NI nice å€¼ï¼Œç”¨äºè®¾ç½®ä¼˜å…ˆçº§ PID è¿›ç¨‹ ID PPID çˆ¶è¿›ç¨‹ ID PRI ä¼˜å…ˆçº§ï¼ˆè¾ƒå¤§çš„æ•°å­—ï¼šä¼˜å…ˆçº§ä½ï¼‰ RSS å†…å­˜é©»ç•™ç©ºé—´ S çŠ¶æ€ä»£ç ï¼ˆDã€Rã€Sã€Tã€Zï¼‰ STIME ç´¯è®¡ç³»ç»Ÿæ—¶é—´ SZ ç‰©ç†é¡µçš„å¤§å°ï¼ˆå†…å­˜ç®¡ç†ï¼‰ TIME ç´¯è®¡ CPU æ—¶é—´ TTY æ§åˆ¶ç»ˆç«¯çš„å®Œæ•´åç§° UID ç”¨æˆ·æ ‡è¯† WCHAN ç­‰å¾…é€šé“ BSD é€‰é¡¹ æ˜¾ç¤ºå“ªäº›è¿›ç¨‹ï¼Ÿ ps ä¸ä½ çš„ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps a ä¸ä»»ä½•ç”¨æˆ·æ ‡è¯†å’Œç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹ ps e æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…å«å®ˆæŠ¤è¿›ç¨‹ï¼‰ ps p pid ä¸æŒ‡å®šè¿›ç¨‹ ID pid ç›¸å…³çš„è¿›ç¨‹ ps U userid ä¸æŒ‡å®šç”¨æˆ·æ ‡è¯† userid ç›¸å…³çš„è¿›ç¨‹ æ˜¾ç¤ºå“ªäº›æ•°æ®åˆ—ï¼Ÿ ps PID TT STAT TIME COMMAND ps j USER PID PPID PGID SESS JOBC STAT TT TIME COMMAND ps l UID PID PPID CPU PRI NI VSZ RSS WCHAN STAT TT TIME COMMAND ps u USER PID %CPU %MEM VSZ RSS TT STAT STARTED TIME COMMAND ps v PID STAT TIME SL RE PAGEN VSZ RSS LIM TSIZ %CPU %MEM COMMAND æœ‰ç”¨çš„ç‰¹æ®Šç»„åˆ ps æ˜¾ç¤ºè‡ªå·±çš„è¿›ç¨‹ ps ax æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ ps aux æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œå®Œæ•´è¾“å‡º æ•°æ®åˆ—è¯´æ˜ï¼š BSD æ ‡é¢˜ å«ä¹‰ %CPU CPU ä½¿ç”¨ç™¾åˆ†æ¯” %MEM çœŸå®å†…å­˜ä½¿ç”¨ç™¾åˆ†æ¯” CMD æ­£è¢«æ‰§è¡Œçš„å‘½ä»¤çš„åç§° COMMAND æ­£è¢«æ‰§è¡Œçš„å‘½ä»¤çš„å®Œæ•´åç§° CPU çŸ­æœŸ CPU ä½¿ç”¨ï¼ˆè°ƒåº¦ï¼‰ JOBC ä½œä¸šæ§åˆ¶ç»Ÿè®¡ LIM å†…å­˜ä½¿ç”¨é™é¢ NI nice å€¼ï¼Œç”¨æˆ·è®¾ç½®ä¼˜å…ˆçº§ PAGEIN æ€»çš„ç¼ºé¡µé”™è¯¯ï¼ˆå†…å­˜é”™è¯¯ ï¼‰ PGID è¿›ç¨‹ç»„å· PID è¿›ç¨‹å·ID PPID çˆ¶è¿›ç¨‹çš„è¿›ç¨‹ID PRI è°ƒåº¦æœ‰é™çº§ RE å†…å­˜é©»ç•™æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ RSS å†…å­˜é©»ç•™ç©ºé—´å¤§å°ï¼ˆå†…å­˜ç®¡ç†ï¼‰ SESS ä¼šè¯æŒ‡é’ˆ SL ç¡çœ æ—¶é—´ï¼ˆå•ä½ç§’ï¼‰ STARTED å®šæ—¶å¯åŠ¨ STAT çŠ¶æ€ä»£ç ï¼ˆOã€Rã€Sã€Tã€Zï¼‰ TIME ç§¯ç´¯çš„CPUæ—¶é—´ TSIZ æ–‡æœ¬å¤§å°ï¼ˆå•ä½KBï¼‰ TT æ§åˆ¶ç»ˆç«¯çš„ç¼©å†™åç§° TTY æ§åˆ¶ç»ˆç«¯çš„å®Œæ•´åç§° UID ç”¨æˆ·æ ‡è¯† USER ç”¨æˆ·å VSZ è™šæ‹Ÿå¤§å°ï¼ˆå•ä½KBï¼‰ WCHAN ç­‰å¾…é€šé“ çŠ¶æ€ç è¯´æ˜ï¼š Linuxã€FreeBSD D ä¸å¯ä¸­æ–­ç¡çœ ï¼šç­‰å¾…æ—¶é—´ç»“æŸï¼ˆé€šå¸¸æ˜¯I/Oï¼ŒD=â€œç£ç›˜â€ï¼‰ I ç©ºé—²ï¼šè¶…è¿‡20ç§’çš„ç¡çœ ï¼ˆä»…ä»…é€‚ç”¨äº FreeBSDï¼‰ R æ­£åœ¨è¿è¡Œæˆ–å¯è¿è¡Œï¼ˆå¯è¿è¡Œ=æ­£åœ¨è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…ï¼‰ S å¯ä¸­æ–­ç¡çœ ï¼šç­‰å¾…äº‹ä»¶ç»“æŸ T æŒ‚èµ·ï¼šç”±ä½œä¸šæ§åˆ¶ä¿¡å·æŒ‚èµ·æˆ–è€…å› ä¸ºè¿½è¸ªè€Œè¢«æŒ‚èµ· Z åƒµè¿›ç¨‹ï¼šç»ˆæ­¢åï¼Œçˆ¶è¿›ç¨‹æ²¡æœ‰ç­‰å¾… ","date":"2022-05-07","objectID":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/:3:0","series":null,"tags":["æŠ˜è…¾","è¿›ç¨‹","unix","linux"],"title":"è¿›ç¨‹å’Œä½œä¸šæ§åˆ¶","uri":"/posts/unixs/%E8%BF%9B%E7%A8%8B%E5%92%8C%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6/#çŠ¶æ€ç è¯´æ˜"},{"categories":["æŠ€æœ¯"],"content":" æ’åºã€åŒºåŸŸè®¾ç½®unix çš„é»˜è®¤æ’åºæ–¹å¼å–å†³äºä½ ä½¿ç”¨çš„åŒºåŸŸè®¾ç½®ï¼Œå¦‚ï¼šç°åœ¨æœ‰Aã€aã€Bã€bã€Cã€c å‡ ä¸ªæ–‡ä»¶ï¼Œæ‰§è¡Œ ls åˆ—ä¸¾æ–‡ä»¶ï¼š å¦‚æœä½¿ç”¨ C åŒºåŸŸè®¾ç½®ï¼Œä½ ä¼šå¾—åˆ°ï¼šA B C a b c (åŸºäº ASCII ç )ï¼› å¦‚æœä½¿ç”¨ en_US, ä½ å°†ä¼šå¾—åˆ°ï¼š a A b B c C export LC_COLLATE=C ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:1:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#æ’åºåŒºåŸŸè®¾ç½®"},{"categories":["æŠ€æœ¯"],"content":" ç›®å½•æ ˆç›¸å…³pushd ã€popdã€dirs ä¸‰ä¸ªå‘½ä»¤å°†ç»´æŠ¤ä¸€ä¸ªç›®å½•æ ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´æ ˆçš„é¡ºåºå®ç°å¿«é€Ÿçš„åˆ‡æ¢å·¥ä½œç›®å½•ã€‚ å‘½ä»¤ åŠ¨ä½œ dirs æ˜¾ç¤ºåç§°ï¼šhome æ˜¾ç¤ºä¸º ~ dirs -l æ˜¾ç¤ºå®Œæ•´åç§° dirs -v æ˜¾ç¤ºåç§°ï¼šæ¯è¡Œä¸€ä¸ªï¼Œå¹¶ä¸”æœ‰æ•°å­—æ ‡è¯† pushd directory æ”¹å˜å·¥ä½œç›®å½•ï¼šå°† directory å‹å…¥åˆ°æ ˆä¸­ pushd +n æ”¹å˜å·¥ä½œç›®å½•ï¼šå°† #n ç§»åŠ¨åˆ°æ ˆé¡¶ popd æ”¹å˜å·¥ä½œç›®å½•ï¼šå¼¹å‡ºæ ˆé¡¶ popd +n ä»æ ˆä¸­ç§»é™¤ç›®å½• #n dirs -c é™¤å½“å‰å·¥ä½œç›®å½•å¤–ï¼Œç§»é™¤æ ˆä¸­çš„å…¨éƒ¨ç›®å½• shell # å®šä¹‰åˆ«åå¿«é€Ÿæ“ä½œ alias d='dirs -v' alias p=pushd ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:2:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#ç›®å½•æ ˆç›¸å…³"},{"categories":["æŠ€æœ¯"],"content":" æ£€æŸ¥æ–‡ä»¶ç±»å‹å’Œé¢œè‰² shell alias ls='ls -F --color=auto' alias la='ls -a' alias ldot='ls -d .??*' ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:3:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#æ£€æŸ¥æ–‡ä»¶ç±»å‹å’Œé¢œè‰²"},{"categories":["æŠ€æœ¯"],"content":" é˜²æ­¢è¯¯åˆ æ–‡ä»¶ shell # å…ˆ ls æ£€æŸ¥åˆ é™¤çš„æ–‡ä»¶ï¼Œå†é€šè¿‡fcå‘½ä»¤æ›¿æ¢ä¸ºrm alias del='fc -s ls=rm' ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:4:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#é˜²æ­¢è¯¯åˆ æ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" åˆ©ç”¨å†å²è®°å½• shell alias a=alias alias info='date; who' alias h=\"fc -l\" alias r=\"fc -s\" # ä½¿ç”¨ # h æ˜¾ç¤ºè®°å½• # r #number # r #name old=new ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:5:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#åˆ©ç”¨å†å²è®°å½•"},{"categories":["æŠ€æœ¯"],"content":" æŒæ¡ç£ç›˜ç©ºé—´æƒ…å†µ shell # -s(sizeï¼Œå¤§å° å•ä½ KB) ls -s # -h(human-readable, é€‚åˆäººç±»é˜…è¯») ls -sh # -a(all,å…¨éƒ¨) # -c(count,ç»Ÿè®¡) æœ«ä½æ˜¾ç¤ºæ€»é‡ # -s(sum, æ€»å’Œ) # du(disk usage,ç£ç›˜ä½¿ç”¨) du [-achs] [name...] # df(disk free-space, ç£ç›˜å¯ç”¨ç©ºé—´) df [-h] ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:6:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#æŒæ¡ç£ç›˜ç©ºé—´æƒ…å†µ"},{"categories":["æŠ€æœ¯"],"content":" å—å’Œåˆ†é…å•å…ƒï¼šdumpe2fsæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç©ºé—´ä»¥å›ºå®šå¤§å°çš„ç»„å—è¿›è¡Œåˆ†é…ï¼Œå³ å—ï¼ˆblockï¼‰ï¼Œä¸ºæ–‡ä»¶æ‰€åˆ†é…çš„æœ€å°ç£ç›˜ç©ºé—´æ•°é‡ã€‚æ‰€ä»¥åœ¨ä¸€ä¸ªå—å¤§å°ä¸º1KBï¼ˆ1024å­—èŠ‚ï¼‰çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä»…ä»…åŒ…å«1å­—èŠ‚çš„æ–‡ä»¶ä¹Ÿè¦å ç”¨ä¸€ä¸ªå®Œæ•´çš„å—ï¼Œ1025å­—èŠ‚çš„æ•°æ®æ–‡ä»¶éœ€è¦ä¸¤ä¸ªå—ã€‚ å‡ºäºæ•ˆç‡çš„è€ƒè™‘ï¼Œå½“æ–‡ä»¶å†™å…¥ç£ç›˜æˆ–å…¶ä»–å­˜å‚¨ä»‹è´¨ä¸Šçš„æ—¶å€™ï¼Œç£ç›˜å­˜å‚¨ç©ºé—´ä¹Ÿæ˜¯ä»¥å›ºå®šå¤§å°çš„ç»„å—åˆ†é…ï¼Œå³ åˆ†é…å•å…ƒï¼ˆallocationuniutï¼‰æˆ– ç°‡ï¼ˆclusterï¼‰ã€‚åˆ†é…å•å…ƒçš„å¤§å°å–å†³äºæ–‡ä»¶ç³»ç»Ÿå’Œå­˜å‚¨è®¾å¤‡ã€‚ ä¾‹å¦‚ï¼Œæˆ‘çš„ linux ç³»ç»Ÿä¸Šï¼Œå—å¤§å°ä¸º 1 KBï¼Œä½†æ˜¯ç£ç›˜åˆ†é…å•å…ƒ 8KBã€‚å› æ­¤ï¼Œä¸€ä¸ªåªæœ‰ä¸€ä¸ªå­—èŠ‚çš„æ–‡ä»¶å®é™…ä¸Šè¦å ç”¨ 8KB çš„ç£ç›˜ç©ºé—´ã€‚ æŸ¥çœ‹è‡ªå·±ç³»ç»Ÿå—å¤§å°å’Œåˆ†é…å•å…ƒï¼š shell # åˆ›å»ºä¸€ä¸ªå¾ˆå°çš„æ–‡ä»¶ echo a \u003e temp # æŸ¥çœ‹æ–‡ä»¶åŒ…å«çš„æ•°æ®çš„æ•°é‡ æ–‡ä»¶å¤§å°åœ¨æ—¥æœŸå‰é¢, å•ä½å­—èŠ‚ 2 ä¸ªå­—èŠ‚ ls -l temp # æŸ¥çœ‹æ–‡ä»¶å ç”¨çš„å­˜å‚¨ç©ºé—´ 4K æ‰€ä»¥åˆ†é…å•å…ƒæ˜¯ 4K du -h temp # æŸ¥çœ‹å—å¤§å° å•ä½ï¼šå­—èŠ‚ sudo dumpe2fs /dev/vda1 | grep \"Block size\" dumpe2fs å‘½ä»¤æ˜¯ç”¨äºæ˜¾ç¤º ext2ã€ext3 å’Œ ext4 æ–‡ä»¶ç³»ç»Ÿçš„è¯¦ç»†ä¿¡æ¯çš„å‘½ä»¤ï¼Œå¯¹äº xfs æ–‡ä»¶ç³»ç»Ÿï¼Œåº”è¯¥ä½¿ç”¨ xfs_info å‘½ä»¤æ¥æŸ¥çœ‹å…¶è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å—å¤§å°ç­‰ã€‚å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹ /dev/sda1 åˆ†åŒºä¸Šçš„ xfs æ–‡ä»¶ç³»ç»Ÿçš„å—å¤§å°ã€‚ shell # æŸ¥çœ‹æ‰€æœ‰å—è®¾å¤‡ lsblk #æŸ¥ç»åˆ†åŒºæˆ–ç¡¬ç›˜æ–‡ä»¶ç±»å‹ blkid /dev/sda1 # /dev/sda1 åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿä¿¡æ¯çš„è¾“å‡ºç»“æœ sudo xfs_info /dev/sda1 # ç»“æœå¦‚ä¸‹ï¼š bsize æ¯ä¸ªå—çš„å­—èŠ‚æ•° ï¼›isize=512: æ¯ä¸ªinodeæ‰€å ç”¨çš„å­—èŠ‚æ•° ç­‰ meta-data=/dev/sda1 isize=512 agcount=4, agsize=65536 blks = sectsz=512 attr=2, projid32bit=1 = crc=1 finobt=0 spinodes=0 data = bsize=4096 blocks=262144, imaxpct=25 = sunit=0 swidth=0 blks naming =version 2 bsize=4096 ascii-ci=0 ftype=1 log =internal bsize=4096 blocks=2560, version=2 = sectsz=512 sunit=0 blks, lazy-count=1 realtime =none extsz=4096 blocks=0, rtextents=0 ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:6:1","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#å—å’Œåˆ†é…å•å…ƒdumpe2fs"},{"categories":["æŠ€æœ¯"],"content":" é€šé…ç¬¦ ç¬¦å· å«ä¹‰ * ä»»ä½•0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ ï¼Ÿ ä»»ä½•å•ä¸ªå­—ç¬¦ [list] list ä¸­çš„ä»»ä½•å­—ç¬¦ [^list] ä¸åœ¨ list ä¸­çš„ä»»ä½•å­—ç¬¦ {string1|string2} å…¶ä¸­ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸² ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:7:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#é€šé…ç¬¦"},{"categories":["æŠ€æœ¯"],"content":" é¢„å®šä¹‰çš„å­—ç¬¦ ç±» å«ä¹‰ ç±»ä¼¼äº [[:lower:]] å°å†™å­—æ¯ [a-z] [[:upper:]] å¤§å†™å­—æ¯ [A-Z] [[:digit:]] æ•°å­— [0-9] [[:alnum:]] å¤§å†™å°å†™å­—æ¯ä¸æ•°å­— [A-Za-z0-9] [[:alpha:]] å¤§å†™å’Œå°å†™å­—æ¯ [A-Za-z] ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:7:1","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#é¢„å®šä¹‰çš„å­—ç¬¦"},{"categories":["æŠ€æœ¯"],"content":" Unix ä¸ºæ–°æ–‡ä»¶æŒ‡å®šæƒé™çš„æ–¹å¼ï¼šumaskUnix åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œå°†æ ¹æ®æ–‡ä»¶ç±»å‹ä¸ºæ–‡ä»¶æŒ‡å®šä»¥ä¸‹å‡ ç§æ¨¡å¼ï¼š 666: ä¸å¯æ‰§è¡Œçš„æ™®é€šæ–‡ä»¶ 777ï¼šå¯æ‰§è¡Œçš„æ™®é€šæ–‡ä»¶ 777ï¼š ç›®å½• åœ¨è¿™ä»¥åˆå§‹æ¨¡å¼ä¸Šï¼ŒUnixå†å‡å»ç”¨æˆ·æ©ç ï¼ˆuser maskï¼‰ã€‚è®¾ç½®æ©ç çš„å‘½ä»¤ä¸ºï¼šumask [mode] shell # é™åˆ¶å…¶ä»–äººå†™çš„æƒé™ umask 022 # æ˜¾ç¤ºå½“å‰çš„æ©ç  umask ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:8:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#unix-ä¸ºæ–°æ–‡ä»¶æŒ‡å®šæƒé™çš„æ–¹å¼umask"},{"categories":["æŠ€æœ¯"],"content":" æ¸…ç©ºæ–‡ä»¶å†…å®¹å½“åˆ é™¤æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶æ‰€ä½¿ç”¨çš„å®é™…ç£ç›˜ç©ºé—´è¿˜æ²¡è¢«æ¸…é™¤ã€‚æ–‡ä»¶ç³»ç»Ÿåªæ˜¯å°†è¿™éƒ¨åˆ†ç£ç›˜ç©ºé—´æ ‡è¯†ä¸ºå¯é‡ç”¨ã€‚æœ€ç»ˆæ—§æ•°æ®ä¼šè¢«æ–°æ•°æ®è¦†ç›–ã€‚ä½†æ˜¯æ—¶é—´ä¸ç¡®å®šï¼Œä¸”æœ‰ä¸€äº›ç‰¹æ®Šçš„æ¢å¤å·¥å…·å¯ä»¥æ¢å¤æ•°æ®ã€‚ shred ç¨‹åºçš„ç›®çš„å°±æ˜¯å¤šæ¬¡è¦†ç›–ç¡¬ç›˜ä¸Šå·²æœ‰çš„æ•°æ®ã€‚ shell # -f(force,å¼ºåˆ¶) # -u è¦†ç›–å®Œåˆ é™¤æ–‡ä»¶ # -v(verbose, è¯¦ç»†) # -z å¡«å……é›¶ï¼Œé»˜è®¤æ˜¯éšæœºæ•°æ® shred -fuvz datafile ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:8:1","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#æ¸…ç©ºæ–‡ä»¶å†…å®¹"},{"categories":["æŠ€æœ¯"],"content":" é“¾æ¥çš„æ¦‚å¿µ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:9:0","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#é“¾æ¥çš„æ¦‚å¿µ"},{"categories":["æŠ€æœ¯"],"content":" statã€ls -i i èŠ‚ç‚¹ï¼ˆi-nodeï¼‰å½“ unix åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œunix åšäº†ä¸¤ä»¶äº‹ã€‚ Unix åœ¨å­˜å‚¨è®¾å¤‡ä¸Šä¿ç•™ä¸€å—ç©ºé—´ç”¨æ¥å­˜å‚¨æ•°æ®ã€‚ Unix åˆ›å»ºä¸€ä¸ª**ç´¢å¼•èŠ‚ç‚¹ï¼ˆindex nodeï¼‰**æˆ– **i èŠ‚ç‚¹ï¼ˆi-nodeï¼‰**çš„ç»“æ„ã€‚ç”¨æ¥å­˜æ”¾æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ã€‚ æŸ¥çœ‹æ–‡ä»¶çš„ i èŠ‚ç‚¹å†…å®¹ï¼š stat filename æ–‡ä»¶ç³»ç»Ÿå°†æ‰€æœ‰çš„ i èŠ‚ç‚¹å­˜æ”¾åœ¨ä¸€ä¸ªå¤§è¡¨ä¸­ï¼Œç§°ä¸º i èŠ‚ç‚¹è¡¨ï¼ˆinode tableï¼‰ï¼Œæ¯ä¸ª i èŠ‚ç‚¹ç”±æ‰€è°“çš„ç´¢å¼•å·æˆ– i èŠ‚ç‚¹å·è¡¨ç¤ºã€‚ æŸ¥çœ‹æ–‡ä»¶çš„èŠ‚ç‚¹å·ï¼šls -i filename å¤„ç†ç›®å½•æ—¶å€™ï¼Œå°±å¥½åƒç›®å½•åŒ…å«æ–‡ä»¶ä¸€æ ·ï¼Œå…¶å®ï¼Œç›®å½•å¹¶ä¸åŒ…å«æ–‡ä»¶ï¼Œç›®å½•åªåŒ…å«æ–‡ä»¶çš„åç§°åŠæ–‡ä»¶çš„ i èŠ‚ç‚¹å·ã€‚å› æ­¤ç›®å½•çš„å†…å®¹ç›¸å½“å°ï¼šåªæœ‰ä¸€åˆ—åç§°ï¼Œæ¯ä¸ªåç§°å¯¹åº”ä¸€ä¸ª i èŠ‚ç‚¹å·ã€‚ æ–‡ä»¶åå’Œ i èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥ç§°ä¸º é“¾æ¥ã€‚ ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:9:1","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#statls--i-i-èŠ‚ç‚¹i-node"},{"categories":["æŠ€æœ¯"],"content":" å¤šé‡é“¾æ¥Unix æ–‡ä»¶ç³»ç»Ÿå…è®¸å¤šé‡é“¾æ¥ã€‚ä¸€ä¸ªæ–‡ä»¶å¯ä»¥æœ‰ä¸æ­¢ä¸€ä¸ªåç§°ã€‚æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†æ˜¯ i èŠ‚ç‚¹å·ï¼Œä¸æ˜¯åç§°ï¼Œæ‰€æœ‰å¤šä¸ªåç§°å¯ä»¥å¼•ç”¨åˆ°åŒä¸€ä¸ª i èŠ‚ç‚¹å·ã€‚ é“¾æ¥çš„åŸºæœ¬æ€æƒ³æ˜¯åŒä¸€ä¸ªæ–‡ä»¶å¯èƒ½æ‹¥æœ‰ä¸åŒçš„å«ä¹‰ï¼ˆå–å†³äºæ–‡ä»¶ä½¿ç”¨çš„ç¯å¢ƒï¼‰ã€‚å¹¶ä¸” Unix å¹³ç­‰çš„å¯¹å¾…æ‰€æœ‰çš„é“¾æ¥ã€‚ ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:9:2","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#å¤šé‡é“¾æ¥"},{"categories":["æŠ€æœ¯"],"content":" åˆ›å»ºæ–°é“¾æ¥: ln shell # file æ˜¯å·²æœ‰çš„æ™®é€šæ–‡ä»¶çš„åç§°ï¼Œnewnameæ˜¯å¸Œæœ›èµ‹äºˆé“¾æ¥çš„åç§° ln file newname # ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ™®é€šæ–‡ä»¶åˆ›å»ºé“¾æ¥ï¼Œå¹¶æ”¾åˆ°æŒ‡å®šçš„ç›®å½•ä¸­ ln file... directory rm å’Œ rmdir å…¶å®æ˜¯ç§»é™¤é“¾æ¥ï¼Œåªç§»é™¤äº†æ–‡ä»¶åå’Œ i èŠ‚ç‚¹å·ä¹‹é—´çš„è¿æ¥ï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰é“¾æ¥äº†ï¼ŒUnix ä¼šåˆ é™¤è¯¥æ–‡ä»¶ã€‚ ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:9:3","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#åˆ›å»ºæ–°é“¾æ¥-ln"},{"categories":["æŠ€æœ¯"],"content":" ç¬¦å·é“¾æ¥ï¼šln -sä»¥ä¸Šé“¾æ¥æœ‰ä¸¤ä¸ªé™åˆ¶ï¼š1. ä¸èƒ½ä¸ºç›®å½•åˆ›å»ºé“¾æ¥ï¼Œ2. ä¸èƒ½ä¸ºä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿåˆ›å»ºé“¾æ¥ã€‚ å¦‚æœè¦å®ç°ä»¥ä¸Šéœ€æ±‚ï¼Œéœ€è¦ä½¿ç”¨ ç¬¦å·é“¾æ¥ï¼ˆsymbol link æˆ– symlinkï¼‰ ã€‚ ç¬¦å·é“¾æ¥åŒ…å«çš„ä¸æ˜¯æ–‡ä»¶çš„ i èŠ‚ç‚¹å·ï¼Œè€Œæ˜¯æ–‡ä»¶çš„è·¯å¾„åã€‚å½“è®¿é—®ç¬¦å·é“¾æ¥æ—¶å€™ï¼ŒUnix å€ŸåŠ©è·¯å¾„åæŸ¥æ‰¾æ–‡ä»¶ã€‚ç±»ä¼¼äº Windows çš„å¿«æ·æ–¹å¼ã€‚ shell ls -l /bin/sh # è¾“å‡º /bin/sh æ˜¯ä¸€ä¸ªæŒ‡å‘ /bin/bashæ–‡ä»¶çš„ç¬¦å·é“¾æ¥ lrwxrwxrwx 1 root root 4 Aug 7 2020 /bin/sh -\u003e bash ä¸ºäº†åŒºåˆ†ä¸¤ç§é“¾æ¥ï¼š å¸¸è§„çš„é“¾æ¥ : ç¡¬é“¾æ¥ï¼ˆhard linkï¼‰ ls -l å¯ä»¥æŸ¥çœ‹ç¡¬é“¾æ¥æ•°é‡ï¼Œrm å¯ä»¥ç§»é™¤ç¡¬é“¾æ¥ ç¬¦å·é“¾æ¥ : è½¯é“¾æ¥ï¼ˆsoft linkï¼‰ å¦‚æœä¸€ä¸ªæ–‡ä»¶å­˜åœ¨ç¬¦å·é“¾æ¥ï¼Œåˆ é™¤æ–‡ä»¶ï¼Œç¬¦å·é“¾æ¥ä¸ä¼šè¢«åˆ é™¤ï¼Œä½¿ç”¨æ—¶åˆ™ä¼šæŠ¥é”™ã€‚ å½“ä¸€ä¸ªç›®å½•ä½¿ç”¨ç¬¦å·é“¾æ¥æ—¶ï¼Œcd å’Œ pwd æ—¢å¯ä»¥å°†ç¬¦å·é“¾æ¥è§†ä¸ºä¸€ä¸ªå®ä½“ï¼Œä¹Ÿå¯ä»¥å°†é“¾æ¥ä½œä¸ºçœŸå®ç›®å½•çš„ä¸€ä¸ªè·³æ¿ã€‚ -L ï¼ˆlogicalï¼Œ é€»è¾‘ï¼‰ã€-Pï¼ˆphysicalï¼Œç‰©ç†ï¼‰é€‰é¡¹æŒ‡å®šï¼Œé»˜è®¤ -L ","date":"2022-05-05","objectID":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/:9:4","series":null,"tags":["æŠ˜è…¾","unix","linux"],"title":"Unixæ–‡ä»¶,åˆ«åç­‰ç›¸å…³","uri":"/posts/unixs/unix%E6%96%87%E4%BB%B6%E5%88%AB%E5%90%8D%E7%9B%B8%E5%85%B3/#ç¬¦å·é“¾æ¥ln--s"},{"categories":["è¯—æ­Œ"],"content":"Tiger got to hunt, bird got to fly; Man got to sit and wonder â€˜why, why, why?â€™ Tiger got to sleep, bird got to land; Man got to tell himself he understand. â€” Kurt Vonnegut ç¿»è¯‘ï¼š è™çŒé¸Ÿé£äººç–‘æƒ‘ï¼šä¸ºå•¥ä¸ºå•¥ä¸ºå•¥æï¼Ÿ è™æ¯é¸Ÿæ†©äººè‡ªè¯­ï¼šå¥½å‘—ç®—æˆ‘æ‡‚äº†å‘—ã€‚ ","date":"2021-12-24","objectID":"/posts/mess/tiger-got-to-hunt/:0:0","series":null,"tags":["è¯—æ­Œ"],"title":"Tiger Got to Hunt","uri":"/posts/mess/tiger-got-to-hunt/#"},{"categories":["æŠ€æœ¯"],"content":" ç›®æ ‡wsl å¯ä»¥ä½¿ç”¨ win10 çš„ä»£ç†ã€‚ ","date":"2021-12-11","objectID":"/posts/wsl%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/:1:0","series":null,"tags":["ä»£ç†","æŠ˜è…¾","wsl"],"title":"Wslè®¾ç½®ä»£ç†","uri":"/posts/wsl%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/#ç›®æ ‡"},{"categories":["æŠ€æœ¯"],"content":" ç¯å¢ƒè¯´æ˜win10 + å°é£æœº + wsl2 ","date":"2021-12-11","objectID":"/posts/wsl%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/:2:0","series":null,"tags":["ä»£ç†","æŠ˜è…¾","wsl"],"title":"Wslè®¾ç½®ä»£ç†","uri":"/posts/wsl%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/#ç¯å¢ƒè¯´æ˜"},{"categories":["æŠ€æœ¯"],"content":" æ­¥éª¤ WSL ä¸­è·å–å®¿ä¸»æœº IP WSL æ¯æ¬¡å¯åŠ¨çš„æ—¶å€™éƒ½ä¼šæœ‰ä¸åŒçš„ IP åœ°å€ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ç›´æ¥ç”¨é™æ€çš„æ–¹å¼æ¥è®¾ç½®ä»£ç†ã€‚WSL2 ä¼šæŠŠ IP å†™åœ¨ /etc/resolv.conf ä¸­ï¼Œå› æ­¤å¯ä»¥ç”¨ cat /etc/resolv.conf | grep nameserver | awk '{ print $2 }' è¿™æ¡æŒ‡ä»¤è·å¾—å®¿ä¸»æœº IP ã€‚ WSL2 è‡ªå·±çš„ IP å¯ä»¥ç”¨ hostname -I | awk '{print $1}' å¾—åˆ°ã€‚ è®¾ç½®ä»£ç† æœ‰äº†å®¿ä¸»æœº IP ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹å¼è®¾ç½®ä»£ç†äº†ã€‚è¿™é‡Œç«¯å£éœ€è¦è‡ªå·±å¡«å†™ï¼Œè€Œä¸”åˆ«å¿˜äº†ä»£ç†è½¯ä»¶ä¸­è®¾ç½®å…è®¸æ¥è‡ªå±€åŸŸç½‘çš„è¿æ¥ã€‚ shell export http_proxy='http://\u003cWindows IP\u003e:\u003cPort\u003e' export https_proxy='http://\u003cWindows IP\u003e:\u003cPort\u003e' è¿™ç§è®¾ç½®æ–¹å¼æ¯æ¬¡é‡å¯ç»ˆç«¯éƒ½å¾—é‡æ–°è®¾ç½®ä¸€éï¼Œè€Œä¸” IP è¿˜å¾—è‡ªå·±æ‰‹æ‰“ï¼Œè¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œè¿™ç§æ—¶å€™å°±å¾—é è„šæœ¬äº†ï¼ è„šæœ¬å®ç° shell #!/bin/sh hostip=$(cat /etc/resolv.conf | grep nameserver | awk '{ print $2 }') wslip=$(hostname -I | awk '{print $1}') port=\u003cPORT\u003e PROXY_HTTP=\"http://${hostip}:${port}\" set_proxy(){ export http_proxy=\"${PROXY_HTTP}\" export HTTP_PROXY=\"${PROXY_HTTP}\" export https_proxy=\"${PROXY_HTTP}\" export HTTPS_proxy=\"${PROXY_HTTP}\" } unset_proxy(){ unset http_proxy unset HTTP_PROXY unset https_proxy unset HTTPS_PROXY } test_setting(){ echo \"Host ip:\" ${hostip} echo \"WSL ip:\" ${wslip} echo \"Current proxy:\" $https_proxy } if [ \"$1\" = \"set\" ] then set_proxy elif [ \"$1\" = \"unset\" ] then unset_proxy elif [ \"$1\" = \"test\" ] then test_setting else echo \"Unsupported arguments.\" fi ç¬¬ 4 è¡Œ è®°å¾—æ¢æˆè‡ªå·±å®¿ä¸»æœºä»£ç†çš„ç«¯å£ï¼ï¼ï¼ï¼ï¼ï¼ git å®ç°ä»£ç† å¦‚æœå¸Œæœ› git ä¹Ÿèƒ½é€šè¿‡ä»£ç†ï¼Œå¯ä»¥åˆ†åˆ«åœ¨ set_proxy å’Œ unset_proxy å‡½æ•°ä¸­åŠ ä¸Šå¦‚ä¸‹å‘½ä»¤ shell // æ·»åŠ ä»£ç† git config --global http.proxy \"${PROXY_HTTP}\" git config --global https.proxy \"${PROXY_HTTP}\" // ç§»é™¤ä»£ç† git config --global --unset http.proxy git config --global --unset https.proxy åˆ†åˆ«åŠ åˆ°ä¸Šè¾¹è„šæœ¬å¯¹åº”ä½ç½®å³å¯ã€‚ ä¹‹åè¿è¡Œ . ./proxy.sh set å°±å¯ä»¥è‡ªåŠ¨è®¾ç½®ä»£ç†äº†ã€‚unset å¯ä»¥å–æ¶ˆä»£ç†ï¼Œtest å¯ä»¥æŸ¥çœ‹ä»£ç†çŠ¶æ€ï¼Œèƒ½å¤Ÿç”¨æ¥æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦è¢«æ­£ç¡®ä¿®æ”¹ã€‚ è¿è¡Œçš„æ—¶å€™ä¸è¦å¿˜è®°ä¹‹å‰çš„ .ï¼Œæˆ–è€…ä½¿ç”¨ source ./proxy.sh setï¼Œåªæœ‰è¿™æ ·æ‰èƒ½å¤Ÿä¿®æ”¹ç¯å¢ƒå˜é‡ã€‚ ç›´æ¥è¿è¡Œ ./proxy.sh set æˆ–è€… sh proxy.sh setï¼Œè¿™æ ·ä¼šæ˜¯è¿è¡Œåœ¨ä¸€ä¸ªå­ shell ä¸­ï¼Œå¯¹å½“å‰ shell æ²¡æœ‰æ•ˆæœã€‚ è‡ªåŠ¨æ‰§è¡Œ å¦å¤–å¯ä»¥åœ¨ ~/.bashrc ä¸­é€‰æ‹©æ€§çš„åŠ ä¸Šä¸‹é¢ä¸¤å¥è¯ï¼Œè®°å¾—å°†é‡Œé¢çš„è·¯å¾„ä¿®æ”¹æˆä½ æ”¾è¿™ä¸ªè„šæœ¬çš„è·¯å¾„ã€‚ shell alias proxy=\"source /path/to/proxy.sh\" . /path/to/proxy.sh set ç¬¬ä¸€å¥è¯å¯ä»¥ä¸ºè¿™ä¸ªè„šæœ¬è®¾ç½®åˆ«å proxyï¼Œè¿™æ ·åœ¨ä»»ä½•è·¯å¾„ä¸‹éƒ½å¯ä»¥é€šè¿‡ proxy å‘½ä»¤ä½¿ç”¨è¿™ä¸ªè„šæœ¬äº†ï¼Œä¹‹ååœ¨ä»»ä½•è·¯å¾„ä¸‹ï¼Œéƒ½å¯ä»¥éšæ—¶éƒ½å¯ä»¥é€šè¿‡è¾“å…¥ proxy unset æ¥æš‚æ—¶å–æ¶ˆä»£ç†ã€‚ ç¬¬äºŒå¥è¯å°±æ˜¯åœ¨æ¯æ¬¡ shell å¯åŠ¨çš„æ—¶å€™è¿è¡Œè¯¥è„šæœ¬å®ç°è‡ªåŠ¨è®¾ç½®ä»£ç†ï¼Œè¿™æ ·ä»¥åä¸ç”¨é¢å¤–æ“ä½œå°±é»˜è®¤è®¾ç½®å¥½ä»£ç†å•¦~ é˜²ç«å¢™è®¾ç½® å¦‚æœå‰é¢å®Œæˆåå·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œé‚£ä¹ˆä¸‹é¢å°±ä¸ç”¨ç®¡äº†ã€‚å¦‚æœä½ ä»£ç†å·²ç»è®¾ç½®æ­£ç¡®äº†ï¼Œå°¤å…¶æ˜¯å·²ç»å…è®¸æ¥è‡ªå±€åŸŸç½‘çš„è®¿é—®ï¼Œä½†æ˜¯ä¾æ—§æ— æ³•æ­£å¸¸è®¿é—®ï¼Œä»£ç†çš„è½¯ä»¶çš„ç¡®ä¹Ÿæ²¡æ”¶åˆ°è¯·æ±‚ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½æ˜¯è¢« Windows çš„é˜²ç«å¢™ç»™æ‹¦æˆªäº†ã€‚ å¯ä»¥å…ˆå°è¯• ping å®¿ä¸»æœº ip å’Œ telnet ä»£ç†çš„ç«¯å£ï¼Œæ£€æŸ¥æ˜¯å¦è¿é€šã€‚å¦‚æœæ— æ³•è¿é€šï¼Œåˆ™å¤šåŠæ˜¯é˜²ç«å¢™çš„é—®é¢˜ã€‚ å¯ä»¥å°è¯•åœ¨æ§åˆ¶é¢æ¿çš„é˜²ç«å¢™é¢æ¿å·¦ä¾§â€œå…è®¸åº”ç”¨æˆ–åŠŸèƒ½é€šè¿‡é˜²ç«å¢™â€ï¼Œå³ä¸Šè¿°ç•Œé¢ä¸­ï¼Œæ‰“ä¸Šå‹¾å…è®¸ä»£ç†è½¯ä»¶é€šè¿‡é˜²ç«å¢™ã€‚ æˆ–è€…å¯ä»¥å°è¯•åœ¨é«˜çº§è®¾ç½®ä¸­ï¼Œå…¥ç«™è§„åˆ™ä¸­æ–°å»ºä¸€ä¸ªç›¸å…³è§„åˆ™ï¼Œå¦‚æœä½ ä¸æ˜¯å¾ˆäº†è§£ï¼Œå¯ä»¥å…è®¸ä»»ä½•ç¨‹åºçš„ä»»ä½•åè®®ï¼Œè¿œç¨‹ IP ä¸º 172.16.0.0/12 åŠ 192.168.0.0/16 çš„å…¥ç«™è¯·æ±‚ã€‚ ä½¿ç”¨ PowerShell å‘½ä»¤è¡Œåˆ›å»ºä¸€æ¡ç»™ WSL ç½‘å¡çš„é˜²ç«å¢™ç­–ç•¥ï¼š powershell New-NetFirewallRule -DisplayName \"WSL\" -Direction Inbound -InterfaceAlias \"vEthernet (WSL)\" -Action Allow ","date":"2021-12-11","objectID":"/posts/wsl%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/:3:0","series":null,"tags":["ä»£ç†","æŠ˜è…¾","wsl"],"title":"Wslè®¾ç½®ä»£ç†","uri":"/posts/wsl%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/#æ­¥éª¤"},{"categories":["æŠ€æœ¯"],"content":" å‚è€ƒæ–‡ç« ä¸»è¦éƒ¨åˆ† é˜²ç«å¢™éƒ¨åˆ† é˜²ç«å¢™æ‰‹åŠ¨è®¾ç½® ","date":"2021-12-11","objectID":"/posts/wsl%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/:4:0","series":null,"tags":["ä»£ç†","æŠ˜è…¾","wsl"],"title":"Wslè®¾ç½®ä»£ç†","uri":"/posts/wsl%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/#å‚è€ƒæ–‡ç« "},{"categories":["ç”Ÿæ´»","æŠ€æœ¯"],"content":" å®éªŒå½’çº³ æ¨¡å‹æ¨æ¼” ä»¿çœŸæ¨¡æ‹Ÿ æ•°æ®å¯†é›†å‹ç§‘å­¦å‘ç° æ‹“å±•é˜…è¯» ","date":"2021-11-24","objectID":"/posts/mess/%E7%A7%91%E5%AD%A6%E7%A0%94%E7%A9%B6%E7%9A%844%E7%A7%8D%E8%8C%83%E5%BC%8F/:0:0","series":null,"tags":["æ—¥å¸¸","äººé—´æ¸…é†’"],"title":"ç§‘å­¦ç ”ç©¶çš„4ç§èŒƒå¼","uri":"/posts/mess/%E7%A7%91%E5%AD%A6%E7%A0%94%E7%A9%B6%E7%9A%844%E7%A7%8D%E8%8C%83%E5%BC%8F/#"},{"categories":["ç”Ÿæ´»"],"content":" å¤šå·´èƒºæ¨¡å¼ï¼š åƒã€é€›ã€ä¹°ã€çœ‹ ææƒ§é©±åŠ¨æ¨¡å¼ï¼š æ²¡æœ‰åŠæ³•æ”¾æ‰‹åšäº‹ï¼Œç»å‰é¡¾åã€‚ åˆ›é€ åŠ›æ¨¡å¼ï¼š å…³æ³¨ç‚¹ä¸åœ¨å†…åœ¨çš„çŠ¶æ€ï¼Œä¹Ÿä¸æ˜¯å»å¯»æ‰¾å¿«ä¹ï¼Œè€Œæ˜¯æƒ³åˆ°è¦åšæˆæŸäº‹ï¼Œå…³æ³¨ç‚¹é›†ä¸­äºå½“ä¸‹æ­£åœ¨åšçš„äº‹æƒ…ã€‚é€è¿‡åšä¸€ä»¶äº‹ï¼Œå°†è‡ªå·±çš„æ³¨æ„åŠ›ï¼Œä»å†…å¿ƒçš„å°æ¯›ç—…å°çº ç»“è½¬ç§»åˆ°äº‹æƒ…æœ¬èº«ã€‚ ","date":"2021-11-19","objectID":"/posts/mess/%E4%BA%BA%E7%94%9F3%E5%A4%A7%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/:0:0","series":null,"tags":["æ—¥å¸¸","äººé—´æ¸…é†’","å¾—æ„å¿˜å½¢"],"title":"äººç”Ÿ3å¤§è¡Œä¸ºæ¨¡å¼","uri":"/posts/mess/%E4%BA%BA%E7%94%9F3%E5%A4%A7%E8%A1%8C%E4%B8%BA%E6%A8%A1%E5%BC%8F/#"},{"categories":["ç”Ÿæ´»"],"content":" ä»¥å„ç§å„æ ·çš„æ–¹å¼è¡¨ç°ä¸åˆ«äººä¸ä¸€æ ·ï¼Œæ¥è¥é€ ä¸€ç§ä¼˜è¶Šæ„Ÿï¼ˆè¥é€ ä¼˜è¶Šæ„Ÿçš„è¯±æƒ‘ï¼‰ é¢å¯¹é™Œç”Ÿäº‹ç‰©çš„æœ¬èƒ½çš„ææƒ§å’Œæ’æŒ¤ ç”±äºè‡ªèº«åŒ®ä¹æ„Ÿï¼Œæœ¬èƒ½æ€§çš„å«‰å¦’ ","date":"2021-11-19","objectID":"/posts/mess/%E4%BA%BA%E7%94%9F3%E5%A4%A7%E5%8E%9F%E7%BD%AA/:0:0","series":null,"tags":["æ—¥å¸¸","äººé—´æ¸…é†’","å¾—æ„å¿˜å½¢"],"title":"äººç”Ÿ3å¤§åŸç½ª","uri":"/posts/mess/%E4%BA%BA%E7%94%9F3%E5%A4%A7%E5%8E%9F%E7%BD%AA/#"},{"categories":["æŠ€æœ¯"],"content":" å¼€å¯ä¸å…³é—­ nginxå…³é—­ nginx nginx -s stop é‡æ–°åŠ è½½ nginx -s relaod ","date":"2021-11-19","objectID":"/posts/php-web/nginx%E7%9B%B8%E5%85%B3/:0:1","series":null,"tags":["nginx"],"title":"nginxç›¸å…³","uri":"/posts/php-web/nginx%E7%9B%B8%E5%85%B3/#å¼€å¯ä¸å…³é—­-nginx"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®æ–‡ä»¶ å…¨å±€é…ç½® å½±å“ nginx æœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤ egï¼šworker_processes 1; // è¶Šå¤§ å¹¶å‘è¶Šå¤§ event å— nginx æœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ eg: worker_connections 1024; // æ”¯æŒçš„æœ€å¤§è¿æ¥æ•° http å— http å…¨å±€å— server å— ","date":"2021-11-19","objectID":"/posts/php-web/nginx%E7%9B%B8%E5%85%B3/:0:2","series":null,"tags":["nginx"],"title":"nginxç›¸å…³","uri":"/posts/php-web/nginx%E7%9B%B8%E5%85%B3/#é…ç½®æ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®å®ä¾‹ åå‘ä»£ç† è®¿é—® http://yii2.test:80 å®é™…è®¿é—®çš„æ˜¯ http://vdong.test:8080 conf server { listen 80; server_name yii2.test *.yii2.test; root \"D:/laragon/www/yii2/web/\"; location / { proxy_pass http://vdong.test:8080; # ... } } æ ¹æ®ç›®å½• è·³è½¬ ä¸åŒ æœåŠ¡å™¨ conf location ~ /yii/ { proxy_pass http://yii2-base.test; } location ~ /laravel/ { proxy_pass http://laravel.test:8080; } è´Ÿè½½å‡è¡¡ conf http{ .... upstream php_upstream { # ip_hash; # fair; server 127.0.0.1:9001 weight=1 max_fails=1 fail_timeout=1; server 127.0.0.1:9002 weight=1 max_fails=1 fail_timeout=1; } .... } server{ .... location / { proxy_pass http://php_upstream; try_files $uri $uri/ /index.php$is_args$args; autoindex on; } .... } è´Ÿè½½ç­–ç•¥ï¼š è½®è¯¢ï¼ˆé»˜è®¤ï¼‰ æ—¶é—´é¡ºåº é€ä¸€åˆ†é…ï¼Œdown äº† å‰”é™¤ weight æƒé‡ æ ¹æ®æƒé‡ åˆ†é… ip_hash è§£å†³ session å…±äº«é—®é¢˜ fair ( ç¬¬ä¸‰æ–¹ ) æ ¹æ®å“åº”æ—¶é—´åˆ†é…ï¼Œè¶ŠçŸ­è¶Šå¤šã€‚ åŠ¨é™åˆ†ç¦» åŠ¨æ€è¯·æ±‚å’Œé™æ€è¯·æ±‚åˆ†ç¦» location æ ¹æ®åç¼€å å®ç°è½¬å‘ ï¼Œ expires ç¼“å­˜æ—¶é—´ 3d 3 å¤© conf location /www/{ root /data/; index index.html index.htm; } location /image/ { root /data/; autoindex on; } é«˜å¯ç”¨é›†ç¾¤ ä¸¤å° nginxï¼› keepalivedï¼›è™šæ‹Ÿ ip keepalived å…¶å® å¯¹äºä¸¤å° ä¸»å¤‡æœåŠ¡å™¨çš„ï¼Œ è·¯ç”±ä½œç”¨ shell yum install keepalived -y é…ç½®åœ¨ etc/keepalived/keepalived.conf ã€‚ ä¿®æ”¹é…ç½® åœ¨ /usr/local/src æ·»åŠ æ£€æµ‹è„šæœ¬ ","date":"2021-11-19","objectID":"/posts/php-web/nginx%E7%9B%B8%E5%85%B3/:0:3","series":null,"tags":["nginx"],"title":"nginxç›¸å…³","uri":"/posts/php-web/nginx%E7%9B%B8%E5%85%B3/#é…ç½®å®ä¾‹"},{"categories":["æŠ€æœ¯"],"content":" nginx åŸç†ä¸€ä¸ª master å¤šä¸ª worker master ç®¡ç† ç›‘æ§ï¼Œ worker äº‰æŠ¢ client çƒ­éƒ¨ç½² ç‹¬ç«‹è¿›ç¨‹ï¼Œä¸€ä¸ªå‡ºé—®é¢˜ï¼Œä¸å½±å“å…¶ä»–çš„ io å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œ æ¯ä¸ª worker éƒ½æ˜¯ ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œé€šè¿‡å¼‚æ­¥éé˜»å¡çš„æ–¹å¼æ¥å¤„ç†è¯·æ±‚ã€‚ worker å’Œ cpu æ ¸å¿ƒæ•°é‡ç›¸ç­‰ï¼Œcpu æ€§èƒ½å……åˆ†å‘æŒ¥ã€‚ worker_connection è¿æ¥æ•° å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œ å ç”¨äº† 2 / 4 ä¸ªè¿æ¥æ•°ã€‚é™æ€ ä¸ç»è¿‡ php-fpm çš„ ã€‚ nginx ä¸€ä¸ª masterï¼Œ 4 ä¸ª workerï¼Œ æ¯ä¸ª worker æ”¯æŒæœ€å¤§è¿æ¥æ•° 1024ï¼Œç›®å‰æœ€å¤§å¹¶å‘æ•°æ˜¯å¤šå°‘ï¼Ÿ 4*1024/(2/4) é™æ€è®¿é—® ï¼š worker_connection * worker_processes / 2 åŠ¨æ€è®¿é—®ï¼š worker_connection * worker_processes / 4 ","date":"2021-11-19","objectID":"/posts/php-web/nginx%E7%9B%B8%E5%85%B3/:0:4","series":null,"tags":["nginx"],"title":"nginxç›¸å…³","uri":"/posts/php-web/nginx%E7%9B%B8%E5%85%B3/#nginx-åŸç†"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag \u003ctagname\u003eç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a \u003ctagname\u003e -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin \u003ctagname\u003eå¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d \u003ctagname\u003eå¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/\u003ctagname\u003eå¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#å¸¸ç”¨å‘½ä»¤"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#clone-ç‰¹å®šåˆ†æ”¯"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ—¥å¿—æŸ¥çœ‹"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ·»åŠ è¿œç¨‹åº“"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#ç¬¬ä¸€æ¬¡æ¨é€"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ¯”è¾ƒå·®å¼‚"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#é…ç½®åˆ«å"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ ‡ç­¾"},{"categories":["æŠ€æœ¯"],"content":" å¸¸ç”¨å‘½ä»¤ clone ç‰¹å®šåˆ†æ”¯ shell git clone -b v5.12 git@gitee.com:xxx/xxx.git æ—¥å¿—æŸ¥çœ‹ shell git log --graph --pretty=oneline --abbrev-commit æ·»åŠ è¿œç¨‹åº“ shell git remote add origin git@github.com:michaelliao/learngit.git ç¬¬ä¸€æ¬¡æ¨é€ shell git push -u origin master æ¯”è¾ƒå·®å¼‚ shell git diff readme.txt é…ç½®åˆ«å shell git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u003c%an\u003e%Creset' --abbrev-commit\" git config --global alias.lg \"log --graph --pretty=oneline --abbrev-commit\" git config --global alias.st \"status\" git config --global alias.ck \"checkout\" git config --global alias.br \"branch\" æ ‡ç­¾ å‘½ä»¤git tag ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a -m \"blablabla...\"å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ è·å–ä»Šå¤©çš„æ—¥å¿— shell git log --since=\"6am\" ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#è·å–ä»Šå¤©çš„æ—¥å¿—"},{"categories":["æŠ€æœ¯"],"content":" é”™è¯¯è®°å½• pull æˆ– merge æ—¶é”™è¯¯fatal: refusing to merge unrelated histories è§£å†³æ–¹æ¡ˆï¼š åœ¨ä½ æ“ä½œå‘½ä»¤åé¢åŠ â€“allow-unrelated-histories eg: git merge master â€“allow-unrelated-histories git pull origin master â€“allow-unrelated-histories gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶ (.gitignoreæ–‡ä»¶æ— æ•ˆ)è§£å†³æ–¹æ¡ˆï¼š git rm -r --cached è¦å¿½ç•¥çš„æ–‡ä»¶Â (å¦‚:Â git rm -r --cached build/*, å¦‚ä¿®æ”¹åˆ—è¡¨ä¸­çš„å†…å®¹å…¨éƒ¨æ˜¯ä¸éœ€è¦çš„, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æœ€æœ€ç®€å•çš„å‘½ä»¤æå®šgit rm -r --cached .) git add . git commit -m \" commet for commit .....\" git push æ–‡ä»¶åå¤§å°å†™é—®é¢˜é»˜è®¤å¯¹å¤§å°å†™ä¸æ•æ„Ÿ æ–‡ä»¶åç›¸åŒ é€ æˆÂ Changes not staged for commit é”™è¯¯ è§£å†³æ–¹æ¡ˆï¼š shell git config --global core.ignorecase false æ¢è¡Œç¬¦é—®é¢˜winä¸Šä¼šæç¤ºCRLF will be replaced by LF è§£å†³æ–¹æ¡ˆï¼š https://stackmirror.com/questions/5834014 shell git config --global core.autocrlf input ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message shell git commit --amend æ–‡ä»¶åä¸­æ–‡ \\xxx å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç  shell git config core.quotepath false --global åˆ é™¤è¿œç¨‹åˆ†æ”¯, åè¿˜æ˜¾ç¤º shell git push origin -d git remote prune origin ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#é”™è¯¯è®°å½•"},{"categories":["æŠ€æœ¯"],"content":" é”™è¯¯è®°å½• pull æˆ– merge æ—¶é”™è¯¯fatal: refusing to merge unrelated histories è§£å†³æ–¹æ¡ˆï¼š åœ¨ä½ æ“ä½œå‘½ä»¤åé¢åŠ â€“allow-unrelated-histories eg: git merge master â€“allow-unrelated-histories git pull origin master â€“allow-unrelated-histories gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶ (.gitignoreæ–‡ä»¶æ— æ•ˆ)è§£å†³æ–¹æ¡ˆï¼š git rm -r --cached è¦å¿½ç•¥çš„æ–‡ä»¶Â (å¦‚:Â git rm -r --cached build/*, å¦‚ä¿®æ”¹åˆ—è¡¨ä¸­çš„å†…å®¹å…¨éƒ¨æ˜¯ä¸éœ€è¦çš„, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æœ€æœ€ç®€å•çš„å‘½ä»¤æå®šgit rm -r --cached .) git add . git commit -m \" commet for commit .....\" git push æ–‡ä»¶åå¤§å°å†™é—®é¢˜é»˜è®¤å¯¹å¤§å°å†™ä¸æ•æ„Ÿ æ–‡ä»¶åç›¸åŒ é€ æˆÂ Changes not staged for commit é”™è¯¯ è§£å†³æ–¹æ¡ˆï¼š shell git config --global core.ignorecase false æ¢è¡Œç¬¦é—®é¢˜winä¸Šä¼šæç¤ºCRLF will be replaced by LF è§£å†³æ–¹æ¡ˆï¼š https://stackmirror.com/questions/5834014 shell git config --global core.autocrlf input ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message shell git commit --amend æ–‡ä»¶åä¸­æ–‡ \\xxx å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç  shell git config core.quotepath false --global åˆ é™¤è¿œç¨‹åˆ†æ”¯, åè¿˜æ˜¾ç¤º shell git push origin -d git remote prune origin ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#pull-æˆ–-merge-æ—¶é”™è¯¯"},{"categories":["æŠ€æœ¯"],"content":" é”™è¯¯è®°å½• pull æˆ– merge æ—¶é”™è¯¯fatal: refusing to merge unrelated histories è§£å†³æ–¹æ¡ˆï¼š åœ¨ä½ æ“ä½œå‘½ä»¤åé¢åŠ â€“allow-unrelated-histories eg: git merge master â€“allow-unrelated-histories git pull origin master â€“allow-unrelated-histories gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶ (.gitignoreæ–‡ä»¶æ— æ•ˆ)è§£å†³æ–¹æ¡ˆï¼š git rm -r --cached è¦å¿½ç•¥çš„æ–‡ä»¶Â (å¦‚:Â git rm -r --cached build/*, å¦‚ä¿®æ”¹åˆ—è¡¨ä¸­çš„å†…å®¹å…¨éƒ¨æ˜¯ä¸éœ€è¦çš„, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æœ€æœ€ç®€å•çš„å‘½ä»¤æå®šgit rm -r --cached .) git add . git commit -m \" commet for commit .....\" git push æ–‡ä»¶åå¤§å°å†™é—®é¢˜é»˜è®¤å¯¹å¤§å°å†™ä¸æ•æ„Ÿ æ–‡ä»¶åç›¸åŒ é€ æˆÂ Changes not staged for commit é”™è¯¯ è§£å†³æ–¹æ¡ˆï¼š shell git config --global core.ignorecase false æ¢è¡Œç¬¦é—®é¢˜winä¸Šä¼šæç¤ºCRLF will be replaced by LF è§£å†³æ–¹æ¡ˆï¼š https://stackmirror.com/questions/5834014 shell git config --global core.autocrlf input ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message shell git commit --amend æ–‡ä»¶åä¸­æ–‡ \\xxx å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç  shell git config core.quotepath false --global åˆ é™¤è¿œç¨‹åˆ†æ”¯, åè¿˜æ˜¾ç¤º shell git push origin -d git remote prune origin ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶-gitignoreæ–‡ä»¶æ— æ•ˆ"},{"categories":["æŠ€æœ¯"],"content":" é”™è¯¯è®°å½• pull æˆ– merge æ—¶é”™è¯¯fatal: refusing to merge unrelated histories è§£å†³æ–¹æ¡ˆï¼š åœ¨ä½ æ“ä½œå‘½ä»¤åé¢åŠ â€“allow-unrelated-histories eg: git merge master â€“allow-unrelated-histories git pull origin master â€“allow-unrelated-histories gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶ (.gitignoreæ–‡ä»¶æ— æ•ˆ)è§£å†³æ–¹æ¡ˆï¼š git rm -r --cached è¦å¿½ç•¥çš„æ–‡ä»¶Â (å¦‚:Â git rm -r --cached build/*, å¦‚ä¿®æ”¹åˆ—è¡¨ä¸­çš„å†…å®¹å…¨éƒ¨æ˜¯ä¸éœ€è¦çš„, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æœ€æœ€ç®€å•çš„å‘½ä»¤æå®šgit rm -r --cached .) git add . git commit -m \" commet for commit .....\" git push æ–‡ä»¶åå¤§å°å†™é—®é¢˜é»˜è®¤å¯¹å¤§å°å†™ä¸æ•æ„Ÿ æ–‡ä»¶åç›¸åŒ é€ æˆÂ Changes not staged for commit é”™è¯¯ è§£å†³æ–¹æ¡ˆï¼š shell git config --global core.ignorecase false æ¢è¡Œç¬¦é—®é¢˜winä¸Šä¼šæç¤ºCRLF will be replaced by LF è§£å†³æ–¹æ¡ˆï¼š https://stackmirror.com/questions/5834014 shell git config --global core.autocrlf input ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message shell git commit --amend æ–‡ä»¶åä¸­æ–‡ \\xxx å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç  shell git config core.quotepath false --global åˆ é™¤è¿œç¨‹åˆ†æ”¯, åè¿˜æ˜¾ç¤º shell git push origin -d git remote prune origin ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ–‡ä»¶åå¤§å°å†™é—®é¢˜"},{"categories":["æŠ€æœ¯"],"content":" é”™è¯¯è®°å½• pull æˆ– merge æ—¶é”™è¯¯fatal: refusing to merge unrelated histories è§£å†³æ–¹æ¡ˆï¼š åœ¨ä½ æ“ä½œå‘½ä»¤åé¢åŠ â€“allow-unrelated-histories eg: git merge master â€“allow-unrelated-histories git pull origin master â€“allow-unrelated-histories gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶ (.gitignoreæ–‡ä»¶æ— æ•ˆ)è§£å†³æ–¹æ¡ˆï¼š git rm -r --cached è¦å¿½ç•¥çš„æ–‡ä»¶Â (å¦‚:Â git rm -r --cached build/*, å¦‚ä¿®æ”¹åˆ—è¡¨ä¸­çš„å†…å®¹å…¨éƒ¨æ˜¯ä¸éœ€è¦çš„, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æœ€æœ€ç®€å•çš„å‘½ä»¤æå®šgit rm -r --cached .) git add . git commit -m \" commet for commit .....\" git push æ–‡ä»¶åå¤§å°å†™é—®é¢˜é»˜è®¤å¯¹å¤§å°å†™ä¸æ•æ„Ÿ æ–‡ä»¶åç›¸åŒ é€ æˆÂ Changes not staged for commit é”™è¯¯ è§£å†³æ–¹æ¡ˆï¼š shell git config --global core.ignorecase false æ¢è¡Œç¬¦é—®é¢˜winä¸Šä¼šæç¤ºCRLF will be replaced by LF è§£å†³æ–¹æ¡ˆï¼š https://stackmirror.com/questions/5834014 shell git config --global core.autocrlf input ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message shell git commit --amend æ–‡ä»¶åä¸­æ–‡ \\xxx å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç  shell git config core.quotepath false --global åˆ é™¤è¿œç¨‹åˆ†æ”¯, åè¿˜æ˜¾ç¤º shell git push origin -d git remote prune origin ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ¢è¡Œç¬¦é—®é¢˜"},{"categories":["æŠ€æœ¯"],"content":" é”™è¯¯è®°å½• pull æˆ– merge æ—¶é”™è¯¯fatal: refusing to merge unrelated histories è§£å†³æ–¹æ¡ˆï¼š åœ¨ä½ æ“ä½œå‘½ä»¤åé¢åŠ â€“allow-unrelated-histories eg: git merge master â€“allow-unrelated-histories git pull origin master â€“allow-unrelated-histories gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶ (.gitignoreæ–‡ä»¶æ— æ•ˆ)è§£å†³æ–¹æ¡ˆï¼š git rm -r --cached è¦å¿½ç•¥çš„æ–‡ä»¶Â (å¦‚:Â git rm -r --cached build/*, å¦‚ä¿®æ”¹åˆ—è¡¨ä¸­çš„å†…å®¹å…¨éƒ¨æ˜¯ä¸éœ€è¦çš„, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æœ€æœ€ç®€å•çš„å‘½ä»¤æå®šgit rm -r --cached .) git add . git commit -m \" commet for commit .....\" git push æ–‡ä»¶åå¤§å°å†™é—®é¢˜é»˜è®¤å¯¹å¤§å°å†™ä¸æ•æ„Ÿ æ–‡ä»¶åç›¸åŒ é€ æˆÂ Changes not staged for commit é”™è¯¯ è§£å†³æ–¹æ¡ˆï¼š shell git config --global core.ignorecase false æ¢è¡Œç¬¦é—®é¢˜winä¸Šä¼šæç¤ºCRLF will be replaced by LF è§£å†³æ–¹æ¡ˆï¼š https://stackmirror.com/questions/5834014 shell git config --global core.autocrlf input ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message shell git commit --amend æ–‡ä»¶åä¸­æ–‡ \\xxx å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç  shell git config core.quotepath false --global åˆ é™¤è¿œç¨‹åˆ†æ”¯, åè¿˜æ˜¾ç¤º shell git push origin -d git remote prune origin ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message"},{"categories":["æŠ€æœ¯"],"content":" é”™è¯¯è®°å½• pull æˆ– merge æ—¶é”™è¯¯fatal: refusing to merge unrelated histories è§£å†³æ–¹æ¡ˆï¼š åœ¨ä½ æ“ä½œå‘½ä»¤åé¢åŠ â€“allow-unrelated-histories eg: git merge master â€“allow-unrelated-histories git pull origin master â€“allow-unrelated-histories gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶ (.gitignoreæ–‡ä»¶æ— æ•ˆ)è§£å†³æ–¹æ¡ˆï¼š git rm -r --cached è¦å¿½ç•¥çš„æ–‡ä»¶Â (å¦‚:Â git rm -r --cached build/*, å¦‚ä¿®æ”¹åˆ—è¡¨ä¸­çš„å†…å®¹å…¨éƒ¨æ˜¯ä¸éœ€è¦çš„, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æœ€æœ€ç®€å•çš„å‘½ä»¤æå®šgit rm -r --cached .) git add . git commit -m \" commet for commit .....\" git push æ–‡ä»¶åå¤§å°å†™é—®é¢˜é»˜è®¤å¯¹å¤§å°å†™ä¸æ•æ„Ÿ æ–‡ä»¶åç›¸åŒ é€ æˆÂ Changes not staged for commit é”™è¯¯ è§£å†³æ–¹æ¡ˆï¼š shell git config --global core.ignorecase false æ¢è¡Œç¬¦é—®é¢˜winä¸Šä¼šæç¤ºCRLF will be replaced by LF è§£å†³æ–¹æ¡ˆï¼š https://stackmirror.com/questions/5834014 shell git config --global core.autocrlf input ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message shell git commit --amend æ–‡ä»¶åä¸­æ–‡ \\xxx å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç  shell git config core.quotepath false --global åˆ é™¤è¿œç¨‹åˆ†æ”¯, åè¿˜æ˜¾ç¤º shell git push origin -d git remote prune origin ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ–‡ä»¶åä¸­æ–‡-xxx-å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç "},{"categories":["æŠ€æœ¯"],"content":" é”™è¯¯è®°å½• pull æˆ– merge æ—¶é”™è¯¯fatal: refusing to merge unrelated histories è§£å†³æ–¹æ¡ˆï¼š åœ¨ä½ æ“ä½œå‘½ä»¤åé¢åŠ â€“allow-unrelated-histories eg: git merge master â€“allow-unrelated-histories git pull origin master â€“allow-unrelated-histories gitå¦‚ä½•å¿½ç•¥å·²ç»æäº¤çš„æ–‡ä»¶ (.gitignoreæ–‡ä»¶æ— æ•ˆ)è§£å†³æ–¹æ¡ˆï¼š git rm -r --cached è¦å¿½ç•¥çš„æ–‡ä»¶Â (å¦‚:Â git rm -r --cached build/*, å¦‚ä¿®æ”¹åˆ—è¡¨ä¸­çš„å†…å®¹å…¨éƒ¨æ˜¯ä¸éœ€è¦çš„, é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æœ€æœ€ç®€å•çš„å‘½ä»¤æå®šgit rm -r --cached .) git add . git commit -m \" commet for commit .....\" git push æ–‡ä»¶åå¤§å°å†™é—®é¢˜é»˜è®¤å¯¹å¤§å°å†™ä¸æ•æ„Ÿ æ–‡ä»¶åç›¸åŒ é€ æˆÂ Changes not staged for commit é”™è¯¯ è§£å†³æ–¹æ¡ˆï¼š shell git config --global core.ignorecase false æ¢è¡Œç¬¦é—®é¢˜winä¸Šä¼šæç¤ºCRLF will be replaced by LF è§£å†³æ–¹æ¡ˆï¼š https://stackmirror.com/questions/5834014 shell git config --global core.autocrlf input ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„message shell git commit --amend æ–‡ä»¶åä¸­æ–‡ \\xxx å…«è¿›åˆ¶ä¸­æ–‡ä¹±ç  shell git config core.quotepath false --global åˆ é™¤è¿œç¨‹åˆ†æ”¯, åè¿˜æ˜¾ç¤º shell git push origin -d git remote prune origin ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åˆ é™¤è¿œç¨‹åˆ†æ”¯-åè¿˜æ˜¾ç¤º"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€ åœºæ™¯1 ï¼šæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼Œæœª add ï¼Œä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git checkout fileName // or git checkout . åœºæ™¯1.1ï¼š æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶ï¼Œæœªaddï¼Œæƒ³æ”¾å¼ƒæ–°å¢ shell # åˆ é™¤æ–‡ä»¶ rm filename # åˆ é™¤æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å·²ç» git add åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸ä¼šåˆ é™¤ï¼ git clean -xdf # åŒä¸Šï¼Œä½†æ˜¯è¿˜ä¼šå¤„ç†æ–‡ä»¶å¤¹ git clean -xdff åœºæ™¯2ï¼šæ‰§è¡Œäº† add , ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git reset HEAD \u003cfileName\u003e åœºæ™¯3ï¼šcommit äº†ï¼Œæƒ³ä¿®æ”¹ï¼Œä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤ shell git add fileName git commit -amend -m 'è¯´æ˜' åœºæ™¯4ï¼šcommit äº†ï¼Œæƒ³æ’¤é”€åˆ°æŸæ¬¡ commit shell git reset [--hard|soft|mixed|merge|keep] [commit|HEAD] åœºæ™¯5ï¼š å·²ç» push äº†ï¼Œæ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬ shell # æŸ¥çœ‹æ–‡ä»¶ç‰ˆæœ¬ git log \u003cfilename\u003e git checkout \u003ccommitID\u003e \u003cfileName\u003e åœºæ™¯6ï¼š æ’¤é”€æœ€åä¸€æ¬¡æäº¤ shell git revert HEAD // æ˜¯ååšäº†ç›®æ ‡ç‰ˆæœ¬ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„commits git reset --hard HEAD^ // ä¼šåˆ é™¤ç›®æ ‡ç‰ˆæœ¬åçš„ç‰ˆæœ¬ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:3","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ’¤é”€"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€ åœºæ™¯1 ï¼šæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼Œæœª add ï¼Œä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git checkout fileName // or git checkout . åœºæ™¯1.1ï¼š æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶ï¼Œæœªaddï¼Œæƒ³æ”¾å¼ƒæ–°å¢ shell # åˆ é™¤æ–‡ä»¶ rm filename # åˆ é™¤æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å·²ç» git add åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸ä¼šåˆ é™¤ï¼ git clean -xdf # åŒä¸Šï¼Œä½†æ˜¯è¿˜ä¼šå¤„ç†æ–‡ä»¶å¤¹ git clean -xdff åœºæ™¯2ï¼šæ‰§è¡Œäº† add , ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git reset HEAD åœºæ™¯3ï¼šcommit äº†ï¼Œæƒ³ä¿®æ”¹ï¼Œä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤ shell git add fileName git commit -amend -m 'è¯´æ˜' åœºæ™¯4ï¼šcommit äº†ï¼Œæƒ³æ’¤é”€åˆ°æŸæ¬¡ commit shell git reset [--hard|soft|mixed|merge|keep] [commit|HEAD] åœºæ™¯5ï¼š å·²ç» push äº†ï¼Œæ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬ shell # æŸ¥çœ‹æ–‡ä»¶ç‰ˆæœ¬ git log git checkout åœºæ™¯6ï¼š æ’¤é”€æœ€åä¸€æ¬¡æäº¤ shell git revert HEAD // æ˜¯ååšäº†ç›®æ ‡ç‰ˆæœ¬ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„commits git reset --hard HEAD^ // ä¼šåˆ é™¤ç›®æ ‡ç‰ˆæœ¬åçš„ç‰ˆæœ¬ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:3","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åœºæ™¯1-æœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶æœª-add-ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€ åœºæ™¯1 ï¼šæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼Œæœª add ï¼Œä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git checkout fileName // or git checkout . åœºæ™¯1.1ï¼š æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶ï¼Œæœªaddï¼Œæƒ³æ”¾å¼ƒæ–°å¢ shell # åˆ é™¤æ–‡ä»¶ rm filename # åˆ é™¤æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å·²ç» git add åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸ä¼šåˆ é™¤ï¼ git clean -xdf # åŒä¸Šï¼Œä½†æ˜¯è¿˜ä¼šå¤„ç†æ–‡ä»¶å¤¹ git clean -xdff åœºæ™¯2ï¼šæ‰§è¡Œäº† add , ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git reset HEAD åœºæ™¯3ï¼šcommit äº†ï¼Œæƒ³ä¿®æ”¹ï¼Œä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤ shell git add fileName git commit -amend -m 'è¯´æ˜' åœºæ™¯4ï¼šcommit äº†ï¼Œæƒ³æ’¤é”€åˆ°æŸæ¬¡ commit shell git reset [--hard|soft|mixed|merge|keep] [commit|HEAD] åœºæ™¯5ï¼š å·²ç» push äº†ï¼Œæ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬ shell # æŸ¥çœ‹æ–‡ä»¶ç‰ˆæœ¬ git log git checkout åœºæ™¯6ï¼š æ’¤é”€æœ€åä¸€æ¬¡æäº¤ shell git revert HEAD // æ˜¯ååšäº†ç›®æ ‡ç‰ˆæœ¬ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„commits git reset --hard HEAD^ // ä¼šåˆ é™¤ç›®æ ‡ç‰ˆæœ¬åçš„ç‰ˆæœ¬ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:3","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åœºæ™¯11-æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶æœªaddæƒ³æ”¾å¼ƒæ–°å¢"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€ åœºæ™¯1 ï¼šæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼Œæœª add ï¼Œä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git checkout fileName // or git checkout . åœºæ™¯1.1ï¼š æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶ï¼Œæœªaddï¼Œæƒ³æ”¾å¼ƒæ–°å¢ shell # åˆ é™¤æ–‡ä»¶ rm filename # åˆ é™¤æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å·²ç» git add åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸ä¼šåˆ é™¤ï¼ git clean -xdf # åŒä¸Šï¼Œä½†æ˜¯è¿˜ä¼šå¤„ç†æ–‡ä»¶å¤¹ git clean -xdff åœºæ™¯2ï¼šæ‰§è¡Œäº† add , ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git reset HEAD åœºæ™¯3ï¼šcommit äº†ï¼Œæƒ³ä¿®æ”¹ï¼Œä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤ shell git add fileName git commit -amend -m 'è¯´æ˜' åœºæ™¯4ï¼šcommit äº†ï¼Œæƒ³æ’¤é”€åˆ°æŸæ¬¡ commit shell git reset [--hard|soft|mixed|merge|keep] [commit|HEAD] åœºæ™¯5ï¼š å·²ç» push äº†ï¼Œæ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬ shell # æŸ¥çœ‹æ–‡ä»¶ç‰ˆæœ¬ git log git checkout åœºæ™¯6ï¼š æ’¤é”€æœ€åä¸€æ¬¡æäº¤ shell git revert HEAD // æ˜¯ååšäº†ç›®æ ‡ç‰ˆæœ¬ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„commits git reset --hard HEAD^ // ä¼šåˆ é™¤ç›®æ ‡ç‰ˆæœ¬åçš„ç‰ˆæœ¬ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:3","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åœºæ™¯2æ‰§è¡Œäº†-add--ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€ åœºæ™¯1 ï¼šæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼Œæœª add ï¼Œä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git checkout fileName // or git checkout . åœºæ™¯1.1ï¼š æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶ï¼Œæœªaddï¼Œæƒ³æ”¾å¼ƒæ–°å¢ shell # åˆ é™¤æ–‡ä»¶ rm filename # åˆ é™¤æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å·²ç» git add åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸ä¼šåˆ é™¤ï¼ git clean -xdf # åŒä¸Šï¼Œä½†æ˜¯è¿˜ä¼šå¤„ç†æ–‡ä»¶å¤¹ git clean -xdff åœºæ™¯2ï¼šæ‰§è¡Œäº† add , ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git reset HEAD åœºæ™¯3ï¼šcommit äº†ï¼Œæƒ³ä¿®æ”¹ï¼Œä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤ shell git add fileName git commit -amend -m 'è¯´æ˜' åœºæ™¯4ï¼šcommit äº†ï¼Œæƒ³æ’¤é”€åˆ°æŸæ¬¡ commit shell git reset [--hard|soft|mixed|merge|keep] [commit|HEAD] åœºæ™¯5ï¼š å·²ç» push äº†ï¼Œæ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬ shell # æŸ¥çœ‹æ–‡ä»¶ç‰ˆæœ¬ git log git checkout åœºæ™¯6ï¼š æ’¤é”€æœ€åä¸€æ¬¡æäº¤ shell git revert HEAD // æ˜¯ååšäº†ç›®æ ‡ç‰ˆæœ¬ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„commits git reset --hard HEAD^ // ä¼šåˆ é™¤ç›®æ ‡ç‰ˆæœ¬åçš„ç‰ˆæœ¬ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:3","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åœºæ™¯3commit-äº†æƒ³ä¿®æ”¹ä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€ åœºæ™¯1 ï¼šæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼Œæœª add ï¼Œä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git checkout fileName // or git checkout . åœºæ™¯1.1ï¼š æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶ï¼Œæœªaddï¼Œæƒ³æ”¾å¼ƒæ–°å¢ shell # åˆ é™¤æ–‡ä»¶ rm filename # åˆ é™¤æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å·²ç» git add åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸ä¼šåˆ é™¤ï¼ git clean -xdf # åŒä¸Šï¼Œä½†æ˜¯è¿˜ä¼šå¤„ç†æ–‡ä»¶å¤¹ git clean -xdff åœºæ™¯2ï¼šæ‰§è¡Œäº† add , ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git reset HEAD åœºæ™¯3ï¼šcommit äº†ï¼Œæƒ³ä¿®æ”¹ï¼Œä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤ shell git add fileName git commit -amend -m 'è¯´æ˜' åœºæ™¯4ï¼šcommit äº†ï¼Œæƒ³æ’¤é”€åˆ°æŸæ¬¡ commit shell git reset [--hard|soft|mixed|merge|keep] [commit|HEAD] åœºæ™¯5ï¼š å·²ç» push äº†ï¼Œæ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬ shell # æŸ¥çœ‹æ–‡ä»¶ç‰ˆæœ¬ git log git checkout åœºæ™¯6ï¼š æ’¤é”€æœ€åä¸€æ¬¡æäº¤ shell git revert HEAD // æ˜¯ååšäº†ç›®æ ‡ç‰ˆæœ¬ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„commits git reset --hard HEAD^ // ä¼šåˆ é™¤ç›®æ ‡ç‰ˆæœ¬åçš„ç‰ˆæœ¬ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:3","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åœºæ™¯4commit-äº†æƒ³æ’¤é”€åˆ°æŸæ¬¡-commit"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€ åœºæ™¯1 ï¼šæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼Œæœª add ï¼Œä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git checkout fileName // or git checkout . åœºæ™¯1.1ï¼š æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶ï¼Œæœªaddï¼Œæƒ³æ”¾å¼ƒæ–°å¢ shell # åˆ é™¤æ–‡ä»¶ rm filename # åˆ é™¤æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å·²ç» git add åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸ä¼šåˆ é™¤ï¼ git clean -xdf # åŒä¸Šï¼Œä½†æ˜¯è¿˜ä¼šå¤„ç†æ–‡ä»¶å¤¹ git clean -xdff åœºæ™¯2ï¼šæ‰§è¡Œäº† add , ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git reset HEAD åœºæ™¯3ï¼šcommit äº†ï¼Œæƒ³ä¿®æ”¹ï¼Œä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤ shell git add fileName git commit -amend -m 'è¯´æ˜' åœºæ™¯4ï¼šcommit äº†ï¼Œæƒ³æ’¤é”€åˆ°æŸæ¬¡ commit shell git reset [--hard|soft|mixed|merge|keep] [commit|HEAD] åœºæ™¯5ï¼š å·²ç» push äº†ï¼Œæ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬ shell # æŸ¥çœ‹æ–‡ä»¶ç‰ˆæœ¬ git log git checkout åœºæ™¯6ï¼š æ’¤é”€æœ€åä¸€æ¬¡æäº¤ shell git revert HEAD // æ˜¯ååšäº†ç›®æ ‡ç‰ˆæœ¬ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„commits git reset --hard HEAD^ // ä¼šåˆ é™¤ç›®æ ‡ç‰ˆæœ¬åçš„ç‰ˆæœ¬ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:3","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åœºæ™¯5-å·²ç»-push-äº†æ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€ åœºæ™¯1 ï¼šæœ¬åœ°ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ï¼Œæœª add ï¼Œä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git checkout fileName // or git checkout . åœºæ™¯1.1ï¼š æœ¬åœ°æ–°å¢äº†ä¸€äº›æ–‡ä»¶ï¼Œæœªaddï¼Œæƒ³æ”¾å¼ƒæ–°å¢ shell # åˆ é™¤æ–‡ä»¶ rm filename # åˆ é™¤æ–°å¢çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å·²ç» git add åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸ä¼šåˆ é™¤ï¼ git clean -xdf # åŒä¸Šï¼Œä½†æ˜¯è¿˜ä¼šå¤„ç†æ–‡ä»¶å¤¹ git clean -xdff åœºæ™¯2ï¼šæ‰§è¡Œäº† add , ä½†æ˜¯æƒ³æ”¾å¼ƒä¿®æ”¹ shell git reset HEAD åœºæ™¯3ï¼šcommit äº†ï¼Œæƒ³ä¿®æ”¹ï¼Œä¸”ä¸æƒ³äº§ç”Ÿæ–°çš„æäº¤ shell git add fileName git commit -amend -m 'è¯´æ˜' åœºæ™¯4ï¼šcommit äº†ï¼Œæƒ³æ’¤é”€åˆ°æŸæ¬¡ commit shell git reset [--hard|soft|mixed|merge|keep] [commit|HEAD] åœºæ™¯5ï¼š å·²ç» push äº†ï¼Œæ’¤é”€åˆ¶å®šæ–‡ä»¶åˆ°æŒ‡å®šç‰ˆæœ¬ shell # æŸ¥çœ‹æ–‡ä»¶ç‰ˆæœ¬ git log git checkout åœºæ™¯6ï¼š æ’¤é”€æœ€åä¸€æ¬¡æäº¤ shell git revert HEAD // æ˜¯ååšäº†ç›®æ ‡ç‰ˆæœ¬ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„commits git reset --hard HEAD^ // ä¼šåˆ é™¤ç›®æ ‡ç‰ˆæœ¬åçš„ç‰ˆæœ¬ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:3","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åœºæ™¯6-æ’¤é”€æœ€åä¸€æ¬¡æäº¤"},{"categories":["æŠ€æœ¯"],"content":" å­¦ä¹ ç½‘ç«™learngitbranching å›¾è§£git githowto gité£è¡Œè§„åˆ™ ","date":"2021-11-04","objectID":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:4","series":null,"tags":["git"],"title":"git å¸¸ç”¨å‘½ä»¤","uri":"/posts/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#å­¦ä¹ ç½‘ç«™"},{"categories":["æŠ€æœ¯"],"content":" ç‰ˆæœ¬ç®¡ç†æœ‰ä¸€ä¸ªä»“åº“ï¼ˆå¯ä»¥è‡ªå»ºï¼Œä¹Ÿå¯ä»¥ç”¨çº¿ä¸Šçš„ï¼‰ï¼Œå°†å¼€å‘è€…æœ¬åœ°çš„ä»£ç æ¯æ¬¡ä¿®æ”¹ç®¡ç†èµ·æ¥ï¼Œå¯ä»¥æŸ¥çœ‹ä¿®æ”¹è®°å½•ï¼Œå›æ»šç­‰ï¼Œå¸¸ç”¨çš„ç®¡ç†å·¥å…·æœ‰svn ã€gitç­‰ï¼Œä¸»æµ gitã€‚ ç®€è¦æµç¨‹ï¼š ä¿®æ”¹ä»£ç  æäº¤ä¿®æ”¹åˆ°ä»“åº“ å½“ç„¶åè¿‡æ¥ä¹Ÿå¯ä»¥ï¼š ä»ä»“åº“ä¸‹è½½ä»£ç åˆ°æœ¬åœ°Â svnï¼š å«æ£€å‡ºï¼ˆÂ svn checkout pathï¼‰ï¼› git å« æ‹‰å–ï¼ˆgit pullï¼‰ ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:1","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#ç‰ˆæœ¬ç®¡ç†"},{"categories":["æŠ€æœ¯"],"content":" æœåŠ¡å™¨åŒæ­¥æœ¬åœ°ä¿®æ”¹çš„ä»£ç è¦ä¸Šä¼ æœåŠ¡å™¨ï¼Œæ‰èƒ½ç”Ÿæ•ˆ ç®€è¦æµç¨‹ï¼š ä¿®æ”¹ä»£ç  ä¸Šä¼ æœåŠ¡å™¨ï¼ˆftpï¼Œsftpï¼š ç›´æ¥æœ¬åœ°ä¸Šä¼ ï¼›æˆ–è€…ç‰ˆæœ¬ä»“åº“é‡Œ æ‹‰å–ï¼‰ ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:2","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#æœåŠ¡å™¨åŒæ­¥"},{"categories":["æŠ€æœ¯"],"content":" è‡ªåŠ¨éƒ¨ç½²å¯ä»¥å‘ç°ç¬¬ä¸€æ­¥æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæœåŠ¡å™¨å½“ä½œä¸€ä¸ªæ–°çš„æœ¬åœ°ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¡ç®—æœºï¼Œå¸®æˆ‘ä»¬ç®€åŒ–æ“ä½œæµç¨‹ã€‚ ç®€åŒ–åçš„æµç¨‹ï¼š ä¿®æ”¹ä»£ç  æäº¤ä¿®æ”¹åˆ°ä»£ç ä»“åº“ ä»ä»“åº“æ‹‰å–ä»£ç åˆ°æœåŠ¡å™¨ï¼Œå³å®Œæˆäº†ä¸Šä¼ æœåŠ¡å™¨ ä»¥gitä¸ºä¾‹ï¼Œæˆ‘ä»¬çœ‹ä¸€äº›å®é™…éƒ¨ç½²ï¼ˆæ‰‹åŠ¨ï¼‰ï¼š æœ¬åœ°è®¡ç®—æœºæ‰§è¡Œï¼š git commit -am ä¿®æ”¹äº†ä¸€äº›æ–‡ä»¶ æœ¬åœ°è®¡ç®—æœºæ‰§è¡Œï¼š git push origin/master æäº¤è¿œç¨‹ç‰ˆæœ¬ä»“åº“ æœåŠ¡å™¨æ‰§è¡Œï¼š git pullÂ æœåŠ¡å™¨æ‹‰å–ç‰ˆæœ¬ä»“åº“æ–‡ä»¶ webhook å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®ç°è¿™ä¸ªæ‹‰å–è¿‡ç¨‹ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:3","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#è‡ªåŠ¨éƒ¨ç½²"},{"categories":["æŠ€æœ¯"],"content":" webhookè‡ªåŠ¨éƒ¨ç½²çš„åŸç† webhooksï¼šå…¶å®å°±æ˜¯ç±»ä¼¼äºè§¦å‘äº‹ä»¶ Aäº‹ä»¶å‘ç”Ÿ â€”-è§¦å‘â€”-\u003e Bäº‹ä»¶ pushäº‹ä»¶Â â€”-è§¦å‘â€”-\u003e post : www.a.com/pull.phpÂ pull.php å®Œæˆå·¥ä½œï¼š åˆ‡åˆ°ç½‘ç«™æ ¹ç›®å½•ï¼Œgit pull æ‹‰å–ä»“åº“ä»£ç  æ ¸å¿ƒä»£ç ï¼š shell_exec(â€œcd /home/www/www.a.com \u0026\u0026 git pull 2\u003e\u00261â€); ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:4","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#webhookè‡ªåŠ¨éƒ¨ç½²çš„åŸç†"},{"categories":["æŠ€æœ¯"],"content":" å…·ä½“å®ç° ç”Ÿæˆå¹¶éƒ¨ç½²SSH key æœåŠ¡å™¨ä¸Šç”Ÿæˆssh key shell ssh-keygen -t rsa -C \"xxxxx@xxxxx.com\" # Generating public/private rsa key pair... # ä¸‰æ¬¡å›è½¦å³å¯ç”Ÿæˆ ssh key æŸ¥çœ‹å…¬é’¥å¹¶æ·»åŠ çš„ç äº‘ shell cat ~/.ssh/id_rsa.pub # ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6eNtGpNGwstc.... å¤åˆ¶ä»¥ä¸Šå…¬é’¥ï¼Œæ·»åŠ åˆ°ä»“åº“ â€œéƒ¨ç½²å…¬é’¥ç®¡ç†â€ã€‚ æµ‹è¯•å‡ºç°å¦‚ä¸‹è¡¨ç¤ºæ·»åŠ æˆåŠŸ shell ssh -T git@gitee.com Hi Anonymous! You've successfully authenticated, but GITEE.COM does not provide shell access. Note: Perhaps the current use is DeployKey. Note: DeployKey only supports pull/fetch operations æœåŠ¡å™¨åˆå§‹åŒ–cloneä»“åº“ shell $ cd /home/wwwroot/ # ä»£ç å­˜æ”¾ç›®å½• $ git clone git@gitee.com:vdong/t.whaoot.com.git å‡†å¤‡phpä»£ç  php \u003c?php // æœ¬åœ°ä»“åº“è·¯å¾„ $local = '/home/wwwroot/t.whaoot.com'; // å®‰å…¨éªŒè¯å­—ç¬¦ä¸²ï¼Œä¸ºç©ºåˆ™ä¸éªŒè¯ $token = '111111'; // å¦‚æœå¯ç”¨éªŒè¯ï¼Œå¹¶ä¸”éªŒè¯å¤±è´¥ï¼Œè¿”å›é”™è¯¯ $httpToken = isset($_SERVER['HTTP_X_GITEE_TOKEN']) ? $_SERVER['HTTP_X_GITEE_TOKEN'] : ''; if ($token \u0026\u0026 $httpToken != $token) { header('HTTP/1.1 403 Permission Denied'); die('Permission denied.'); } // å¦‚æœä»“åº“ç›®å½•ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ if (!is_dir($local)) { header('HTTP/1.1 500 Internal Server Error'); die('Local directory is missing'); } //å¦‚æœè¯·æ±‚ä½“å†…å®¹ä¸ºç©ºï¼Œè¿”å›é”™è¯¯ $payload = file_get_contents('php://input'); if (!$payload) { header('HTTP/1.1 400 Bad Request'); die('HTTP HEADER or POST is missing.'); } /* * è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š * * 1.ç¡®ä¿PHPæ­£å¸¸æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å†™ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œå†…å®¹ï¼š * `\u003c?php shell_exec('ls -la')` * åœ¨é€šè¿‡æµè§ˆå™¨è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œèƒ½å¤Ÿè¾“å‡ºç›®å½•ç»“æ„è¯´æ˜PHPå¯ä»¥è¿è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ * å¦åˆ™ ä¿®æ”¹webæœåŠ¡å™¨ä¸Šphp.iniçš„ disable_functions åˆ—è¡¨ï¼Œå»æ‰ shell_exec; é‡å¯php-fpmæœåŠ¡ * * 2ã€PHPä¸€èˆ¬ä½¿ç”¨www-dataæˆ–è€…nginxç”¨æˆ·è¿è¡Œï¼ŒPHPé€šè¿‡è„šæœ¬æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ä¹Ÿæ˜¯ç”¨è¿™ä¸ªç”¨æˆ·ï¼Œ * æ‰€ä»¥å¿…é¡»ç¡®ä¿åœ¨è¯¥ç”¨æˆ·å®¶ç›®å½•ï¼ˆä¸€èˆ¬æ˜¯/home/www-dataæˆ–/home/nginxï¼‰ä¸‹æœ‰.sshç›®å½•å’Œ * ä¸€äº›æˆæƒæ–‡ä»¶ï¼Œä»¥åŠgité…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š * ``` * /root/.ssh * + .ssh * - authorized_keys * - config * - id_rsa * - id_rsa.pub * - known_hosts * - .gitconfig * ``` * * 3.åœ¨æ‰§è¡Œçš„å‘½ä»¤åé¢åŠ ä¸Š2\u003e\u00261å¯ä»¥è¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œç¡®å®šé”™è¯¯ä½ç½® * * 4.gitç›®å½•æƒé™é—®é¢˜ã€‚æ¯”å¦‚ï¼š * `fatal: Unable to create '/data/www/html/awaimai/.git/index.lock': Permission denied` * é‚£å°±æ˜¯PHPç”¨æˆ·æ²¡æœ‰å†™æƒé™ï¼Œéœ€è¦ç»™ç›®å½•æˆäºˆæƒé™: * `` * sudo chown -R www:www /data/www/html/awaimai` * sudo chmod -R g+w /data/www/html/awaimai * ``` * * 5.SSHè®¤è¯é—®é¢˜ã€‚å¦‚æœæ˜¯é€šè¿‡SSHè®¤è¯ï¼Œæœ‰å¯èƒ½æç¤ºé”™è¯¯ï¼š * `Could not create directory '/.ssh'.` * æˆ–è€… * `Host key verification failed.` * .ssh è¦æ”¾åˆ°å¯¹åº”çš„ç”¨æˆ·ç›®å½•ä¸‹ * ä¾‹å¦‚ï¼š php æ˜¯ä»¥ www ç”¨æˆ·è¿è¡Œçš„ï¼Œ /home/www/.ssh * */ #ä»¥å¯å†™æƒé™æ‰“å¼€git_new.logæ–‡ä»¶ï¼Œç”¨äºè®°å½•gitæ—¥å¿— $fs = fopen('/home/www/git.t.whaoot.com.log', 'a'); fwrite($fs, '================ Update Start ==============='.PHP_EOL.PHP_EOL); #è·å–è¯·æ±‚ç«¯çš„IP $client_ip = $_SERVER['REMOTE_ADDR']; #å°†æ—¶é—´ä¸è¯·æ±‚ç«¯IPå†™å…¥æ—¥å¿—æ–‡ä»¶ fwrite($fs, 'Request on ['.date(\"Y-m-d H:i:s\").'] from ['.$client_ip.']'.PHP_EOL); #æ‰§è¡Œshellå‘½ä»¤cdåˆ°ç½‘ç«™æ ¹ç›®å½•æ‰§è¡Œgit pullæ“ä½œå¹¶æŠŠè¿”å›ä¿¡æ¯èµ‹å€¼ç»™å˜é‡output $output=shell_exec(\"cd {$local} \u0026\u0026 git pull 2\u003e\u00261\"); #å°†æ—¥å¿—ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­ fwrite($fs, 'Info:'. $output.PHP_EOL); fwrite($fs,PHP_EOL. '================ Update End ==============='.PHP_EOL.PHP_EOL); #å…³é—­æ—¥å¿—æ–‡ä»¶ echo $output die(\"done \" . date('Y-m-d H:i:s', time())); $fs and fclose($fs); ç»‘å®šwebhookså»ç äº‘è®¾ç½® WebHooksï¼Œç‚¹å‡»æµ‹è¯• å‚è€ƒé“¾æ¥ï¼šhttps://www.awaimai.com/2203.html https://blog.csdn.net/gbenson/article/details/84346696 ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:5","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#å…·ä½“å®ç°"},{"categories":["æŠ€æœ¯"],"content":" å…·ä½“å®ç° ç”Ÿæˆå¹¶éƒ¨ç½²SSH key æœåŠ¡å™¨ä¸Šç”Ÿæˆssh key shell ssh-keygen -t rsa -C \"xxxxx@xxxxx.com\" # Generating public/private rsa key pair... # ä¸‰æ¬¡å›è½¦å³å¯ç”Ÿæˆ ssh key æŸ¥çœ‹å…¬é’¥å¹¶æ·»åŠ çš„ç äº‘ shell cat ~/.ssh/id_rsa.pub # ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6eNtGpNGwstc.... å¤åˆ¶ä»¥ä¸Šå…¬é’¥ï¼Œæ·»åŠ åˆ°ä»“åº“ â€œéƒ¨ç½²å…¬é’¥ç®¡ç†â€ã€‚ æµ‹è¯•å‡ºç°å¦‚ä¸‹è¡¨ç¤ºæ·»åŠ æˆåŠŸ shell ssh -T git@gitee.com Hi Anonymous! You've successfully authenticated, but GITEE.COM does not provide shell access. Note: Perhaps the current use is DeployKey. Note: DeployKey only supports pull/fetch operations æœåŠ¡å™¨åˆå§‹åŒ–cloneä»“åº“ shell $ cd /home/wwwroot/ # ä»£ç å­˜æ”¾ç›®å½• $ git clone git@gitee.com:vdong/t.whaoot.com.git å‡†å¤‡phpä»£ç  php \u003c?php // æœ¬åœ°ä»“åº“è·¯å¾„ $local = '/home/wwwroot/t.whaoot.com'; // å®‰å…¨éªŒè¯å­—ç¬¦ä¸²ï¼Œä¸ºç©ºåˆ™ä¸éªŒè¯ $token = '111111'; // å¦‚æœå¯ç”¨éªŒè¯ï¼Œå¹¶ä¸”éªŒè¯å¤±è´¥ï¼Œè¿”å›é”™è¯¯ $httpToken = isset($_SERVER['HTTP_X_GITEE_TOKEN']) ? $_SERVER['HTTP_X_GITEE_TOKEN'] : ''; if ($token \u0026\u0026 $httpToken != $token) { header('HTTP/1.1 403 Permission Denied'); die('Permission denied.'); } // å¦‚æœä»“åº“ç›®å½•ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ if (!is_dir($local)) { header('HTTP/1.1 500 Internal Server Error'); die('Local directory is missing'); } //å¦‚æœè¯·æ±‚ä½“å†…å®¹ä¸ºç©ºï¼Œè¿”å›é”™è¯¯ $payload = file_get_contents('php://input'); if (!$payload) { header('HTTP/1.1 400 Bad Request'); die('HTTP HEADER or POST is missing.'); } /* * è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š * * 1.ç¡®ä¿PHPæ­£å¸¸æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å†™ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œå†…å®¹ï¼š * `\u003c?php shell_exec('ls -la')` * åœ¨é€šè¿‡æµè§ˆå™¨è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œèƒ½å¤Ÿè¾“å‡ºç›®å½•ç»“æ„è¯´æ˜PHPå¯ä»¥è¿è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ * å¦åˆ™ ä¿®æ”¹webæœåŠ¡å™¨ä¸Šphp.iniçš„ disable_functions åˆ—è¡¨ï¼Œå»æ‰ shell_exec; é‡å¯php-fpmæœåŠ¡ * * 2ã€PHPä¸€èˆ¬ä½¿ç”¨www-dataæˆ–è€…nginxç”¨æˆ·è¿è¡Œï¼ŒPHPé€šè¿‡è„šæœ¬æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ä¹Ÿæ˜¯ç”¨è¿™ä¸ªç”¨æˆ·ï¼Œ * æ‰€ä»¥å¿…é¡»ç¡®ä¿åœ¨è¯¥ç”¨æˆ·å®¶ç›®å½•ï¼ˆä¸€èˆ¬æ˜¯/home/www-dataæˆ–/home/nginxï¼‰ä¸‹æœ‰.sshç›®å½•å’Œ * ä¸€äº›æˆæƒæ–‡ä»¶ï¼Œä»¥åŠgité…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š * ``` * /root/.ssh * + .ssh * - authorized_keys * - config * - id_rsa * - id_rsa.pub * - known_hosts * - .gitconfig * ``` * * 3.åœ¨æ‰§è¡Œçš„å‘½ä»¤åé¢åŠ ä¸Š2\u003e\u00261å¯ä»¥è¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œç¡®å®šé”™è¯¯ä½ç½® * * 4.gitç›®å½•æƒé™é—®é¢˜ã€‚æ¯”å¦‚ï¼š * `fatal: Unable to create '/data/www/html/awaimai/.git/index.lock': Permission denied` * é‚£å°±æ˜¯PHPç”¨æˆ·æ²¡æœ‰å†™æƒé™ï¼Œéœ€è¦ç»™ç›®å½•æˆäºˆæƒé™: * `` * sudo chown -R www:www /data/www/html/awaimai` * sudo chmod -R g+w /data/www/html/awaimai * ``` * * 5.SSHè®¤è¯é—®é¢˜ã€‚å¦‚æœæ˜¯é€šè¿‡SSHè®¤è¯ï¼Œæœ‰å¯èƒ½æç¤ºé”™è¯¯ï¼š * `Could not create directory '/.ssh'.` * æˆ–è€… * `Host key verification failed.` * .ssh è¦æ”¾åˆ°å¯¹åº”çš„ç”¨æˆ·ç›®å½•ä¸‹ * ä¾‹å¦‚ï¼š php æ˜¯ä»¥ www ç”¨æˆ·è¿è¡Œçš„ï¼Œ /home/www/.ssh * */ #ä»¥å¯å†™æƒé™æ‰“å¼€git_new.logæ–‡ä»¶ï¼Œç”¨äºè®°å½•gitæ—¥å¿— $fs = fopen('/home/www/git.t.whaoot.com.log', 'a'); fwrite($fs, '================ Update Start ==============='.PHP_EOL.PHP_EOL); #è·å–è¯·æ±‚ç«¯çš„IP $client_ip = $_SERVER['REMOTE_ADDR']; #å°†æ—¶é—´ä¸è¯·æ±‚ç«¯IPå†™å…¥æ—¥å¿—æ–‡ä»¶ fwrite($fs, 'Request on ['.date(\"Y-m-d H:i:s\").'] from ['.$client_ip.']'.PHP_EOL); #æ‰§è¡Œshellå‘½ä»¤cdåˆ°ç½‘ç«™æ ¹ç›®å½•æ‰§è¡Œgit pullæ“ä½œå¹¶æŠŠè¿”å›ä¿¡æ¯èµ‹å€¼ç»™å˜é‡output $output=shell_exec(\"cd {$local} \u0026\u0026 git pull 2\u003e\u00261\"); #å°†æ—¥å¿—ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­ fwrite($fs, 'Info:'. $output.PHP_EOL); fwrite($fs,PHP_EOL. '================ Update End ==============='.PHP_EOL.PHP_EOL); #å…³é—­æ—¥å¿—æ–‡ä»¶ echo $output die(\"done \" . date('Y-m-d H:i:s', time())); $fs and fclose($fs); ç»‘å®šwebhookså»ç äº‘è®¾ç½® WebHooksï¼Œç‚¹å‡»æµ‹è¯• å‚è€ƒé“¾æ¥ï¼šhttps://www.awaimai.com/2203.html https://blog.csdn.net/gbenson/article/details/84346696 ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:5","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#ç”Ÿæˆå¹¶éƒ¨ç½²ssh-key"},{"categories":["æŠ€æœ¯"],"content":" å…·ä½“å®ç° ç”Ÿæˆå¹¶éƒ¨ç½²SSH key æœåŠ¡å™¨ä¸Šç”Ÿæˆssh key shell ssh-keygen -t rsa -C \"xxxxx@xxxxx.com\" # Generating public/private rsa key pair... # ä¸‰æ¬¡å›è½¦å³å¯ç”Ÿæˆ ssh key æŸ¥çœ‹å…¬é’¥å¹¶æ·»åŠ çš„ç äº‘ shell cat ~/.ssh/id_rsa.pub # ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6eNtGpNGwstc.... å¤åˆ¶ä»¥ä¸Šå…¬é’¥ï¼Œæ·»åŠ åˆ°ä»“åº“ â€œéƒ¨ç½²å…¬é’¥ç®¡ç†â€ã€‚ æµ‹è¯•å‡ºç°å¦‚ä¸‹è¡¨ç¤ºæ·»åŠ æˆåŠŸ shell ssh -T git@gitee.com Hi Anonymous! You've successfully authenticated, but GITEE.COM does not provide shell access. Note: Perhaps the current use is DeployKey. Note: DeployKey only supports pull/fetch operations æœåŠ¡å™¨åˆå§‹åŒ–cloneä»“åº“ shell $ cd /home/wwwroot/ # ä»£ç å­˜æ”¾ç›®å½• $ git clone git@gitee.com:vdong/t.whaoot.com.git å‡†å¤‡phpä»£ç  php \u003c?php // æœ¬åœ°ä»“åº“è·¯å¾„ $local = '/home/wwwroot/t.whaoot.com'; // å®‰å…¨éªŒè¯å­—ç¬¦ä¸²ï¼Œä¸ºç©ºåˆ™ä¸éªŒè¯ $token = '111111'; // å¦‚æœå¯ç”¨éªŒè¯ï¼Œå¹¶ä¸”éªŒè¯å¤±è´¥ï¼Œè¿”å›é”™è¯¯ $httpToken = isset($_SERVER['HTTP_X_GITEE_TOKEN']) ? $_SERVER['HTTP_X_GITEE_TOKEN'] : ''; if ($token \u0026\u0026 $httpToken != $token) { header('HTTP/1.1 403 Permission Denied'); die('Permission denied.'); } // å¦‚æœä»“åº“ç›®å½•ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ if (!is_dir($local)) { header('HTTP/1.1 500 Internal Server Error'); die('Local directory is missing'); } //å¦‚æœè¯·æ±‚ä½“å†…å®¹ä¸ºç©ºï¼Œè¿”å›é”™è¯¯ $payload = file_get_contents('php://input'); if (!$payload) { header('HTTP/1.1 400 Bad Request'); die('HTTP HEADER or POST is missing.'); } /* * è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š * * 1.ç¡®ä¿PHPæ­£å¸¸æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å†™ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œå†…å®¹ï¼š * `\u003c?php shell_exec('ls -la')` * åœ¨é€šè¿‡æµè§ˆå™¨è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œèƒ½å¤Ÿè¾“å‡ºç›®å½•ç»“æ„è¯´æ˜PHPå¯ä»¥è¿è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ * å¦åˆ™ ä¿®æ”¹webæœåŠ¡å™¨ä¸Šphp.iniçš„ disable_functions åˆ—è¡¨ï¼Œå»æ‰ shell_exec; é‡å¯php-fpmæœåŠ¡ * * 2ã€PHPä¸€èˆ¬ä½¿ç”¨www-dataæˆ–è€…nginxç”¨æˆ·è¿è¡Œï¼ŒPHPé€šè¿‡è„šæœ¬æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ä¹Ÿæ˜¯ç”¨è¿™ä¸ªç”¨æˆ·ï¼Œ * æ‰€ä»¥å¿…é¡»ç¡®ä¿åœ¨è¯¥ç”¨æˆ·å®¶ç›®å½•ï¼ˆä¸€èˆ¬æ˜¯/home/www-dataæˆ–/home/nginxï¼‰ä¸‹æœ‰.sshç›®å½•å’Œ * ä¸€äº›æˆæƒæ–‡ä»¶ï¼Œä»¥åŠgité…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š * ``` * /root/.ssh * + .ssh * - authorized_keys * - config * - id_rsa * - id_rsa.pub * - known_hosts * - .gitconfig * ``` * * 3.åœ¨æ‰§è¡Œçš„å‘½ä»¤åé¢åŠ ä¸Š2\u003e\u00261å¯ä»¥è¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œç¡®å®šé”™è¯¯ä½ç½® * * 4.gitç›®å½•æƒé™é—®é¢˜ã€‚æ¯”å¦‚ï¼š * `fatal: Unable to create '/data/www/html/awaimai/.git/index.lock': Permission denied` * é‚£å°±æ˜¯PHPç”¨æˆ·æ²¡æœ‰å†™æƒé™ï¼Œéœ€è¦ç»™ç›®å½•æˆäºˆæƒé™: * `` * sudo chown -R www:www /data/www/html/awaimai` * sudo chmod -R g+w /data/www/html/awaimai * ``` * * 5.SSHè®¤è¯é—®é¢˜ã€‚å¦‚æœæ˜¯é€šè¿‡SSHè®¤è¯ï¼Œæœ‰å¯èƒ½æç¤ºé”™è¯¯ï¼š * `Could not create directory '/.ssh'.` * æˆ–è€… * `Host key verification failed.` * .ssh è¦æ”¾åˆ°å¯¹åº”çš„ç”¨æˆ·ç›®å½•ä¸‹ * ä¾‹å¦‚ï¼š php æ˜¯ä»¥ www ç”¨æˆ·è¿è¡Œçš„ï¼Œ /home/www/.ssh * */ #ä»¥å¯å†™æƒé™æ‰“å¼€git_new.logæ–‡ä»¶ï¼Œç”¨äºè®°å½•gitæ—¥å¿— $fs = fopen('/home/www/git.t.whaoot.com.log', 'a'); fwrite($fs, '================ Update Start ==============='.PHP_EOL.PHP_EOL); #è·å–è¯·æ±‚ç«¯çš„IP $client_ip = $_SERVER['REMOTE_ADDR']; #å°†æ—¶é—´ä¸è¯·æ±‚ç«¯IPå†™å…¥æ—¥å¿—æ–‡ä»¶ fwrite($fs, 'Request on ['.date(\"Y-m-d H:i:s\").'] from ['.$client_ip.']'.PHP_EOL); #æ‰§è¡Œshellå‘½ä»¤cdåˆ°ç½‘ç«™æ ¹ç›®å½•æ‰§è¡Œgit pullæ“ä½œå¹¶æŠŠè¿”å›ä¿¡æ¯èµ‹å€¼ç»™å˜é‡output $output=shell_exec(\"cd {$local} \u0026\u0026 git pull 2\u003e\u00261\"); #å°†æ—¥å¿—ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­ fwrite($fs, 'Info:'. $output.PHP_EOL); fwrite($fs,PHP_EOL. '================ Update End ==============='.PHP_EOL.PHP_EOL); #å…³é—­æ—¥å¿—æ–‡ä»¶ echo $output die(\"done \" . date('Y-m-d H:i:s', time())); $fs and fclose($fs); ç»‘å®šwebhookså»ç äº‘è®¾ç½® WebHooksï¼Œç‚¹å‡»æµ‹è¯• å‚è€ƒé“¾æ¥ï¼šhttps://www.awaimai.com/2203.html https://blog.csdn.net/gbenson/article/details/84346696 ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:5","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#æœåŠ¡å™¨åˆå§‹åŒ–cloneä»“åº“"},{"categories":["æŠ€æœ¯"],"content":" å…·ä½“å®ç° ç”Ÿæˆå¹¶éƒ¨ç½²SSH key æœåŠ¡å™¨ä¸Šç”Ÿæˆssh key shell ssh-keygen -t rsa -C \"xxxxx@xxxxx.com\" # Generating public/private rsa key pair... # ä¸‰æ¬¡å›è½¦å³å¯ç”Ÿæˆ ssh key æŸ¥çœ‹å…¬é’¥å¹¶æ·»åŠ çš„ç äº‘ shell cat ~/.ssh/id_rsa.pub # ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6eNtGpNGwstc.... å¤åˆ¶ä»¥ä¸Šå…¬é’¥ï¼Œæ·»åŠ åˆ°ä»“åº“ â€œéƒ¨ç½²å…¬é’¥ç®¡ç†â€ã€‚ æµ‹è¯•å‡ºç°å¦‚ä¸‹è¡¨ç¤ºæ·»åŠ æˆåŠŸ shell ssh -T git@gitee.com Hi Anonymous! You've successfully authenticated, but GITEE.COM does not provide shell access. Note: Perhaps the current use is DeployKey. Note: DeployKey only supports pull/fetch operations æœåŠ¡å™¨åˆå§‹åŒ–cloneä»“åº“ shell $ cd /home/wwwroot/ # ä»£ç å­˜æ”¾ç›®å½• $ git clone git@gitee.com:vdong/t.whaoot.com.git å‡†å¤‡phpä»£ç  php \u003c?php // æœ¬åœ°ä»“åº“è·¯å¾„ $local = '/home/wwwroot/t.whaoot.com'; // å®‰å…¨éªŒè¯å­—ç¬¦ä¸²ï¼Œä¸ºç©ºåˆ™ä¸éªŒè¯ $token = '111111'; // å¦‚æœå¯ç”¨éªŒè¯ï¼Œå¹¶ä¸”éªŒè¯å¤±è´¥ï¼Œè¿”å›é”™è¯¯ $httpToken = isset($_SERVER['HTTP_X_GITEE_TOKEN']) ? $_SERVER['HTTP_X_GITEE_TOKEN'] : ''; if ($token \u0026\u0026 $httpToken != $token) { header('HTTP/1.1 403 Permission Denied'); die('Permission denied.'); } // å¦‚æœä»“åº“ç›®å½•ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ if (!is_dir($local)) { header('HTTP/1.1 500 Internal Server Error'); die('Local directory is missing'); } //å¦‚æœè¯·æ±‚ä½“å†…å®¹ä¸ºç©ºï¼Œè¿”å›é”™è¯¯ $payload = file_get_contents('php://input'); if (!$payload) { header('HTTP/1.1 400 Bad Request'); die('HTTP HEADER or POST is missing.'); } /* * è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š * * 1.ç¡®ä¿PHPæ­£å¸¸æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å†™ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œå†…å®¹ï¼š * `\u003c?php shell_exec('ls -la')` * åœ¨é€šè¿‡æµè§ˆå™¨è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œèƒ½å¤Ÿè¾“å‡ºç›®å½•ç»“æ„è¯´æ˜PHPå¯ä»¥è¿è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ * å¦åˆ™ ä¿®æ”¹webæœåŠ¡å™¨ä¸Šphp.iniçš„ disable_functions åˆ—è¡¨ï¼Œå»æ‰ shell_exec; é‡å¯php-fpmæœåŠ¡ * * 2ã€PHPä¸€èˆ¬ä½¿ç”¨www-dataæˆ–è€…nginxç”¨æˆ·è¿è¡Œï¼ŒPHPé€šè¿‡è„šæœ¬æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ä¹Ÿæ˜¯ç”¨è¿™ä¸ªç”¨æˆ·ï¼Œ * æ‰€ä»¥å¿…é¡»ç¡®ä¿åœ¨è¯¥ç”¨æˆ·å®¶ç›®å½•ï¼ˆä¸€èˆ¬æ˜¯/home/www-dataæˆ–/home/nginxï¼‰ä¸‹æœ‰.sshç›®å½•å’Œ * ä¸€äº›æˆæƒæ–‡ä»¶ï¼Œä»¥åŠgité…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š * ``` * /root/.ssh * + .ssh * - authorized_keys * - config * - id_rsa * - id_rsa.pub * - known_hosts * - .gitconfig * ``` * * 3.åœ¨æ‰§è¡Œçš„å‘½ä»¤åé¢åŠ ä¸Š2\u003e\u00261å¯ä»¥è¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œç¡®å®šé”™è¯¯ä½ç½® * * 4.gitç›®å½•æƒé™é—®é¢˜ã€‚æ¯”å¦‚ï¼š * `fatal: Unable to create '/data/www/html/awaimai/.git/index.lock': Permission denied` * é‚£å°±æ˜¯PHPç”¨æˆ·æ²¡æœ‰å†™æƒé™ï¼Œéœ€è¦ç»™ç›®å½•æˆäºˆæƒé™: * `` * sudo chown -R www:www /data/www/html/awaimai` * sudo chmod -R g+w /data/www/html/awaimai * ``` * * 5.SSHè®¤è¯é—®é¢˜ã€‚å¦‚æœæ˜¯é€šè¿‡SSHè®¤è¯ï¼Œæœ‰å¯èƒ½æç¤ºé”™è¯¯ï¼š * `Could not create directory '/.ssh'.` * æˆ–è€… * `Host key verification failed.` * .ssh è¦æ”¾åˆ°å¯¹åº”çš„ç”¨æˆ·ç›®å½•ä¸‹ * ä¾‹å¦‚ï¼š php æ˜¯ä»¥ www ç”¨æˆ·è¿è¡Œçš„ï¼Œ /home/www/.ssh * */ #ä»¥å¯å†™æƒé™æ‰“å¼€git_new.logæ–‡ä»¶ï¼Œç”¨äºè®°å½•gitæ—¥å¿— $fs = fopen('/home/www/git.t.whaoot.com.log', 'a'); fwrite($fs, '================ Update Start ==============='.PHP_EOL.PHP_EOL); #è·å–è¯·æ±‚ç«¯çš„IP $client_ip = $_SERVER['REMOTE_ADDR']; #å°†æ—¶é—´ä¸è¯·æ±‚ç«¯IPå†™å…¥æ—¥å¿—æ–‡ä»¶ fwrite($fs, 'Request on ['.date(\"Y-m-d H:i:s\").'] from ['.$client_ip.']'.PHP_EOL); #æ‰§è¡Œshellå‘½ä»¤cdåˆ°ç½‘ç«™æ ¹ç›®å½•æ‰§è¡Œgit pullæ“ä½œå¹¶æŠŠè¿”å›ä¿¡æ¯èµ‹å€¼ç»™å˜é‡output $output=shell_exec(\"cd {$local} \u0026\u0026 git pull 2\u003e\u00261\"); #å°†æ—¥å¿—ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­ fwrite($fs, 'Info:'. $output.PHP_EOL); fwrite($fs,PHP_EOL. '================ Update End ==============='.PHP_EOL.PHP_EOL); #å…³é—­æ—¥å¿—æ–‡ä»¶ echo $output die(\"done \" . date('Y-m-d H:i:s', time())); $fs and fclose($fs); ç»‘å®šwebhookså»ç äº‘è®¾ç½® WebHooksï¼Œç‚¹å‡»æµ‹è¯• å‚è€ƒé“¾æ¥ï¼šhttps://www.awaimai.com/2203.html https://blog.csdn.net/gbenson/article/details/84346696 ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:5","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#å‡†å¤‡phpä»£ç "},{"categories":["æŠ€æœ¯"],"content":" å…·ä½“å®ç° ç”Ÿæˆå¹¶éƒ¨ç½²SSH key æœåŠ¡å™¨ä¸Šç”Ÿæˆssh key shell ssh-keygen -t rsa -C \"xxxxx@xxxxx.com\" # Generating public/private rsa key pair... # ä¸‰æ¬¡å›è½¦å³å¯ç”Ÿæˆ ssh key æŸ¥çœ‹å…¬é’¥å¹¶æ·»åŠ çš„ç äº‘ shell cat ~/.ssh/id_rsa.pub # ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6eNtGpNGwstc.... å¤åˆ¶ä»¥ä¸Šå…¬é’¥ï¼Œæ·»åŠ åˆ°ä»“åº“ â€œéƒ¨ç½²å…¬é’¥ç®¡ç†â€ã€‚ æµ‹è¯•å‡ºç°å¦‚ä¸‹è¡¨ç¤ºæ·»åŠ æˆåŠŸ shell ssh -T git@gitee.com Hi Anonymous! You've successfully authenticated, but GITEE.COM does not provide shell access. Note: Perhaps the current use is DeployKey. Note: DeployKey only supports pull/fetch operations æœåŠ¡å™¨åˆå§‹åŒ–cloneä»“åº“ shell $ cd /home/wwwroot/ # ä»£ç å­˜æ”¾ç›®å½• $ git clone git@gitee.com:vdong/t.whaoot.com.git å‡†å¤‡phpä»£ç  php \u003c?php // æœ¬åœ°ä»“åº“è·¯å¾„ $local = '/home/wwwroot/t.whaoot.com'; // å®‰å…¨éªŒè¯å­—ç¬¦ä¸²ï¼Œä¸ºç©ºåˆ™ä¸éªŒè¯ $token = '111111'; // å¦‚æœå¯ç”¨éªŒè¯ï¼Œå¹¶ä¸”éªŒè¯å¤±è´¥ï¼Œè¿”å›é”™è¯¯ $httpToken = isset($_SERVER['HTTP_X_GITEE_TOKEN']) ? $_SERVER['HTTP_X_GITEE_TOKEN'] : ''; if ($token \u0026\u0026 $httpToken != $token) { header('HTTP/1.1 403 Permission Denied'); die('Permission denied.'); } // å¦‚æœä»“åº“ç›®å½•ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ if (!is_dir($local)) { header('HTTP/1.1 500 Internal Server Error'); die('Local directory is missing'); } //å¦‚æœè¯·æ±‚ä½“å†…å®¹ä¸ºç©ºï¼Œè¿”å›é”™è¯¯ $payload = file_get_contents('php://input'); if (!$payload) { header('HTTP/1.1 400 Bad Request'); die('HTTP HEADER or POST is missing.'); } /* * è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š * * 1.ç¡®ä¿PHPæ­£å¸¸æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å†™ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œå†…å®¹ï¼š * `\u003c?php shell_exec('ls -la')` * åœ¨é€šè¿‡æµè§ˆå™¨è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œèƒ½å¤Ÿè¾“å‡ºç›®å½•ç»“æ„è¯´æ˜PHPå¯ä»¥è¿è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ * å¦åˆ™ ä¿®æ”¹webæœåŠ¡å™¨ä¸Šphp.iniçš„ disable_functions åˆ—è¡¨ï¼Œå»æ‰ shell_exec; é‡å¯php-fpmæœåŠ¡ * * 2ã€PHPä¸€èˆ¬ä½¿ç”¨www-dataæˆ–è€…nginxç”¨æˆ·è¿è¡Œï¼ŒPHPé€šè¿‡è„šæœ¬æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ä¹Ÿæ˜¯ç”¨è¿™ä¸ªç”¨æˆ·ï¼Œ * æ‰€ä»¥å¿…é¡»ç¡®ä¿åœ¨è¯¥ç”¨æˆ·å®¶ç›®å½•ï¼ˆä¸€èˆ¬æ˜¯/home/www-dataæˆ–/home/nginxï¼‰ä¸‹æœ‰.sshç›®å½•å’Œ * ä¸€äº›æˆæƒæ–‡ä»¶ï¼Œä»¥åŠgité…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š * ``` * /root/.ssh * + .ssh * - authorized_keys * - config * - id_rsa * - id_rsa.pub * - known_hosts * - .gitconfig * ``` * * 3.åœ¨æ‰§è¡Œçš„å‘½ä»¤åé¢åŠ ä¸Š2\u003e\u00261å¯ä»¥è¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œç¡®å®šé”™è¯¯ä½ç½® * * 4.gitç›®å½•æƒé™é—®é¢˜ã€‚æ¯”å¦‚ï¼š * `fatal: Unable to create '/data/www/html/awaimai/.git/index.lock': Permission denied` * é‚£å°±æ˜¯PHPç”¨æˆ·æ²¡æœ‰å†™æƒé™ï¼Œéœ€è¦ç»™ç›®å½•æˆäºˆæƒé™: * `` * sudo chown -R www:www /data/www/html/awaimai` * sudo chmod -R g+w /data/www/html/awaimai * ``` * * 5.SSHè®¤è¯é—®é¢˜ã€‚å¦‚æœæ˜¯é€šè¿‡SSHè®¤è¯ï¼Œæœ‰å¯èƒ½æç¤ºé”™è¯¯ï¼š * `Could not create directory '/.ssh'.` * æˆ–è€… * `Host key verification failed.` * .ssh è¦æ”¾åˆ°å¯¹åº”çš„ç”¨æˆ·ç›®å½•ä¸‹ * ä¾‹å¦‚ï¼š php æ˜¯ä»¥ www ç”¨æˆ·è¿è¡Œçš„ï¼Œ /home/www/.ssh * */ #ä»¥å¯å†™æƒé™æ‰“å¼€git_new.logæ–‡ä»¶ï¼Œç”¨äºè®°å½•gitæ—¥å¿— $fs = fopen('/home/www/git.t.whaoot.com.log', 'a'); fwrite($fs, '================ Update Start ==============='.PHP_EOL.PHP_EOL); #è·å–è¯·æ±‚ç«¯çš„IP $client_ip = $_SERVER['REMOTE_ADDR']; #å°†æ—¶é—´ä¸è¯·æ±‚ç«¯IPå†™å…¥æ—¥å¿—æ–‡ä»¶ fwrite($fs, 'Request on ['.date(\"Y-m-d H:i:s\").'] from ['.$client_ip.']'.PHP_EOL); #æ‰§è¡Œshellå‘½ä»¤cdåˆ°ç½‘ç«™æ ¹ç›®å½•æ‰§è¡Œgit pullæ“ä½œå¹¶æŠŠè¿”å›ä¿¡æ¯èµ‹å€¼ç»™å˜é‡output $output=shell_exec(\"cd {$local} \u0026\u0026 git pull 2\u003e\u00261\"); #å°†æ—¥å¿—ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­ fwrite($fs, 'Info:'. $output.PHP_EOL); fwrite($fs,PHP_EOL. '================ Update End ==============='.PHP_EOL.PHP_EOL); #å…³é—­æ—¥å¿—æ–‡ä»¶ echo $output die(\"done \" . date('Y-m-d H:i:s', time())); $fs and fclose($fs); ç»‘å®šwebhookså»ç äº‘è®¾ç½® WebHooksï¼Œç‚¹å‡»æµ‹è¯• å‚è€ƒé“¾æ¥ï¼šhttps://www.awaimai.com/2203.html https://blog.csdn.net/gbenson/article/details/84346696 ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:5","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#ç»‘å®šwebhooks"},{"categories":["æŠ€æœ¯"],"content":" å…·ä½“å®ç° ç”Ÿæˆå¹¶éƒ¨ç½²SSH key æœåŠ¡å™¨ä¸Šç”Ÿæˆssh key shell ssh-keygen -t rsa -C \"xxxxx@xxxxx.com\" # Generating public/private rsa key pair... # ä¸‰æ¬¡å›è½¦å³å¯ç”Ÿæˆ ssh key æŸ¥çœ‹å…¬é’¥å¹¶æ·»åŠ çš„ç äº‘ shell cat ~/.ssh/id_rsa.pub # ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6eNtGpNGwstc.... å¤åˆ¶ä»¥ä¸Šå…¬é’¥ï¼Œæ·»åŠ åˆ°ä»“åº“ â€œéƒ¨ç½²å…¬é’¥ç®¡ç†â€ã€‚ æµ‹è¯•å‡ºç°å¦‚ä¸‹è¡¨ç¤ºæ·»åŠ æˆåŠŸ shell ssh -T git@gitee.com Hi Anonymous! You've successfully authenticated, but GITEE.COM does not provide shell access. Note: Perhaps the current use is DeployKey. Note: DeployKey only supports pull/fetch operations æœåŠ¡å™¨åˆå§‹åŒ–cloneä»“åº“ shell $ cd /home/wwwroot/ # ä»£ç å­˜æ”¾ç›®å½• $ git clone git@gitee.com:vdong/t.whaoot.com.git å‡†å¤‡phpä»£ç  php \u003c?php // æœ¬åœ°ä»“åº“è·¯å¾„ $local = '/home/wwwroot/t.whaoot.com'; // å®‰å…¨éªŒè¯å­—ç¬¦ä¸²ï¼Œä¸ºç©ºåˆ™ä¸éªŒè¯ $token = '111111'; // å¦‚æœå¯ç”¨éªŒè¯ï¼Œå¹¶ä¸”éªŒè¯å¤±è´¥ï¼Œè¿”å›é”™è¯¯ $httpToken = isset($_SERVER['HTTP_X_GITEE_TOKEN']) ? $_SERVER['HTTP_X_GITEE_TOKEN'] : ''; if ($token \u0026\u0026 $httpToken != $token) { header('HTTP/1.1 403 Permission Denied'); die('Permission denied.'); } // å¦‚æœä»“åº“ç›®å½•ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ if (!is_dir($local)) { header('HTTP/1.1 500 Internal Server Error'); die('Local directory is missing'); } //å¦‚æœè¯·æ±‚ä½“å†…å®¹ä¸ºç©ºï¼Œè¿”å›é”™è¯¯ $payload = file_get_contents('php://input'); if (!$payload) { header('HTTP/1.1 400 Bad Request'); die('HTTP HEADER or POST is missing.'); } /* * è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š * * 1.ç¡®ä¿PHPæ­£å¸¸æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å†™ä¸€ä¸ªPHPæ–‡ä»¶ï¼Œå†…å®¹ï¼š * `\u003c?php shell_exec('ls -la')` * åœ¨é€šè¿‡æµè§ˆå™¨è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œèƒ½å¤Ÿè¾“å‡ºç›®å½•ç»“æ„è¯´æ˜PHPå¯ä»¥è¿è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ * å¦åˆ™ ä¿®æ”¹webæœåŠ¡å™¨ä¸Šphp.iniçš„ disable_functions åˆ—è¡¨ï¼Œå»æ‰ shell_exec; é‡å¯php-fpmæœåŠ¡ * * 2ã€PHPä¸€èˆ¬ä½¿ç”¨www-dataæˆ–è€…nginxç”¨æˆ·è¿è¡Œï¼ŒPHPé€šè¿‡è„šæœ¬æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ä¹Ÿæ˜¯ç”¨è¿™ä¸ªç”¨æˆ·ï¼Œ * æ‰€ä»¥å¿…é¡»ç¡®ä¿åœ¨è¯¥ç”¨æˆ·å®¶ç›®å½•ï¼ˆä¸€èˆ¬æ˜¯/home/www-dataæˆ–/home/nginxï¼‰ä¸‹æœ‰.sshç›®å½•å’Œ * ä¸€äº›æˆæƒæ–‡ä»¶ï¼Œä»¥åŠgité…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š * ``` * /root/.ssh * + .ssh * - authorized_keys * - config * - id_rsa * - id_rsa.pub * - known_hosts * - .gitconfig * ``` * * 3.åœ¨æ‰§è¡Œçš„å‘½ä»¤åé¢åŠ ä¸Š2\u003e\u00261å¯ä»¥è¾“å‡ºè¯¦ç»†ä¿¡æ¯ï¼Œç¡®å®šé”™è¯¯ä½ç½® * * 4.gitç›®å½•æƒé™é—®é¢˜ã€‚æ¯”å¦‚ï¼š * `fatal: Unable to create '/data/www/html/awaimai/.git/index.lock': Permission denied` * é‚£å°±æ˜¯PHPç”¨æˆ·æ²¡æœ‰å†™æƒé™ï¼Œéœ€è¦ç»™ç›®å½•æˆäºˆæƒé™: * `` * sudo chown -R www:www /data/www/html/awaimai` * sudo chmod -R g+w /data/www/html/awaimai * ``` * * 5.SSHè®¤è¯é—®é¢˜ã€‚å¦‚æœæ˜¯é€šè¿‡SSHè®¤è¯ï¼Œæœ‰å¯èƒ½æç¤ºé”™è¯¯ï¼š * `Could not create directory '/.ssh'.` * æˆ–è€… * `Host key verification failed.` * .ssh è¦æ”¾åˆ°å¯¹åº”çš„ç”¨æˆ·ç›®å½•ä¸‹ * ä¾‹å¦‚ï¼š php æ˜¯ä»¥ www ç”¨æˆ·è¿è¡Œçš„ï¼Œ /home/www/.ssh * */ #ä»¥å¯å†™æƒé™æ‰“å¼€git_new.logæ–‡ä»¶ï¼Œç”¨äºè®°å½•gitæ—¥å¿— $fs = fopen('/home/www/git.t.whaoot.com.log', 'a'); fwrite($fs, '================ Update Start ==============='.PHP_EOL.PHP_EOL); #è·å–è¯·æ±‚ç«¯çš„IP $client_ip = $_SERVER['REMOTE_ADDR']; #å°†æ—¶é—´ä¸è¯·æ±‚ç«¯IPå†™å…¥æ—¥å¿—æ–‡ä»¶ fwrite($fs, 'Request on ['.date(\"Y-m-d H:i:s\").'] from ['.$client_ip.']'.PHP_EOL); #æ‰§è¡Œshellå‘½ä»¤cdåˆ°ç½‘ç«™æ ¹ç›®å½•æ‰§è¡Œgit pullæ“ä½œå¹¶æŠŠè¿”å›ä¿¡æ¯èµ‹å€¼ç»™å˜é‡output $output=shell_exec(\"cd {$local} \u0026\u0026 git pull 2\u003e\u00261\"); #å°†æ—¥å¿—ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ä¸­ fwrite($fs, 'Info:'. $output.PHP_EOL); fwrite($fs,PHP_EOL. '================ Update End ==============='.PHP_EOL.PHP_EOL); #å…³é—­æ—¥å¿—æ–‡ä»¶ echo $output die(\"done \" . date('Y-m-d H:i:s', time())); $fs and fclose($fs); ç»‘å®šwebhookså»ç äº‘è®¾ç½® WebHooksï¼Œç‚¹å‡»æµ‹è¯• å‚è€ƒé“¾æ¥ï¼šhttps://www.awaimai.com/2203.html https://blog.csdn.net/gbenson/article/details/84346696 ","date":"2021-11-04","objectID":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/:0:5","series":null,"tags":["php","webhook"],"title":"PHP webhook éƒ¨ç½²ç äº‘","uri":"/posts/php-web/php-webhooks-%E9%83%A8%E7%BD%B2%E7%A0%81%E4%BA%91/#å‚è€ƒé“¾æ¥"},{"categories":["æŠ€æœ¯"],"content":"composer require â€œmk-j/php_xlsxwriterâ€ â€“no-update ","date":"2021-11-04","objectID":"/posts/php-web/composer/:0:0","series":null,"tags":["composer"],"title":"composer","uri":"/posts/php-web/composer/#"},{"categories":["æŠ€æœ¯"],"content":" ç‰ˆæœ¬è¯´æ˜â€œrequireâ€: { â€œvendor/packageâ€: â€œ1.3.2â€, // exactly 1.3.2 // \u003e, \u003c, \u003e=, \u003c= | specify upper / lower bounds \"vendor/package\": \"\u003e=1.3.2\", // anything above or equal to 1.3.2 \"vendor/package\": \"\u003c1.3.2\", // anything below 1.3.2 // * | wildcard \"vendor/package\": \"1.3.*\", // \u003e=1.3.0 \u003c1.4.0 // ~ | allows last digit specified to go up \"vendor/package\": \"~1.3.2\", // \u003e=1.3.2 \u003c1.4.0 \"vendor/package\": \"~1.3\", // \u003e=1.3.0 \u003c2.0.0 // ^ | doesn't allow breaking changes (major version fixed - following semver) \"vendor/package\": \"^1.3.2\", // \u003e=1.3.2 \u003c2.0.0 \"vendor/package\": \"^0.3.2\", // \u003e=0.3.2 \u003c0.4.0 // except if major version is 0 } ","date":"2021-11-04","objectID":"/posts/php-web/composer/:1:0","series":null,"tags":["composer"],"title":"composer","uri":"/posts/php-web/composer/#ç‰ˆæœ¬è¯´æ˜"},{"categories":["æŠ€æœ¯"],"content":"Linux ç›´æ¥å‘é€UDPåŒ… å¦‚æœå¾€æœ¬åœ°UDPç«¯å£ç™¼é€æ•¸æ“šï¼Œé‚£éº¼å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š bash echo \"hello\" \u003e /dev/udp/192.168.1.81/5060 æ„æ€æ˜¯å¾€æœ¬åœ°192.168.1.81çš„5060ç«¯å£ç™¼é€æ•¸æ“šåŒ…helloã€‚ å¦‚æœå¾€é ç¨‹UDPç«¯å£ç™¼é€æ•¸æ“šï¼Œé‚£éº¼å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š bash echo \"hello\" | socat - udp4-datagram:192.168.1.80:5060 æ„æ€æ˜¯å¾€é ç¨‹192.168.1.80çš„5060ç«¯å£ç™¼é€æ•¸æ“šåŒ… hello ã€‚ è¿œç¨‹å¯ä»¥ç›‘å¬å¯¹åº”ç«¯å£æŸ¥çœ‹ï¼š bash # -l listen -p source-port -4 ipv4 -u udp nc -l -p 5060 -4 -u ps: å…ˆå®‰è£… socat ï¼Œcentos: yum install -y socatâ€‹ ","date":"2021-11-04","objectID":"/posts/unixs/linux%E5%8F%91udp%E5%8C%85/:0:0","series":null,"tags":["unix","linux"],"title":"linuxå‘udpåŒ…","uri":"/posts/unixs/linux%E5%8F%91udp%E5%8C%85/#"},{"categories":["æŠ€æœ¯"],"content":" ä¸‰å¤§èŒƒå¼ éæ ‡å‡†åŒ–å½¢å¼ï¼š ä¸»é”®ä¸èƒ½é‡å¤ï¼›ä¸å‡ºç°é‡å¤è®°å½• å­—æ®µåŸå­æ€§ï¼Œä¸èƒ½å†åˆ† åä¾‹ï¼š è”ç³»æ–¹å¼ =ã€‹ï¼ˆç”µè¯ï¼Œé‚®ç®±ï¼‰ ä¸èƒ½å­˜åœ¨éƒ¨åˆ†ä¾èµ–ã€‚ éšç€ä¸»é”®å€¼çš„å˜åŒ–ï¼Œå…¶å®ƒåˆ—åä¹Ÿå¿…é¡»éšä¹‹è€Œå˜åŒ–ï¼Œå¦‚æœä¸»é”®æ˜¯å‡ ä¸ªåˆ—åçš„ç»„åˆï¼Œå…¶å®ƒåˆ—åï¼ˆå‰¯é”®ï¼‰å¿…é¡»åŒæ—¶è¢«è¿™å‡ ä¸ªåˆ—åå½±å“ï¼Œå°‘ä¸€ä¸ªçš„è¯ï¼Œä¸è¡Œã€‚ åä¾‹ï¼š ç»„ä»¶idï¼Œä»·æ ¼ï¼Œä¾›åº”å•†idï¼Œä¾›åº”å•†åç§°ï¼Œä¾›åº”å•†åœ°å€ã€‚ åŒä¸€ä¸ªç»„ä»¶æœ‰å¯èƒ½ç”±ä¸åŒçš„ä¾›åº”å•†æä¾›ï¼Œæ•… ç»„ä»¶ id å’Œ ä¾›åº”å•† id ç»„æˆä¸»é”®ï¼Œ ä»·æ ¼ å’Œ ä¸»é”® å®Œå…¨ä¾èµ–ï¼› ä¾›åº”å•†åç§°å’Œåœ°å€ åªä¾èµ–äº ä¾›åº”å•† idï¼Œ éƒ¨åˆ†ä¾èµ– ä¸èƒ½å­˜åœ¨ä¼ é€’ä¾èµ–ã€‚ å‰¯é”®ä¸å‰¯é”®ä¹‹é—´ï¼Œä¸èƒ½å­˜åœ¨ä¾èµ–å…³ç³»ã€‚ åä¾‹ï¼š å­¦å·ï¼Œå§“åï¼Œ æ€§åˆ«ï¼Œç­çº§ï¼Œç­ä¸»ä»»ã€‚ç­ä¸»ä»» å—åˆ° ç­çº§ çš„å½±å“ï¼Œå°±éœ€è¦å¦å¤– å»ºä¸€å¼ è¡¨ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/:1:0","series":null,"tags":["mysql"],"title":"Mysql èŒƒå¼ äº‹åŠ¡ é”","uri":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/#ä¸‰å¤§èŒƒå¼"},{"categories":["æŠ€æœ¯"],"content":" äº‹åŠ¡æ•°æ®åº“äº‹åŠ¡ï¼ˆç®€ç§°:äº‹åŠ¡ï¼‰æ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªé€»è¾‘å•ä½ï¼Œç”±ä¸€ä¸ªæœ‰é™çš„æ•°æ®åº“æ“ä½œåºåˆ—æ„æˆã€‚äº‹åŠ¡çš„ä½¿ç”¨æ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»ŸåŒºåˆ«æ–‡ä»¶ç³»ç»Ÿçš„é‡è¦ç‰¹å¾ä¹‹ä¸€ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/:2:0","series":null,"tags":["mysql"],"title":"Mysql èŒƒå¼ äº‹åŠ¡ é”","uri":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/#äº‹åŠ¡"},{"categories":["æŠ€æœ¯"],"content":" 4ä¸ªç‰¹æ€§ åŸå­æ€§ è¦ä¹ˆåšå®Œï¼Œè¦ä¹ˆä¸åšï¼Œæ²¡æœ‰ä¸­é—´åœæ»ç¯èŠ‚ã€‚ ä¸€è‡´æ€§ ä»ä¸€ç§çŠ¶æ€å˜æˆå¦ä¸€ç§çŠ¶æ€ã€‚å¼€å§‹å’Œç»“æŸåï¼Œå®Œæ•´æ€§çº¦æŸæ²¡æœ‰å˜åŒ–ã€‚ éš”ç¦»æ€§ å¤šä¸ªäº‹åŠ¡å¹¶å‘è®¿é—®æ—¶ï¼Œäº‹åŠ¡ä¹‹é—´æ˜¯éš”ç¦»çš„ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸åº”è¯¥å½±å“å…¶å®ƒäº‹åŠ¡çš„è¿è¡Œæ•ˆæœã€‚å³ï¼Œæ¯ä¸ªäº‹åŠ¡æœ‰å„è‡ªå®Œæ•´çš„æ•°æ®ç©ºé—´ã€‚ mysql é€šè¿‡é”æœºåˆ¶æ¥ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ã€‚ æŒä¹…æ€§ äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå…¶ç»“æœå°±æ˜¯æ°¸ä¹…æ€§çš„ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/:2:1","series":null,"tags":["mysql"],"title":"Mysql èŒƒå¼ äº‹åŠ¡ é”","uri":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/#4ä¸ªç‰¹æ€§"},{"categories":["æŠ€æœ¯"],"content":" äº‹åŠ¡çš„éš”ç¦»ç­‰çº§ READ UNCOMMITTEDï¼ˆè¯»æœªæäº¤ï¼‰è„è¯» äº‹åŠ¡2 è¯»åˆ°äº† äº‹åŠ¡1 æœªæäº¤çš„æ•°æ®ã€‚ READ COMMITTED ï¼ˆè¯»æäº¤ï¼‰ ä¸å¯é‡å¤è¯» äº‹åŠ¡2 åªèƒ½è¯»åˆ° äº‹åŠ¡1 å·²ç»æäº¤çš„æ•°æ®ã€‚æ˜¯ Oracle å’Œ SQL Server çš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚ REPEATABLE READ ï¼ˆå¯é‡å¤è¯»ï¼‰ å¹»è¯» äº‹åŠ¡2 ä¸ä¼šè¯»åˆ° äº‹åŠ¡1 å¯¹å·²æœ‰æ•°æ®çš„ä¿®æ”¹ï¼Œå³ä½¿äº‹åŠ¡1çš„ä¿®æ”¹ å·²æäº¤ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹åŠ¡2 å¼€å§‹æ—¶è¯»åˆ°çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼Œåœ¨äº‹åŠ¡2 æäº¤å‰çš„ä»»æ„æ—¶åˆ»ï¼Œè¿™äº›æ•°æ®çš„å€¼éƒ½æ˜¯ä¸€æ ·çš„ã€‚ mysql çš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚ å¦‚æœ æ ¹æ®è¯»å–æ•°æ®æ’å…¥æˆ–ä¿®æ”¹æ—¶ï¼Œä¸æ•°æ®åº“çœŸå®æ•°æ®å‘ç”Ÿå†²çªï¼ˆå®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼‰ï¼Œmysql ç§°ä¸ºå¹»è¯»ã€‚ï¼ˆå¦‚ï¼Œä¸»é”®å†²çªç­‰ï¼‰ã€‚ SERIALIZABLEï¼ˆåºåˆ—åŒ–ï¼‰ äº‹åŠ¡æ˜¯ä¸²è¡Œé¡ºåºæ‰§è¡Œçš„ï¼ŒMySql çš„ InnoDB ä¼šç»™è¯»æ“ä½œéšå¼çš„åŠ ä¸€æŠŠè¯»å…±äº«é”ï¼Œä»è€Œé¿å…äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/:2:2","series":null,"tags":["mysql"],"title":"Mysql èŒƒå¼ äº‹åŠ¡ é”","uri":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/#äº‹åŠ¡çš„éš”ç¦»ç­‰çº§"},{"categories":["æŠ€æœ¯"],"content":" é”é”ä¹Ÿæ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»ŸåŒºåˆ«æ–‡ä»¶ç³»ç»Ÿçš„é‡è¦ç‰¹å¾ä¹‹ä¸€ã€‚é”æœºåˆ¶ä½¿å¾—åœ¨å¯¹æ•°æ®åº“è¿›è¡Œå¹¶å‘è®¿é—®æ—¶ï¼Œå¯ä»¥ä¿éšœæ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚ Mysql çš„é”å…¶å®å¯ä»¥æŒ‰å¾ˆå¤šç§å½¢å¼åˆ†ç±»: æŒ‰åŠ é”æœºåˆ¶åˆ†,å¯åˆ†ä¸ºä¹è§‚é”ä¸æ‚²è§‚é”. æŒ‰å…¼å®¹æ€§æ¥åˆ†,å¯åˆ†ä¸ºXé”ä¸Sé”. æŒ‰é”ç²’åº¦åˆ†,å¯åˆ†ä¸ºè¡¨é”,è¡Œé”,é¡µé”. æŒ‰é”æ¨¡å¼åˆ†,å¯åˆ†ä¸ºè®°å½•é”, gapé”, next-keyé”, æ„å‘é”, æ’å…¥æ„å‘é”. InnoDB å®ç°äº†ä¸¤ç§ç±»å‹çš„è¡Œçº§é”ï¼š å…±äº«é” ï¼ˆS é”ï¼‰ï¼š å…è®¸äº‹åŠ¡è¯»å–ä¸€è¡Œæ•°æ®ã€‚ select * from TableName where â€¦ lock in share mode; ç‹¬å é” ï¼ˆX é”ï¼‰ï¼š å…è®¸äº‹åŠ¡åˆ é™¤æˆ–æ›´æ–°ä¸€è¡Œæ•°æ®ã€‚ select * from TableName where â€¦ for update; S é”ä¸ Sé” æ˜¯å…¼å®¹çš„ï¼ŒX é”å’Œå…¶å®ƒé”éƒ½ä¸å…¼å®¹ã€‚ ä¸ºäº†å®ç°å¤šç²’åº¦çš„é”æœºåˆ¶ï¼ŒInnoDB è¿˜æœ‰ä¸¤ç§å†…éƒ¨ä½¿ç”¨çš„ æ„å‘é” ï¼Œç”± InnoDB è‡ªåŠ¨æ·»åŠ ï¼Œä¸”éƒ½æ˜¯è¡¨çº§åˆ«çš„é”ã€‚ æ„å‘å…±äº«é” ï¼ˆISï¼‰ï¼šäº‹åŠ¡å³å°†ç»™è¡¨ä¸­çš„å„ä¸ªè¡Œè®¾ç½®å…±äº«é”ï¼Œäº‹åŠ¡ç»™æ•°æ®è¡ŒåŠ  S é”å‰å¿…é¡»è·å¾—è¯¥è¡¨çš„ IS é”ã€‚ æ„å‘æ’ä»–é” ï¼ˆIXï¼‰ï¼šäº‹åŠ¡å³å°†ç»™è¡¨ä¸­çš„å„ä¸ªè¡Œè®¾ç½®æ’ä»–é”ï¼Œäº‹åŠ¡ç»™æ•°æ®è¡ŒåŠ  X é”å‰å¿…é¡»è·å¾—è¯¥è¡¨ IX é”ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/:3:0","series":null,"tags":["mysql"],"title":"Mysql èŒƒå¼ äº‹åŠ¡ é”","uri":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/#é”"},{"categories":["æŠ€æœ¯"],"content":" æ­»é”æ­»é” æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/:3:1","series":null,"tags":["mysql"],"title":"Mysql èŒƒå¼ äº‹åŠ¡ é”","uri":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/#æ­»é”"},{"categories":["æŠ€æœ¯"],"content":" é”ä¼˜åŒ–å»ºè®® åˆç†è®¾è®¡ç´¢å¼•ï¼Œè®© InnoDB åœ¨ç´¢å¼•é”®ä¸Šé¢åŠ é”çš„æ—¶å€™å°½å¯èƒ½å‡†ç¡®ï¼Œå°½å¯èƒ½çš„ç¼©å°é”å®šèŒƒå›´ï¼Œé¿å…é€ æˆä¸å¿…è¦çš„é”å®šè€Œå½±å“å…¶ä»– Query çš„æ‰§è¡Œã€‚ å°½å¯èƒ½å‡å°‘åŸºäºèŒƒå›´çš„æ•°æ®æ£€ç´¢è¿‡æ»¤æ¡ä»¶ï¼Œé¿å…å› ä¸ºé—´éš™é”å¸¦æ¥çš„è´Ÿé¢å½±å“è€Œé”å®šäº†ä¸è¯¥é”å®šçš„è®°å½•ã€‚ å°½é‡æ§åˆ¶äº‹åŠ¡çš„å¤§å°ï¼Œå‡å°‘é”å®šçš„èµ„æºé‡å’Œé”å®šæ—¶é—´é•¿åº¦ã€‚ åœ¨ä¸šåŠ¡ç¯å¢ƒå…è®¸çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨è¾ƒä½çº§åˆ«çš„äº‹åŠ¡éš”ç¦»ï¼Œä»¥å‡å°‘ MySQL å› ä¸ºå®ç°äº‹åŠ¡éš”ç¦»çº§åˆ«æ‰€å¸¦æ¥çš„é™„åŠ æˆæœ¬ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/:3:2","series":null,"tags":["mysql"],"title":"Mysql èŒƒå¼ äº‹åŠ¡ é”","uri":"/posts/php-web/mysql-%E8%8C%83%E5%BC%8F-%E4%BA%8B%E5%8A%A1-%E9%94%81/#é”ä¼˜åŒ–å»ºè®®"},{"categories":["æŠ€æœ¯"],"content":" ä¸€ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:1:0","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#ä¸€ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ"},{"categories":["æŠ€æœ¯"],"content":" 0. å¯åŠ¨æœåŠ¡ å‡†å¤‡å·¥ä½œå¯åŠ¨ php-fpmï¼Œé€šä¿¡æ¨¡å¼ï¼Œ TCP socketï¼Œ Unix scoketã€‚ PHP-FPM å¯åŠ¨ä¸¤ç§è¿›ç¨‹ï¼Œ masterï¼šç›‘æ§ç«¯å£ã€åˆ†é…ä»»åŠ¡ï¼Œç®¡ç† worker è¿›ç¨‹ï¼Œ workerï¼š å°±æ˜¯ php çš„cgi ç¨‹åºï¼Œè§£é‡Šå’Œç¼–è¯‘æ‰§è¡Œ php è„šæœ¬ã€‚ å¯åŠ¨ nginxã€‚è½½å…¥ ngx_http_fastcgi_module æ¨¡å—ï¼Œåˆå§‹åŒ– FastCGI æ‰§è¡Œç¯å¢ƒï¼Œå®ç° FastCGI åè®® è¯·æ±‚ä»£ç†ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:1:1","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#0-å¯åŠ¨æœåŠ¡-å‡†å¤‡å·¥ä½œ"},{"categories":["æŠ€æœ¯"],"content":" 1. request =\u003e nginxnginx æ¥å—è¯·æ±‚ï¼ŒåŸºäº location é…ç½®ï¼Œé€‰æ‹© handleï¼Œå³ ä»£ç† PHP çš„ handleã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:1:2","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#1-request--nginx"},{"categories":["æŠ€æœ¯"],"content":" 2. nginx =\u003e PHP-FPMnginx å°†è¯·æ±‚ç¿»è¯‘æˆ fastcgi è¯·æ±‚ã€‚ é€šè¿‡ tcp scoket /unix scoket å‘é€ç»™ PHP-FPM çš„ master è¿›ç¨‹ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:1:3","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#2-nginx--php-fpm"},{"categories":["æŠ€æœ¯"],"content":" 3. PHP-FMP çš„ master =\u003e workermaster åˆ†é… worker æ‰§è¡Œ php è„šæœ¬ï¼Œæ²¡ç©ºé—² worker è¿”å› 502ã€‚ worker ï¼ˆphp-cgiï¼‰è¿›ç¨‹æ‰§è¡Œ php è¶…æ—¶ è¿”å› 504 å¤„ç†è§£é‡Šè¿”å›ç»“æœ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:1:4","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#3-php-fmp-çš„-master--worker"},{"categories":["æŠ€æœ¯"],"content":" 4. worker =\u003e master =\u003e nginxworker è¿”å›å¤„ç†ç»“æœç»™ masterï¼Œå…³é—­è¿æ¥ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªè¯·æ±‚ master è¿›ç¨‹è¿”å›ç»“æœç»™ nginx nginx æ ¹æ® handle é¡ºåºï¼Œå°†å“åº”ä¸€æ­¥ä¸€æ­¥è¿”å›ç»™å®¢æˆ·ç«¯ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:1:5","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#4-worker--master--nginx"},{"categories":["æŠ€æœ¯"],"content":" phpè§£é‡Šæ‰§è¡Œçš„æœºåˆ¶ åˆå§‹åŒ– ï¼Œå¯åŠ¨ zend å¼•æ“ï¼ŒåŠ è½½æ³¨å†Œçš„æ‹“å±•æ¨¡å— ï¼ˆphp-fpm å¯åŠ¨æ—¶ï¼‰ è¯»å–è„šæœ¬æ–‡ä»¶ï¼Œè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æ ç”Ÿæˆè¯­æ³•æ ‘ zend å¼•æ“ç¼–è¯‘è¯­æ³•æ ‘ï¼Œ ç”Ÿæˆ opcode æ‰§è¡Œ opcodeï¼Œè¿”å›ç»“æœ æ­¥éª¤ 2-4 æ¯ä¸ªè¯·æ±‚éƒ½è¦æ‰§è¡Œä¸€æ¬¡ï¼Œæå¤§çš„æµªè´¹ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:2:0","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#phpè§£é‡Šæ‰§è¡Œçš„æœºåˆ¶"},{"categories":["æŠ€æœ¯"],"content":" opcacheå°†ç¼–è¯‘å¥½çš„æ“ä½œç æ”¾å…¥å…±äº«å†…å­˜ï¼Œæä¾›ç»™å…¶ä»–è¿›ç¨‹è®¿é—®ã€‚ ä¸»è¦ç¼“å­˜ opcode interned string ï¼Œ å¦‚æ³¨é‡Šï¼Œå˜é‡å ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:3:0","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#opcache"},{"categories":["æŠ€æœ¯"],"content":" php-fpm ä¸‰ç§è¿è¡Œæ¨¡å¼ ondemand å†…å­˜ä¼˜å…ˆ php-fpm å¯åŠ¨æ—¶å€™ä¸ä¼šåˆ›å»º worker è¿›ç¨‹ï¼Œé“¾æ¥è¿›æ¥æ—¶æŒ‰éœ€åˆ›å»º static é™æ€æ±  å¯åŠ¨æ—¶ åˆ›å»ºå›ºå®šæ•°é‡çš„ worker è¿›ç¨‹ï¼Œä¹Ÿæœ‰1 ç§’çš„å®šæ—¶å™¨ï¼Œç»Ÿè®¡è¿›ç¨‹çŠ¶æ€ dynamic æœåŠ¡ä¼˜å…ˆ å¯åŠ¨æ—¶å€™åˆ›å»ºä¸€éƒ¨åˆ†è¿›ç¨‹ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€è°ƒæ•´worker æ•°é‡ psï¼š https://segmentfault.com/a/1190000022549643 ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/:4:0","series":null,"tags":["php"],"title":"PHP å’Œ Nginx é€šä¿¡","uri":"/posts/php-web/php%E5%92%8Cnginx%E9%80%9A%E4%BF%A1/#php-fpm-ä¸‰ç§è¿è¡Œæ¨¡å¼"},{"categories":["æŠ€æœ¯"],"content":" php å‡å€¼ ä¸ empty å’Œ is_null å½“ $a æ˜¯ä»¥ä¸‹ å€¼æ—¶å€™ (boolean) $a ä¸ºå‡ falseï¼š æœªè®¾ç½®çš„å˜é‡ var $a; æœªåˆå§‹åŒ– $a çš„å€¼ $a = null; false 0 '' â€˜0â€™ [] ä»¥ä¸Šå€¼ empty() æ˜¯å‡ä¸º true ã€‚ isset() æ£€æµ‹ ä¸€ä¸ªå˜é‡è®¾ç½®äº†ï¼Œä¸”ä¸ä¸º null ï¼Œæ‰€ä»¥ä»…ä»…å‰ 3 æ¡ ä¸º false ã€‚ is_null() æ­£å¥½ä¸ isset() ç›¸åï¼Œ ä»…ä»… å‰ 3 æ¡ ä¸º true ã€‚ gettype() å‰3æ¡ ï¼Œå‡è¿”å› nullï¼Œå³ ç±»å‹ æœªçŸ¥ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%9F%BA%E7%A1%80/:1:0","series":null,"tags":["php"],"title":"PHP åŸºç¡€","uri":"/posts/php-web/php%E5%9F%BA%E7%A1%80/#php-å‡å€¼-ä¸-empty-å’Œ-is_null"},{"categories":["æŠ€æœ¯"],"content":" php array_map å’Œ array_walk çš„åŒºåˆ«ç›¸åŒç‚¹ éƒ½æ˜¯åˆ©ç”¨å›è°ƒå‡½æ•°å¯¹æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œã€‚ array_map(callable $callback, $$arr, â€¦$$arr):array array_walk( array \u0026$arr, callable $$callback [,$$userData]) æè¿° å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ åº”ç”¨å›è°ƒå‡½æ•° ä½¿ç”¨ç”¨æˆ·å­å®šä¹‰å‡½æ•°å¯¹æ¯ä¸ªå…ƒç´ åšå›è°ƒå¤„ç† è¿”å›å€¼ è¿”å›æ•°ç»„ï¼Œå¦‚æœå›è°ƒå‡½æ•°æ²¡æœ‰è¿”å›å€¼ è¿”å› [] è¿”å› bool ï¼Œ æˆåŠŸ trueï¼Œå¦åˆ™ false å‚æ•°é¡ºåº å…ˆå›è°ƒï¼Œå†æ•°ç»„ï¼Œå†é¢å¤–æ•°ç»„ å…ˆæ•°ç»„ï¼Œå†å›è°ƒï¼Œå†ç”¨æˆ·æ•°æ® å›è°ƒå‡½æ•°å‚æ•° åªæœ‰æ•°ç»„çš„ valueï¼Œ ä¸” ä¸ªæ•° ä¸ ä¼ å…¥çš„æ•°ç»„ä¸€è‡´ï¼Œå³å¯ä»¥è½¬å…¥å¤šä¸ªæ•°ç»„ é»˜è®¤ value, key [å¯é€‰ç”¨æˆ·æ•°æ®], å¦‚æœè¦ä¿®æ”¹åŸæ•°ç»„çš„å€¼ä»¥å¼•ç”¨çš„æ–¹å¼ (\u0026) ä¼ ç¬¬ä¸€ä¸ªå€¼ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%9F%BA%E7%A1%80/:2:0","series":null,"tags":["php"],"title":"PHP åŸºç¡€","uri":"/posts/php-web/php%E5%9F%BA%E7%A1%80/#php-array_map-å’Œ-array_walk-çš„åŒºåˆ«"},{"categories":["æŠ€æœ¯"],"content":" php çš„é­”æœ¯æ–¹æ³•__construct()ï¼Œ __destruct()ï¼Œ __call()ï¼Œ __callStatic()ï¼Œ __get()ï¼Œ __set()ï¼Œ __isset()ï¼Œ __unset()ï¼Œ __sleep()ï¼Œ __wakeup()ï¼Œ __serialize(), __unserialize(), // åºåˆ—åŒ–å’Œååºåˆ—åŒ– __toString()ï¼Œ __invoke()ï¼Œ // ä»¥å‡½æ•°æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ $a= new A; $a(1); class A ä¸­çš„ __invoke($val) æ–¹æ³•å°†è¢«è°ƒç”¨ __set_state()ï¼Œ __clone() // æ·±åº¦å¤åˆ¶æ—¶ è°ƒç”¨ __debugInfo() ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%9F%BA%E7%A1%80/:3:0","series":null,"tags":["php"],"title":"PHP åŸºç¡€","uri":"/posts/php-web/php%E5%9F%BA%E7%A1%80/#php-çš„é­”æœ¯æ–¹æ³•"},{"categories":["æŠ€æœ¯"],"content":" å˜é‡çš„å­˜å‚¨ç»“æ„ä¼—æ‰€å‘¨çŸ¥ï¼Œphp æ˜¯ç”¨ c è¯­è¨€å†™çš„ï¼Œæ‰€ä»¥å…¶å˜é‡å­˜å‚¨ä¹Ÿä¾èµ–äº c è¯­è¨€ã€‚php çš„å˜é‡çš„å†…éƒ¨æ˜¯ä½¿ç”¨ä¸€ç§ zval çš„æ•°æ®ç»“æ„æ¥ä¿å­˜çš„ã€‚ c // phpæºç  Zend/zend.h æ–‡ä»¶ä¸­ typedef struct _zval_struct zval; // ... struct _zval_struct { zvalue_value value; /* å˜é‡çš„å€¼ */ zend_uint refcount__gc; /* æŒ‡å‘è¯¥å˜é‡å®¹å™¨çš„å˜é‡(ä¹Ÿç§°ç¬¦å·å³symbol)ä¸ªæ•° */ zend_uchar type; /* å˜é‡çš„ç±»å‹ */ zend_uchar is_ref__gc; /* æ˜¯å¦æ˜¯å¼•ç”¨ é»˜è®¤ false */ }; refcount__gc ä¸º 0 è¡¨ç¤ºæ²¡æœ‰å˜é‡æŒ‡å‘è¿™ä¸ªå†…å­˜å®¹å™¨ï¼Œ å°±å¯ä»¥è¢«é‡Šæ”¾ã€‚ php // refcount__gc ä¸¾ä¾‹ $a = 1; // å†…å­˜ä¸­å­˜åœ¨ ä¸€ä¸ª zval ç»“æ„ { value:1; type:integer; refcount__gc:1; is_ref__gc:false } ps: zval ç»“æ„çš„å€¼æ˜¯ zvalue_valueï¼ˆæ•°æ®ç»“æ„ï¼‰ çš„ï¼Œè¿™é‡Œè¯´ 1, ä¸å‡†ç¡® $b = $a; // zval ä¸­çš„ refcount__gc å°±åŠ  1ï¼Œ ä¸º { value:1; type:integer; refcount__gc:2; is_ref__gc:false } unset($b) // zval ä¸­çš„ refcount__gc å°±å‡ 1ï¼Œä¸º { value:1; type:integer; refcount__gc:1; is_ref__gc:false } ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/:1:0","series":null,"tags":["php"],"title":"PHP åƒåœ¾å›æ”¶æœºåˆ¶","uri":"/posts/php-web/php%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#å˜é‡çš„å­˜å‚¨ç»“æ„"},{"categories":["æŠ€æœ¯"],"content":" é¡½å›ºåƒåœ¾çš„äº§ç”Ÿç®€å•å˜é‡ refcount__gc = 0 æ—¶ï¼Œç›´æ¥é‡Šæ”¾ zval å†…å­˜ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ php \u003c?php $a = array( 'one' ); $a[] =\u0026 $a; xdebug_debug_zval( 'a' ); ä»¥ä¸Šå°†è¾“å‡ºï¼š text a: (refcount=2, is_ref=1)=array ( 0 =\u003e (refcount=1, is_ref=0)='one', 1 =\u003e (refcount=2, is_ref=1)=... ) æ­¤æ—¶ unset($a) ï¼Œ å¼•ç”¨æƒ…å†µå°†å˜æˆï¼š text (refcount=1, is_ref=1)=array ( 0 =\u003e (refcount=1, is_ref=0)='one', 1 =\u003e (refcount=1, is_ref=1)=... ) å°½ç®¡ $a å·²ç»è¢« unsetï¼Œ ä½†æ˜¯å†…å­˜ä¸­çš„æ•°æ®è¿˜åœ¨ï¼Œrefcount=1ï¼Œ ä¸èƒ½è¢«æ¸…ç†ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/:2:0","series":null,"tags":["php"],"title":"PHP åƒåœ¾å›æ”¶æœºåˆ¶","uri":"/posts/php-web/php%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#é¡½å›ºåƒåœ¾çš„äº§ç”Ÿ"},{"categories":["æŠ€æœ¯"],"content":" æ¸…ç†é¡½å›ºåƒåœ¾php 5.3 å¼•å…¥äº†æ–°çš„åƒåœ¾æ¸…ç†ç®—æ³•æ¥æ¸…ç†ä»¥ä¸Šåƒåœ¾ã€‚ å…·ä½“å‚è€ƒ https://www.php.net/manual/zh/features.gc.collecting-cycles.php å¯ä»¥è¿™ä¹ˆç†è§£ï¼š å¯¹äºä¸€ä¸ªåŒ…å«ç¯å½¢å¼•ç”¨çš„æ•°ç»„ï¼Œå¯¹æ•°ç»„ä¸­åŒ…å«çš„æ¯ä¸ªå…ƒç´ çš„ zval è¿›è¡Œå‡1æ“ä½œï¼Œä¹‹åå¦‚æœå‘ç°æ•°ç»„è‡ªèº«çš„ zval çš„ refcount å˜æˆäº†0ï¼Œé‚£ä¹ˆå¯ä»¥åˆ¤æ–­è¿™ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ªåƒåœ¾ï¼Œå¯¹è±¡ä¹Ÿç±»ä¼¼ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/:3:0","series":null,"tags":["php"],"title":"PHP åƒåœ¾å›æ”¶æœºåˆ¶","uri":"/posts/php-web/php%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#æ¸…ç†é¡½å›ºåƒåœ¾"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®php ä¸­ GC é»˜è®¤å¼€å¯ï¼Œé…ç½®é¡¹æ˜¯ ini æ–‡ä»¶ zend.enable_gc é¡¹ ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ gc_enable() å’Œ gc_disable()å‡½æ•°æ¥å¼€å¯å’Œå…³é—­GCã€‚ åƒåœ¾åˆ†æç®—æ³•å°†åœ¨èŠ‚ç‚¹ç¼“å†²åŒº(roots buffer)æ»¡äº†ä¹‹åå¯åŠ¨ã€‚ç¼“å†²åŒºé»˜è®¤å¯ä»¥æ”¾10,000ä¸ªèŠ‚ç‚¹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹Zend/zend_gc.cä¸­çš„_GC_ROOT_BUFFER_MAX_ENTRIES_ æ¥æ”¹å˜è¿™ä¸ªæ•°å€¼ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘é“¾æ¥PHPã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨gc_collect_cycles()åœ¨èŠ‚ç‚¹ç¼“å†²åŒºæœªæ»¡çš„æƒ…å†µä¸‹å¼ºåˆ¶æ‰§è¡Œåƒåœ¾åˆ†æç®—æ³•ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/php%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/:4:0","series":null,"tags":["php"],"title":"PHP åƒåœ¾å›æ”¶æœºåˆ¶","uri":"/posts/php-web/php%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#é…ç½®"},{"categories":["æŠ€æœ¯"],"content":"è¿‡æ»¤å™¨å¯ä»¥ç”¨äºç®¡é“ï¼Œé€šè¿‡ç»„åˆï¼Œè§£å†³å®é™…é—®é¢˜ï¼Œä¼˜é›…è€Œå¼ºå¤§ã€‚ å¸¸ç”¨è¿‡æ»¤å™¨ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:0:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#"},{"categories":["æŠ€æœ¯"],"content":" cat shell cat name.txt mobile.txt \u003e data # åˆå¹¶æ–‡ä»¶ # -n æ˜¾ç¤ºè¡Œå· ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:1:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#cat"},{"categories":["æŠ€æœ¯"],"content":" split ï¼šæ‹†åˆ†æ–‡ä»¶ shell split [-d] [-a num] [-l lines] [file [prefix]] split data # é»˜è®¤æ¯ä¸ªæ–‡ä»¶1000è¡Œ å‘½å xaa xab ... # -l 100 : æŒ‡å®šæ¯ä¸ªæ–‡ä»¶è¡Œæ•° # -d ï¼šæ”¹å‘½åä¸º 00 01 02 # -a 2 ï¼š å‘½åæ”¹ä¸º 3 ä½ aaa aab / 001 002 ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:2:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#split-æ‹†åˆ†æ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" tacï¼šåè½¬æ–‡æœ¬è¡Œçš„é¡ºåºå’Œ cat ç±»ä¼¼ï¼Œ å†™å…¥æ ‡å‡†è¾“å‡ºå‰å°†æ–‡æœ¬è¡Œåè½¬ï¼Œé€‚ç”¨äºæ—¥å¿—æ–‡ä»¶ç­‰ã€‚ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:3:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#tacåè½¬æ–‡æœ¬è¡Œçš„é¡ºåº"},{"categories":["æŠ€æœ¯"],"content":" revï¼šåè½¬å­—ç¬¦ shell rev data # data å†…å®¹ï¼š # 1234 # abcd # ç»“æœå¦‚ä¸‹ï¼š # dcba # 4321 rev data | tac # å€’èƒŒå¦‚æµ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:4:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#revåè½¬å­—ç¬¦"},{"categories":["æŠ€æœ¯"],"content":" head / tail ï¼šä»æ•°æ®å¼€å¤´å’Œæœ«å°¾é€‰æ‹©æ•°æ®è¡Œ shell head [-n lines] tail [-n lines] # é»˜è®¤ 10 è¡Œæ•°æ® ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:5:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#head--tail-ä»æ•°æ®å¼€å¤´å’Œæœ«å°¾é€‰æ‹©æ•°æ®è¡Œ"},{"categories":["æŠ€æœ¯"],"content":" åˆ—æ“ä½œ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:6:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#åˆ—æ“ä½œ"},{"categories":["æŠ€æœ¯"],"content":" colrm ï¼šåˆ é™¤æ•°æ®åˆ— shell colrm [startcol [endcol]] # åˆ—ç¼–å· ä» 1 å¼€å§‹ # æŠŠ students_old æ–‡ä»¶åˆ é™¤ 14 åˆ—åˆ° 20 åˆ—å ä¿å­˜åˆ° student_new æ–‡ä»¶ä¸­ colrm 14 20 \u003c students_old \u003e students_new ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:6:1","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#colrm-åˆ é™¤æ•°æ®åˆ—"},{"categories":["æŠ€æœ¯"],"content":" cut ï¼š æŠ½å–æ•°æ®åˆ— ï¼ˆä¸ colrm ç›¸åï¼‰ shell cut -c list [file ...] # æŠ½å–dataä¸­çš„ 14-30 å’Œ 42-49 åˆ— cut -c 14-30,42-49 data # ç»“åˆå…¶ä»–å‘½ä»¤ who | cut -c 1-8 | sort | uniq -c # å®šç•Œç¬¦åˆ†å‰²ï¼Œå¦‚ä¸‹å½¢å¼çš„æ•°æ®ä¹Ÿå¯ä»¥æŠ½å– å¼ ä¸‰:ç”·:23å² ç‹éº»å­:å¥³:105å² # æŠ½å–æŒ‰ç…§ ':' åˆ†å‰²åçš„ï¼Œ ç¬¬ 1 å’Œç¬¬ 3 åˆ—æ•°æ® cut -f 1,3 -d ':' data # å¯ä»¥åˆ é™¤é€‰é¡¹çš„ç©ºæ ¼ å¦‚ cut -f1,3 -d':' data # ps å¦‚æœä¸€è¡Œæ²¡æœ‰å®šç•Œç¬¦ï¼Œé»˜è®¤è¿”å›æ•´è¡Œï¼Œå¦‚æœæƒ³æŠ›å¼ƒè¿™æ ·çš„è¡Œï¼Œå¯ä»¥ä½¿ç”¨ -s ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:6:2","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#cut--æŠ½å–æ•°æ®åˆ—-ä¸-colrm-ç›¸å"},{"categories":["æŠ€æœ¯"],"content":" paste ç»„åˆæ•°æ®åˆ— shell paste [-d char...] [file ...] # åˆå¹¶ä¸‰ä¸ªæ–‡ä»¶ paste file1 file2 file3 # ä½¿ç”¨å®šç•Œç¬¦ | paste -d '|' file1 file2 # å®šç•Œç¬¦è½®æ¢ä½¿ç”¨ paste -d '|\u0026' file1 file2 ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:6:3","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#paste-ç»„åˆæ•°æ®åˆ—"},{"categories":["æŠ€æœ¯"],"content":" æ¯”è¾ƒæ–‡ä»¶","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:7:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#æ¯”è¾ƒæ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" cmp ï¼šé€å­—èŠ‚æ¯”è¾ƒ shell cmp file1 file2 # ç›¸åŒçš„è¯å°± ä¸åšä»»ä½•å¤„ç† ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:7:1","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#cmp-é€å­—èŠ‚æ¯”è¾ƒ"},{"categories":["æŠ€æœ¯"],"content":" comm ï¼š æ¯”è¾ƒæœ‰åºæ–‡æœ¬æ–‡ä»¶ shell comm [-123] file1 file2 # ç¬¬ä¸€åˆ— ä»…è¾“å‡ºç¬¬ä¸€ä¸ªæ–‡ä»¶æœ‰çš„è¡Œ # ç¬¬äºŒåˆ— ä»…è¾“å‡ºç¬¬äºŒä¸ªæ–‡ä»¶æœ‰çš„è¡Œ # ç¬¬ä¸‰åˆ— è¾“å‡ºä¸¤ä¸ªæ–‡ä»¶éƒ½æœ‰çš„è¡Œ # -1 -2 -3 è¡¨ç¤ºæŠ‘åˆ¶æŸä¸€åˆ—çš„è¾“å…¥ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:7:2","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#comm--æ¯”è¾ƒæœ‰åºæ–‡æœ¬æ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" diff / sdiffï¼š æ¯”è¾ƒæ— åºæ–‡ä»¶ shell diff file1 file2 # é»˜è®¤ æœ‰æŒ‡ç¤ºç¬¦ ï¼ˆc, d, aï¼‰å’Œè¡Œå·æ„æˆ # c ä»£è¡¨æ”¹å˜ d ä»£è¡¨åˆ é™¤ a ä»£è¡¨å¢åŠ  # ä¸­é—´ ------- åˆ†å‰² # æ–‡ä»¶2 æ–°å¢ä¸¤è¡Œ 0a1,2 \u003e æ²å›­æ˜¥Â·é›ª \u003e # ç¬¬5 ç¬¬7è¡Œä¸ä¸€è‡´ 5c7 \u003c é¡»æ™´æ—¥5ï¼Œçœ‹çº¢è£…ç´ è£¹ï¼Œåˆ†å¤–å¦–å¨†6ã€‚ --- \u003e é¡»æ™´æ—¥ï¼Œçœ‹çº¢è£…ç´ è£¹ï¼Œåˆ†å¤–å¦–å¨†ã€‚ # æ–‡ä»¶2 åˆ é™¤äº†ä¸€è¡Œ 10d11 \u003c ä¿±å¾€çŸ£ï¼Œæ•°é£æµäººç‰©ï¼Œè¿˜çœ‹ä»Šæœã€‚ # é€‰é¡¹ # -c å’Œ -u å¯ä»¥æ˜¾ç¤º 2 è¡Œä¸Šä¸‹æ–‡ä¿¡æ¯ # -C3 -U3 å¯ä»¥æ˜¾ç¤º 3 è¡Œä¸Šä¸‹æ–‡ä¿¡æ¯ # å¹¶åˆ—æ¯”è¾ƒ ç­‰ä»·çš„ diff -y file1 file2 sdiff file1 file2 # é€‰é¡¹ -l ç›¸åŒçš„è¡Œåªæ˜¾ç¤ºå·¦ä¾§çš„ -s ä¸æ˜¾ç¤ºç›¸åŒçš„è¡Œ -w 50 æŒ‡å®šåˆ—å®½åº¦ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:7:3","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#diff--sdiff-æ¯”è¾ƒæ— åºæ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" ç»Ÿè®¡å’Œæ ¼å¼åŒ–","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:8:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#ç»Ÿè®¡å’Œæ ¼å¼åŒ–"},{"categories":["æŠ€æœ¯"],"content":" nl ï¼šåˆ›å»ºè¡Œå· shell nl [-v start] [-i increment] [-b a] [-n ln|rn|rz] [file ...] # start èµ·å§‹å· # increment å¢é‡ # é»˜è®¤ nl ä¸å¯¹ç©ºè¡Œç¼–å·ï¼Œ -b a ï¼ˆall lines æ‰€æœ‰è¡Œï¼‰ # ln=å·¦å¯¹é½ï¼Œæ²¡æœ‰å‰å¯¼ 0 # rn=å³å¯¹é½ï¼Œæ²¡æœ‰å‰å¯¼ 0 # rz=å³å¯¹é½ï¼Œæœ‰å‰å¯¼ 0 ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:8:1","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#nl-åˆ›å»ºè¡Œå·"},{"categories":["æŠ€æœ¯"],"content":" wc : å•è¯ç»Ÿè®¡ shell wc [-clLw] [file ...] # wc é»˜è®¤è¾“å‡ºä¸‰ä¸ªæ•°å­—ï¼šè¡Œæ•°ï¼ˆlineï¼‰ï¼Œå•è¯æ•°ï¼ˆwordï¼‰ï¼Œå­—ç¬¦æ•°ï¼ˆcharï¼‰ï¼ŒLWC ï¼ˆlook at Women Carefullyï¼‰ # -clw æ˜¾ç¤ºæŒ‡å®šåˆ— # -L æ˜¾ç¤ºæœ€é•¿çš„è¡Œ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:8:2","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#wc--å•è¯ç»Ÿè®¡"},{"categories":["æŠ€æœ¯"],"content":" expand: å°†åˆ¶è¡¨ç¬¦è½¬æ¢æˆç©ºæ ¼ shell expand [-i] [-t size | -t list] [file...] # -i åªè½¬æ¢å¼€å¤´çš„åˆ¶è¡¨ç¬¦ # -t size é»˜è®¤sizeç­‰äº8 ï¼Œæ¯8ä¸ªä½ç½®ä¸€ä¸ªåˆ¶è¡¨ç¬¦ # -t list æŒ‡å®šåˆ¶è¡¨ç¬¦ä½äºç‰¹å®šçš„ä½ç½®ï¼Œ0æŒ‡ç¬¬ä¸€ä¸ªä½ç½®ï¼Œå¦‚ expand -t 7,15,21 data ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:8:3","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#expand-å°†åˆ¶è¡¨ç¬¦è½¬æ¢æˆç©ºæ ¼"},{"categories":["æŠ€æœ¯"],"content":" unexpand : å°†ç©ºæ ¼è½¬æ¢æˆåˆ¶è¡¨ç¬¦ shell unexpand [-a] [-t size | -t list] [file ...] # é»˜è®¤åªæ›¿æ¢å¼€å¤´çš„ç©ºæ ¼ # -a æ ‡è¯†æ›¿æ¢æ‰€æœ‰ç©ºæ ¼ # -t çš„å‚æ•°å’Œ expand ä¸€è‡´ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:8:4","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#unexpand--å°†ç©ºæ ¼è½¬æ¢æˆåˆ¶è¡¨ç¬¦"},{"categories":["æŠ€æœ¯"],"content":" fold: é•¿è¡Œåˆ†æˆçŸ­è¡Œ shell fold [-s] [-w width] [file ...] # é»˜è®¤ 80 å­—ç¬¦æ¯è¡Œï¼Œ # -w width å¯ä»¥é‡æ–°æŒ‡å®šå®½åº¦ # -s ä¸ä»ä¸­é—´åˆ†å‰²å•è¯ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:8:5","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#fold-é•¿è¡Œåˆ†æˆçŸ­è¡Œ"},{"categories":["æŠ€æœ¯"],"content":" fmtï¼šå°†æ®µè½ä¸­çš„å„è¡Œè¿æ¥èµ·æ¥ shell fmt [-su] [-w width] [file...] # -w width è¡Œå®½ # -u ç»Ÿä¸€é—´è·ï¼Œå•è¯é—´æœ‰å¤šä¸ªç©ºæ ¼ï¼Œå‡å°‘ï¼Œåªä¿ç•™ä¸€ä¸ª # -s ä»…æ‹†åˆ†é•¿è¡Œï¼Œè€Œä¸è¿æ¥çŸ­è¡Œ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:8:6","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#fmtå°†æ®µè½ä¸­çš„å„è¡Œè¿æ¥èµ·æ¥"},{"categories":["æŠ€æœ¯"],"content":" é€‰å–ã€æ’åˆ—ã€ç»„åˆä¸å˜æ¢","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:0","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#é€‰å–æ’åˆ—ç»„åˆä¸å˜æ¢"},{"categories":["æŠ€æœ¯"],"content":" grepï¼šé€‰å–åŒ…å«ç‰¹å®šæ¨¡å¼çš„è¡Œ shell grep [-cilLnrsvwx] pattern [file...] # -c ç»Ÿè®¡æ•°é‡, ls -F ä¼šåœ¨å­ç›®å½•ä¼šæ·»åŠ /å­—ç¬¦ï¼Œä»¥ä¸‹å¯ä»¥ç»Ÿè®¡åæ–œçº¿çš„æ•°é‡ å³å­ç›®å½•çš„æ•°é‡ ls -F /etc | grep -c \"/\" # ç»Ÿè®¡æ€»æ•° ls /etc | wc -l # -i å¿½ç•¥å¤§å°å†™ # -n æ˜¾ç¤ºè¡Œå· grep -in pizza food-list.md # å¿½ç•¥å¤§å°å†™æŸ¥æ‰¾å‡ºå« pizza çš„è¡Œå¹¶æ˜¾ç¤ºè¡Œå· # -l ä¸æ˜¾ç¤ºåŒ…å«çš„è¡Œï¼Œè€Œæ˜¾ç¤ºåŒ…å«çš„æ–‡ä»¶å æŸ¥æ‰¾å“ªä¸ªç­æœ‰å°æ˜åŒå­¦ grep -il xiaoming class1_names class2_names class3_names # output class1_names # -L ä¸ -lç›¸åï¼Œæ˜¾ç¤ºä¸åŒ…å«çš„æ–‡ä»¶ grep -iL xiaoming class1_names class2_names class3_names # output class2_names class3_names # -w å•è¯å®Œæ•´åŒ¹é…ï¼Œ grep now data # ä¼šåŒ¹é… nowï¼Œä¹Ÿä¼šåŒ¹é… know grep -w now # åªåŒ¹é… now # -v å–åï¼Œé€‰å–ä¸åŒ…å«çš„æ¨¡å¼çš„æ‰€æœ‰è¡Œ grep -v done todo_list # åˆ—å‡ºæ‰€æœ‰æœªå®Œæˆçš„é¡¹ç›® grep -cv done todo_list # ç»Ÿè®¡ä¸ºå®Œæˆçš„é¡¹ç›®æ•°ç›® # -x æŸ¥æ‰¾å ç”¨æ•´è¡Œçš„ grep -x \"hello world\" data # è¿”å› ç”± 'hello world' æ„æˆçš„è¡Œ # -r é€’å½’æœç´¢ç›®å½•æ ‘ grep -r initialize admin # æœç´¢adminç›®å½•åŠå­ç›®å½•æ–‡ä»¶ä¸­æ˜¯å¦æœ‰å•è¯ â€œinttializeâ€ # -s æŠ‘åˆ¶é”™è¯¯æ˜¾ç¤º ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:1","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#grepé€‰å–åŒ…å«ç‰¹å®šæ¨¡å¼çš„è¡Œ"},{"categories":["æŠ€æœ¯"],"content":" lookï¼šæŸ¥æ‰¾ä»¥ç‰¹å®šæ¨¡å¼å¼€å¤´çš„æ‰€æœ‰å•è¯ shell look [-df] pattern file # look æœç´¢ä»¥å­—æ¯é¡ºåºæ’åˆ—çš„æ•°æ®ï¼Œå¹¶ä»¥ç‰¹å®šçš„æ¨¡å¼å¼€å¤´çš„è¡Œ # å› ä¸º look ä½¿ç”¨äºŒåˆ†æ³•ï¼Œæœç´¢æ•°æ®ï¼Œè¦æ±‚åŒæ—¶è·å–æ‰€æœ‰æ•°æ®ï¼Œæ•…åªèƒ½å†ç®¡é“çš„å¼€å¤´ä½¿ç”¨æ•°æ®ï¼Œä¸èƒ½å†ç®¡é“ä¸­é—´ä½¿ç”¨ # -d åªè€ƒè™‘å­—æ¯å’Œæ•°å­— # -f å¿½ç•¥å¤§å°å†™ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:2","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#lookæŸ¥æ‰¾ä»¥ç‰¹å®šæ¨¡å¼å¼€å¤´çš„æ‰€æœ‰å•è¯"},{"categories":["æŠ€æœ¯"],"content":" sort : æ’åºæ•°æ® shell sort [-dfnru] [-o outfile] [infile...] # æ’åºæ•°æ®å’ŒæŸ¥çœ‹æ•°æ®æ˜¯å¦æ’åº # æ’åºåä¿å­˜åˆ°åŸæ–‡ä»¶æ—¶ï¼Œè¿™æ˜¯é”™è¯¯çš„ é‡å®šå‘è¾“å‡ºæ—¶ï¼Œ shell è¿è¡Œå‘½ä»¤å‰ä¼šæ¸…ç©ºè¾“å‡ºçš„æ–‡ä»¶ï¼Œï¼ˆé™¤éè®¾ç½®äº†å˜é‡ noclobber ï¼‰ sort names \u003e names # wrong sort -o names names # right # -d åªæŸ¥çœ‹å­—æ¯ã€æ•°å­—å’Œç©ºç™½ç¬¦ï¼Œå¦‚æœæ•°æ®ä¸­æœ‰å¦¨ç¢æ’åºçš„æ ‡ç‚¹æ—¶ï¼Œä½¿ç”¨æ­¤é€‰é¡¹ # -f å¿½ç•¥å¤§å°å†™ # -n è¯†åˆ«å¼€å¤´çš„æ•°å­—ï¼ŒæŒ‰æ•°å­—å¤§å°æ’åº # -r å€’åº # -u å”¯ä¸€ï¼Œç›¸åŒçš„è¡Œï¼Œåªç•™ä¸‹ä¸€è¡Œ sort -c[u] [file] # -c æ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰åºï¼Œæ— åºè¾“å‡ºï¼Œå¼€å§‹æ— åºçš„è¡Œï¼Œæœ‰åºæ— æ¶ˆæ¯ï¼ˆæ²¡æœ‰æ¶ˆæ¯å°±å¥½çš„æ¶ˆæ¯ï¼‰ # -u é…åˆ-cä½¿ç”¨ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®æ˜¯æœ‰åºï¼Œ å”¯ä¸€ # æ’åºè§„åˆ™ï¼šå–å†³äºä½ ç³»ç»Ÿçš„å­—ç¬¦ç»„ç»‡æ–¹å¼ # æ—©æœŸä½¿ç”¨ ASCII é¡ºåºï¼Œ ï¼ˆSNULï¼‰ ç©ºæ ¼ æ•°å­— å¤§å†™å­—æ¯ å°å†™å­—æ¯ # ç°åœ¨ ä½¿ç”¨ç¯å¢ƒå˜é‡ LC_COLLATE æŒ‡å®šä½¿ç”¨å“ªä¸€ç§æ’åº c æ˜¯ ASCII locale # å¯ä»¥æŸ¥çœ‹æ‰€æœ‰åŒºåŸŸè®¾ç½®çš„å½“å‰å€¼ locale -a # æŸ¥çœ‹è‡ªå·±çš„ç³»ç»Ÿæ”¯æŒå“ªäº›åŒºåŸŸè®¾ç½® ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:3","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#sort--æ’åºæ•°æ®"},{"categories":["æŠ€æœ¯"],"content":" uniq: æŸ¥æ‰¾é‡å¤è¡Œuniq å¯ä»¥åšå››ä¸ªä¸åŒçš„ä»»åŠ¡ æ¶ˆé™¤é‡å¤è¡Œ uniq é€‰å–é‡å¤è¡Œ uniq -d é€‰å–å”¯ä¸€è¡Œ uniq -u ç»Ÿè®¡é‡å¤è¡Œæ•°é‡ uniq -c shell uniq [-cdu] [infile] [outfile] # è¾“å…¥å¿…é¡»æ˜¯æœ‰åºçš„ï¼Œå³é‡å¤è¡Œæ˜¯è¿ç»­çš„ # -d åªæŸ¥çœ‹é‡å¤è¡Œ # -u åªæŸ¥çœ‹å”¯ä¸€è¡Œ # -c ç»Ÿè®¡å”¯ä¸€è¡Œçš„æ•°é‡ ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:4","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#uniq-æŸ¥æ‰¾é‡å¤è¡Œ"},{"categories":["æŠ€æœ¯"],"content":" jion: åŸºäºç‰¹å®šå­—æ®µçš„å€¼å°†ä¸¤ä¸ªæœ‰åºæ–‡ä»¶ç»„åˆåœ¨ä¸€èµ· shell join [-i] [-a1|-v1] [-a2|v2] [-1 field1] [-2 field2] file1 file2 # eg: cat file1 111 å¼ ä¸‰ 222 æå›› 333 ç‹äº” 999 å­™æ‚Ÿç©º cat file2 111 10086 222 10010 333 110 444 120 555 119 # join file1 file2 111 å¼ ä¸‰ 10086 222 æå›› 10010 333 ç‹äº” 110 # join -a1 file1 file2 111 å¼ ä¸‰ 10086 222 æå›› 10010 333 ç‹äº” 110 999 å­™æ‚Ÿç©º # join -v1 file1 file2 999 å­™æ‚Ÿç©º # å¦‚ä¸Šï¼Œ join å…³è”ç±»ä¼¼äºå…³ç³»æ•°æ®åº“çš„çš„joinï¼Œ # æ²¡-aé€‰é¡¹æ—¶ å†…å…³è” inner join ï¼Œåªè¾“å‡ºå…³è”å­—æ®µåŒ¹é…çš„è¡Œ # -a1 -a2 æ—¶è¿˜è¾“å‡ºå…³è”å­—æ®µä¸åŒ¹é…çš„è¡Œ # -v1 -v2 åªæŸ¥çœ‹ä¸åŒ¹é…çš„è¡Œ # -i å¿½ç•¥å¤§å°å†™ # join é»˜è®¤ä½¿ç”¨çš„æ˜¯ æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå­—æ®µ å¯ä»¥ä½¿ç”¨ -1 -2 æŒ‡å®šä¸åŒçš„å­—æ®µ # ç‰¹åˆ«æ³¨æ„ï¼š join ä½¿ç”¨çš„æœ‰åºæ•°æ® ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:5","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#jion-åŸºäºç‰¹å®šå­—æ®µçš„å€¼å°†ä¸¤ä¸ªæœ‰åºæ–‡ä»¶ç»„åˆåœ¨ä¸€èµ·"},{"categories":["æŠ€æœ¯"],"content":" tsort: ä»¥ååºåˆ›å»ºå…¨åº shell tsort [file] # ååºï¼šåªæŒ‡å®šäº†ä¸€éƒ¨åˆ†æ´»åŠ¨çš„é¡ºåº # file ä¸­çš„æ¯ä¸€è¡Œå¿…é¡»åŒ…å«ä¸€å †ç©ºç™½ç¬¦åˆ†å‰²çš„å­—ç¬¦ä¸² æ¯ä¸ªå­—ç¬¦ä¸²ä»£è¡¨ä¸€ä¸ªååº # æœ€ç»ˆç»“æœç”Ÿæˆä¸€ä¸ªå®Œæ•´åºåˆ— ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:6","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#tsort-ä»¥ååºåˆ›å»ºå…¨åº"},{"categories":["æŠ€æœ¯"],"content":" strings: äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æœç´¢","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:7","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#strings-äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æœç´¢"},{"categories":["æŠ€æœ¯"],"content":" tr: è½¬æ¢å­—ç¬¦ è½¬æ¢å­—ç¬¦ ï¼šå°å†™è½¬å¤§å†™ï¼Œåˆ¶è¡¨ç¬¦è½¬ç©ºæ ¼ æŒ¤å‹å­—ç¬¦ï¼šè¿ç»­æ•°å­— æ›¿æ¢ä¸º â€œXâ€ ,å¤šä¸ªç©ºæ ¼è½¬æ¢ä¸ºä¸€ä¸ª åˆ é™¤æŒ‡å®šå­—ç¬¦ï¼šåˆ é™¤æ‰€æœ‰æŒ‡æ ‡ç¬¦ shell tr [-cds] [set1 [set2]] # åªèƒ½ä»æ ‡å‡†è¾“å…¥æ¥æ”¶æ•°æ®ï¼Œä¸èƒ½ä»æ–‡ä»¶è¯»å–ï¼Œå¦‚æœè¦ä»æ–‡ä»¶è¯»å–è¯·é‡å®šå‘ tr a A \u003c old \u003e new # old æ–‡ä»¶ä¸­çš„ a æ›¿æ¢æˆ A äº†, å¹¶å†™å…¥ new æ–‡ä»¶ tr abc ABC \u003c old \u003e new # abc æ›¿æ¢ ABC # ä»¥ä¸‹æƒ…å†µï¼Œç¬¬äºŒç»„æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯é‡å¤çš„ï¼Œç­‰ä»· tr abcd Ax tr abcd Axxxx # ç‰¹æ®Šå­—ç¬¦éœ€è¦å¼•ç”¨æˆ–è½¬ä¹‰ tr ':;?' \\. # :;? å‡æ›¿æ¢æˆäº† . # æ”¯æŒèŒƒå›´ tr A-Z a-z tr 0-9 A-J # ç¼©å†™ (é¢„å®šä¹‰å­—ç¬¦) tr [:upper:] [:lower:] # å¤§å†™è½¬å°å†™ tr [:diggit:] A-J # ä¸å¯æ˜¾ç¤ºçš„å­—ç¬¦ (è½¬ä¹‰ or ASCIIç çš„å€¼) tr '\\r' '\\n' \u003c macfile \u003e unixfile # å›è½¦ç¬¦è½¬æ¢ä¸ºæ¢è¡Œç¬¦ tr '\\015' '\\012' \u003c macfile \u003e unixfile tr '\\t' ' ' # åˆ¶è¡¨ç¬¦è½¬æ¢ä¸ºç©ºæ ¼ # ********* æŒ¤å‹ ********* tr -s [:digit:] X # æ•°å­—è½¬æ¢æˆ x tr -s ' ' ' ' # æŒ¤å‹ç©ºæ ¼ # **** åˆ é™¤ **** tr -d '()' # **** è¡¥é›† ***** tr -c ' \\n' x \u003c olddata \u003e newdata # hello world ==\u003e xxxxx xxxxx eg: ç»Ÿè®¡ä¸¤ä¸ªæ–‡ä»¶çš„å•è¯æ•° cat greek roman | tr -cs [:alpha:]\\' \"\\n\" | sort -fu | wc -l ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:8","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#tr-è½¬æ¢å­—ç¬¦"},{"categories":["æŠ€æœ¯"],"content":" sed: éäº¤äº’å¼æ–‡æœ¬ç¼–è¾‘(æå‰è®¾è®¡å‘½ä»¤ï¼Œå‘½ä»¤å‘ç»™ç¨‹åºï¼Œè‡ªåŠ¨æ‰§è¡Œ)(æµç¼–è¾‘å™¨) shell sed [-i] command | -e command ... [f] -i # ç›´æ¥ä¿®æ”¹åŸæ–‡ä»¶ # å‘½ä»¤ # a è¡Œåæ’å…¥ï¼Œ å¤šè¡Œçš„è¯ æœ«å°¾\"\\\" # i è¡Œå‰æ’å…¥ï¼Œ å¤šè¡Œ \"\\\" # c æ›¿æ¢ # d åˆ é™¤ # p æ‰“å° # s æ›¿æ¢ å¯ç”¨æ­£åˆ™è¡¨è¾¾å¼ # æŸ¥çœ‹æŸä¸€è¡Œ sed -n '1003,1p' data.txt # ä¿®æ”¹æŸä¸€è¡Œ sed -i '1003c new line content' data.txt # å°† 11 ä¿®æ”¹ä¸º 12ï¼Œg ä»£è¡¨ä¸€è¡Œçš„æ‰€æœ‰ sed -i 's/11/12/g' xxx.log # æ¯è¡Œ å¼€å¤´/æœ«å°¾ è¿½åŠ  aa sed -i 's/^/aa/g' xxx.log sed -i 's/$/aa/g' xxx.log # ä¿®æ”¹æ¯è¡Œç¬¬2ä¸ª åŒ¹é…çš„11 sed -i 's/11/12/2' xxx.log # ä¿®æ”¹æ¯è¡Œå¼Ÿ2ä¸ªä»¥åŠä»¥åçš„ åŒ¹é…çš„11 sed -i 's/11/12/2g' xxx.log # \u0026 ç¬¦å·ä»£è¡¨çš„æ˜¯ä½ å‰é¢çš„åŒ¹é…çš„æ¨¡å¼ å°†æ¯è¡Œçš„ç¬¬ä¸€ä¸ª hello æ›¿æ¢ä¸º (hello) sed 's/hello/(\u0026)/' xxx.log ","date":"2021-11-04","objectID":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/:9:9","series":null,"tags":["unix","linux"],"title":"Unix è¿‡æ»¤å™¨","uri":"/posts/unixs/unix-%E8%BF%87%E6%BB%A4%E5%99%A8/#sed-éäº¤äº’å¼æ–‡æœ¬ç¼–è¾‘æå‰è®¾è®¡å‘½ä»¤å‘½ä»¤å‘ç»™ç¨‹åºè‡ªåŠ¨æ‰§è¡Œæµç¼–è¾‘å™¨"},{"categories":["æŠ€æœ¯"],"content":" ç§»åŠ¨å…‰æ ‡ - å…‰æ ‡ç§»åŠ¨åˆ°ä¸Šä¸€è¡Œå¼€å¤´ + æˆ– \u003creturn\u003e å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œå¼€å¤´ 0 å½“å‰è¡Œå¼€å¤´ $ å½“å‰è¡Œæœ«å°¾ ^ å½“å‰è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ w ä¸‹ä¸€ä¸ªå•è¯çš„è¯é¦– W å¿½ç•¥æ ‡ç‚¹ e ä¸‹ä¸€ä¸ªå•è¯çš„è¯å°¾ E â€¦ b ä¸Šä¸€ä¸ªå•è¯çš„è¯é¦– B â€¦ ( ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå¥å­ ) ä¸‹ä¸€ä¸ªå¥å­ { ä¸Šä¸€ä¸ªæ®µè½ } ä¸‹ä¸€ä¸ªæ®µè½ H ç§»åŠ¨åˆ°å±å¹•é¡¶éƒ¨ M å±å¹•ä¸­é—´ L æœ€åä¸€è¡Œ æ•°å­—ç»„åˆ 10w å‘åç§»åŠ¨10ä¸ªå•è¯ 20j å‘ä¸‹ç§»åŠ¨20è¡Œ 3{ å‘åç§»åŠ¨3æ®µ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:1:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#ç§»åŠ¨å…‰æ ‡"},{"categories":["æŠ€æœ¯"],"content":" åœ¨ç¼–è¾‘ç¼“å†²åŒºç§»åŠ¨^F å‘ä¸‹ç§»åŠ¨ä¸€å± ^B å‘ä¸Šç§»åŠ¨ä¸€å± ^D å‘ä¸‹ç§»åŠ¨åŠå± ^U å‘ä¸Šç§»åŠ¨åŠå± 6^F å‘ä¸‹ç§»åŠ¨6å± ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:2:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#åœ¨ç¼–è¾‘ç¼“å†²åŒºç§»åŠ¨"},{"categories":["æŠ€æœ¯"],"content":" è·³è½¬åˆ°å‰ä¸€ä½ç½®`` æˆ– '' è¿”å›åˆ°å‰ä¸€ä¸ªä½ç½® ma æ ‡è¯†å½“å‰è¡Œåç§°ä¸º â€œaâ€ `a æˆ– 'a å³å¯è·³è½¬åˆ°æ ‡è®°å¼€å¤´ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:3:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#è·³è½¬åˆ°å‰ä¸€ä½ç½®"},{"categories":["æŠ€æœ¯"],"content":" æœç´¢æ¨¡å¼/ æˆ–è€… ? åŠ è¦æœç´¢çš„å†…å®¹ / å‘å‰æœç´¢ ? å‘åæœç´¢ n ä¸‹ä¸€ä¸ª N ä¸Šä¸€ä¸ª ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:4:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#æœç´¢æ¨¡å¼"},{"categories":["æŠ€æœ¯"],"content":" è¡Œå·:set number æ˜¾ç¤ºè¡Œå· :set nonumber éšè—è¡Œå· 100G è·³è½¬åˆ°100è¡Œ gg ç¬¬ä¸€è¡Œ G æœ«å°¾ä¸€è¡Œ :100 è·³è½¬åˆ°100è¡Œ :$ æœ€åä¸€è¡Œ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:5:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#è¡Œå·"},{"categories":["æŠ€æœ¯"],"content":" æ’å…¥æ–‡æœ¬i å…‰æ ‡å‰æ’å…¥ a å…‰æ ‡åæ’å…¥ I å½“å‰è¡Œå¼€å¤´æ’å…¥ A å½“å‰è¡Œç»“å°¾æ’å…¥ o å½“å‰è¡Œä¸‹é¢æ’å…¥ä¸€è¡Œ O å½“å‰è¡Œä¸Šé¢æ’å…¥ä¸€è¡Œ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:6:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#æ’å…¥æ–‡æœ¬"},{"categories":["æŠ€æœ¯"],"content":" ä¿®æ”¹æ–‡æœ¬ra æŠŠå…‰æ ‡ä¸Šçš„å•ä¸ªå­—ç¬¦ä¿®æ”¹ä¸ºa Rxxx\u003cEsc\u003e Rä¼šåˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ï¼Œé”®å…¥çš„å­—ç¬¦å°†è¢«æ›¿æ¢å½“å‰è¡Œçš„ä¸€ä¸ªå­—ç¬¦ï¼Œ è¿”å›å‘½ä»¤æ¨¡å¼ s (substitute, æ›¿æ¢) ä½¿ç”¨å¤šä¸ªå­—ç¬¦æ›¿æ¢å…‰æ ‡ä¸Šçš„å­—ç¬¦ C æ›¿æ¢å½“å‰å…‰æ ‡ä½ç½®åˆ°æœ¬è¡Œç»“å°¾æ‰€æœ‰å­—ç¬¦ S æˆ– cc æ›¿æ¢æ•´è¡Œ cmove ä»å…‰æ ‡å¤„æ›¿æ¢åˆ° move æ‰€ç»™å‡ºçš„ä½ç½®å¤„ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:7:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#ä¿®æ”¹æ–‡æœ¬"},{"categories":["æŠ€æœ¯"],"content":" æ›¿æ¢æ–‡æœ¬:s/pattern/replace/gc å½“å‰è¡Œä¸Šæ›¿æ¢ é»˜è®¤æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œg(global å…¨å±€)ï¼Œæ›¿æ¢æœ¬è¡Œæ‰€æœ‰åŒ¹é…é¡¹ï¼› c(confirm, ç¡®è®¤) æ›¿æ¢å‰éœ€è¦ä½ åŒæ„ :45s/pattern/replace/ æ›¿æ¢57è¡Œçš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ :10,50s/pattern/replace/ 10åˆ°50è¡Œ :.,$s/s/pattern/replace/g å½“å‰è¡Œéƒ½ç»“å°¾æœ€åä¸€è¡Œ . ä»£è¡¨å½“å‰è¡Œ, $ ä»£è¡¨ç»“å°¾æœ€åä¸€è¡Œ :%s/pattern/replace/g æ›¿æ¢æ‰€æœ‰è¡Œ % ä»£è¡¨æ‰€æœ‰è¡Œ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:8:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#æ›¿æ¢æ–‡æœ¬"},{"categories":["æŠ€æœ¯"],"content":" åˆ é™¤æ–‡æœ¬x åˆ é™¤å½“å‰å…‰æ ‡å¤„å­—ç¬¦ X åˆ é™¤å…‰æ ‡å·¦è¾¹çš„ä¸€ä¸ªå­—ç¬¦ D åˆ é™¤å½“å‰å…‰æ ‡åˆ°æœ¬è¡Œç»“å°¾çš„å­—ç¬¦ dmove åˆ é™¤å½“å‰å…‰æ ‡éƒ½ move æ‰€åœ¨ä½ç½®çš„å­—ç¬¦ dd åˆ é™¤å½“å‰è¡Œ :12d åˆ é™¤12è¡Œ ç­‰ä»·äº 12dd :12,34 åˆ é™¤12åˆ°34è¡Œ eg: dw åˆ é™¤ä¸€ä¸ªå•è¯ d10w åˆ é™¤10ä¸ªå•è¯ d10W åˆ é™¤10ä¸ªå•è¯ï¼ˆå¿½ç•¥æ ‡ç‚¹ï¼‰ db å‘ååˆ é™¤1ä¸ªå•è¯ d2) åˆ é™¤2ä¸ªå¥å­ d3} åˆ é™¤5ä¸ªæ®µè½ dG åˆ é™¤åˆ°ç»“å°¾ dgg åˆ é™¤åˆ°å¼€å¤´ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:9:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#åˆ é™¤æ–‡æœ¬"},{"categories":["æŠ€æœ¯"],"content":" æ’¤é”€æˆ–é‡å¤æ”¹å˜u æ’¤é”€ä¸Šä¸€æ¡å‘½ä»¤ U æ¢å¤å½“å‰è¡Œ . é‡å¤ä¸Šä¸€å‘½ä»¤å¯¹ç¼–è¾‘ç¼“å†²åŒºçš„ä¿®æ”¹ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:10:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#æ’¤é”€æˆ–é‡å¤æ”¹å˜"},{"categories":["æŠ€æœ¯"],"content":" æ¢å¤åˆ é™¤æ¯åˆ é™¤ä¸€è¡Œæˆ–å¤šè¡Œæ–‡æœ¬çš„æ—¶ï¼Œvi éƒ½å°†å†…å®¹ä¿å­˜åœ¨ä¸€ä¸ªç‰¹æ®Šçš„å­˜å‚¨åŒºé‡Œï¼Œç¼–å·ç¼“å†²åŒºã€‚vi æœ‰ 9 ä¸ªç¼“å†²åŒºã€‚ ä»»ä½•æ—¶å€™ï¼Œéƒ½å¯ä»¥å°†ç¼–å·ç¼“å†²åŒºçš„å†…å®¹æ’å…¥åˆ°ç¼–è¾‘ç¼“å†²åŒºé‡Œã€‚ \"1p æˆ– \"2P å³å¯æ’å…¥ p åœ¨å½“å‰è¡Œä¸‹ï¼ŒP åœ¨å½“å‰è¡Œä¸Š tip: ç¼–å·ç¼“å†²åŒºåªå­˜å‚¨åˆ é™¤çš„è¡Œï¼Œå•ä¸ªå­—ç¬¦æˆ–å¤šä¸ªå­—ç¬¦ä¸ä¼šä¿å­˜åœ¨ç¼–å·ç¼“å†²åŒº ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:11:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#æ¢å¤åˆ é™¤"},{"categories":["æŠ€æœ¯"],"content":" ç§»åŠ¨æ–‡æœ¬vi æ€»æœ‰ä¸€ä¸ªæ— åç¼“å†²åŒºï¼Œä¸ºä¸Šä¸€æ¬¡åˆ é™¤ä¿å­˜äº†ä¸€ä»½å‰¯æœ¬ã€‚ä»»ä½•æ—¶å€™å¯ä»¥ä½¿ç”¨ p æˆ– P å°†ç¼“å†²åŒºçš„å†…å®¹å¤åˆ¶åˆ°ç¼–è¾‘ç¼“å†²åŒºä¸­ã€‚ xp è°ƒæ¢ä¸¤ä¸ªå­—æ¯çš„ä½ç½® deep è°ƒæ¢ä¸¤ä¸ªå•è¯ï¼ˆå…‰æ ‡å¤„äºç¬¬ä¸€ä¸ªå•è¯çš„å·¦è¾¹ï¼‰ ddp è°ƒæ¢ä¸¤è¡Œ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:12:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#ç§»åŠ¨æ–‡æœ¬"},{"categories":["æŠ€æœ¯"],"content":" å¤åˆ¶æ–‡æœ¬åˆ†3æ­¥ yã€yy æˆ– Y å‘½ä»¤å°†æ–‡æœ¬ç”±ç¼–è¾‘ç¼“å†²åŒºå¤åˆ¶åˆ°æ— åç¼“å†²åŒºï¼Œä½†ä¸åˆ é™¤åŸå§‹æ–‡æœ¬ã€‚ å…‰æ ‡ç§»åŠ¨åˆ°æ’å…¥åˆ°å¸Œæœ›æ’å…¥æ–‡æœ¬çš„ä½ç½®ã€‚ ä½¿ç”¨ p æˆ– P æ’å…¥ã€‚ y (yank æ¥å‡º) å’Œ d å‘½ä»¤å·¥ä½œæ–¹å¼ä¸€æ · yw æ¥å‡ºä¸€ä¸ªå•è¯ y10W 10ä¸ªå•è¯ yb å‘å‰æ¥å‡ºä¸€ä¸ªå•è¯ y2) æ¥å‡º2ä¸ªå¥å­ y5} æ¥å‡º5ä¸ªæ®µè½ yy æ¥å‡º1è¡Œ 12yy æ¥å‡º12è¡Œ ç­‰ä»·äº 12Y y$ æ¥å‡ºåˆ°è¡Œå°¾éƒ¨ y0 æ¥å‡ºåˆ°è¡Œå¼€å¤´ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:13:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#å¤åˆ¶æ–‡æœ¬"},{"categories":["æŠ€æœ¯"],"content":" æ”¹å˜å­—æ¯å¤§å°å†™~ æ”¹å˜å½“å‰å­—æ¯å¤§å°å†™ï¼Œå¹¶å‘åç§»åŠ¨ä¸€ä¸ªä½ç½® 7~ é‡å¤7æ¬¡~ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:14:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#æ”¹å˜å­—æ¯å¤§å°å†™"},{"categories":["æŠ€æœ¯"],"content":" è®¾ç½®é€‰é¡¹ shell :set [no]option... :set option[=value]... # æ˜¾ç¤ºè¾“å…¥æé†’ :set showmode :set noshowmode # æ˜¾ç¤ºè¡Œå· :set number :set nonumber # é€‰é¡¹æ˜¯å˜é‡çš„ :set tabstop=4 ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:15:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#è®¾ç½®é€‰é¡¹"},{"categories":["æŠ€æœ¯"],"content":" æ˜¾ç¤ºé€‰é¡¹ shell :set [option[?]... | all] # æ˜¾ç¤ºæ‰€æœ‰é€‰é¡¹çš„å€¼ :set all :set number? ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:16:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#æ˜¾ç¤ºé€‰é¡¹"},{"categories":["æŠ€æœ¯"],"content":" é”®å…¥è¿‡ç¨‹è‡ªåŠ¨æ¢è¡Œ:set wrapmargin=n / :set wm=n n æ˜¯ä»å³è¾¹è¾¹ç¼˜ç®—èµ·å¼€å§‹æ¢è¡Œçš„ä½ç½® :set wm=l æ–‡æœ¬å°½å¯èƒ½çš„é•¿ :set wm=0 å…³é—­è‡ªåŠ¨æ¢è¡Œ :set autoindent æ–‡æœ¬è‡ªåŠ¨ç¼©è¿› ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:17:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#é”®å…¥è¿‡ç¨‹è‡ªåŠ¨æ¢è¡Œ"},{"categories":["æŠ€æœ¯"],"content":" åˆ†éš”å’Œè¿æ¥è¡Œr\u003cReturn\u003e é•¿è¡Œåˆ†å‰²çŸ­è¡Œ, r å¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦æ›¿æ¢æˆå¦å¤–ä¸€ä¸ªå­—ç¬¦ï¼Œæ­¤å¤„å°† ç©ºæ ¼ç¬¦ æ›¿æ¢æˆ æ¢è¡Œç¬¦ J å¯ä»¥å°†å½“å‰è¡Œå’Œä¸‹ä¸€è¡Œåˆå¹¶åˆ°ä¸€ä¸ªé•¿è¡Œ ï¼ˆé»˜è®¤ä¼šåœ¨å•è¯ä¹‹é—´æ’å…¥ä¸€ä¸ªç©ºæ ¼ï¼Œå¥å­è¡Œå°¾æ’å…¥ä¸¤ä¸ªç©ºæ ¼ï¼‰ 3J åˆå¹¶ä¸€ä¸‹ä¸‰è¡Œ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:18:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#åˆ†éš”å’Œè¿æ¥è¡Œ"},{"categories":["æŠ€æœ¯"],"content":" å¤åˆ¶å’Œç§»åŠ¨è¡ŒæŒ‡å®šè¡Œå·çš„å¤åˆ¶å’Œç§»åŠ¨å¯ä»¥ä½¿ç”¨ ex å‘½ä»¤ :co (copy, å¤åˆ¶) :m (move , ç§»åŠ¨)ã€‚ :_x[,y]co_z x,y,z ä»£è¡¨è¡Œå· :_x[,y]m_z :5co10 å¤åˆ¶5è¡Œæ’å…¥åˆ°ç¬¬10è¡Œä¸‹é¢ :6,9co15 å¤åˆ¶ç¬¬6è¡Œè‡³ç¬¬9è¡Œï¼Œæ’å…¥åˆ°ç¬¬15è¡Œä¸‹é¢ :5m10 ç§»åŠ¨ç¬¬5è¡Œï¼Œæ’å…¥åˆ°ç¬¬10è¡Œä¸‹é¢ 4,8m12 ç§»åŠ¨ç¬¬4è¡Œè‡³ç¬¬9è¡Œï¼Œæ’å…¥åˆ°ç¬¬12è¡Œä¸‹é¢ å’Œå…¶ä»– ex å‘½ä»¤ä¸€æ · . ä»£è¡¨å½“å‰è¡Œï¼Œ$ ä»£è¡¨æœ€åä¸€è¡Œï¼š :1,.m$ å°†ç¬¬1è¡Œè‡³å½“å‰è¡Œï¼Œç§»åŠ¨åˆ°ç¼–è¾‘ç¼“å†²åŒºæœ«å°¾ :.,$m0 å°†å½“å‰è¡Œè‡³æœ«å°¾ï¼Œç§»åŠ¨åˆ°ç¼–è¾‘ç¼“å†²åŒºå¼€å¤´ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:19:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#å¤åˆ¶å’Œç§»åŠ¨è¡Œ"},{"categories":["æŠ€æœ¯"],"content":" è¾“å‡º shell å‘½ä»¤ :! + å¸Œæœ›è¿è¡Œçš„å‘½ä»¤ï¼Œvi å°†å‘½ä»¤å‘é€ç»™ shell æ‰§è¡Œï¼Œå½“å‘½ä»¤ç»“æŸåå—ï¼Œæ§åˆ¶å°†è¿”å› viã€‚ :!date è¾“å‡ºæ—¥æœŸ :!! é‡å¤ä¸Šä¸€æ¡å‘½ä»¤ æœ‰æ—¶å€™å¸Œæœ›è¾“å…¥ ä¸æ­¢1æ¡ shell å‘½ä»¤ã€‚è¿™æ—¶å€™å¯ä»¥å¯åŠ¨ä¸€ä¸ª æ–°çš„shell ã€‚ :sh å¯åŠ¨ä¸€ä¸ªæ–°çš„ shell å‰¯æœ¬ï¼Œ^D æˆ– è¾“å…¥ exit å‘½ä»¤åè¿”å› vi ä¸­ã€‚ :!bash å¯åŠ¨ä¸€ä¸ª Bash shell ï¼Œ:!tcsh å¯åŠ¨ä¸€ä¸ª Tcsh shell ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:20:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#è¾“å‡º-shell-å‘½ä»¤"},{"categories":["æŠ€æœ¯"],"content":" å°†æ–‡ä»¶çš„æ•°æ®æ’å…¥ç¼–è¾‘ç¼“å†²åŒº:[line]r file line è¡Œå·ï¼Œfile æ–‡ä»¶åç§° :10r info å°† info çš„æ–‡ä»¶å†…å®¹æ’å…¥åˆ°ç¬¬ 10 è¡Œä¹‹å :0r info 0 è¡¨ç¤ºå¼€å¤´ :$r info $ è¡¨ç¤ºç»“å°¾ r info çœç•¥äº†è¡Œå·ï¼Œvi å°†æ•°æ®æ’å…¥åˆ°å½“å‰è¡Œä¹‹å ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:21:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#å°†æ–‡ä»¶çš„æ•°æ®æ’å…¥ç¼–è¾‘ç¼“å†²åŒº"},{"categories":["æŠ€æœ¯"],"content":" å°†shell å‘½ä»¤è¾“å‡ºæ’å…¥åˆ°ç¼–è¾‘ç¼“å†²åŒº:r !ls å°† ls çš„ç»“æœæ’å…¥åˆ°ç¼–è¾‘ç¼“å†²åŒº :0r !date åœ¨ç¬¬ä¸€è¡Œæ’å…¥å½“å‰æ—¶é—´å’Œæ—¥æœŸ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:22:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#å°†shell-å‘½ä»¤è¾“å‡ºæ’å…¥åˆ°ç¼–è¾‘ç¼“å†²åŒº"},{"categories":["æŠ€æœ¯"],"content":" ä½¿ç”¨ç¨‹åºå¤„ç†æ•°æ®ä½¿ç”¨ ! å’Œ !! å‘½ä»¤å¯ä»¥å°†ç¼–è¾‘ç¼“å†²åŒºçš„è¡Œå‘é€ç»™å¦ä¸€ä¸ªç¨‹åºã€‚è¯¥ç¨‹åºçš„è¾“å‡ºå°†æ›¿æ¢åŸå§‹è¡Œã€‚ 5!!sort æ’åºå½“å‰å…‰æ ‡çš„ä¸‹5è¡Œæ•°æ® 10!!fmt ä»å½“å‰è¡Œå¼€å§‹æ ¼å¼åŒ–10è¡Œ ! + å…‰æ ‡ç§»åŠ¨å‘½ä»¤ + ç¨‹åºåç§°ã€‚ !}fmt æ ¼å¼åŒ–å½“å‰è¡Œè‡³æ®µè½æœ«å°¾ä¹‹é—´çš„æ–‡æœ¬ ggã€1G +!Gfmt æ ¼å¼åŒ–æ•´ä¸ªç¼–è¾‘ç¼“å†²åŒº ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:23:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#ä½¿ç”¨ç¨‹åºå¤„ç†æ•°æ®"},{"categories":["æŠ€æœ¯"],"content":" å°†æ•°æ®å†™å…¥æ–‡ä»¶:w æ•°æ®å†™å…¥åŸå§‹æ–‡ä»¶ :w file å°†æ•°æ®å†™å…¥æ–°æ–‡ä»¶ :w! file è¦†ç›–å·²æœ‰æ–‡ä»¶ :w\u003e\u003e file è¿½åŠ æ•°æ®åˆ°æ–‡ä»¶ :10w! file å°†ç¬¬10è¡Œæ•°æ®å†™å…¥æ–‡ :10,20w \u003e\u003e file å°†10åˆ°20è¡Œæ•°æ®è¿½åŠ åˆ°æ–‡ä»¶é‡Œ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:24:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#å°†æ•°æ®å†™å…¥æ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" åˆ‡æ¢æ–‡ä»¶ç¼–è¾‘æ–‡ä»¶æ—¶ï¼Œä¸å¿…é€€å‡ºé‡å¯ vi ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªæ–°æ–‡ä»¶ã€‚ç¡®ä¿ä¹‹å‰ç¼–è¾‘ç¼“å†²åŒºå†…å®¹çš„ä¿å­˜ï¼ˆ:wï¼‰ã€‚ :e document ç¼–è¾‘æŒ‡å®šæ–‡ä»¶ :e! é‡æ–°ç¼–è¾‘å½“å‰æ–‡ä»¶ï¼Œå¿½ç•¥è‡ªåŠ¨æ£€æŸ¥ï¼Œå³æ”¾å¼ƒæœªä¿å­˜çš„ä¿®æ”¹ :e! file ç¼–è¾‘æŒ‡å®šæ–‡ä»¶ï¼Œå¿½ç•¥è‡ªåŠ¨æ£€æŸ¥ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:25:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#åˆ‡æ¢æ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" ä½¿ç”¨ç¼©å†™ä¸ºç»å¸¸ä½¿ç”¨çš„å•è¯æˆ–è¡¨è¾¾å¼ï¼Œåˆ›å»ºç¼©å†™ã€‚ :ab [short long] short æ˜¯ç¼©å†™ï¼Œlongæ˜¯å¯¹åº”çš„åŸæ–‡ :ab puf public function å•ç‹¬é”®å…¥ puf æ—¶ï¼Œvi å°†ä¼šè‡ªåŠ¨è½¬æ¢æˆ public function :una puf åˆ é™¤ç¼©å†™ :ab æŸ¥çœ‹ç›®å‰æ‰€æœ‰ç¼©å†™åˆ—è¡¨ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:26:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#ä½¿ç”¨ç¼©å†™"},{"categories":["æŠ€æœ¯"],"content":" å®:map å¯ä»¥åˆ›å»ºå•å­—ç¬¦å‘½ä»¤,å³å®(macro). :map [x commands] x æ˜¯å•ä¸ªå­—ç¬¦, commands æ˜¯ vi æˆ– ex å‘½ä»¤. :map X dd åˆ›å»ºä¸€ä¸ª X çš„å®, è¿™ä¸ªå®åˆ é™¤å½“å‰çš„è¡Œã€‚ :map * I/* ^V\u003cEsc\u003eA */^V\u003cEsc\u003e åˆ›å»º * çš„å®ï¼Œå°†è¯¥è¡Œç”¨ /* å’Œ */ åŒ…è£¹èµ·æ¥, å³æ³¨é‡Šæ‰. :map æ˜¾ç¤ºæ‰€æœ‰çš„å®åˆ—è¡¨ :unmap X ç§»é™¤å® ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:27:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#å®"},{"categories":["æŠ€æœ¯"],"content":" åˆå§‹åŒ–æ–‡ä»¶vi æˆ– vim å¯åŠ¨æ—¶, ä¼šåœ¨ home ç›®å½•æŸ¥æ‰¾åˆå§‹åŒ–æ–‡ä»¶. å¦‚æœå­˜åœ¨å°±è¯»å–å¹¶æ‰§è¡ŒæŸ¥æ‰¾åˆ°çš„ä»»ä½• ex å‘½ä»¤. vi çš„åˆå§‹åŒ–æ–‡ä»¶åä¸º .exrc (rc ä»£è¡¨ â€˜run commandsâ€™) . vim çš„åˆå§‹åŒ–æ–‡ä»¶åä¸º .vimrc vim é¦–å…ˆæŸ¥æ‰¾ .vimrc, å¦‚æœä¸å­˜åœ¨ , åˆ™æŸ¥æ‰¾ .exrc . å¦‚æœåŒæ—¶å­˜åœ¨, vim åªä¼šè¯»å– .vimrc æ–‡ä»¶. åˆå§‹åŒ–æ–‡ä»¶, \" å­—ç¬¦å¼€å¤´çš„å°†è¢«å¿½ç•¥, å¯ä»¥ä½œä¸ºæ³¨é‡Š. shell \" ====================== \"sample vi/vim init file \" ======================= \" \" 1. options set autoindent set compatible set ignorecase set showmatch set showmode set wrapmargin=6 \" \" 2. abbreviation ab puf public function ab prf private function \" \" 3. macros map K deep map X dd \" \" 4. shell commands !date; sleep 2 ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:28:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#åˆå§‹åŒ–æ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" ä½¿ç”¨ä¸¤ä¸ªåˆå§‹åŒ–æ–‡ä»¶vi/vim å¯åŠ¨æ—¶, ä¼šåœ¨æ‰§è¡Œ home ç›®å½•çš„åˆå§‹åŒ–æ–‡ä»¶. ç„¶åæ£€æŸ¥ exrc é€‰é¡¹çš„çŠ¶æ€. å¦‚æœé€‰é¡¹æ‰“å¼€, é‚£ä¹ˆç¨‹åºå°†åœ¨å·¥ä½œç›®å½•ï¼ˆå³å½“å‰ç›®å½•ï¼‰æŸ¥æ‰¾ç¬¬äºŒä¸ªåˆå§‹åŒ–æ–‡ä»¶ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯æ˜¯ä½¿å„ä¸ªç›®å½•éƒ½æœ‰è‡ªå·±çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œä»è€Œç»„ç»‡å„ä¸ªæ–‡ä»¶ã€‚ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:28:1","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#ä½¿ç”¨ä¸¤ä¸ªåˆå§‹åŒ–æ–‡ä»¶"},{"categories":["æŠ€æœ¯"],"content":" vim å¢å¼ºå†…å®¹ å±å¹•æ‹†åˆ† å¤šçº§æ’¤é”€ æ”¯æŒé¼ æ ‡ GUI å‘½ä»¤è¡Œå†å² å‘½ä»¤è¡Œè¡¥å…¨ æ–‡ä»¶åè¡¥å…¨ æœç´¢å†å² è¯­æ³•é«˜äº® é«˜äº®æ˜¾ç¤ºï¼šé€‰å–æ–‡æœ¬è¡Œã€æ–‡æœ¬å—ï¼Œç„¶åå†å¯¹æ–‡æœ¬è¿›è¡Œæ“ä½œ å¤šç¼“å†²åŒº æ”¯æŒå®ï¼šè®°å½•ã€ä¿®æ”¹å’Œè¿è¡Œå®çš„å·¥å…· å†…ç½®è„šæœ¬ è‡ªåŠ¨å‘½ä»¤ï¼šè‡ªåŠ¨æ‰§è¡Œçš„é¢„å®šä¹‰å‘½ä»¤ ","date":"2021-11-04","objectID":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/:29:0","series":null,"tags":["unix","linux","vi"],"title":"Vi å‘½ä»¤ä¸€è§ˆ","uri":"/posts/unixs/vi-%E5%91%BD%E4%BB%A4%E4%B8%80%E8%A7%88/#vim-å¢å¼ºå†…å®¹"},{"categories":["æŠ€æœ¯"],"content":" é•œåƒç›¸å…³","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:1:0","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#é•œåƒç›¸å…³"},{"categories":["æŠ€æœ¯"],"content":" åˆ—å‡ºé•œåƒdocker image ls æ— ä»“åº“åçš„æ˜¯æ‚¬ç©ºé•œåƒï¼Œdocker image ls -f dangling=true æŸ¥çœ‹æ‚¬ç©ºé•œåƒï¼Œ docker image prune åˆ é™¤æ‚¬ç©ºé•œåƒã€‚ è¯¥å‘½ä»¤é»˜è®¤ï¼Œä»…ä»…æ˜¾ç¤ºé¡¶å±‚é•œåƒï¼Œdocker image ls -a , å¯ä»¥æ˜¾ç¤ºä¸­é—´å±‚é•œåƒã€‚ è¿‡æ»¤å‚æ•° shell // æŒ‡å®šä»“åº“å docker image ls ubuntu // æŒ‡å®šä»“åº“åå’Œæ ‡ç­¾å docker image ls ubuntu:18.04 // --filter ç®€å†™ -f è¿‡æ»¤ docker image ls -f since=mongo:3.2 docker image ls -f label=com.example.version=0.1 docker image ls -f dangling=true æ˜¾ç¤ºæ ¼å¼ shell docker image ls -q docker image ls --format \"table {{.ID}}\\t{{.Repository}}\\t{{.Tag}}\" --filter é…åˆ -q äº§ç”Ÿå‡ºæŒ‡å®šèŒƒå›´çš„ ID åˆ—è¡¨ï¼Œç„¶åé€ç»™å¦ä¸€ä¸ª docker å‘½ä»¤ä½œä¸ºå‚æ•°ï¼Œä»è€Œé’ˆå¯¹è¿™ç»„å®ä½“æˆæ‰¹çš„è¿›è¡ŒæŸç§æ“ä½œçš„åšæ³•åœ¨ Docker å‘½ä»¤è¡Œä½¿ç”¨è¿‡ç¨‹ä¸­éå¸¸å¸¸è§ã€‚ ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:1:1","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åˆ—å‡ºé•œåƒ"},{"categories":["æŠ€æœ¯"],"content":" åˆ é™¤é•œåƒ shell docker image rm [é€‰é¡¹] \u003cé•œåƒ1\u003e [\u003cé•œåƒ2\u003e ...] é•œåƒæ ‡è¯†å¯ä»¥æ˜¯ é•¿idï¼ŒçŸ­idï¼Œé•œåƒåï¼Œé•œåƒåï¼šæ ‡ç­¾ç­‰ã€‚ Untagged å’Œ Deletedï¼Œuntagged è¡¨æ˜é•œåƒå’Œåˆ é™¤æ ‡ç­¾çš„å…³è”å·²ç»è¢«å–æ¶ˆï¼Œå¯èƒ½è¿˜æœ‰å…¶ä½™çš„æ ‡ç­¾åœ¨é•œåƒä¸Šï¼Œæ‰€æœ‰é•œåƒæ²¡æœ‰è¢«åˆ é™¤ã€‚å½“é•œåƒä¸Šçš„æ‰€æœ‰æ ‡ç­¾éƒ½è¢«åˆ é™¤åï¼Œåˆ™è§¦å‘ delete è¡Œä¸ºã€‚ ä¸ docker image ls -q å‘½ä»¤çš„é…åˆ shell // åˆ é™¤æ‰€æœ‰ä»“åº“åä¸º redis çš„é•œåƒ docker image rm $(docker image ls -q redis) // åˆ é™¤æ‰€æœ‰åœ¨ mongo:3.2 ä¹‹å‰çš„é•œåƒ docker image rm $(docker image ls -q -f before=mongo:3.2) ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:1:2","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åˆ é™¤é•œåƒ"},{"categories":["æŠ€æœ¯"],"content":" å®¹å™¨ç›¸å…³","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:2:0","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#å®¹å™¨ç›¸å…³"},{"categories":["æŠ€æœ¯"],"content":" å¯åŠ¨ åŸºäºé•œåƒæ–°å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨ shell docker run ubuntu:18.04 // -t è®©Dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆpseudo-ttyï¼‰å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š, -i åˆ™è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€ã€‚ docker run -t -i ubuntu:18.04 æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä» registry ä¸‹è½½ åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨ åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚ ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å» ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨ æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢ å°†ä¸€ä¸ªç»ˆæ­¢ï¼ˆexitedï¼‰çŠ¶æ€çš„å®¹å™¨é‡æ–°å¯åŠ¨ shell // ä¼ å…¥å®¹å™¨id å³å¯ docker container start [options] containerID ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:2:1","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#å¯åŠ¨"},{"categories":["æŠ€æœ¯"],"content":" å®¹å™¨åˆ—è¡¨ shell // è·å–æ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker container ls // è·å–æ‰€æœ‰å®¹å™¨ docker container ls -a ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:2:2","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#å®¹å™¨åˆ—è¡¨"},{"categories":["æŠ€æœ¯"],"content":" åœæ­¢ä¸é‡å¯ shell // åœæ­¢ docker container stop containerID // é‡å¯ docker container restart containerID ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:2:3","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åœæ­¢ä¸é‡å¯"},{"categories":["æŠ€æœ¯"],"content":" è¿›å…¥å®¹å™¨-d å‚æ•°è¿è¡Œå®¹å™¨æ—¶å€™ï¼Œå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥åå°ã€‚ shell // æ–¹å¼1 ï¼Œ psï¼šå¦‚æœåœ¨ stdin ä¸­ exitï¼Œä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ docker attach containerID // æ–¹å¼2 ï¼Œ psï¼š exit ä¸ä¼šå¯¼è‡´å®¹å™¨åœæ­¢ docker exec [options] containerID command ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:2:4","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#è¿›å…¥å®¹å™¨"},{"categories":["æŠ€æœ¯"],"content":" æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ shell docker inspect [OPTIONS] NAME|ID [NAME|ID...] æ•°æ®å· ä¿¡æ¯åœ¨ â€œMountsâ€ Key ä¸‹é¢ ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:2:5","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æŸ¥çœ‹å®¹å™¨ä¿¡æ¯"},{"categories":["æŠ€æœ¯"],"content":" å¯¼å‡ºå’Œå¯¼å…¥å¯¼å‡º shell // å¯¼å…¥å®¹å™¨å¿«ç…§åˆ°æœ¬åœ°æ–‡ä»¶ docker export 7691a814370e \u003e ubuntu.tar å¯¼å…¥ shell // ä»å®¹å™¨å¿«ç…§å¯¼å…¥ä¸ºé•œåƒ cat ubuntu.tar | docker import - test/ubuntu:v1.0 docker image ls // ä¼šæ˜¾ç¤º test/ubuntu:v1.0 é•œåƒ // é€šè¿‡ url å¯¼å…¥ docker import http://example.com/exampleimage.tgz example/imagerepo docker load ä¹Ÿå¯ä»¥å¯¼å…¥é•œåƒå­˜å‚¨æ–‡ä»¶åˆ°æœ¬åœ°é•œåƒåº“ï¼ŒåŒºåˆ«åœ¨äºï¼š docker import å°†ä¸¢å¼ƒæ‰€æœ‰çš„å†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼ˆå³ä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€ï¼‰ï¼Œå¯ä»¥é‡æ–°æŒ‡å®šæ ‡ç­¾ç­‰å…ƒæ•°æ®ä¿¡æ¯ã€‚ docker load å°†ä¿å­˜é•œåƒçš„å®Œæ•´è®°å½•ï¼Œä½“ç§¯ä¹Ÿè¦å¤§ã€‚ ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:2:6","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#å¯¼å‡ºå’Œå¯¼å…¥"},{"categories":["æŠ€æœ¯"],"content":" åˆ é™¤ shell // åˆ é™¤ä¸€ä¸ªå¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨, -f å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ docker container rm [options] containerID // æ¸…ç†æ‰æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ docker container prune ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:2:7","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åˆ é™¤"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®ç®¡ç†","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:3:0","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ•°æ®ç®¡ç†"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®å·æ•°æ®å·æ˜¯å¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡äº† UFS ï¼Œ å¯ä»¥æä¾›å¾ˆå¤šç‰¹æ€§ï¼š å®¹å™¨é—´å…±äº«å’Œé‡ç”¨ å¯¹æ•°æ®å·çš„ä¿®æ”¹ä¼šç«‹å³ç”Ÿæ•ˆ å¯¹æ•°æ®å·çš„æ›´æ–°ï¼Œä¸å½±å“é•œåƒ å®¹å™¨åˆ é™¤åï¼Œæ•°æ®å·è¿˜ä¼šå­˜åœ¨ åˆ›å»ºæ•°æ®å· shell docker volume create my-vol æŸ¥çœ‹æ‰€æœ‰æ•°æ®å· shell docker volume ls // æŸ¥çœ‹ç‰¹å®šæ•°æ®å·ä¿¡æ¯ docker volume inspect my-vol å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æœ‰æ•°æ®å·çš„å®¹å™¨ shell docker run -d -p --name \\ # -v my-vol:/usr/share/nginx/html \\ --mount source=my-vol,target=/usr/share/nginx/html \\ nginx:alpine åˆ é™¤æ•°æ®å· shell docker volume rm my-vol // åˆ é™¤å®¹å™¨æ—¶ä¸€èµ·åˆ é™¤ docker container rm -v containerID // æ‰¹é‡åˆ é™¤æ— ä¸»çš„æ•°æ®å· docker volume prune ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:3:1","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æ•°æ®å·"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®å·æ•°æ®å·æ˜¯å¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡äº† UFS ï¼Œ å¯ä»¥æä¾›å¾ˆå¤šç‰¹æ€§ï¼š å®¹å™¨é—´å…±äº«å’Œé‡ç”¨ å¯¹æ•°æ®å·çš„ä¿®æ”¹ä¼šç«‹å³ç”Ÿæ•ˆ å¯¹æ•°æ®å·çš„æ›´æ–°ï¼Œä¸å½±å“é•œåƒ å®¹å™¨åˆ é™¤åï¼Œæ•°æ®å·è¿˜ä¼šå­˜åœ¨ åˆ›å»ºæ•°æ®å· shell docker volume create my-vol æŸ¥çœ‹æ‰€æœ‰æ•°æ®å· shell docker volume ls // æŸ¥çœ‹ç‰¹å®šæ•°æ®å·ä¿¡æ¯ docker volume inspect my-vol å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æœ‰æ•°æ®å·çš„å®¹å™¨ shell docker run -d -p --name \\ # -v my-vol:/usr/share/nginx/html \\ --mount source=my-vol,target=/usr/share/nginx/html \\ nginx:alpine åˆ é™¤æ•°æ®å· shell docker volume rm my-vol // åˆ é™¤å®¹å™¨æ—¶ä¸€èµ·åˆ é™¤ docker container rm -v containerID // æ‰¹é‡åˆ é™¤æ— ä¸»çš„æ•°æ®å· docker volume prune ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:3:1","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åˆ›å»ºæ•°æ®å·"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®å·æ•°æ®å·æ˜¯å¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡äº† UFS ï¼Œ å¯ä»¥æä¾›å¾ˆå¤šç‰¹æ€§ï¼š å®¹å™¨é—´å…±äº«å’Œé‡ç”¨ å¯¹æ•°æ®å·çš„ä¿®æ”¹ä¼šç«‹å³ç”Ÿæ•ˆ å¯¹æ•°æ®å·çš„æ›´æ–°ï¼Œä¸å½±å“é•œåƒ å®¹å™¨åˆ é™¤åï¼Œæ•°æ®å·è¿˜ä¼šå­˜åœ¨ åˆ›å»ºæ•°æ®å· shell docker volume create my-vol æŸ¥çœ‹æ‰€æœ‰æ•°æ®å· shell docker volume ls // æŸ¥çœ‹ç‰¹å®šæ•°æ®å·ä¿¡æ¯ docker volume inspect my-vol å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æœ‰æ•°æ®å·çš„å®¹å™¨ shell docker run -d -p --name \\ # -v my-vol:/usr/share/nginx/html \\ --mount source=my-vol,target=/usr/share/nginx/html \\ nginx:alpine åˆ é™¤æ•°æ®å· shell docker volume rm my-vol // åˆ é™¤å®¹å™¨æ—¶ä¸€èµ·åˆ é™¤ docker container rm -v containerID // æ‰¹é‡åˆ é™¤æ— ä¸»çš„æ•°æ®å· docker volume prune ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:3:1","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·"},{"categories":["æŠ€æœ¯"],"content":" æ•°æ®å·æ•°æ®å·æ˜¯å¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡äº† UFS ï¼Œ å¯ä»¥æä¾›å¾ˆå¤šç‰¹æ€§ï¼š å®¹å™¨é—´å…±äº«å’Œé‡ç”¨ å¯¹æ•°æ®å·çš„ä¿®æ”¹ä¼šç«‹å³ç”Ÿæ•ˆ å¯¹æ•°æ®å·çš„æ›´æ–°ï¼Œä¸å½±å“é•œåƒ å®¹å™¨åˆ é™¤åï¼Œæ•°æ®å·è¿˜ä¼šå­˜åœ¨ åˆ›å»ºæ•°æ®å· shell docker volume create my-vol æŸ¥çœ‹æ‰€æœ‰æ•°æ®å· shell docker volume ls // æŸ¥çœ‹ç‰¹å®šæ•°æ®å·ä¿¡æ¯ docker volume inspect my-vol å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æœ‰æ•°æ®å·çš„å®¹å™¨ shell docker run -d -p --name \\ # -v my-vol:/usr/share/nginx/html \\ --mount source=my-vol,target=/usr/share/nginx/html \\ nginx:alpine åˆ é™¤æ•°æ®å· shell docker volume rm my-vol // åˆ é™¤å®¹å™¨æ—¶ä¸€èµ·åˆ é™¤ docker container rm -v containerID // æ‰¹é‡åˆ é™¤æ— ä¸»çš„æ•°æ®å· docker volume prune ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:3:1","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#åˆ é™¤æ•°æ®å·"},{"categories":["æŠ€æœ¯"],"content":" æŒ‚è½½ä¸»æœºç›®å½•","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:3:2","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æŒ‚è½½ä¸»æœºç›®å½•"},{"categories":["æŠ€æœ¯"],"content":" å…¶ä»–","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:4:0","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#å…¶ä»–"},{"categories":["æŠ€æœ¯"],"content":" æŸ¥çœ‹é•œåƒå®¹å™¨å’Œæ•°æ®å·æ‰€å ä½“ç§¯docker system df ","date":"2021-11-04","objectID":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:4:1","series":null,"tags":["docker"],"title":"å®¹å™¨å¸¸ç”¨å‘½ä»¤","uri":"/posts/%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#æŸ¥çœ‹é•œåƒå®¹å™¨å’Œæ•°æ®å·æ‰€å ä½“ç§¯"},{"categories":["æŠ€æœ¯"],"content":" æ¦‚è¿°æ§åˆ¶åè½¬**ï¼ˆInversion of Control, IoCï¼‰**ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œç›®çš„æ˜¯é™ä½ä»£ç è€¦åˆã€‚å¸¸è§æ–¹å¼æœ‰ ä¾èµ–æ³¨å…¥ ï¼ˆDependence Injection, DIï¼‰ å’Œ ä¾èµ–æŸ¥æ‰¾ ï¼ˆDependency Lookupï¼‰ ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/:1:0","series":null,"tags":["è®¾è®¡æ¨¡å¼"],"title":"ä¾èµ–æ³¨å…¥","uri":"/posts/php-web/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/#æ¦‚è¿°"},{"categories":["æŠ€æœ¯"],"content":" æŠ€æœ¯æè¿°Class Aä¸­ç”¨åˆ°äº†Class Bçš„å¯¹è±¡bï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨Açš„ä»£ç ä¸­æ˜¾å¼çš„newä¸€ä¸ªBçš„å¯¹è±¡ã€‚ é‡‡ç”¨ä¾èµ–æ³¨å…¥æŠ€æœ¯ä¹‹åï¼ŒAçš„ä»£ç åªéœ€è¦å®šä¹‰ä¸€ä¸ªç§æœ‰çš„Bå¯¹è±¡ï¼Œä¸éœ€è¦ç›´æ¥newæ¥è·å¾—è¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡ç›¸å…³çš„å®¹å™¨æ§åˆ¶ç¨‹åºæ¥å°†Bå¯¹è±¡åœ¨å¤–éƒ¨newå‡ºæ¥å¹¶æ³¨å…¥åˆ°Aç±»é‡Œçš„å¼•ç”¨ä¸­ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/:2:0","series":null,"tags":["è®¾è®¡æ¨¡å¼"],"title":"ä¾èµ–æ³¨å…¥","uri":"/posts/php-web/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/#æŠ€æœ¯æè¿°"},{"categories":["æŠ€æœ¯"],"content":" å®ç°æ–¹å¼ä¾èµ–æ³¨å…¥æœ‰å¦‚ä¸‹å®ç°æ–¹å¼ï¼š åŸºäºæ„é€ å‡½æ•°ã€‚å®ç°ç‰¹å®šå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œåœ¨æ–°å»ºå¯¹è±¡æ—¶ä¼ å…¥æ‰€ä¾èµ–ç±»å‹çš„å¯¹è±¡ã€‚ åŸºäº set æ–¹æ³•ã€‚å®ç°ç‰¹å®šå±æ€§çš„public setæ–¹æ³•ï¼Œæ¥è®©å¤–éƒ¨å®¹å™¨è°ƒç”¨ä¼ å…¥æ‰€ä¾èµ–ç±»å‹çš„å¯¹è±¡ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/:3:0","series":null,"tags":["è®¾è®¡æ¨¡å¼"],"title":"ä¾èµ–æ³¨å…¥","uri":"/posts/php-web/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/#å®ç°æ–¹å¼"},{"categories":["æŠ€æœ¯"],"content":" Ioc å®¹å™¨ä¸ç®¡æ˜¯å“ªä¸€ç§å®ç°ï¼Œä¾èµ–å•å…ƒçš„å®ä¾‹åŒ–ä»£ç æ˜¯ä¸€ä¸ªé‡å¤ã€ç¹ççš„è¿‡ç¨‹ï¼Œä¸”å½“ç³»ç»Ÿå¾ˆå¤æ‚çš„æ—¶å€™ï¼Œä¾èµ–åµŒå¥—ï¼Œå‰åå…³ç³»çš„å¤„ç†å°†å¾ˆéº»çƒ¦ã€‚æ‰€ä»¥ IoC å®¹å™¨ è¢«å‘æ˜å‡ºæ¥äº†ã€‚IoC Containeræä¾›äº†åŠ¨æ€åœ°åˆ›å»ºã€æ³¨å…¥ä¾èµ–å•å…ƒï¼Œæ˜ å°„ä¾èµ–å…³ç³»ç­‰åŠŸèƒ½ï¼Œå‡å°‘äº†è®¸å¤šä»£ç é‡ã€‚ ","date":"2021-11-04","objectID":"/posts/php-web/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/:4:0","series":null,"tags":["è®¾è®¡æ¨¡å¼"],"title":"ä¾èµ–æ³¨å…¥","uri":"/posts/php-web/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/#ioc-å®¹å™¨"},{"categories":["æŠ€æœ¯"],"content":" æ¡ä»¶åˆ¤æ–­è¯­å¥ ç›¸ç­‰: ==, !=, \u003c, \u003e, \u003c=, \u003e= æ­£åˆ™: =(åŒ¹é…æ­£åˆ™), !(ä¸åŒ¹é…æ­£åˆ™) åŒ…å«: in(åŒ…å«), not in(ä¸åŒ…å«) å¸ƒå°”æ“ä½œï¼š and(ä¸), or(æˆ–), nand(éä¸), xor(éæˆ–) ä¸€å…ƒè¿ç®—ç¬¦ï¼š !(å–å) å¤åˆè¡¨è¾¾å¼ï¼š ()(å¤åˆè¡¨è¾¾å¼), !()(å¯¹å¤åˆè¡¨è¾¾å¼ç»“æœå–å) ","date":"2021-11-04","objectID":"/posts/elastic/logstash/:1:0","series":null,"tags":["es","logstash"],"title":"Logstash","uri":"/posts/elastic/logstash/#æ¡ä»¶åˆ¤æ–­è¯­å¥"},{"categories":["æŠ€æœ¯"],"content":" æµ‹è¯•ç®¡é“ä»¥ä¸‹ generator ä¼šè§¦å‘ä¸€ä¸ªç”Ÿæˆäº‹ä»¶ï¼Œå³äº§ç”Ÿä¸€æ¡è®°å½•ã€‚ text input { generator { lines =\u003e [\"Generated line\"] count =\u003e 1 } } ","date":"2021-11-04","objectID":"/posts/elastic/logstash/:2:0","series":null,"tags":["es","logstash"],"title":"Logstash","uri":"/posts/elastic/logstash/#æµ‹è¯•ç®¡é“"},{"categories":["æŠ€æœ¯"],"content":" ä¸€äº› filter","date":"2021-11-04","objectID":"/posts/elastic/logstash/:3:0","series":null,"tags":["es","logstash"],"title":"Logstash","uri":"/posts/elastic/logstash/#ä¸€äº›-filter"},{"categories":["æŠ€æœ¯"],"content":" ä½¿ç”¨æœ¬åœ°Geoæ•°æ®åº“ï¼Œå¹¶æ·»åŠ æ ‡ç­¾ text geoip { source =\u003e \"source_ip\" target =\u003e \"source_geoip\" database =\u003e \"/usr/share/logstash/data/geolite/GeoLite2-City.mmdb\" add_tag =\u003e [\"%{[source_geoip][country_name]}\",\"%{[source_geoip][city_name]}\"] tag_on_failure =\u003e \"_geoip_source_fail\" } ","date":"2021-11-04","objectID":"/posts/elastic/logstash/:3:1","series":null,"tags":["es","logstash"],"title":"Logstash","uri":"/posts/elastic/logstash/#ä½¿ç”¨æœ¬åœ°geoæ•°æ®åº“å¹¶æ·»åŠ æ ‡ç­¾"},{"categories":["æŠ€æœ¯"],"content":" è¿è¡Œrubyä»£ç  è¡Œå†…è¿è¡Œ text # åŸæ•°æ® [{\"interface_name\":\"xxx\" ...},{...}] ä¿®æ”¹ interface_name keyå ä¸º IfName ç­‰ ruby { code =\u003e ' interface_msg = event.get(\"interface_msg\") if interface_msg interface_msg.each_with_index do |interface, index| interface[\"IfName\"] = interface[\"interface_name\"] interface.delete(\"interface_name\") interface[\"IfMAC\"] = interface[\"interface_mac\"] interface.delete(\"interface_mac\") if interface[\"interface_status\"]==1 interface[\"IfStatus\"] = \"up\" else interface[\"IfStatus\"] = \"down\" end interface.delete(\"interface_status\") event.set(\"interface_msg\", interface_msg) end end ' } å•ç‹¬æ–‡ä»¶ text ruby { path =\u003e \"/usr/share/logstash/script/rt_device_interface_data.rb\" } rt_device_interface_data.rb æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š ruby def register(params) end # å°† interface_state è½¬ä¸º json å­—ç¬¦ä¸² # {RxDropped=0, IfMtu=1500},{RxDropped=0, IfMtu=1500} # [{\"RxDropped\":\"0\",\"IfMtu\":\"1500\"},{\"RxDropped\":\"0\",\"IfMtu\":\"1500\"}] def filter(event) str = event.get('interface_state') log_dict_list = str.split(\"},{\").map do |log| log.gsub(/[{}]/, '').split(\", \").map do |kv| k, v = kv.split(\"=\") [k.to_sym, v] end.to_h end # å°†å­—å…¸åˆ—è¡¨è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸² #log_json_string = JSON.generate(log_dict_list) event.set('interface_state', log_dict_list) return [event] end ","date":"2021-11-04","objectID":"/posts/elastic/logstash/:3:2","series":null,"tags":["es","logstash"],"title":"Logstash","uri":"/posts/elastic/logstash/#è¿è¡Œrubyä»£ç "},{"categories":["æŠ€æœ¯"],"content":" é…ç½®ç®¡é“åœ¨ logstash é…ç½®æ–‡ä»¶ pipelines.yml ä¸­æ–°å¢ç®¡é“å’Œé…ç½®è·¯å¾„: text - pipeline.id: main path.config: \"/usr/share/logstash/pipeline\" - pipeline.id: dp path.config: \"/usr/share/logstash/dp_pipeline\" ç®¡é“ main æ˜¯é»˜è®¤çš„ç®¡é“ï¼Œæˆ‘ä»¬æ–°å¢äº†dpç®¡é“ã€‚ åœ¨é…ç½®è·¯å¾„ä¸‹æ–°å¢é…ç½®æ–‡ä»¶ï¼Œé…ç½®ç®¡é“å¤„ç†æ•°æ®çš„é€»è¾‘å³å¯ï¼š text input { udp { port =\u003e 10523 type =\u003e \"gateway\" } } filter { # code more ... } output { # code more ... } ","date":"2021-11-04","objectID":"/posts/elastic/logstash/:4:0","series":null,"tags":["es","logstash"],"title":"Logstash","uri":"/posts/elastic/logstash/#é…ç½®ç®¡é“"},{"categories":["æŠ€æœ¯"],"content":" ä¸¤ä¸ªç®¡é“ç›¸è¿æˆ‘ä»¬å¸Œæœ›æ•°æ®å…ˆç»è¿‡ main ç®¡é“ï¼Œå†ç»è¿‡ dp ç®¡é“ï¼Œå¯ä»¥åšå¦‚ä¸‹æ“ä½œï¼š åœ¨ main ç®¡é“ é…ç½®æ–‡ä»¶çš„ output ä¸­å°†æ•°æ®å‘é€è‡³ä¸€ä¸ªç®¡é“è™šæ‹Ÿåœ°å€ï¼Œä¸‹ä¾‹ä¸º dp_router text output { pipeline { send_to =\u003e dp_router } } åœ¨ dp ç®¡é“ é…ç½®æ–‡ä»¶çš„ input ä¸­ä»è™šæ‹Ÿåœ°å€æ¥æ”¶æ•°æ®, ç„¶åå³å¯å¤„ç†æ•°æ®ï¼š text input { pipeline { address =\u003e dp_router } } pipeline to pipeline çš„å¸¸ç”¨æ¨¡å¼ åˆ†å‘ (ä¸€å¯¹å¤š) æœ‰å¤šç§ç±»å‹çš„æ•°æ®é€šè¿‡å•ä¸ªè¾“å…¥ä¼ å…¥ï¼Œä¸”æ¯ç§æ•°æ®éƒ½æœ‰è‡ªå·±å¤æ‚çš„å¤„ç†è§„åˆ™é›†çš„æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åˆ†å‘å™¨æ¨¡å¼ã€‚ text input { beats { port =\u003e 5044 } } output { if [type] == apache { pipeline { send_to =\u003e weblogs } } else if [type] == system { pipeline { send_to =\u003e syslog } } else { pipeline { send_to =\u003e fallback } } } éš”ç¦» å¦‚æœé…ç½®äº†å¤šä¸ªè¾“å‡ºï¼Œä»»æ„ä¸€ä¸ªè¾“å‡ºæœåŠ¡downäº†ï¼Œå°†é˜»å¡å…¶ä»–è¾“å‡ºï¼Œä½¿ç”¨è¾“å‡ºéš”ç¦»å™¨æ¨¡å¼å’ŒæŒä¹…é˜Ÿåˆ—ï¼Œå³ä½¿ä¸€ä¸ªè¾“å‡ºå‡ºç°æ•…éšœï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»§ç»­å‘é€åˆ° Elasticsearchã€‚ text # config/pipelines.yml - pipeline.id: intake config.string: | input { beats { port =\u003e 5044 } } output { pipeline { send_to =\u003e [es, http] } } - pipeline.id: buffered-es queue.type: persisted config.string: | input { pipeline { address =\u003e es } } output { elasticsearch { } } - pipeline.id: buffered-http queue.type: persisted config.string: | input { pipeline { address =\u003e http } } output { http { } } fork æˆ‘ä»¬åœ¨è‡ªå·±çš„ç³»ç»Ÿä¸­æ”¶é›†å®Œæ•´çš„ç´¢å¼•ä¿¡æ¯ï¼Œä½†åŒæ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦å°†æ•°æ®å‘é€ç»™åˆä½œä¼™ä¼´ï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œé¢å¤–å¤„ç†ï¼ˆä¾‹å¦‚ï¼šåˆ é™¤æ•æ„Ÿä¿¡æ¯ç­‰ï¼‰ text # config/pipelines.yml - pipeline.id: intake queue.type: persisted config.string: | input { beats { port =\u003e 5044 } } output { pipeline { send_to =\u003e [\"internal-es\", \"partner-s3\"] } } - pipeline.id: buffered-es queue.type: persisted config.string: | input { pipeline { address =\u003e \"internal-es\" } } # Index the full event output { elasticsearch { } } - pipeline.id: partner queue.type: persisted config.string: | input { pipeline { address =\u003e \"partner-s3\" } } filter { # Remove the sensitive data mutate { remove_field =\u003e 'sensitive-data' } } output { s3 { } } # Output to partner's bucket æ”¶é›† (å¤šå¯¹ä¸€) è®¸å¤šç®¡é“æµå…¥å•ä¸ªç®¡é“ï¼Œåœ¨å…¶ä¸­å…±äº«è¾“å‡ºå’Œå¤„ç†ã€‚ text # config/pipelines.yml - pipeline.id: beats config.string: | input { beats { port =\u003e 5044 } } output { pipeline { send_to =\u003e [commonOut] } } - pipeline.id: kafka config.string: | input { kafka { ... } } output { pipeline { send_to =\u003e [commonOut] } } - pipeline.id: partner # This common pipeline enforces the same logic whether data comes from Kafka or Beats config.string: | input { pipeline { address =\u003e commonOut } } filter { # Always remove sensitive data from all input sources mutate { remove_field =\u003e 'sensitive-data' } } output { elasticsearch { } } ","date":"2021-11-04","objectID":"/posts/elastic/logstash/:4:1","series":null,"tags":["es","logstash"],"title":"Logstash","uri":"/posts/elastic/logstash/#ä¸¤ä¸ªç®¡é“ç›¸è¿"},{"categories":["æŠ€æœ¯"],"content":" ä¸¤ä¸ªç®¡é“ç›¸è¿æˆ‘ä»¬å¸Œæœ›æ•°æ®å…ˆç»è¿‡ main ç®¡é“ï¼Œå†ç»è¿‡ dp ç®¡é“ï¼Œå¯ä»¥åšå¦‚ä¸‹æ“ä½œï¼š åœ¨ main ç®¡é“ é…ç½®æ–‡ä»¶çš„ output ä¸­å°†æ•°æ®å‘é€è‡³ä¸€ä¸ªç®¡é“è™šæ‹Ÿåœ°å€ï¼Œä¸‹ä¾‹ä¸º dp_router text output { pipeline { send_to =\u003e dp_router } } åœ¨ dp ç®¡é“ é…ç½®æ–‡ä»¶çš„ input ä¸­ä»è™šæ‹Ÿåœ°å€æ¥æ”¶æ•°æ®, ç„¶åå³å¯å¤„ç†æ•°æ®ï¼š text input { pipeline { address =\u003e dp_router } } pipeline to pipeline çš„å¸¸ç”¨æ¨¡å¼ åˆ†å‘ (ä¸€å¯¹å¤š) æœ‰å¤šç§ç±»å‹çš„æ•°æ®é€šè¿‡å•ä¸ªè¾“å…¥ä¼ å…¥ï¼Œä¸”æ¯ç§æ•°æ®éƒ½æœ‰è‡ªå·±å¤æ‚çš„å¤„ç†è§„åˆ™é›†çš„æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åˆ†å‘å™¨æ¨¡å¼ã€‚ text input { beats { port =\u003e 5044 } } output { if [type] == apache { pipeline { send_to =\u003e weblogs } } else if [type] == system { pipeline { send_to =\u003e syslog } } else { pipeline { send_to =\u003e fallback } } } éš”ç¦» å¦‚æœé…ç½®äº†å¤šä¸ªè¾“å‡ºï¼Œä»»æ„ä¸€ä¸ªè¾“å‡ºæœåŠ¡downäº†ï¼Œå°†é˜»å¡å…¶ä»–è¾“å‡ºï¼Œä½¿ç”¨è¾“å‡ºéš”ç¦»å™¨æ¨¡å¼å’ŒæŒä¹…é˜Ÿåˆ—ï¼Œå³ä½¿ä¸€ä¸ªè¾“å‡ºå‡ºç°æ•…éšœï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»§ç»­å‘é€åˆ° Elasticsearchã€‚ text # config/pipelines.yml - pipeline.id: intake config.string: | input { beats { port =\u003e 5044 } } output { pipeline { send_to =\u003e [es, http] } } - pipeline.id: buffered-es queue.type: persisted config.string: | input { pipeline { address =\u003e es } } output { elasticsearch { } } - pipeline.id: buffered-http queue.type: persisted config.string: | input { pipeline { address =\u003e http } } output { http { } } fork æˆ‘ä»¬åœ¨è‡ªå·±çš„ç³»ç»Ÿä¸­æ”¶é›†å®Œæ•´çš„ç´¢å¼•ä¿¡æ¯ï¼Œä½†åŒæ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦å°†æ•°æ®å‘é€ç»™åˆä½œä¼™ä¼´ï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œé¢å¤–å¤„ç†ï¼ˆä¾‹å¦‚ï¼šåˆ é™¤æ•æ„Ÿä¿¡æ¯ç­‰ï¼‰ text # config/pipelines.yml - pipeline.id: intake queue.type: persisted config.string: | input { beats { port =\u003e 5044 } } output { pipeline { send_to =\u003e [\"internal-es\", \"partner-s3\"] } } - pipeline.id: buffered-es queue.type: persisted config.string: | input { pipeline { address =\u003e \"internal-es\" } } # Index the full event output { elasticsearch { } } - pipeline.id: partner queue.type: persisted config.string: | input { pipeline { address =\u003e \"partner-s3\" } } filter { # Remove the sensitive data mutate { remove_field =\u003e 'sensitive-data' } } output { s3 { } } # Output to partner's bucket æ”¶é›† (å¤šå¯¹ä¸€) è®¸å¤šç®¡é“æµå…¥å•ä¸ªç®¡é“ï¼Œåœ¨å…¶ä¸­å…±äº«è¾“å‡ºå’Œå¤„ç†ã€‚ text # config/pipelines.yml - pipeline.id: beats config.string: | input { beats { port =\u003e 5044 } } output { pipeline { send_to =\u003e [commonOut] } } - pipeline.id: kafka config.string: | input { kafka { ... } } output { pipeline { send_to =\u003e [commonOut] } } - pipeline.id: partner # This common pipeline enforces the same logic whether data comes from Kafka or Beats config.string: | input { pipeline { address =\u003e commonOut } } filter { # Always remove sensitive data from all input sources mutate { remove_field =\u003e 'sensitive-data' } } output { elasticsearch { } } ","date":"2021-11-04","objectID":"/posts/elastic/logstash/:4:1","series":null,"tags":["es","logstash"],"title":"Logstash","uri":"/posts/elastic/logstash/#pipeline-to-pipeline-çš„å¸¸ç”¨æ¨¡å¼"},{"categories":["æŠ€æœ¯"],"content":" RESTful æ¥å£ GETï¼ˆSELECTï¼‰ï¼šä»æœåŠ¡å™¨å–å‡ºèµ„æºï¼ˆä¸€é¡¹æˆ–å¤šé¡¹ï¼‰ã€‚ POSTï¼ˆCREATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æºã€‚ PUTï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜åçš„å®Œæ•´èµ„æºï¼‰ã€‚ PATCHï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜çš„å±æ€§ï¼‰ã€‚ DELETEï¼ˆDELETEï¼‰ï¼šä»æœåŠ¡å™¨åˆ é™¤èµ„æºã€‚ ä»¥ä¸‹é€šè¿‡ kibanan æ“ä½œã€‚ ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:1:0","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#restful-æ¥å£"},{"categories":["æŠ€æœ¯"],"content":" åŸºæœ¬ curd æ“ä½œ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:2:0","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#åŸºæœ¬-curd-æ“ä½œ"},{"categories":["æŠ€æœ¯"],"content":" æ–°å¢ text # post vdong/_doc/\u003cid\u003e ,ä¸å†™idä¼šè‡ªåŠ¨ç”Ÿæˆéšæœºçš„ _id POST vdong/_doc { \"name\": \"vodng\", \"age\": 23, \"sex\":\"ç”·\" } GET vdong/_doc/t1pqInwB9bbxQEztANxo ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:2:1","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#æ–°å¢"},{"categories":["æŠ€æœ¯"],"content":" æŸ¥çœ‹ text GET vdong/_doc/t1pqInwB9bbxQEztANxo // æŸ¥çœ‹ id ä¸º 1 çš„æ–‡æ¡£æ˜¯å¦å­˜åœ¨ HEAD vdong/_doc/1 // æŸ¥çœ‹ç´¢å¼•æ˜¯å¦å­˜åœ¨ HEAD vdong // è·å– vdong ç´¢å¼•æ–‡æ¡£ä¸ªæ•° GET vdong/_count ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:2:2","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#æŸ¥çœ‹"},{"categories":["æŠ€æœ¯"],"content":" ä¿®æ”¹ text // éœ€è¦å®Œæ•´èµ„æºä¿¡æ¯ PUT vdong/_doc/12 { \"name\": \"æ ‹\", \"age\": 23, \"sex\":\"ç”·\" } // ä¸éœ€è¦å®Œæ•´èµ„æº POST vdong/_update/12 { \"doc\": { \"name\": \"ss\" } } å®½æ¾çš„ä¿®æ”¹ text // id 1002 çš„å¦‚æœä¸å­˜åœ¨ï¼Œä¸ä¼šæŠ¥é”™, ä¼šæ–°å¢ä¸€ä¸ªæ–‡æ¡£ POST vdong/_update/1002 { \"doc\": { \"name\": \"ss\" }, \"doc_as_upsert\": true } æŸ¥è¯¢å¹¶ä¿®æ”¹ text // æŸ¥è¯¢å¹¶ä¿®æ”¹ POST vdong/_update_by_query { \"query\":{ \"match\": { \"name\": \"ccc\" } }, \"script\":{ \"source\": \"ctx._source.age=params.age;ctx._source.sex=params.sex\", \"lang\": \"painless\", \"params\": { \"age\":77, \"sex\":\"å¥³\" } } } // å¤„ç†ä¸­æ–‡å­—æ®µ POST vdong_cn/_update_by_query { \"query\":{ \"match\": { \"å§“å\": \"ss\" } }, \"script\":{ \"source\": \"ctx._source[\\\"å¹´çºª\\\"]=params[\\\"å¹´çºª\\\"]\", \"lang\": \"painless\", \"params\": { \"å¹´çºª\":6 } } } // ctx['_op'] æ¥åˆ é™¤æ–‡æ¡£ POST vdong_cn/_update_by_query { \"query\":{ \"match\": { \"å§“å\": \"ss\" } }, \"script\":{ \"source\": \"\"\" if(ctx._source[\"å¹´çºª\"]\u003c34){ ctx.op = 'delete' } \"\"\" } } ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:2:3","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#ä¿®æ”¹"},{"categories":["æŠ€æœ¯"],"content":" ä¿®æ”¹ text // éœ€è¦å®Œæ•´èµ„æºä¿¡æ¯ PUT vdong/_doc/12 { \"name\": \"æ ‹\", \"age\": 23, \"sex\":\"ç”·\" } // ä¸éœ€è¦å®Œæ•´èµ„æº POST vdong/_update/12 { \"doc\": { \"name\": \"ss\" } } å®½æ¾çš„ä¿®æ”¹ text // id 1002 çš„å¦‚æœä¸å­˜åœ¨ï¼Œä¸ä¼šæŠ¥é”™, ä¼šæ–°å¢ä¸€ä¸ªæ–‡æ¡£ POST vdong/_update/1002 { \"doc\": { \"name\": \"ss\" }, \"doc_as_upsert\": true } æŸ¥è¯¢å¹¶ä¿®æ”¹ text // æŸ¥è¯¢å¹¶ä¿®æ”¹ POST vdong/_update_by_query { \"query\":{ \"match\": { \"name\": \"ccc\" } }, \"script\":{ \"source\": \"ctx._source.age=params.age;ctx._source.sex=params.sex\", \"lang\": \"painless\", \"params\": { \"age\":77, \"sex\":\"å¥³\" } } } // å¤„ç†ä¸­æ–‡å­—æ®µ POST vdong_cn/_update_by_query { \"query\":{ \"match\": { \"å§“å\": \"ss\" } }, \"script\":{ \"source\": \"ctx._source[\\\"å¹´çºª\\\"]=params[\\\"å¹´çºª\\\"]\", \"lang\": \"painless\", \"params\": { \"å¹´çºª\":6 } } } // ctx['_op'] æ¥åˆ é™¤æ–‡æ¡£ POST vdong_cn/_update_by_query { \"query\":{ \"match\": { \"å§“å\": \"ss\" } }, \"script\":{ \"source\": \"\"\" if(ctx._source[\"å¹´çºª\"]\u003c34){ ctx.op = 'delete' } \"\"\" } } ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:2:3","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#å®½æ¾çš„ä¿®æ”¹"},{"categories":["æŠ€æœ¯"],"content":" ä¿®æ”¹ text // éœ€è¦å®Œæ•´èµ„æºä¿¡æ¯ PUT vdong/_doc/12 { \"name\": \"æ ‹\", \"age\": 23, \"sex\":\"ç”·\" } // ä¸éœ€è¦å®Œæ•´èµ„æº POST vdong/_update/12 { \"doc\": { \"name\": \"ss\" } } å®½æ¾çš„ä¿®æ”¹ text // id 1002 çš„å¦‚æœä¸å­˜åœ¨ï¼Œä¸ä¼šæŠ¥é”™, ä¼šæ–°å¢ä¸€ä¸ªæ–‡æ¡£ POST vdong/_update/1002 { \"doc\": { \"name\": \"ss\" }, \"doc_as_upsert\": true } æŸ¥è¯¢å¹¶ä¿®æ”¹ text // æŸ¥è¯¢å¹¶ä¿®æ”¹ POST vdong/_update_by_query { \"query\":{ \"match\": { \"name\": \"ccc\" } }, \"script\":{ \"source\": \"ctx._source.age=params.age;ctx._source.sex=params.sex\", \"lang\": \"painless\", \"params\": { \"age\":77, \"sex\":\"å¥³\" } } } // å¤„ç†ä¸­æ–‡å­—æ®µ POST vdong_cn/_update_by_query { \"query\":{ \"match\": { \"å§“å\": \"ss\" } }, \"script\":{ \"source\": \"ctx._source[\\\"å¹´çºª\\\"]=params[\\\"å¹´çºª\\\"]\", \"lang\": \"painless\", \"params\": { \"å¹´çºª\":6 } } } // ctx['_op'] æ¥åˆ é™¤æ–‡æ¡£ POST vdong_cn/_update_by_query { \"query\":{ \"match\": { \"å§“å\": \"ss\" } }, \"script\":{ \"source\": \"\"\" if(ctx._source[\"å¹´çºª\"]\u003c34){ ctx.op = 'delete' } \"\"\" } } ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:2:3","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#æŸ¥è¯¢å¹¶ä¿®æ”¹"},{"categories":["æŠ€æœ¯"],"content":" åˆ é™¤ text // åˆ é™¤æ–‡æ¡£ DELETE vdong/_doc/1002 // åˆ é™¤ç´¢å¼• DELETE vdong // æ ¹æ®æœç´¢åˆ é™¤ POST vdong/_delete_by_query { \"query\": { \"term\": { \"realname\": { \"value\": \"dong\" } } } } ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:2:4","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#åˆ é™¤"},{"categories":["æŠ€æœ¯"],"content":" æ‰¹é‡æ“ä½œ text // åˆ›å»ºç´¢å¼• index æ€»ä¼šæˆåŠŸï¼Œå¦‚æœ _id å·²ç»å­˜åœ¨ï¼Œåˆ™æ›´æ–°æ•°æ® POST _bulk { \"index\" : { \"_index\" : \"vdong\", \"_id\" : \"1\" } } { \"name\" : \"å°æ˜\", \"sex\" : \"ç”·\", \"age\" : \"18\" } { \"index\" : { \"_index\" : \"vdong\", \"_id\" : \"2\" } } { \"name\" : \"å°çº¢\", \"sex\" : \"å¥³\", \"age\" : \"20\" } // åˆ›å»ºç´¢å¼• create ï¼Œå¦‚æœ _id å­˜åœ¨ï¼Œè¯¥æ¡ä¸ä¼šæˆåŠŸ POST _bulk { \"create\" : { \"_index\" : \"vdong\", \"_id\" : \"2\" } } { \"name\" : \"å°æ˜\", \"sex\" : \"ç”·\", \"age\" : \"18\" } { \"create\" : { \"_index\" : \"vdong\", \"_id\" : \"20\" } } { \"name\" : \"å°çº¢\", \"sex\" : \"å¥³\", \"age\" : \"20\" } // åˆ é™¤ { \"delete\" : { \"_index\" : \"vdong\", \"_id\" : \"2\" } } // æ›´æ–° { \"update\" : {\"_id\" : \"1\", \"_index\" : \"vdong\"} } { \"doc\" : {\"field2\" : \"value2\"} } æ‰¹é‡ç›¸å…³æ–‡æ¡£ ","date":"2021-11-04","objectID":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/:2:5","series":null,"tags":["es"],"title":"Es ç´¢å¼•ç›¸å…³","uri":"/posts/elastic/es%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3/#æ‰¹é‡æ“ä½œ"},{"categories":["æŠ€æœ¯"],"content":" é›†ç¾¤ï¼ˆclusterï¼‰ç”±ä¸€ä¸ªåç§°æ ‡è¯†ï¼ˆ elisticsearch.yml ä¸­ cluster.name: â€œdocker-clusterâ€ ï¼‰ï¼Œç”±ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ç»„æˆã€‚ bash # æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ GET _cluster/state ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/:1:0","series":null,"tags":["es"],"title":"Es åŸºæœ¬æ¦‚å¿µ","uri":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#é›†ç¾¤cluster"},{"categories":["æŠ€æœ¯"],"content":" èŠ‚ç‚¹ ï¼ˆnodeï¼‰é»˜è®¤æƒ…å†µä¸‹ï¼Œç¾¤é›†ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å¤„ç† HTTP å’Œ Transport æµé‡ã€‚ Transport å±‚ä¸“é—¨ç”¨äºèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ã€‚ HTTP å±‚ç”± REST å®¢æˆ·ç«¯ä½¿ç”¨ã€‚ æ‰€æœ‰èŠ‚ç‚¹éƒ½çŸ¥é“é›†ç¾¤ä¸­çš„æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥å°†å®¢æˆ·ç«¯è¯·æ±‚è½¬å‘åˆ°é€‚å½“çš„èŠ‚ç‚¹ã€‚ æ ¹æ®ä½œç”¨åˆ†ç±»ï¼š master-eligible nodeï¼šä¸»èŠ‚ç‚¹ï¼Œç®¡ç†é›†ç¾¤ï¼Œå»ä¸­å¿ƒåŒ–ï¼Œé¿å…å•ç‚¹æ•…éšœï¼Œè‡ªåŠ¨é€‰ä¸¾ data node ï¼š æ•°æ®èŠ‚ç‚¹ï¼Œä¿å­˜å’Œæ“ä½œæ•°æ®ï¼Œå¦‚CRUDã€æœç´¢å’Œèšåˆ ingest node ï¼šæ•°æ®æ¥å…¥èŠ‚ç‚¹ã€‚ è§’è‰²ä¸º ingestã€‚ remote-eligible node ï¼šè¿œç¨‹åˆæ ¼èŠ‚ç‚¹ã€‚è§’è‰²ä¸º remote_cluster_client ï¼Œå¯ä»¥å……å½“è¿œç¨‹å®¢æˆ·ç«¯ã€‚ Machine learning node ï¼š æœºå™¨å­¦ä¹ èŠ‚ç‚¹ã€‚ transform node ï¼šè½¬æ¢èŠ‚ç‚¹ã€‚ Coordnating node åè°ƒèŠ‚ç‚¹ æœç´¢è¯·æ±‚æˆ–æ‰¹é‡ç´¢å¼•è¯·æ±‚ç­‰è¯·æ±‚å¯èƒ½æ¶‰åŠä¿å­˜åœ¨ä¸åŒæ•°æ®èŠ‚ç‚¹ä¸Šçš„æ•°æ®ã€‚ ä¾‹å¦‚ï¼Œæœç´¢è¯·æ±‚åœ¨ä¸¤ä¸ªé˜¶æ®µä¸­æ‰§è¡Œï¼Œè¿™ä¸¤ä¸ªé˜¶æ®µç”±æ¥æ”¶å®¢æˆ·è¯·æ±‚çš„èŠ‚ç‚¹ï¼ˆå³åè°ƒèŠ‚ç‚¹ï¼‰åè°ƒã€‚ åœ¨åˆ†æ•£é˜¶æ®µï¼Œåè°ƒèŠ‚ç‚¹å°†è¯·æ±‚è½¬å‘åˆ°ä¿å­˜æ•°æ®çš„æ•°æ®èŠ‚ç‚¹ã€‚ æ¯ä¸ªæ•°æ®èŠ‚ç‚¹åœ¨æœ¬åœ°æ‰§è¡Œè¯¥è¯·æ±‚ï¼Œå¹¶å°†å…¶ç»“æœè¿”å›åˆ°åè°ƒèŠ‚ç‚¹ã€‚ åœ¨æ”¶é›†é˜¶æ®µï¼Œåè°ƒèŠ‚ç‚¹å°†æ¯ä¸ªæ•°æ®èŠ‚ç‚¹çš„ç»“æœç¼©å‡ä¸ºå•ä¸ªå…¨å±€ç»“æœé›†ã€‚ æ¯ä¸ªèŠ‚ç‚¹éƒ½éšå¼åœ°æ˜¯ä¸€ä¸ªåè°ƒèŠ‚ç‚¹ã€‚ è¿™æ„å‘³ç€é€šè¿‡ node.roles å…·æœ‰æ˜ç¡®çš„ç©ºè§’è‰²åˆ—è¡¨çš„èŠ‚ç‚¹å°†ä»…å……å½“åè°ƒèŠ‚ç‚¹ï¼Œæ— æ³•ç¦ç”¨ã€‚ ç»“æœï¼Œè¿™æ ·çš„èŠ‚ç‚¹éœ€è¦å…·æœ‰è¶³å¤Ÿçš„å†…å­˜å’Œ CPU æ‰èƒ½å¤„ç†æ”¶é›†é˜¶æ®µã€‚åè°ƒèŠ‚ç‚¹çš„å®šä¹‰ä¸ºï¼š node.roles: [] è§’è‰²ï¼š master data data_content data_hot data_warm data_cold data_frozen ingest ml remote_cluster_client transform ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/:2:0","series":null,"tags":["es"],"title":"Es åŸºæœ¬æ¦‚å¿µ","uri":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#èŠ‚ç‚¹-node"},{"categories":["æŠ€æœ¯"],"content":" ç´¢å¼•ï¼ˆindexï¼‰å¯¹åº”å…³ç³»å‹æ•°æ®åº“é‡Œçš„ databse æ¦‚å¿µï¼ˆä½†ä¸å®Œå…¨ç›¸åŒï¼‰ã€‚ä¸€ä¸ªé›†ç¾¤ï¼Œå¯ä»¥æœ‰å¤šä¸ªç´¢å¼•ã€‚æ˜¯ä¸€ä¸ªé€»è¾‘åç§°ã€‚ ç´¢å¼•æ˜¯æ–‡æ¡£ï¼ˆå¯¹åº”å…³ç³»æ•°æ®åº“çš„ record ï¼‰çš„é›†åˆã€‚ ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/:3:0","series":null,"tags":["es"],"title":"Es åŸºæœ¬æ¦‚å¿µ","uri":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#ç´¢å¼•index"},{"categories":["æŠ€æœ¯"],"content":" åˆ†ç‰‡ ï¼ˆshardï¼‰åˆ†å¸ƒå¼çš„æœç´¢å¼•æ“ï¼Œç´¢å¼•é€šå¸¸è¢«æ‹†åˆ†ä¸ºå¤šä»½ï¼Œè¿™ä»½å°±å«åˆ†ç‰‡ï¼ˆshardï¼‰ï¼Œåˆ†å¸ƒåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚es è‡ªåŠ¨ç®¡ç†å’Œå¹³è¡¡è¿™äº›åˆ†ç‰‡ã€‚ å› æ­¤ä¸€ä¸ªç´¢å¼•å¯ä»¥å­˜å‚¨ï¼Œè¶…è¿‡å•èŠ‚ç‚¹ç¡¬ä»¶é™åˆ¶çš„æ•°æ®ã€‚ ä¼˜ç‚¹ï¼š æ–¹ä¾¿æ°´å¹³æ‹“å±• å¤šèŠ‚ç‚¹å¹¶è¡Œæ“ä½œï¼ˆæ½œåœ¨åœ°ï¼‰ï¼Œæé«˜åå åˆ†ç‰‡çš„ç±»å‹ï¼š primary shard ï¼šæ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ª primary shard ã€‚ ç´¢å¼•æ–‡æ¡£æ—¶ï¼Œå®ƒé¦–å…ˆåœ¨ Primary shard ä¸Šç¼–åˆ¶ç´¢å¼•ï¼Œç„¶ååœ¨æ­¤åˆ†ç‰‡çš„æ‰€æœ‰å‰¯æœ¬ä¸Šï¼ˆreplicaï¼‰ç¼–åˆ¶ç´¢å¼•ã€‚ç´¢å¼•å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªä¸»åˆ†ç‰‡ã€‚ æ­¤æ•°å­—ç¡®å®šç´¢å¼•ç›¸å¯¹äºç´¢å¼•æ•°æ®å¤§å°çš„å¯ä¼¸ç¼©æ€§ã€‚ åˆ›å»ºç´¢å¼•åï¼Œæ— æ³•æ›´æ”¹ç´¢å¼•ä¸­çš„ä¸»åˆ†ç‰‡æ•°ã€‚ replica shardï¼šæ¯ä¸ªä¸»åˆ†ç‰‡å¯ä»¥å…·æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå‰¯æœ¬åˆ†ç‰‡ã€‚æ•°é‡å¯ä»¥åŠ¨æ€ä¿®æ”¹ï¼ˆé»˜è®¤1ä¸ªï¼‰ã€‚æœ‰ä¸¤ä¸ªç›®çš„ï¼š 1.å¢åŠ æ•…éšœè½¬ç§»ï¼šå¦‚æœä¸»è¦æ•…éšœï¼Œå¯ä»¥å°†å‰¯æœ¬åˆ†ç‰‡æå‡ä¸ºä¸»åˆ†ç‰‡ã€‚å³ä½¿ä½ å¤±å»äº†ä¸€ä¸ª nodeï¼Œé‚£ä¹ˆå‰¯æœ¬åˆ†ç‰‡è¿˜æ˜¯æ‹¥æœ‰æ‰€æœ‰çš„æ•°æ®ã€‚ 2.æé«˜æ€§èƒ½ï¼šget å’Œ search è¯·æ±‚å¯ä»¥ç”±ä¸» shard æˆ–å‰¯æœ¬ shard å¤„ç†ã€‚ ä¸»åˆ†ç‰‡ å’Œ å‰¯æœ¬åˆ†ç‰‡ çš„åŒºåˆ«ï¼šåªæœ‰ä¸»åˆ†ç‰‡å¯ä»¥æ¥å—ç´¢å¼•è¯·æ±‚ã€‚å‰¯æœ¬åˆ†ç‰‡å’Œä¸»åˆ†ç‰‡éƒ½å¯ä»¥æä¾›æŸ¥è¯¢è¯·æ±‚ã€‚ shard å¥åº·çŠ¶æ€ çº¢è‰²ï¼šé›†ç¾¤ä¸­è‡³å°‘æœ‰ä¸€ä¸ªä¸»åˆ†ç‰‡æœªåˆ†é… é»„è‰²ï¼šå·²åˆ†é…æ‰€æœ‰ä¸»åˆ†ç‰‡ï¼Œä½†è‡³å°‘ä¸€ä¸ªå‰¯åˆ†ç‰‡æœªåˆ†é… ç»¿è‰²ï¼šåˆ†é…æ‰€æœ‰åˆ†ç‰‡ ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/:4:0","series":null,"tags":["es"],"title":"Es åŸºæœ¬æ¦‚å¿µ","uri":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#åˆ†ç‰‡-shard"},{"categories":["æŠ€æœ¯"],"content":" æ–‡æ¡£ ï¼ˆdocumentï¼‰es ç´¢å¼•æˆ–æœç´¢çš„æœ€å°æ•°æ®å•å…ƒæ˜¯æ–‡æ¡£ï¼Œå¯¹åº”å…³ç³»æ•°æ®åº“çš„ recordã€‚ ç‰¹ç‚¹ï¼š ç‹¬ç«‹ å¯ä»¥åµŒå¥—çš„ schemaless ä¸éœ€è¦é¢„å…ˆå®šä¹‰æ¨¡å¼ï¼Œå¯ä»¥åŠ¨æ€è°ƒæ•´ æ–‡æ¡£é€šå¸¸æ˜¯æ•°æ®çš„ JSON è¡¨ç¤ºå½¢å¼ã€‚JSON over HTTP æ˜¯ä¸ Elasticsearch è¿›è¡Œé€šä¿¡çš„æœ€å¹¿æ³›ä½¿ç”¨çš„æ–¹å¼ã€‚ ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/:5:0","series":null,"tags":["es"],"title":"Es åŸºæœ¬æ¦‚å¿µ","uri":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#æ–‡æ¡£-document"},{"categories":["æŠ€æœ¯"],"content":" ç›¸äº’å…³ç³»æ¯ä¸ª Index ç”±ä¸€ä¸ªæˆ–è®¸å¤šçš„ documents ç»„æˆï¼Œå¹¶ä¸”è¿™äº› documents å¯ä»¥åˆ†å¸ƒäºä¸åŒçš„ shard ä¹‹ä¸­ï¼Œä¸€ä¸ª node é‡Œå¯ä»¥æ”¾é›¶ä¸ªæˆ–å¤šä¸ª shard ï¼ˆå–å†³ä¸ node çš„ç§ç±»ï¼‰ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ç»„æˆé›†ç¾¤ã€‚ å¦‚ï¼šä¸€ä¸ª index æœ‰5ä¸ª shard åŠ1ä¸ª replica è¿™äº› shard åˆ†å¸ƒäºä¸åŒçš„ç‰©ç†æœºå™¨ä¸Š ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/:6:0","series":null,"tags":["es"],"title":"Es åŸºæœ¬æ¦‚å¿µ","uri":"/posts/elastic/es%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/#ç›¸äº’å…³ç³»"},{"categories":["æŠ€æœ¯"],"content":" Elasticsearch text # å®‰è£… docker pull elasticsearch:7.14.0 shell docker network create elk_net # æŒ‡å®šå†…å­˜è¿è¡Œ docker run -d -e ES_JAVA_OPTS=\"-Xms256m -Xmx256m\" -h elasticsearch --name elasticsearch --net elk_net -p 9200:9200 -p 9300:9300 -e \"discovery.type=single-node\" elasticsearch:7.14.0 # è®¿é—® http://localhost:9200 or http://host-ip:9200 head æ’ä»¶ï¼ˆå¯é€‰ï¼‰ shell docker pull mobz/elasticsearch-head:5 docker run -d -p 9100:9100 docker.io/mobz/elasticsearch-head:5 # è®¿é—® http://localhost:9100 or http://host-ip:9100 # è·¨åŸŸé—®é¢˜ # è¿›å…¥ elasticsearch å®¹å™¨å†…éƒ¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ ./config/elasticsearch.yml # å¢åŠ  http.cors.enabled: true http.cors.allow-origin: \"*\" # é‡å¯ docker restart elasticsearch # ElasticSearch-head æŸ¥è¯¢æŠ¥ 406é”™è¯¯ç  # {\"error\":\"Content-Type header [application/x-www-form-urlencoded] is not supported\",\"status\":406} # _site ç›®å½•ä¸‹ sed -i '6886c contentType: \"application/json;charset=UTF-8\",' vendor.js sed -i '7573c var inspectData = s.contentType === \"application/json;charset=UTF-8\" \u0026\u0026' vendor.js ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%AE%89%E8%A3%85/:1:0","series":null,"tags":["es"],"title":"Es å®‰è£…","uri":"/posts/elastic/es%E5%AE%89%E8%A3%85/#elasticsearch"},{"categories":["æŠ€æœ¯"],"content":" Kibana shell docker pull kibana:7.14.0 docker run -d -h kibana --name kibana --net elk_net -p 5601:5601 kibana:7.14.0 # è®¿é—® http://localhost:5601 or http://host-ip:5601 ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%AE%89%E8%A3%85/:2:0","series":null,"tags":["es"],"title":"Es å®‰è£…","uri":"/posts/elastic/es%E5%AE%89%E8%A3%85/#kibana"},{"categories":["æŠ€æœ¯"],"content":" Logstash shell docker pull logstash:7.14.0 1. ç¼–è¾‘æ–‡ä»¶ logstash.conf æ–‡ä»¶ docker run -h logstash --name logstash --network elk_net -it --rm -v /usr/local/logstash/config/pipeline:/usr/local/logstash/config/pipeline logstash:7.14.0 -f /usr/local/logstash/config/pipeline/logstash.conf ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%AE%89%E8%A3%85/:3:0","series":null,"tags":["es"],"title":"Es å®‰è£…","uri":"/posts/elastic/es%E5%AE%89%E8%A3%85/#logstash"},{"categories":["æŠ€æœ¯"],"content":" ç½‘ç»œé—®é¢˜ shell docker network create elk_net // å°†è¿è¡Œä¸­çš„ å®¹å™¨ containerName è¿æ¥åˆ°ç½‘ç»œ networkName ä¸­ docker network connect networkName containerName // å°†å®¹å™¨ç§»é™¤ç½‘ç»œ docker network disconnect networkName containerName ","date":"2021-11-04","objectID":"/posts/elastic/es%E5%AE%89%E8%A3%85/:4:0","series":null,"tags":["es"],"title":"Es å®‰è£…","uri":"/posts/elastic/es%E5%AE%89%E8%A3%85/#ç½‘ç»œé—®é¢˜"},{"categories":["æŠ€æœ¯"],"content":"è¿™æ˜¯ä¸€ä¸ªé™æ€ bolg ç½‘ç«™ã€‚ è®°å½•æ­å»ºè¿‡ç¨‹ã€‚ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:0:0","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#"},{"categories":["æŠ€æœ¯"],"content":" æŠ€æœ¯æ ˆï¼šhugo , git , github ã€‚ hugoï¼šæ˜¯ä¸€ä¸ªå¼€æºçš„ web æ¡†æ¶ï¼Œä½¿ç”¨ go è¯­è¨€å¼€å‘ï¼Œå¯ä»¥å°† markdown æ–‡ä»¶å¿«é€Ÿçš„å»ºæ„æˆé™æ€ç½‘ç«™ã€‚ git: ä½œä¸ºç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚ github: ä½œä¸ºä»£ç ä»“åº“ï¼Œä½¿ç”¨ github çš„ actions åšè‡ªåŠ¨çš„å»ºæ„å’Œéƒ¨ç½²ï¼Œåˆ†åˆ«éƒ¨ç½²åœ¨ github pages å’Œ é˜¿é‡Œäº‘ä¸Šã€‚ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:1:0","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#æŠ€æœ¯æ ˆ"},{"categories":["æŠ€æœ¯"],"content":" æ­å»ºè¿‡ç¨‹","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:0","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#æ­å»ºè¿‡ç¨‹"},{"categories":["æŠ€æœ¯"],"content":" æœ¬åœ°å®‰è£… hugoä¸åŒæ“ä½œç³»ç»Ÿå®‰è£…å·®å¼‚ç•¥æœ‰ä¸åŒï¼Œå…·ä½“è¯·å‚è€ƒï¼šå®‰è£…æ–‡æ¡£ æœ¬äººä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£… shell # Hugo extended æ”¯æŒ Sass/SCSS scoop install hugo-extended ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:1","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#æœ¬åœ°å®‰è£…-hugo"},{"categories":["æŠ€æœ¯"],"content":" åˆ›å»ºç«™ç‚¹ï¼Œæµ‹è¯•å‚è€ƒå¿«é€Ÿå¼€å§‹åˆ›å»ºç«™ç‚¹ï¼Œå¹¶æµ‹è¯•ã€‚ æœ¬äººé€‰æ‹©çš„ä¸»é¢˜æ˜¯ Doitï¼Œå¹¶ä½œç®€å•é…ç½®ï¼ˆä¿®æ”¹ config.toml æ–‡ä»¶ï¼‰å³å¯ï¼Œå…ˆè·‘èµ·æ¥ã€‚ è‡³æ­¤åšå®¢å·²ç»æ­å»ºå®Œæˆï¼Œä½ å¯ä»¥æ·»åŠ å†…å®¹ï¼Œåœ¨æœ¬åœ°æµè§ˆåšå®¢ï¼Œç”Ÿæˆé™æ€æ–‡ä»¶ï¼ˆé»˜è®¤ public/ ç›®å½•ä¸‹ï¼‰ï¼Œä¸Šä¼  public/ ç›®å½•çš„ä¸‹çš„å†…å®¹åˆ°æœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªé™æ€çš„blog ç½‘ç«™ã€‚ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:2","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#åˆ›å»ºç«™ç‚¹æµ‹è¯•"},{"categories":["æŠ€æœ¯"],"content":" æ·»åŠ ç‰ˆæœ¬ç®¡ç†æœ¬åœ°ï¼šè¿›å…¥ç«™ç‚¹ç›®å½•ï¼Œgit init å°†è¯¥ç›®å½•å˜æˆä¸€ä¸ªä»“åº“ï¼›ä¹‹åæ­£å¸¸åšç‰ˆæœ¬ç®¡ç†ã€‚ githubçº¿ä¸Š: åˆ›å»ºä»“åº“ï¼Œæ¨èå‘½å USER_NAME.github.io ï¼ˆä¹‹åè®¾ç½® github pages æ—¶ï¼Œç½‘å€æ²¡æœ‰è·¯å¾„ï¼‰ã€‚æ¨é€ç«™ç‚¹ä»“åº“åˆ° github ã€‚ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:3","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#æ·»åŠ ç‰ˆæœ¬ç®¡ç†"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®æŒç»­é›†æˆä½¿ç”¨ github actions ï¼Œè‡ªåŠ¨å»ºæ„ hugo å¹¶å‘å¸ƒåˆ° github pages å’Œ ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ã€‚ github actions ï¼š æ˜¯ä¸€äº›æŒç»­é›†æˆçš„æ“ä½œï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºï¼šæŠ“å–ä»£ç ã€è¿è¡Œæµ‹è¯•ã€ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œå‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰ã€‚github å…è®¸å¼€å‘è€…ï¼ŒæŠŠæ¯ä¸ªæ“ä½œåç¨‹ç‹¬ç«‹çš„è„šæœ¬ï¼Œå­˜æ”¾åˆ°ä»£ç ä»“åº“ï¼Œä¾›ä»–äººè°ƒç”¨ã€‚å®˜æ–¹å¸‚åœºï¼Œawesome-actions github pages ï¼šæ˜¯ä¸€ä¸ªé™æ€ç½‘å€æ‰˜ç®¡æœåŠ¡ï¼Œgithub å…è®¸ä½ ä¸ºä½ çš„æ¯ä¸€ä¸ªä»“åº“ï¼Œåˆ¶ä½œä¸€ä¸ªé™æ€ç½‘é¡µã€‚ é…ç½® github actionsä½ å¯ä»¥åœ¨ actions é€‰é¡¹å¡å†…æ–°å»º workflow ï¼›ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰‹åŠ¨åˆ›å»º.github\\workflows\\XXX.yml ç„¶åæäº¤ï¼Œ action çš„é…ç½®æ–‡ä»¶å«åš workflow æ–‡ä»¶ã€‚ ä»¥ .yml ä¸ºåç¼€ã€‚ yml name: Hugo build and deploy on: # å½“ main åˆ†æ”¯è¢« push æ—¶ï¼Œæ­¤ workflow è¢«è§¦å‘ push: branches: [ main ] # å…è®¸ä½ åœ¨ actions é€‰é¡¹å¡ä¸­æ‰‹åŠ¨æ‰§è¡Œæ­¤ workflow workflow_dispatch: jobs: Hugo-build-deploy: runs-on: ubuntu-latest # åŸºäº ubuntu æœ€æ–°ç‰ˆ concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - uses: actions/checkout@v2 # æ£€å‡ºä»£ç  with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo # å®‰è£… hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' extended: true - name: Build # å»ºæ„ hugo run: hugo --minify - name: Deploy Github Pages # éƒ¨ç½²åˆ° github pages uses: peaceiris/actions-gh-pages@v3 if: ${{ github.ref == 'refs/heads/main' }} with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public - name: ğŸ“‚ Sync files # ftp åŒæ­¥åˆ° ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼Œå¦‚æ— ç¬¬ä¸‰æ–¹æœåŠ¡å™¨å¯ä»¥çœç•¥æ­¤æ­¥ã€‚ uses: SamKirkland/FTP-Deploy-Action@4.1.0 with: server: ${{ secrets.FTP_URL }} username: ${{ secrets.FTP_USER }} password: ${{ secrets.FTP_PWD }} local-dir: ./public/ ps: æ•æ„Ÿå­—æ®µéœ€è¦åœ¨ Settings/Secrets é€‰é¡¹å¡ä¸­è®¾ç½®ï¼Œå¦‚ä¸Šçš„ ${{ secrets.FTP_PWD }} ç­‰ã€‚ psï¼šå¯ä»¥åœ¨ actions é€‰é¡¹å¡ä¸­æŸ¥çœ‹ action è¿è¡ŒçŠ¶æ€ï¼Œå¹¶è°ƒè¯•é”™è¯¯ã€‚ é…ç½® github pageså½“ä»¥ä¸Š actions æˆåŠŸè¿è¡Œä¸€æ¬¡åï¼ˆpush æ“ä½œåï¼Œæˆ– æ‰‹åŠ¨è¿è¡Œï¼‰ï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ª gh-pages åˆ†æ”¯ã€‚ è¿›å…¥é€‰é¡¹å¡ Settings/Pages é…ç½® source ï¼Œbranch ä¸º gh-pagesï¼Œç›®å½•ä¸º /(root)ã€‚ æˆåŠŸåä¼šæç¤ºä½  Your site is published at https://sunvdong.github.io/ ï¼ˆå¦‚æœä½ çš„ä»“åº“åæ˜¯ ä½ çš„ç”¨æˆ·å.github.ioï¼Œåˆ™ç½‘å€åæ²¡æœ‰è·¯å¾„ï¼‰ã€‚ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:4","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#é…ç½®æŒç»­é›†æˆ"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®æŒç»­é›†æˆä½¿ç”¨ github actions ï¼Œè‡ªåŠ¨å»ºæ„ hugo å¹¶å‘å¸ƒåˆ° github pages å’Œ ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ã€‚ github actions ï¼š æ˜¯ä¸€äº›æŒç»­é›†æˆçš„æ“ä½œï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºï¼šæŠ“å–ä»£ç ã€è¿è¡Œæµ‹è¯•ã€ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œå‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰ã€‚github å…è®¸å¼€å‘è€…ï¼ŒæŠŠæ¯ä¸ªæ“ä½œåç¨‹ç‹¬ç«‹çš„è„šæœ¬ï¼Œå­˜æ”¾åˆ°ä»£ç ä»“åº“ï¼Œä¾›ä»–äººè°ƒç”¨ã€‚å®˜æ–¹å¸‚åœºï¼Œawesome-actions github pages ï¼šæ˜¯ä¸€ä¸ªé™æ€ç½‘å€æ‰˜ç®¡æœåŠ¡ï¼Œgithub å…è®¸ä½ ä¸ºä½ çš„æ¯ä¸€ä¸ªä»“åº“ï¼Œåˆ¶ä½œä¸€ä¸ªé™æ€ç½‘é¡µã€‚ é…ç½® github actionsä½ å¯ä»¥åœ¨ actions é€‰é¡¹å¡å†…æ–°å»º workflow ï¼›ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰‹åŠ¨åˆ›å»º.github\\workflows\\XXX.yml ç„¶åæäº¤ï¼Œ action çš„é…ç½®æ–‡ä»¶å«åš workflow æ–‡ä»¶ã€‚ ä»¥ .yml ä¸ºåç¼€ã€‚ yml name: Hugo build and deploy on: # å½“ main åˆ†æ”¯è¢« push æ—¶ï¼Œæ­¤ workflow è¢«è§¦å‘ push: branches: [ main ] # å…è®¸ä½ åœ¨ actions é€‰é¡¹å¡ä¸­æ‰‹åŠ¨æ‰§è¡Œæ­¤ workflow workflow_dispatch: jobs: Hugo-build-deploy: runs-on: ubuntu-latest # åŸºäº ubuntu æœ€æ–°ç‰ˆ concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - uses: actions/checkout@v2 # æ£€å‡ºä»£ç  with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo # å®‰è£… hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' extended: true - name: Build # å»ºæ„ hugo run: hugo --minify - name: Deploy Github Pages # éƒ¨ç½²åˆ° github pages uses: peaceiris/actions-gh-pages@v3 if: ${{ github.ref == 'refs/heads/main' }} with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public - name: ğŸ“‚ Sync files # ftp åŒæ­¥åˆ° ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼Œå¦‚æ— ç¬¬ä¸‰æ–¹æœåŠ¡å™¨å¯ä»¥çœç•¥æ­¤æ­¥ã€‚ uses: SamKirkland/FTP-Deploy-Action@4.1.0 with: server: ${{ secrets.FTP_URL }} username: ${{ secrets.FTP_USER }} password: ${{ secrets.FTP_PWD }} local-dir: ./public/ ps: æ•æ„Ÿå­—æ®µéœ€è¦åœ¨ Settings/Secrets é€‰é¡¹å¡ä¸­è®¾ç½®ï¼Œå¦‚ä¸Šçš„ ${{ secrets.FTP_PWD }} ç­‰ã€‚ psï¼šå¯ä»¥åœ¨ actions é€‰é¡¹å¡ä¸­æŸ¥çœ‹ action è¿è¡ŒçŠ¶æ€ï¼Œå¹¶è°ƒè¯•é”™è¯¯ã€‚ é…ç½® github pageså½“ä»¥ä¸Š actions æˆåŠŸè¿è¡Œä¸€æ¬¡åï¼ˆpush æ“ä½œåï¼Œæˆ– æ‰‹åŠ¨è¿è¡Œï¼‰ï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ª gh-pages åˆ†æ”¯ã€‚ è¿›å…¥é€‰é¡¹å¡ Settings/Pages é…ç½® source ï¼Œbranch ä¸º gh-pagesï¼Œç›®å½•ä¸º /(root)ã€‚ æˆåŠŸåä¼šæç¤ºä½  Your site is published at https://sunvdong.github.io/ ï¼ˆå¦‚æœä½ çš„ä»“åº“åæ˜¯ ä½ çš„ç”¨æˆ·å.github.ioï¼Œåˆ™ç½‘å€åæ²¡æœ‰è·¯å¾„ï¼‰ã€‚ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:4","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#é…ç½®-github-actions"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®æŒç»­é›†æˆä½¿ç”¨ github actions ï¼Œè‡ªåŠ¨å»ºæ„ hugo å¹¶å‘å¸ƒåˆ° github pages å’Œ ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ã€‚ github actions ï¼š æ˜¯ä¸€äº›æŒç»­é›†æˆçš„æ“ä½œï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºï¼šæŠ“å–ä»£ç ã€è¿è¡Œæµ‹è¯•ã€ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œå‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰ã€‚github å…è®¸å¼€å‘è€…ï¼ŒæŠŠæ¯ä¸ªæ“ä½œåç¨‹ç‹¬ç«‹çš„è„šæœ¬ï¼Œå­˜æ”¾åˆ°ä»£ç ä»“åº“ï¼Œä¾›ä»–äººè°ƒç”¨ã€‚å®˜æ–¹å¸‚åœºï¼Œawesome-actions github pages ï¼šæ˜¯ä¸€ä¸ªé™æ€ç½‘å€æ‰˜ç®¡æœåŠ¡ï¼Œgithub å…è®¸ä½ ä¸ºä½ çš„æ¯ä¸€ä¸ªä»“åº“ï¼Œåˆ¶ä½œä¸€ä¸ªé™æ€ç½‘é¡µã€‚ é…ç½® github actionsä½ å¯ä»¥åœ¨ actions é€‰é¡¹å¡å†…æ–°å»º workflow ï¼›ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰‹åŠ¨åˆ›å»º.github\\workflows\\XXX.yml ç„¶åæäº¤ï¼Œ action çš„é…ç½®æ–‡ä»¶å«åš workflow æ–‡ä»¶ã€‚ ä»¥ .yml ä¸ºåç¼€ã€‚ yml name: Hugo build and deploy on: # å½“ main åˆ†æ”¯è¢« push æ—¶ï¼Œæ­¤ workflow è¢«è§¦å‘ push: branches: [ main ] # å…è®¸ä½ åœ¨ actions é€‰é¡¹å¡ä¸­æ‰‹åŠ¨æ‰§è¡Œæ­¤ workflow workflow_dispatch: jobs: Hugo-build-deploy: runs-on: ubuntu-latest # åŸºäº ubuntu æœ€æ–°ç‰ˆ concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - uses: actions/checkout@v2 # æ£€å‡ºä»£ç  with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo # å®‰è£… hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: 'latest' extended: true - name: Build # å»ºæ„ hugo run: hugo --minify - name: Deploy Github Pages # éƒ¨ç½²åˆ° github pages uses: peaceiris/actions-gh-pages@v3 if: ${{ github.ref == 'refs/heads/main' }} with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public - name: ğŸ“‚ Sync files # ftp åŒæ­¥åˆ° ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼Œå¦‚æ— ç¬¬ä¸‰æ–¹æœåŠ¡å™¨å¯ä»¥çœç•¥æ­¤æ­¥ã€‚ uses: SamKirkland/FTP-Deploy-Action@4.1.0 with: server: ${{ secrets.FTP_URL }} username: ${{ secrets.FTP_USER }} password: ${{ secrets.FTP_PWD }} local-dir: ./public/ ps: æ•æ„Ÿå­—æ®µéœ€è¦åœ¨ Settings/Secrets é€‰é¡¹å¡ä¸­è®¾ç½®ï¼Œå¦‚ä¸Šçš„ ${{ secrets.FTP_PWD }} ç­‰ã€‚ psï¼šå¯ä»¥åœ¨ actions é€‰é¡¹å¡ä¸­æŸ¥çœ‹ action è¿è¡ŒçŠ¶æ€ï¼Œå¹¶è°ƒè¯•é”™è¯¯ã€‚ é…ç½® github pageså½“ä»¥ä¸Š actions æˆåŠŸè¿è¡Œä¸€æ¬¡åï¼ˆpush æ“ä½œåï¼Œæˆ– æ‰‹åŠ¨è¿è¡Œï¼‰ï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ª gh-pages åˆ†æ”¯ã€‚ è¿›å…¥é€‰é¡¹å¡ Settings/Pages é…ç½® source ï¼Œbranch ä¸º gh-pagesï¼Œç›®å½•ä¸º /(root)ã€‚ æˆåŠŸåä¼šæç¤ºä½  Your site is published at https://sunvdong.github.io/ ï¼ˆå¦‚æœä½ çš„ä»“åº“åæ˜¯ ä½ çš„ç”¨æˆ·å.github.ioï¼Œåˆ™ç½‘å€åæ²¡æœ‰è·¯å¾„ï¼‰ã€‚ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:4","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#é…ç½®-github-pages"},{"categories":["æŠ€æœ¯"],"content":" å¢åŠ è¯„è®ºåŠŸèƒ½å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šWaline å¿«é€Ÿä¸Šæ‰‹ LeanCloud è®¾ç½® (å‡†å¤‡æ•°æ®åº“) æ³¨å†Œ LeanCloud å›½é™…ç‰ˆ ï¼ˆç”¨äºå­˜å‚¨æ•°æ®ï¼‰ åœ¨ LeanCloud åˆ›å»ºåº”ç”¨ è®°å½• id ï¼Œå¯†é’¥ç­‰ã€‚ Vercel éƒ¨ç½² (æœåŠ¡ç«¯) github ç™»å½• Vercel æ–°å»ºé¡¹ç›®ï¼Œåˆå§‹åŒ–ä»“åº“ è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ­¥éª¤1ï¼ˆç¬¬3å°æ­¥ï¼‰ä¸­è®°å½•çš„idç­‰ é‡æ–°éƒ¨ç½²ï¼Œä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ é…ç½®åŸŸåï¼ˆé»˜è®¤åŸŸå xxxxxx.vercel.app å›½å†…ä¸èƒ½è®¿é—®ï¼‰ åŸŸåæœåŠ¡å™¨å•†å¤„æ·»åŠ æ–°çš„ CNAME è§£æè®°å½• ä¿®æ”¹ hugo é…ç½®æ–‡ä»¶ config.tomlï¼š toml [params.page] # è¯„è®ºç³»ç»Ÿè®¾ç½® [params.page.comment] enable = true # Waline è¯„è®ºç³»ç»Ÿè®¾ç½® (https://waline.js.org) [params.page.comment.waline] enable = true serverURL = \"https://comment.vdong.xyz/\" # æ­¤å¤„ä¸ºä¸Šè¾¹é…ç½®çš„åŸŸå pageview = true comment = true emoji = ['https://i.whaoot.com/emojis/qq/'] # emoji ä½¿ç”¨äº†ä¸ªäººä¸ƒç‰›äº‘å­˜å‚¨ # emoji = ['https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo'] # meta = ['nick', 'mail', 'link'] # requiredMeta = [] # login = 'enable' # wordLimit = 0 # pageSize = 10 # imageUploader = false # highlighter = false # texRenderer = false ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:5","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#å¢åŠ è¯„è®ºåŠŸèƒ½"},{"categories":["æŠ€æœ¯"],"content":" å¢åŠ æœç´¢åŠŸèƒ½DoIt æ”¯æŒå¤šç§æœç´¢æ–¹å¼ï¼Œè¿™é‡Œä½¿ç”¨ Fuse.js ,åªéœ€è¦ä¿®æ”¹ hugo çš„é…ç½®æ–‡æ•™ config.toml å³å¯ï¼š toml [params.search] enable = true # æœç´¢å¼•æ“çš„ç±»å‹ (\"lunr\", \"algolia\", \"fuse\") type = \"fuse\" # æ–‡ç« å†…å®¹æœ€é•¿ç´¢å¼•é•¿åº¦ contentLength = 4000 # æœç´¢æ¡†çš„å ä½æç¤ºè¯­ placeholder = \"æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹...\" # DoIt æ–°å¢ | 0.2.1 æœ€å¤§ç»“æœæ•°ç›® maxResultLength = 10 # DoIt æ–°å¢ | 0.2.3 ç»“æœå†…å®¹ç‰‡æ®µé•¿åº¦ snippetLength = 50 # DoIt æ–°å¢ | 0.2.1 æœç´¢ç»“æœä¸­é«˜äº®éƒ¨åˆ†çš„ HTML æ ‡ç­¾ highlightTag = \"em\" # DoIt æ–°å¢ | 0.2.4 æ˜¯å¦åœ¨æœç´¢ç´¢å¼•ä¸­ä½¿ç”¨åŸºäº baseURL çš„ç»å¯¹è·¯å¾„ absoluteURL = false [params.search.fuse] # DoIt æ–°å¢ | 0.2.12 https://fusejs.io/api/options.html isCaseSensitive = false minMatchCharLength = 2 findAllMatches = false location = 0 threshold = 0.3 distance = 100 ignoreLocation = false useExtendedSearch = false ignoreFieldNorm = false ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:6","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#å¢åŠ æœç´¢åŠŸèƒ½"},{"categories":["æŠ€æœ¯"],"content":" é…ç½®æ–‡ç« ä¿®æ”¹æ—¶é—´hugo é…ç½®æ–‡ä»¶ä¸­æ–°å¢å¦‚ä¸‹ï¼š :git ä»æ–‡ä»¶çš„ git æäº¤è®°å½•è·å– lastmod ä»æ–‡ä»¶ä¸­çš„ lastmod å­—æ®µè·å– :fileModTime ä»æ–‡ä»¶ä¿®æ”¹æ—¶é—´è·å– toml enableGitInfo = true # è·å–æ¯ä¸ªæ–‡ä»¶çš„gitä¿®æ”¹ä¿¡æ¯ [frontmatter] lastmod = [':git', 'lastmod', ':fileModTime', ':default'] ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:2:7","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#é…ç½®æ–‡ç« ä¿®æ”¹æ—¶é—´"},{"categories":["æŠ€æœ¯"],"content":" é—®é¢˜è®°å½•","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:3:0","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#é—®é¢˜è®°å½•"},{"categories":["æŠ€æœ¯"],"content":" å­æ¨¡å—æœªåˆå§‹åŒ–æˆ–æ›´æ–°å¯¼è‡´ï¼Œhugo server -D ä¸èƒ½é¢„è§ˆç½‘ç«™é—®é¢˜åŸå› æ˜¯ï¼šå­æ¨¡å—æœªåˆå§‹åŒ–ï¼Œå¯¼è‡´æ¨¡æ¿ç¼ºå¤±ï¼Œä»è€Œä¸èƒ½ç”Ÿæˆ html æ–‡ä»¶ã€‚ shell # åˆå§‹åŒ–å­æ¨¡å— git submodule init # æ›´æ–°å­æ¨¡å— git submodule update --remote # æŸ¥çœ‹æ›´æ–°çŠ¶æ€ git submodule status ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:3:1","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#å­æ¨¡å—æœªåˆå§‹åŒ–æˆ–æ›´æ–°å¯¼è‡´hugo-server--d-ä¸èƒ½é¢„è§ˆç½‘ç«™é—®é¢˜"},{"categories":["æŠ€æœ¯"],"content":" ä½¿ç”¨ Typora ç¼–è¾‘ md æ–‡ä»¶æ—¶çš„å›¾ç‰‡è®¾ç½®é—®é¢˜ æ–‡ä»¶ -\u003e åå¥½è®¾ç½® -\u003e å›¾åƒ -\u003e æ’å…¥å›¾ç‰‡æ—¶.. é€‰æ‹© å¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„ï¼Œå¹¶æŒ‡å®šè·¯å¾„ä¸ºï¼Œhugo\\static\\imgs\\${filename}\\ ã€‚ æ ¼å¼( Format ) -\u003e å›¾åƒ( Image ) -\u003e è®¾ç½®å›¾ç‰‡æ ¹ç›®å½•( Use Image Root Path )ï¼Œç›®å½•é€‰æ‹©åˆ° imgs çš„ä¸Šä¸€çº§ static ç›®å½•ï¼Œè¿™æ—¶ Typora ä¼šå¢åŠ ä¸€ä¸ª Markdown æ–‡ä»¶é¡¶éƒ¨çš„å…ƒæ•°æ®ï¼ˆymlæ ¼å¼ï¼‰ typora-root-url: \"..\\\\..\\\\..\\\\static\"ï¼ˆæ¯ä¸ªæ–‡ä»¶éƒ½å¾—è®¾ç½®ï¼Œä¸æ¨èï¼‰ã€‚ ç›´æ¥ä¿®æ”¹ï¼Œarchetypes/default.md æ¨¡æ¿æ–‡ä»¶ï¼Œå¢åŠ å…ƒæ•°æ® ymlæ ¼å¼ï¼štypora-root-url: \"..\\\\..\\\\..\\\\static\" æˆ– tomlæ ¼å¼ï¼štypora-root-url = \"..\\\\..\\\\..\\\\static\"ï¼Œä¹‹ååœ¨æ–°å»º md æ–‡ä»¶æ—¶å°±è‡ªåŠ¨å¢åŠ äº†ã€‚ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:3:2","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#ä½¿ç”¨-typora-ç¼–è¾‘-md-æ–‡ä»¶æ—¶çš„å›¾ç‰‡è®¾ç½®é—®é¢˜"},{"categories":["æŠ€æœ¯"],"content":" æˆæœæºç ï¼šhttps://github.com/SunVdong/sunvdong.github.io åšå®¢åœ°å€: https://www.vdong.xyz or https://sunvdong.github.io ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:4:0","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#æˆæœ"},{"categories":["æŠ€æœ¯"],"content":" å‚è€ƒHugoå®˜ç½‘ GitHub Actions å…¥é—¨æ•™ç¨‹ ä½¿ç”¨ Hugo + Github æ­å»ºä¸ªäººåšå®¢ hugoä¸typoraå›¾ç‰‡è·¯å¾„ç»Ÿä¸€é—®é¢˜ ","date":"2021-11-03","objectID":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/:5:0","series":null,"tags":["hugo","æŠ˜è…¾"],"title":"åšå®¢æ­å»ºè®°å½•","uri":"/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/#å‚è€ƒ"},{"categories":["ç”Ÿæ´»"],"content":"Hello world! ","date":"2021-11-01","objectID":"/posts/hello-world/:0:0","series":null,"tags":["æ—¥å¸¸","æŠ˜è…¾"],"title":"Hello world","uri":"/posts/hello-world/#"},{"categories":null,"content":" ä½ æ²¡æœ‰è¿æ¥è‡³äº’è”ç½‘, åªæœ‰ç¼“å­˜çš„é¡µé¢å¯ç”¨. ","date":"0001-01-01","objectID":"/offline/:0:0","series":null,"tags":null,"title":"Offline","uri":"/offline/#"}]