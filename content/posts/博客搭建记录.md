---
title: "åšå®¢æ­å»ºè®°å½•"
date: 2021-11-03T15:46:20+08:00
draft: false
author: vdong
categories: 
- æŠ€æœ¯
tags:
- hugo
- æŠ˜è…¾
---

è¿™æ˜¯ä¸€ä¸ªé™æ€ bolg ç½‘ç«™ã€‚

è®°å½•æ­å»ºè¿‡ç¨‹ã€‚

## æŠ€æœ¯æ ˆï¼š 

hugo , git , github ã€‚

- hugoï¼šæ˜¯ä¸€ä¸ªå¼€æºçš„ web æ¡†æ¶ï¼Œä½¿ç”¨ go è¯­è¨€å¼€å‘ï¼Œå¯ä»¥å°† markdown æ–‡ä»¶å¿«é€Ÿçš„å»ºæ„æˆé™æ€ç½‘ç«™ã€‚

- git: ä½œä¸ºç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚

- github: ä½œä¸ºä»£ç ä»“åº“ï¼Œä½¿ç”¨ github çš„ actions åšè‡ªåŠ¨çš„å»ºæ„å’Œéƒ¨ç½²ï¼Œåˆ†åˆ«éƒ¨ç½²åœ¨ github pages å’Œ é˜¿é‡Œäº‘ä¸Šã€‚

## æ­å»ºè¿‡ç¨‹

### æœ¬åœ°å®‰è£… hugo

ä¸åŒæ“ä½œç³»ç»Ÿå®‰è£…å·®å¼‚ç•¥æœ‰ä¸åŒï¼Œå…·ä½“è¯·å‚è€ƒï¼š[å®‰è£…æ–‡æ¡£](https://gohugo.io/getting-started/installing/)

æœ¬äººä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…

```shell
# Hugo extended æ”¯æŒ Sass/SCSS
scoop install hugo-extended
```

### åˆ›å»ºç«™ç‚¹ï¼Œæµ‹è¯•

å‚è€ƒ[å¿«é€Ÿå¼€å§‹](https://gohugo.io/getting-started/quick-start/)åˆ›å»ºç«™ç‚¹ï¼Œå¹¶æµ‹è¯•ã€‚

æœ¬äººé€‰æ‹©çš„ä¸»é¢˜æ˜¯ [Doit](https://github.com/HEIGE-PCloud/DoIt)ï¼Œå¹¶ä½œç®€å•é…ç½®ï¼ˆä¿®æ”¹ `config.toml` æ–‡ä»¶ï¼‰å³å¯ï¼Œå…ˆè·‘èµ·æ¥ã€‚

è‡³æ­¤åšå®¢å·²ç»æ­å»ºå®Œæˆï¼Œä½ å¯ä»¥æ·»åŠ å†…å®¹ï¼Œåœ¨æœ¬åœ°æµè§ˆåšå®¢ï¼Œç”Ÿæˆé™æ€æ–‡ä»¶ï¼ˆé»˜è®¤ `public/` ç›®å½•ä¸‹ï¼‰ï¼Œä¸Šä¼  `public/` ç›®å½•çš„ä¸‹çš„å†…å®¹åˆ°æœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªé™æ€çš„`bolg` ç½‘ç«™ã€‚

### æ·»åŠ ç‰ˆæœ¬ç®¡ç†

æœ¬åœ°ï¼šè¿›å…¥ç«™ç‚¹ç›®å½•ï¼Œ`git init` å°†è¯¥ç›®å½•å˜æˆä¸€ä¸ªä»“åº“ï¼›ä¹‹åæ­£å¸¸åšç‰ˆæœ¬ç®¡ç†ã€‚

githubçº¿ä¸Š: åˆ›å»ºä»“åº“ï¼Œæ¨èå‘½å `USER_NAME.github.io` ï¼ˆä¹‹åè®¾ç½® github pages æ—¶ï¼Œç½‘å€æ²¡æœ‰è·¯å¾„ï¼‰ã€‚æ¨é€ç«™ç‚¹ä»“åº“åˆ° github ã€‚

### é…ç½®æŒç»­é›†æˆ

ä½¿ç”¨ `github actions` ï¼Œè‡ªåŠ¨å»ºæ„ `hugo` å¹¶å‘å¸ƒåˆ° `github pages` å’Œ ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ã€‚

- github actions ï¼š æ˜¯ä¸€äº›æŒç»­é›†æˆçš„æ“ä½œï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºï¼šæŠ“å–ä»£ç ã€è¿è¡Œæµ‹è¯•ã€ç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œå‘å¸ƒåˆ°ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰ã€‚github å…è®¸å¼€å‘è€…ï¼ŒæŠŠæ¯ä¸ªæ“ä½œåç¨‹ç‹¬ç«‹çš„è„šæœ¬ï¼Œå­˜æ”¾åˆ°ä»£ç ä»“åº“ï¼Œä¾›ä»–äººè°ƒç”¨ã€‚[å®˜æ–¹å¸‚åœº](https://github.com/marketplace?category=&query=&type=actions&verification=)ï¼Œ[awesome-actions](https://github.com/sdras/awesome-actions)
- github pages ï¼šæ˜¯ä¸€ä¸ªé™æ€ç½‘å€æ‰˜ç®¡æœåŠ¡ï¼Œ`github` å…è®¸ä½ ä¸ºä½ çš„æ¯ä¸€ä¸ªä»“åº“ï¼Œåˆ¶ä½œä¸€ä¸ªé™æ€ç½‘é¡µã€‚

#### é…ç½® github actions

ä½ å¯ä»¥åœ¨ actions é€‰é¡¹å¡å†…æ–°å»º workflow ï¼›ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰‹åŠ¨åˆ›å»º`.github\workflows\XXX.yml` ç„¶åæäº¤ï¼Œ action çš„é…ç½®æ–‡ä»¶å«åš workflow æ–‡ä»¶ã€‚ ä»¥ `.yml` ä¸ºåç¼€ã€‚

```yml
name: Hugo build and deploy
on:
  # å½“ main åˆ†æ”¯è¢« push æ—¶ï¼Œæ­¤ workflow è¢«è§¦å‘
  push:
    branches: [ main ]

  # å…è®¸ä½ åœ¨ actions é€‰é¡¹å¡ä¸­æ‰‹åŠ¨æ‰§è¡Œæ­¤ workflow 
  workflow_dispatch:
jobs:
  Hugo-build-deploy:
    runs-on: ubuntu-latest # åŸºäº ubuntu æœ€æ–°ç‰ˆ
    concurrency:
      group: ${{ github.workflow }}-${{ github.ref }}
    steps:
      - uses: actions/checkout@v2 # æ£€å‡ºä»£ç 
        with:
          submodules: true  # Fetch Hugo themes (true OR recursive)
          fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod

      - name: Setup Hugo # å®‰è£… hugo 
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: 'latest'
          extended: true

      - name: Build # å»ºæ„ hugo
        run: hugo --minify
        
      - name: Deploy Github Pages # éƒ¨ç½²åˆ° github pages
        uses: peaceiris/actions-gh-pages@v3
        if: ${{ github.ref == 'refs/heads/main' }}
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
      - name: ğŸ“‚ Sync files # ftp åŒæ­¥åˆ° ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ï¼Œå¦‚æ— ç¬¬ä¸‰æ–¹æœåŠ¡å™¨å¯ä»¥çœç•¥æ­¤æ­¥ã€‚
        uses: SamKirkland/FTP-Deploy-Action@4.1.0
        with:
          server: ${{ secrets.FTP_URL }}
          username: ${{ secrets.FTP_USER }}
          password: ${{ secrets.FTP_PWD }}
          local-dir: ./public/
```

ps: æ•æ„Ÿå­—æ®µéœ€è¦åœ¨ `Settings/Secrets` é€‰é¡¹å¡ä¸­è®¾ç½®ï¼Œå¦‚ä¸Šçš„ `${{ secrets.FTP_PWD }}` ç­‰ã€‚

psï¼šå¯ä»¥åœ¨ actions é€‰é¡¹å¡ä¸­æŸ¥çœ‹ action è¿è¡ŒçŠ¶æ€ï¼Œå¹¶è°ƒè¯•é”™è¯¯ã€‚

#### é…ç½® github pages

å½“ä»¥ä¸Š actions æˆåŠŸè¿è¡Œä¸€æ¬¡åï¼ˆpush æ“ä½œåï¼Œæˆ– æ‰‹åŠ¨è¿è¡Œï¼‰ï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ª `gh-pages` åˆ†æ”¯ã€‚

è¿›å…¥é€‰é¡¹å¡ `Settings/Pages` é…ç½® `source` ï¼Œ`branch` ä¸º `gh-pages`ï¼Œç›®å½•ä¸º `/(root)`ã€‚

æˆåŠŸåä¼šæç¤ºä½  `Your site is published at https://sunvdong.github.io/`  ï¼ˆå¦‚æœä½ çš„ä»“åº“åæ˜¯ `ä½ çš„ç”¨æˆ·å.github.io`ï¼Œåˆ™ç½‘å€åæ²¡æœ‰è·¯å¾„ï¼‰ã€‚

## æˆæœ

æºç ï¼š[https://github.com/SunVdong/sunvdong.github.io](https://github.com/SunVdong/sunvdong.github.io)

åšå®¢åœ°å€: [https://www.vdong.xyz](https://www.vdong.xyz) or [https://sunvdong.github.io](https://sunvdong.github.io)

## å‚è€ƒ

[Hugoå®˜ç½‘](https://gohugo.io/)

[GitHub Actions å…¥é—¨æ•™ç¨‹](http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html)

[ä½¿ç”¨ Hugo + Github æ­å»ºä¸ªäººåšå®¢](https://zhuanlan.zhihu.com/p/105021100)



